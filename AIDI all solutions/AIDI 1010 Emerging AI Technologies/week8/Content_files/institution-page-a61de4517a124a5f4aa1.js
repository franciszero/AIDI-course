(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{"26Ar":function(e,t,i){"use strict";i.r(t);var a={};i.r(a),i.d(a,"getModuleResources",(function(){return H})),i.d(a,"getModule",(function(){return z})),i.d(a,"getSignedUrl",(function(){return K})),i.d(a,"getModuleVisibility",(function(){return W})),i.d(a,"getModules",(function(){return q})),i.d(a,"callCreateModuleAPI",(function(){return Z})),i.d(a,"callUpdateModuleAPI",(function(){return G})),i.d(a,"deleteModule",(function(){return J})),i.d(a,"addResource",(function(){return X})),i.d(a,"updateResource",(function(){return Q})),i.d(a,"deleteResource",(function(){return Y})),i.d(a,"getXSRFToken",(function(){return ee}));var n={};i.r(n),i.d(n,"getCustomPageRoute",(function(){return te})),i.d(n,"reorderModulesPost",(function(){return ie})),i.d(n,"canEditFetch",(function(){return ae})),i.d(n,"getCustomPages",(function(){return ne})),i.d(n,"getPages",(function(){return se})),i.d(n,"getPageVariant",(function(){return oe})),i.d(n,"getEffectivePageVariantId",(function(){return le})),i.d(n,"createPageVariant",(function(){return re})),i.d(n,"updatePages",(function(){return ce})),i.d(n,"deletePage",(function(){return de})),i.d(n,"ensurePageVariant",(function(){return ue})),i.d(n,"deletePageVariant",(function(){return pe}));var s=i("ERkP"),o=i.n(s),l=i("7nmT"),r=i.n(l),c=i("uDfI"),d=i("Uhei"),u=i("A4Z1"),p="1.0",m="2.0",h="3.0",g="entity.too.large",v={Error:"Error",FilePermissionUpdateError:"FilePermissionUpdateError",NotFoundError:"NotFoundError"};class E extends Error{constructor(e){super(e),this.name=g}}class b extends Error{constructor(e){super(e),this.name=v.FilePermissionUpdateError}}class I extends Error{constructor(e){super(e),this.name=v.NotFoundError}}const f="PATCH",y="POST",C="DELETE";function k(e=p){return{Accept:`application/json; version=${e}`,"X-Blackboard-XSRF":window.__initialContext.xsrf,"Content-Type":"application/json"}}function L(e){const t=/^[^/]*\/\/[^/]+/.exec(window.location.href);return(t&&t[0]||"")+e}function w(e,t=p){return{method:e,credentials:"same-origin",headers:new Headers(k(t))}}function _(e,t=null,i=!1,a=p){let n=t;return n||(n=w("GET",a)),i?fetch(e,n).then((e=>e.json())):fetch(e,n).then((e=>e.json().then((t=>e.ok?t.return_body:(function(e){const t=e.error;if(t){if(t.detail&&t.detail.name===v.FilePermissionUpdateError)throw new b(t.message);if(t.detail&&t.detail.name===v.NotFoundError)throw new I(t.message);if(t.detail&&t.detail.type===g)throw new E(t.message);throw new Error(t.message)}throw new Error("Unexpected Error")}(t),null)))))}const N=L("/institution/api"),M=L("/learn/api/v1");var T=i("fN3Q"),x="LINKS",S="CONTENT",O="HTML",P="LINK",A="IMAGE",R="CONTENT",D="HTML",$={LEFT:"LEFT",RIGHT:"RIGHT",NONE:"NONE"};const F=(e,t)=>{const i={available:!1,id:"",moduleId:"",sequence:0,type:"",details:{}};return t&&(i.id=Object(T.v1)(),i.moduleId=t),{...i,type:P,available:!0,sequence:2,details:{href:"https://www.blackboard.com",title:e,imageHref:""}}},B=[{href:"https://www.google.com",title:"Google"},{href:"https://www.bing.com",title:"Bing"},{href:"https://www.youtube.com",title:"YouTube"},{href:"https://www.facebook.com",title:"Facebook"},{href:"https://www.instagram.com",title:"Instagram"}],U=(e="")=>({type:R,available:!0,sequence:1,details:{bbml:e}}),V=(e="")=>({type:D,available:!0,sequence:1,details:{html:e}}),j=(e,t)=>{const i=((e,t)=>{const i=((e="",t)=>({available:!1,type:t,title:e,details:{imageOrientation:""},institutionRoleIds:[],id:"",sequence:0,resources:[]}))(t.moduleName,e);let a=[];switch(e){case x:{const e=F(t.defaultLinkTitle),n=B.map(((t,i)=>({...e,details:{...e.details,...t},sequence:i+2})));i.details.imageOrientation=$.LEFT,a=n;break}case S:a=[U("")];break;case O:a=[V("")];break;default:return{}}return{module:i,resources:a}})(e,t);i.module.id=Object(T.v1)();const a=i.resources.map((e=>({...e,id:Object(T.v1)(),moduleId:i.module.id})));return i.resources=a,i},H=e=>_(`${N}/module/${e.id}/resources`),z=e=>_(`${N}/module/${e}`),K=(e,t)=>_(`${N}/module/${e}/sign-url/${t}`),W=e=>_(`${N}/module/${e}/is-visible`,null,!1,m),q=e=>{let t=`${N}/custom-page/${e}/modules`;return e||(t=`${N}/module`),_(t,null,!1,m)},Z=(e,t,i)=>{const a={...w(y,h),body:JSON.stringify({module:e,resources:t,institutionRoleIds:i})};return _(`${N}/module`,a)},G=(e,t)=>{const i={...w(f,m),body:JSON.stringify({module:e})};return _(`${N}/module/${t}`,i)},J=e=>_(`${N}/module/${e}?force=true`,w(C)),X=e=>{const t={...w(y),body:JSON.stringify(e)};return _(`${N}/module-resource`,t)},Q=e=>{const t={...w(f),body:JSON.stringify(e)};return _(`${N}/module-resource/${e.id}`,t)},Y=e=>_(`${N}/module-resource/${e}`,w(C)),ee=()=>fetch(`${M}/utilities/xsrfToken`,w("GET")).then((e=>e.json())),te=(e="IP",t=null)=>{const i=`${N}/custom-page?type=${e}`;return t&&"default"!==t?`${i}&variant=${t}`:i},ie=(e,t)=>{const i={...w(y,m),body:JSON.stringify(t.map((e=>e.id)))};return _(`${N}/custom-page/${e}/reorder`,i)},ae=(e=p,t=null)=>_(`${N}/user/can-edit${t&&"default"!==t?`?variantId=${t}`:""}`,null,!1,e),ne=(e="IP",t=!0)=>{const i=((e="IP",t=!0)=>`${N}/custom-pages?type=${e}&available=${t}`)(e,t);return _(i)},se=(e="IP")=>_(te(e)),oe=(e="IP",t=null)=>_(te(e,t)).then((e=>e[0])),le=(e,t="IP")=>oe(t,e).then((t=>t.available?e:null),(()=>null)),re=(e,t,i,a)=>{const n={type:e,variantId:t,page:{variantName:i,available:a}};return _(te(e),{...w(y,m),body:JSON.stringify(n)})},ce=e=>{const t={...w(f,m),body:JSON.stringify(e)};return _(`${N}/custom-page/${e.page.id}`,t)},de=e=>{let t=null;"string"==typeof e?t=e:"id"in e&&(t=e.id);return _(`${N}/custom-page/${t}`,w(C,m))},ue=(e,t,i,a)=>t?oe(e,t).then((e=>((e,t,i)=>e.variantName===t&&e.available===i?Promise.resolve(e):ce({page:{id:e.id,variantName:t,available:i}}))(e,i,a)),(()=>re(e,t,i,a))):Promise.resolve(null),pe=(e,t)=>t?oe(e,t).then(de).catch((e=>{if(e instanceof I)return null;throw e})):Promise.resolve(null),me=(e,t)=>({type:e,...t}),he=e=>`${e}.ok`,ge=e=>`${e}.fail`;var ve="updatePages failure",Ee="getModuleVisibility failure";const be="role.start.xhr",Ie="role.received",fe=()=>e=>_(`${N}/institutionRoles`).then((t=>e((e=>({type:Ie,roles:e}))(t)))).catch((t=>e(me(ge("role.get.all"),{err:t})))),ye="page.start.xhr",Ce="page.received",ke="page.update",Le="page.fetch.preference",we=()=>({type:ye}),_e=e=>t=>ce(e).then((i=>t(me(he(ke),{data:i,page:e.page})))).catch((i=>(t(me(ge(ke),{err:i,page:e.page})),Promise.reject(ve)))),Ne=()=>e=>ae(m).then((t=>{t.canEdit&&(e({type:be}),e(fe())),e(me(he(Le),{data:t}))})).catch((t=>e(me(ge(Le),{err:t})))),Me="module.start.xhr",Te="module.link.add",xe="module.link.remove",Se="module.link.update",Oe="module.all.received",Pe="module.add",Ae="module.remove",Re="module.update",De="module.visible",$e="page.reorder.modules",Fe=(e={})=>({type:Me,props:e}),Be=e=>t=>{let i;return i=e&&"default"!==e?oe("IP",e).then((e=>e&&e.available?e:null),(e=>{if(e.name===v.NotFoundError)return null;throw e})).then((e=>e||oe("IP",null))):oe("IP",null),i.then((e=>{if(!e)throw new Error("no institution pages found!");return Promise.all([t((i=e,{type:Ce,page:i,receivedAt:Date.now()})),q(e.id).then((e=>{const t=e.map((e=>H(e).then((t=>(e.resources=t,e)))));return Promise.all(t)})).then((e=>t((e=>({type:Oe,modules:e,receivedAt:Date.now()}))(e))))]);var i})).catch((e=>t(me(ge("module.get.data"),{err:e}))))},Ue=({moduleId:e,module:t})=>i=>G(t,e).then((e=>{const t={...e,moduleId:e.module.id};i(me(he(Re),t))})).catch((a=>i(me(ge(Re),{err:a,moduleId:e,module:t})))),Ve=e=>t=>W(e).then((i=>t(me(he(De),{data:i,moduleId:e})))).catch((i=>(t(me(ge(De),{err:i,moduleId:e})),Promise.reject(Ee)))),je="global.error.clear",He="global.set.featureFlags",ze="session.set.image",Ke="session.set.module",We="session.clear.all",qe=e=>({type:ze,resource:e});var Ze=i("C+e0"),Ge=i("MC1S"),Je=i("0x+l"),Xe=i("np6O"),Qe=i("VQ4P");var Ye=e=>{const{currentPageIndex:t,currentViewerIndex:i,onSwitchPage:a,onSwitchMode:n,onClickSettingsButton:s=null,variantId:l="default",viewerRoles:r,variantOptions:c=null,analyticsId:d}=e,u=Object(Qe.a)(),p=u("ip.header.admin"),m=u("ip.header.allOthers"),h=u("ip.header.brandSelectLabel"),g=u("ip.header.edit");return o.a.createElement("header",{className:"header"},o.a.createElement("h1",{className:"subheader header__title js-base-page-skip-link-target",tabIndex:-1},u("ip.header.title")),(()=>{const e=c&&c.map(((e,t)=>({key:e.variantId||"default",text:e.variantName,action:()=>{a(e,t),n("edit",0,"admin")}})));if(!e||e.length<=1)return null;const i=e[t]&&e[t].text,s=`${g} ${i}`,l=o.a.createElement("div",{className:"header__brand-select-label"},h);return o.a.createElement("div",{className:"header__brand-container inline-label"},o.a.createElement(Ge.Dropdown,{ariaLabel:s,selectedKey:e[t]&&e[t].key,label:l,options:e,inlineLabel:!0,onChanged:e=>e.action&&e.action(),analyticsId:`${d}.pages`}))})(),(()=>{const e=(()=>{const e=r.map(((e,t)=>({key:e.roleKey,text:e.roleName,action:()=>n("preview",t+1,e.roleKey)})));return[{key:"admin",text:p,action:()=>n("edit",0,"admin")},...e,{key:"",text:m,action:()=>n("preview",e.length+1,"")}]})(),t=e[i]&&e[i].text,a=`${g} ${t}`,s=o.a.createElement("div",{className:"header__role-select-label"},g);return o.a.createElement("div",{className:"header__role-container inline-label"},o.a.createElement(Ge.Dropdown,{ariaLabel:a,selectedKey:e[i]&&e[i].key,label:s,options:e,inlineLabel:!0,onChanged:e=>e.action&&e.action(),analyticsId:`${d}.roles`}))})(),!!s&&o.a.createElement(Xe.AnalyticsIconButton,{className:"header__settings-button",onClick:()=>null==s?void 0:s(l||"default"),analyticsId:`${d}.brandSettings.button`,"aria-label":u("ip.header.brandSettingsTitle")},o.a.createElement(Je.Settings,null)))},et=i("myse");const tt=["https://","http://","ftp://","mailto:"];var it=e=>{for(let t=0;t<tt.length;t++)if(e.startsWith(tt[t]))return e;return"https://".concat(e)},at=i("ERsv"),nt=e=>[...[at.link(),at.image(),at.video()],...Object.keys(e).map((t=>at[t](e[t])))];function st(e,t){let i=e;return e&&e.indexOf("//")<0&&("/"!==e[0]&&(i=`/${e}`),i=t?t+i:window.location.origin+i),i}function ot(e){let t;if(e&&e.indexOf("//")>0){const i=new URL(e);t=window.location.origin+i.pathname}else t=window.location.origin+e;return t}const lt=e=>({isValid:!1,errorMessage:e}),rt=(e,t="")=>e.trim()?{isValid:!0,errorMessage:""}:lt(t),ct=(e,t="")=>e.trim().length>140?lt(t):{isValid:!0,errorMessage:""},dt=(e,t="",i="")=>{const a=rt(e,t);return a.isValid?ct(e,i):a},ut=(e,...t)=>Object.keys(e).reduce(((i,a)=>(-1===t.indexOf(a)&&(i[a]=e[a]),i)),{}),pt=e=>e.displayName||e.name||"Component",mt=e=>e?"string"==typeof e?e.trim():Object.keys(e).reduce(((t,i)=>("string"==typeof e[i]?t[i]=e[i].trim():Array.isArray(e[i])||"object"==typeof e[i]?t[i]=mt(e[i]):t[i]=e[i],t)),Array.isArray(e)?[]:{}):e,ht=e=>e&&e.details&&e.details.imageOrientation,gt=e=>{return(t=$,Object.keys(t).map((e=>t[e]))).includes(e);var t},vt=e=>{var t;const i=null!==(t=ht(e))&&void 0!==t?t:"";if(gt(i))switch(i){case $.NONE:return"NONE";case $.RIGHT:return"RIGHT";default:return"LEFT"}return"LEFT"};function Et(e,t){if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;const i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;const n=Object.prototype.hasOwnProperty.bind(t);for(let a=0;a<i.length;a++){const s=i[a];if(!n(s))return!1;if(e[s]!==t[s])return!1}return!0}const bt=(e,t)=>{for(let i=0;i<(e||[]).length;i++)if(!t.some((t=>t.roleKey===e[i])))return!1;return!0},It=(e,t)=>e.reduce(((e,i)=>{const a=(t||[]).find((e=>e.roleKey===i));return a&&e.push({key:a.roleKey,name:a.roleName}),e}),[]),ft=(e,t,i,a,n)=>{let s;switch((e||[]).length){case 0:s=i;break;case 1:s=((e,t)=>{const i=(t||[]).find((t=>t.roleKey===e));return i&&i.roleName||e})(e[0],t);break;default:s=a}return s};var yt=i("+Twb");var Ct=27,kt=13;class Lt extends o.a.Component{constructor(e){super(e),this.textInput=null,this.parentDiv=null,this.onFinishEdit=e=>{const{onInputEdit:t=(()=>{})}=this.props;if(this.stopBlur)return void(this.stopBlur=!1);const i=this.props.onValidateInput(this.state.curContent);Promise.resolve(this.props.onValueChange(this.props.id,this.state.curContent,this.props.attr)).catch((()=>{this.setState({curContent:this.props.content})})),i.isValid&&this.setState((e=>({isEditing:!1,lastContent:e.curContent})),(()=>{var i;t(this.state.isEditing),e&&(null===(i=this.parentDiv)||void 0===i||i.focus())}))},this.onCancelEdit=()=>{const{onInputEdit:e=(()=>{})}=this.props;this.setState((e=>({isEditing:!1,curContent:e.lastContent})),(()=>{var t;e(this.state.isEditing),null===(t=this.parentDiv)||void 0===t||t.focus()}))},this.onEnterEdit=()=>{const{onInputEdit:e=(()=>{})}=this.props;this.setState({isEditing:!0},(()=>{var t;null===(t=this.textInput)||void 0===t||t.focus(),e(this.state.isEditing)}))},this.onPressKey=e=>{e.keyCode===kt&&this.onFinishEdit(!0),e.keyCode===Ct&&this.onCancelEdit()},this.onChangeInput=e=>{this.setState({curContent:e})},this.onInputBlur=()=>{this.onFinishEdit(!1)},this.getClasses=e=>{const t="inline-edit-container";let i="";return this.props.isHeader&&(i=` ${t}--header${e}`),`${t}${e}${i}`},this.getErrorMessage=e=>{const t=this.props.onValidateInput(e);return t.isValid||t.errorMessage?Promise.resolve(t.errorMessage):new Promise((t=>{setTimeout((()=>this.getErrorMessage(e).then((e=>t(e)))),0)}))},this.stopBlur=!1;const{onValidateInput:t=(()=>({isValid:!0,errorMessage:""})),content:i}=e;this.state={isEditing:!t(i).isValid,curContent:i,lastContent:i}}UNSAFE_componentWillReceiveProps(e){e.content!==this.state.curContent&&this.onChangeInput(e.content)}render(){const{analyticsEventAugmentor:e,analyticsId:t}=this.props,i=`${this.props.buttonTitle}`,a=`${this.props.id}-${this.props.attr}`,n=`${t}.edit.inline.input`,s=`${t}.edit.inline.button`;return this.state.isEditing?o.a.createElement("div",{className:this.getClasses("")},o.a.createElement(Ge.TextField,{className:"inline-edit-text-field",ref:e=>{this.textInput=e},onBlur:this.onInputBlur,onKeyDown:this.onPressKey,onChanged:this.onChangeInput,value:this.state.curContent,placeholder:this.props.placeholder,onGetErrorMessage:this.getErrorMessage,deferredValidationTime:0,ariaLabel:i})):o.a.createElement("div",{className:this.getClasses(""),tabIndex:-1,ref:e=>{this.parentDiv=e}},o.a.createElement("span",{id:a,className:this.getClasses("__link"),onClick:e(et.AnalyticsEventTypes.CLICK_EVENT,this.onEnterEdit,n),"data-analytics-id":n,role:"presentation"},this.state.curContent?o.a.createElement("span",{className:this.getClasses("__text")},this.state.curContent):o.a.createElement("span",{className:this.getClasses("__text-placeholder")},this.props.placeholder),o.a.createElement("button",{"aria-label":i,className:this.getClasses("__edit-button"),onClick:e(et.AnalyticsEventTypes.CLICK_EVENT,(()=>{this.onEnterEdit()}),s),"data-analytics-id":s,tabIndex:0},o.a.createElement(Je.Edit,{className:this.getClasses("__edit")}))))}}var wt=Object(et.withAnalytics)(Lt),_t=i("Sqh5"),Nt=i.n(_t),Mt=i("8qAH"),Tt=i.n(Mt);var xt=e=>{const{bgUrl:t="",logoUrl:i="",title:a,onModifyImage:n=(e=>{}),onUpdateTitle:s=(()=>{}),permission:l,localeText:r,analyticsId:c}=e,d=Object(et.useAnalyticsAugmentEventOnElement)(et.AnalyticsEventTypes.CLICK_EVENT,(()=>{n("banner")}),`${c}.edit.banner.button`),u=l?o.a.createElement("button",{className:"banner__edit-button banner__edit-button--banner",onClick:d,title:r.editBannerTitle,"aria-label":r.editBannerTitle},o.a.createElement(Je.Edit,{className:"svg-icon svg-icon--small-icon"})):"",p=Object(et.useAnalyticsAugmentEventOnElement)(et.AnalyticsEventTypes.CLICK_EVENT,(()=>{n("logo")}),`${c}.edit.logo.button`),m=l?o.a.createElement("button",{className:"banner__edit-button banner__edit-button--logo",onClick:p,title:r.editLogoTitle,"aria-label":r.editLogoTitle},o.a.createElement(Je.Edit,{className:"svg-icon svg-icon--small-icon"})):"",h={backgroundImage:`url('${st(t)||Nt.a}')`},g={backgroundImage:`url('${st(i)||Tt.a}')`},v=l?o.a.createElement(wt,{id:"ip-headline",content:a,attr:"title",buttonTitle:r.editIPTitle,onValueChange:s,onValidateInput:e=>ct(e,r.invalidLongTitle),isHeader:!0,analyticsId:`${c}.title`}):a;return o.a.createElement("div",{className:"banner",style:h},u,o.a.createElement("div",{className:"banner__logo-container"},o.a.createElement("div",{className:"banner__logo",style:g}),m),o.a.createElement("h2",{className:"banner__title"},o.a.createElement("span",{className:"banner__title-text"},v)))};class St extends o.a.Component{constructor(){super(...arguments),this.getLoadingText=()=>{var e;return null===(e=this.props.localize)||void 0===e?void 0:e.translate("ip.header.loading")}}render(){const{backDrop:e=!1}=this.props,t=e?o.a.createElement("div",{className:"loading-icon__back-drop"}):"";return o.a.createElement("div",{className:"loading-icon"},t,o.a.createElement("div",{className:"loading-icon__inner"},o.a.createElement("span",{className:"sr-only"},this.getLoadingText())))}}var Ot=Object(Ze.a)(St),Pt=i("WBPx"),At=i("caKH");var Rt=e=>{const{content:t,id:i,title:a,subText:n="",onCancel:s,children:l,elementToFocusOnDismiss:r,analyticsId:c,isAlert:d=!1}=e,u=`institution-page-${i}-content`;return o.a.createElement(At.c,{hidden:!1,onDismiss:Object(et.useAnalyticsAugmentEventOnElement)(et.AnalyticsEventTypes.CLICK_EVENT,s,`${c}.cancel.dialog`),elementToFocusOnDismiss:r,dialogContentProps:{title:a,subText:n,showCloseButton:!0},modalProps:{subtitleAriaId:u,isAlert:d},isBlocking:!0,analyticsId:c},o.a.createElement("div",{id:u},t),l)};var Dt=e=>{const{content:t,id:i,title:a,onOk:n,onCancel:s,onOkText:l,onCancelText:r,analyticsId:c}=e;return o.a.createElement(Rt,{content:t,id:i,title:a,onCancel:s,analyticsId:c},o.a.createElement(Ge.DialogFooter,null,o.a.createElement(Pt.AnalyticsDefaultButton,{onClick:Object(et.useAnalyticsAugmentEventOnElement)(et.AnalyticsEventTypes.CLICK_EVENT,s,`${c}.cancel.button`),className:"js-cancel-button",analyticsId:c},r),o.a.createElement(Pt.AnalyticsDefaultButton,{onClick:Object(et.useAnalyticsAugmentEventOnElement)(et.AnalyticsEventTypes.CLICK_EVENT,n,`${c}.ok.button`),className:"js-ok-button",analyticsId:c},l)))};var $t=e=>{const{content:t,id:i,title:a,subText:n="",customControls:s,onCancel:l=(()=>{}),elementToFocusOnDismiss:r,analyticsId:c,isAlert:d=!1}=e,u=e=>t=>{e.action(t)};return o.a.createElement(Rt,{content:t,id:i,title:a,subText:n,onCancel:l,elementToFocusOnDismiss:r,analyticsId:`${c}`,isAlert:d},o.a.createElement(Ge.DialogFooter,null,s.map(((e,t)=>o.a.createElement(Pt.AnalyticsDefaultButton,{key:e.text,onClick:u(e),className:`js-${e.id}-button`,analyticsId:`${c}.${e.text}.button`},e.text)))))};class Ft extends o.a.Component{constructor(e){super(e),this.buttonElement=null,this.onMenuClose=()=>{this.setState((()=>({isOpen:!1})))},this.toggle=()=>{this.setState((e=>({isOpen:!e.isOpen})))},this.state={isOpen:!1},this.menuId=Object(T.v1)()}render(){const{generateDropdownOptions:e,index:t,title:i,ariaLabel:a,analyticsId:n,analyticsEventAugmentor:s}=this.props,l=e(t),r=`${n}.toggle.button`;return o.a.createElement("button",{onClick:s(et.AnalyticsEventTypes.CLICK_EVENT,this.toggle,r),"data-analytics-id":r,ref:e=>{this.buttonElement=e},className:"button button--primary hero-zero-message__button js-module-create-button","aria-label":a,"aria-haspopup":!0,"aria-expanded":this.state.isOpen,"aria-controls":this.state.isOpen?this.menuId:void 0},i,this.state.isOpen?o.a.createElement(Ge.ContextualMenu,{id:this.menuId,shouldFocusOnMount:!0,directionalHint:5,target:this.buttonElement,onDismiss:this.onMenuClose,items:l,className:"institution-page__insert-menu",analyticsId:`${n}.contextualMenu`}):"")}}var Bt=Object(et.withAnalytics)(Ft);var Ut=e=>{const{buttonText:t,buttonAriaLabel:i,generateDropdownOptions:a,description:n="",headline:s="",image:l="",permission:r=!1,analyticsId:c}=e;let d;return d=r?o.a.createElement("div",{className:"hero-zero-message__dropdown_wrapper"},o.a.createElement(Bt,{index:"0",generateDropdownOptions:a,title:t,ariaLabel:i,analyticsId:`${c}.create`})):"",o.a.createElement("div",{className:"hero-zero-message"},o.a.createElement("div",{className:"hero-zero-message__image",dangerouslySetInnerHTML:{__html:l}}),o.a.createElement("h3",{className:"subheader hero-zero-message__headline"},s),o.a.createElement("p",{className:"hero-zero-message__description"},n),d)},Vt=i("8jBL");var jt=e=>{const{title:t,description:i="",bottomMargin:a=!1,size:n}=e;return o.a.createElement("div",{className:a?"inline-error-container inline-error-container-bottom":"inline-error-container"},"medium"===n?o.a.createElement(Vt.AlertError,{color:"error",className:"medium-icon"}):o.a.createElement(Je.AlertError,{color:"error",className:"small-icon"}),o.a.createElement("div",{"aria-live":"assertive",role:"alert",className:`inline-error-message-container__${n}`},o.a.createElement("div",{className:"inline-error-title"},t),o.a.createElement("div",null,i)))};var Ht=e=>{const{onClick:t,buttonTitle:i,analyticsId:a}=e;return o.a.createElement("button",{type:"button",className:"institution-page__create-new-bar js-create-button",onClick:Object(et.useAnalyticsAugmentEventOnElement)(et.AnalyticsEventTypes.CLICK_EVENT,t,`${a}.insert.button`),"aria-label":i},o.a.createElement("div",{className:"institution-page__create-new-bar__line"}),o.a.createElement(Je.Add,{className:"institution-page__create-new-bar__add-icon"}))},zt=i("Dz4E");class Kt extends o.a.Component{constructor(e){super(e),this.buttonElement=null,this.onMenuClose=()=>{this.setState((()=>({isOpen:!1})))},this.toggle=()=>{this.setState((e=>({isOpen:!e.isOpen})))},this.state={isOpen:!1},this.menuId=Object(T.v1)()}render(){const{generateDropdownOptions:e,index:t,openedTitle:i,closedTitle:a,ariaLabel:n,analyticsId:s,analyticsEventAugmentor:l}=this.props,r=e(t),c=this.state.isOpen?"institution-page__create-new-bar__line active":"institution-page__create-new-bar__line",d=this.state.isOpen?"institution-page__create-new-bar__add-icon active":"institution-page__create-new-bar__add-icon";return o.a.createElement("button",{onClick:l(et.AnalyticsEventTypes.CLICK_EVENT,this.toggle,`${s}.toggle.button`),ref:e=>{this.buttonElement=e},className:"institution-page__create-new-bar js-module-create-button ",title:this.state.isOpen?i:a,"aria-label":n,"aria-haspopup":!0,"aria-expanded":this.state.isOpen,"aria-controls":this.state.isOpen?this.menuId:void 0},o.a.createElement("div",{className:c}),o.a.createElement(Je.Add,{className:d}),this.state.isOpen?o.a.createElement(zt.ContextualMenu,{id:this.menuId,shouldFocusOnMount:!0,directionalHint:5,target:this.buttonElement,onDismiss:this.onMenuClose,items:r,className:"institution-page__insert-menu",analyticsId:`${s}.contextualMenu`}):"")}}var Wt=Object(et.withAnalytics)(Kt);var qt=e=>{const{index:t,openedTitle:i,closedTitle:a,buttonAriaLabel:n,generateDropdownOptions:s,analyticsId:l}=e;return o.a.createElement(Wt,{index:t,generateDropdownOptions:s,openedTitle:i,closedTitle:a,ariaLabel:n,analyticsId:`${l}.dropdown`})},Zt=i("nBlB"),Gt=i("DVRQ"),Jt=i.n(Gt);class Xt extends o.a.Component{constructor(e){super(e),this.loadImage=e=>{if(e){const t=new Image;t.src=e,this.setState((()=>({isLoading:!0}))),t.onload=()=>{this.setState((()=>({isLoading:!1,isError:!1})))},t.onerror=()=>{this.setState((()=>({isLoading:!1,isError:!0})))}}},this.state={isLoading:!1,isError:!1}}componentDidMount(){this.loadImage(this.props.imgUrl)}UNSAFE_componentWillReceiveProps(e){const{imgUrl:t}=e;this.props.imgUrl!==t&&this.loadImage(t)}render(){const{imgUrl:e,customClass:t="",title:i="",desc:a=""}=this.props;if(this.state.isLoading)return o.a.createElement(Ot,null);const n={backgroundImage:`url('${this.state.isError||!e?Jt.a:e}')`};return o.a.createElement("div",{className:`module-overview-component ${t}`,style:n},(i.length>0||a.length>0)&&o.a.createElement("div",{className:"module-overview-component__overlay"},o.a.createElement("h2",{className:"subheader module-overview-component__headline",title:i},i),o.a.createElement("p",{className:"module-overview-component__description",title:a},a)))}}var Qt=Xt,Yt=i("7O4Y");const ei=1;class ti extends o.a.Component{constructor(e){super(e),this.state={disableTabIndex:e.disableLinks?{tabIndex:-1}:{}},this.boundConvertLinkToListItem=this.convertLinkToListItem.bind(this),this.boundOpenAllWrapper=this.openAllWrapper.bind(this)}openAllWrapper(e){const{openAll:t=(()=>{}),moduleId:i=""}=this.props;this.props.disableLinks||(e.preventDefault(),t(i))}changeActiveLinkIdWrapper(e,t){const{maxActiveLinkIndex:i=-1,changeActiveLinkId:a=(e=>{})}=this.props;t<i&&a(e)}singleLinkClassName(e){const{maxActiveLinkIndex:t=-1,activeLinkIndex:i}=this.props;return Object(Yt.a)({"disable-link":this.props.disableLinks,"link-list-component__link":!0,"-black":!0,active:t>1&&e===i})}convertLinkToListItem(e,t){const i=`${this.props.analyticsId}.link`;return o.a.createElement("li",{className:"link-list-component__list-item",key:e.id},o.a.createElement("a",{...this.props.disableLinks?{}:{href:it(e.link)},rel:"noopener noreferrer",target:"_blank",role:"link",...this.state.disableTabIndex,className:this.singleLinkClassName(t),onMouseMove:()=>this.changeActiveLinkIdWrapper(e.id,t),onFocus:()=>this.changeActiveLinkIdWrapper(e.id,t),onClick:this.props.analyticsEventAugmentor(et.AnalyticsEventTypes.CLICK_EVENT,(()=>{}),i),"data-analytics-id":i},e.title))}render(){const{maxColumns:e=ei,disableLinks:t,customClasses:i,localize:a,items:n,analyticsId:s,analyticsEventAugmentor:l}=this.props,r=[...n],c=[];for(let t=1;t<e&&r.length>5;t++)c.push(o.a.createElement("div",{className:"link-list-component__column",key:t},o.a.createElement("ul",{className:"link-list-component__list"},r.splice(0,5).map(this.boundConvertLinkToListItem))));const d=r.length>5,u=Object(Yt.a)({"disabled-view-all":t,"link-list-component__link":!0,"link-list-component__show-all-button":!0}),p=`${s}.view-all.button`,m=d?o.a.createElement("li",{className:"link-list-component__list-item js-show-all-list-item"},o.a.createElement("button",{...this.state.disableTabIndex,"aria-disabled":t,className:u,onClick:l(et.AnalyticsEventTypes.CLICK_EVENT,this.boundOpenAllWrapper,p),"data-analytics-id":p},o.a.createElement("span",{className:"link-list-component__show-all"},a.translate("ip.moduleList.showAllText",{linkCount:n.length})))):"",h=(d?r.slice(0,4):r).map(this.boundConvertLinkToListItem),g=o.a.createElement("div",{className:"link-list-component__column"},o.a.createElement("ul",{className:"link-list-component__list"},h,m)),v=i?`link-list-component ${i}`:"link-list-component";return o.a.createElement("div",{className:v},c,g)}}ti.getDerivedStateFromProps=(e,t)=>{let i=null;return e.disableLinks&&!t.disableTabIndex.tabIndex?i={disableTabIndex:{tabIndex:-1}}:!e.disableLinks&&t.disableTabIndex.tabIndex&&(i={disableTabIndex:{}}),i};const ii=Object(Ze.a)(ti);var ai=Object(et.withAnalytics)(ii);class ni extends o.a.Component{constructor(){super(...arguments),this.openAllLinksPeek=e=>{const{openAll:t,dispatch:i}=this.props;return i(Ve(e)).then((()=>{t(e)})).catch((e=>{if(e!==Ee)throw e}))}}render(){const{module:e,analyticsId:t,preview:i=!1}=this.props,a=e.resources.filter((e=>e.type===A))[0],n=a?{url:a.details.href,title:a.details.title,desc:a.details.desc}:{url:""},s=e.resources.filter((e=>e.type===P)).map((e=>({link:e.details.href,title:e.details.title,id:e.id}))),l=s?o.a.createElement(ai,{items:s,openAll:this.openAllLinksPeek,moduleId:e.id,disableLinks:i,customClasses:"featured-link-list",analyticsId:`${t}.featuredLink.linkList`}):"";return o.a.createElement("div",{className:"featured-links-component__container"},o.a.createElement(Qt,{imgUrl:n.url,title:n.title,desc:n.desc}),l)}}var si=ni;var oi=e=>{const{images:t,index:i}=e,a=[],n=i<t.length?i:0,s=t[n];for(let e=0;e<t.length;e++)a.push(o.a.createElement("div",{className:"image-carousel-component__indicator"+(e===n?" active":""),key:t[e].id}));return o.a.createElement("div",{className:"image-carousel-component"},o.a.createElement(Qt,{imgUrl:s?ot(s.imageHref):"",customClass:"full-width"}),o.a.createElement("div",{className:"image-carousel-component__indicator-container"},a.length>1&&a))};class li extends o.a.Component{constructor(e){super(e),this.onChangeActiveLinkId=e=>this.setState((()=>({activeLinkIndex:this.getLinkIndexById(e)}))),this.getLinkResources=e=>{const t=[];return e.forEach((e=>{e.type===P&&t.push({imageHref:e.details.imageHref||void 0,link:e.details.href,title:e.details.title,id:e.id})})),t},this.getLinkResourcesWithImage=e=>e.filter((e=>e.imageHref)),this.getLinkIndexById=e=>this.state.linkResources.map((e=>e.id)).indexOf(e),this.openAllLinksPeek=e=>{const{openAll:t,dispatch:i}=this.props;return i(Ve(e)).then((()=>{t(e)})).catch((e=>{if(e!==Ee)throw e}))};const t=this.getLinkResources(e.module.resources),i=this.getLinkResourcesWithImage(t),a=i.length?0:-1;this.state={activeLinkIndex:a,linkResources:t,linkResourcesWithImage:i}}UNSAFE_componentWillReceiveProps(e){if(!Et(e.module.resources,this.props.module.resources)){const t=this.getLinkResources(e.module.resources),i=this.getLinkResourcesWithImage(t);let a=this.state.activeLinkIndex;-1===a&&i.length?a=0:a>=0&&!i.length&&(a=-1),this.setState((()=>({activeLinkIndex:a,linkResources:t,linkResourcesWithImage:i})))}}render(){const{module:e,analyticsId:t}=this.props;switch(vt(e)){case $.RIGHT:return o.a.createElement("div",{className:"image-links-component__container-right"},o.a.createElement(ai,{activeLinkIndex:this.state.activeLinkIndex,items:this.state.linkResources,openAll:this.openAllLinksPeek,changeActiveLinkId:this.onChangeActiveLinkId,maxActiveLinkIndex:this.state.linkResourcesWithImage.length,moduleId:e.id,disableLinks:this.props.preview,customClasses:"link-list-image-right",analyticsId:`${t}.imageOrientationRight.linkList`}),o.a.createElement(oi,{images:this.state.linkResourcesWithImage,index:this.state.activeLinkIndex}));case $.NONE:return o.a.createElement("div",{className:"image-links-component__container"},o.a.createElement(ai,{items:this.state.linkResources,openAll:this.openAllLinksPeek,moduleId:e.id,disableLinks:this.props.preview,maxColumns:2,customClasses:"link-list-no-image",analyticsId:`${t}.imageOrientationNone.linkList`}));default:return o.a.createElement("div",{className:"image-links-component__container-left"},o.a.createElement(oi,{images:this.state.linkResourcesWithImage,index:this.state.activeLinkIndex}),o.a.createElement(ai,{activeLinkIndex:this.state.activeLinkIndex,items:this.state.linkResources,openAll:this.openAllLinksPeek,changeActiveLinkId:this.onChangeActiveLinkId,maxActiveLinkIndex:this.state.linkResourcesWithImage.length,moduleId:e.id,disableLinks:this.props.preview,customClasses:"link-list-image-left",analyticsId:`${t}.imageOrientationLeft.linkList`}))}}}var ri=Object(et.withAnalytics)(li);var ci=e=>{const{module:t,pluginsConfig:i,preview:a=!1}=e,n=nt(i);return o.a.createElement("div",{className:"content-component__container bb-editor-fill"},o.a.createElement(at.BbEditor,{isToolbarHidden:!0,isReadOnly:!0,bbml:t.resources[0].details.bbml,plugins:n,isDisabled:a}))},di=ci,ui=i("HuI8"),pi=i("vtwu");var mi=e=>{const{module:t,locale:i}=e,a=[pi.b.AllowDownloads,pi.b.AllowForms,pi.b.AllowPointerLock,pi.b.AllowPopups,pi.b.AllowPopupsToEscapeSandbox,pi.b.AllowPresentation,pi.b.AllowSameOrigin,pi.b.AllowScripts,pi.b.AllowTopNavigation],{translate:n,isRtl:s}=Object(ui.a)(),[l,r]=o.a.useState("");return o.a.useEffect((()=>{t.details&&t.details.s3HtmlKey&&K(t.id,t.details.s3HtmlKey.split("/")[2]).then((e=>r(e))).catch((e=>{throw e}))}),[t]),o.a.createElement("div",{className:"content-component__container html-container bb-editor-fill"},o.a.createElement(d.a,{locale:i},o.a.createElement(pi.a,{value:t.resources[0].details.html,readOnly:!0,customClasses:"html-editor",isRtl:s(),src:l,sandboxAttributes:a,allowFullScreen:!0,ariaLabel:n("ip.editModule.moduleHTML")})))};var hi=e=>{const{module:t,dispatch:i,openAll:a,pluginsConfig:n,preview:s=!1,analyticsId:l,locale:r}=e;switch(t.type){case x:return!t.resources.some((e=>e.type===A))||s?o.a.createElement(ri,{module:t,dispatch:i,openAll:a,preview:s,analyticsId:`${l}.imageModule`}):o.a.createElement(si,{module:t,dispatch:i,openAll:a,preview:s,analyticsId:`${l}.featureModule`});case S:return o.a.createElement(di,{module:t,pluginsConfig:n,preview:s});case O:return o.a.createElement(mi,{module:t,locale:r});default:return null}},gi=hi,vi=i("GR+8");const Ei="HIDDEN",bi="VISIBLE";class Ii extends o.a.Component{constructor(){super(...arguments),this.onToggleOptionChanged=e=>this.toggleVisible(e.key===bi),this.dropdownControllingButton=null,this.dispatchStartModuleXhr=()=>this.props.dispatch(Fe()),this.dispatchUpdateModule=e=>this.props.dispatch(Ue({module:e,moduleId:e.id})),this.toggleVisible=e=>{const t={...this.props.module,available:e};this.dispatchStartModuleXhr(),this.dispatchUpdateModule(t).then((()=>{const e=this.dropdownControllingButton;null==e||e.focus()}))}}render(){const{available:e,analyticsId:t,localize:i}=this.props,a=i.translate,n=[{key:Ei,text:a("ip.moduleList.userHidden"),itemType:Ge.DropdownMenuItemType.Normal,index:0,ariaLabel:a("ip.moduleList.userHidden"),icon:o.a.createElement(Vt.Invisible,null)},{key:bi,text:a("ip.moduleList.userVisible"),itemType:Ge.DropdownMenuItemType.Normal,index:1,ariaLabel:a("ip.moduleList.userVisible"),icon:o.a.createElement(Vt.Visible,null)}];return o.a.createElement("div",{className:"institution-page-visibility-toggle__wrapper"},o.a.createElement(Ge.Dropdown,{ref:e=>{this.dropdownControllingButton=e&&e.refs&&e.refs.root&&e.refs.root.querySelectorAll("button")[0]},calloutProps:{className:"institution-page-visibility-toggle__callout"},options:n,iconDropdown:!0,hideBorders:!0,ariaLabel:a("ip.moduleList.editModuleVisibility"),selectedKey:e?bi:Ei,onChanged:this.onToggleOptionChanged,analyticsId:`${t}`}))}}var fi=Object(vi.a)(Ii);class yi extends o.a.Component{constructor(){super(...arguments),this.onEdit=()=>this.props.openEdit(this.props.module.id),this.onEditWithRolesExpanded=()=>this.props.openEdit(this.props.module.id,!0),this.onDelete=()=>this.props.onDelete(this.props.module.id),this.generateCreateBar=(e,t)=>{const{module:i,editable:a,localize:n,generateDropdownOptions:s,analyticsId:l}=this.props,r=n.translate(t?"ip.moduleList.createModuleAfterAria":"ip.moduleList.createModuleBeforeAria",{moduleTitle:i.title});return a?o.a.createElement(qt,{buttonAriaLabel:r,generateDropdownOptions:s,closedTitle:n.translate("ip.moduleList.createModuleText"),openedTitle:n.translate("ip.moduleList.createModuleCancel"),index:e.toString(),analyticsId:`${l}.createNewBar`}):""}}render(){const{module:e,canBeReordered:t,index:i,editable:a,dispatch:n,localize:s,children:l,dragPointRef:r,moreOptionsClassName:c="",areRolesValid:d,generateAudienceLabel:u,analyticsId:p,analyticsEventAugmentor:m}=this.props,h=d(e.institutionRoleIds),g=Object(Yt.a)({"module-wrapper__button":!0,"module-wrapper__drag-point":!0,hidden:!t}),v=`${p}.editWithRoles.link`,E=`${p}.dragModule.button`;return o.a.createElement("div",{className:"module-wrapper"},0===i?this.generateCreateBar(i,!1):"",o.a.createElement("div",{className:"module-wrapper__content drag-drop-item__highlight-area"},o.a.createElement("div",{className:"module-wrapper__header"},o.a.createElement("div",{className:"module-wrapper__header-left"},o.a.createElement("h3",{className:"subheader module-wrapper__title"},e.title),a?o.a.createElement("span",{className:"module-wrapper__visibility-controls"},o.a.createElement(fi,{module:e,available:e.available,dispatch:n,analyticsId:`${p}.visibilityToggle.control`}),o.a.createElement("span",{className:"module-wrapper__audience"},o.a.createElement("span",{className:"module-wrapper__audience-spacer","aria-hidden":"true"},"|"),s.translate("ip.moduleList.audienceTitle"),o.a.createElement("a",{className:"module-wrapper__audience-link",onClick:m(et.AnalyticsEventTypes.CLICK_EVENT,this.onEditWithRolesExpanded,v),"data-analytics-id":v,href:"#"},h?u(e.institutionRoleIds):s.translate("ip.moduleList.confirmRoles")),!h&&o.a.createElement(Je.Attention,{className:"attention-icon"}))):""),a?o.a.createElement("div",{className:"module-wrapper__header-right"},o.a.createElement("div",{ref:r,id:`${e.id}-drag-point`,className:g,draggable:!0,role:"button",tabIndex:0,title:s.translate("ip.moduleList.moveModuleTitle"),"aria-label":s.translate("ip.moduleList.moveModuleTitle"),onClick:m(et.AnalyticsEventTypes.CLICK_EVENT,(()=>{}),E),"data-analytics-id":E},o.a.createElement(Je.MoveItemUpDown,null)),o.a.createElement(Ge.ActionMenu,{className:`js-dropdown-toggle ${c}`,ariaLabel:s.translate("ip.moduleList.editModuleAriaLabel",{moduleTitle:e.title}),title:s.translate("ip.moduleList.editModuleTitle"),analyticsId:`${p}.actionMenu.button`,menuProps:{items:[{key:"editModule",name:s.translate("ip.moduleList.editModuleText"),onClick:this.onEdit,icon:o.a.createElement(Je.Edit,null)},{key:"deleteModule",name:s.translate("ip.moduleList.deleteModuleText"),onClick:this.onDelete,icon:o.a.createElement(Je.Trash,null)}]}})):""),l),this.generateCreateBar(e.sequence+1,!0))}}const Ci=Object(Ze.a)(yi);var ki=Object(et.withAnalytics)(Ci);var Li=Object(Zt.DragNDropItem)((e=>{const{canBeReordered:t,module:i,editable:a,index:n,createModuleDropdownOptions:s,moreOptionsClassName:l="",openEdit:r,onDelete:c,dragPointRef:d,dispatch:u,locale:p,openAll:m,pluginsConfig:h,generateAudienceLabel:g,areRolesValid:v,analyticsId:E}=e;return o.a.createElement("div",{id:`dnd-${i.id}`},o.a.createElement(ki,{canBeReordered:t,editable:a,index:n,generateDropdownOptions:s,openEdit:r,onDelete:c,dragPointRef:d,module:i,dispatch:u,generateAudienceLabel:g,areRolesValid:v,moreOptionsClassName:l,analyticsId:`${E}.wrapper`},o.a.createElement(gi,{module:i,openAll:m,dispatch:u,locale:p,pluginsConfig:h,analyticsId:`${E}`})))})),wi=Li;var _i=Object(Zt.DragNDropContainer)((e=>{const{items:t,actions:i,editable:a,createModuleDropdownOptions:n,moreOptionsClassName:s="",openEdit:l,onDelete:r,dispatch:c,locale:d,state:u,openAll:p,pluginsConfig:m,generateAudienceLabel:h,areRolesValid:g,analyticsId:v}=e;return o.a.createElement("div",null,t.map(((e,E)=>o.a.createElement(wi,{canBeReordered:t.length>1,module:e,index:E,state:u,key:e.id,preview:o.a.createElement("div",{className:"module-list-preview"},e.title),actions:i,editable:a,createModuleDropdownOptions:n,openEdit:l,onDelete:r,dispatch:c,locale:d,openAll:p,pluginsConfig:m,generateAudienceLabel:h,areRolesValid:g,moreOptionsClassName:s,analyticsId:`${v}.moduleItem`}))))})),Ni=i("S+y2"),Mi=i.n(Ni);var Ti=e=>{const{errorType:t,callClearError:i,translate:a,analyticsId:n}=e;switch(t){case v.FilePermissionUpdateError:return o.a.createElement($t,{title:a("ip.filePermissionUpdateError.title"),id:"file-permission-error",subText:a("ip.filePermissionUpdateError.description"),onCancel:i,content:"",customControls:[{text:a("ip.filePermissionUpdateError.okBtn"),action:i}],analyticsId:`${n}.filePermissionError`,isAlert:!0});case v.Error:return o.a.createElement($t,{title:a("ip.error.title"),id:"general-error",subText:a("ip.error.description"),content:o.a.createElement("div",null,o.a.createElement("div",{dangerouslySetInnerHTML:{__html:Mi.a}})),onCancel:i,customControls:[{text:a("ip.editModule.closeBtn"),action:i}],analyticsId:`${n}.generalError`,isAlert:!0});case g:return o.a.createElement($t,{title:a("ip.exceedLimitSize.title"),id:"exceed-limit-size-error",subText:a("ip.exceedLimitSize.description",{maxFileSize:10}),onCancel:i,content:"",customControls:[{text:a("global.ok"),action:i}],analyticsId:`${n}.exceedLimitSizeError`,isAlert:!0});default:return null}},xi=i("gdCT"),Si=i.n(xi);const Oi="dropdown-toggle";class Pi extends o.a.Component{constructor(e){var t;super(e),this.translation={},this.onPopupOk=()=>{const{dispatch:e}=this.props,{savedId:t}=this.state;var i;this.setState({isShowPopup:!1,savedId:"",showContentCollectionWarning:!1}),e(Fe()),e((i=t,e=>J(i).then((t=>e(me(he(Ae),{data:t,moduleId:i})))).catch((t=>e(me(ge(Ae),{err:t,moduleId:i}))))))},this.onPopupCancel=()=>{this.setState({isShowPopup:!1})},this.onDeleteModule=e=>{var t;const i=null===(t=this.props.module.modules)||void 0===t?void 0:t.find((t=>t.id===e)),a=(null==i?void 0:i.type)===x&&i.resources.some((e=>!!e.details.imageId));this.setState((()=>({isShowPopup:!0,savedId:e,showContentCollectionWarning:a})))},this.onSwitchPage=(e,t)=>{const{onSwitchPage:i=(()=>{})}=this.props;i(e.variantId||"default"),this.setState({currentPageIndex:t})},this.onSwitchMode=(e,t,i)=>{this.setState({mode:e,currentViewerIndex:t,filterKey:i})},this.onReorderModules=(e,t)=>{this.props.dispatch(((e,t)=>i=>ie(e,t).then((e=>i(me(he($e),{data:e,reorderedModules:t})))).catch((e=>i(me(ge($e),{err:e})))))(this.props.page.id,e)).then((()=>{var e;null===(e=document.getElementById(`dnd-${t.id}`))||void 0===e||e.focus()}))},this.onModifyImage=e=>{const{openEditPageImage:t=(()=>{})}=this.props;t(e)},this.onUpdateTitle=(e,t)=>{const{dispatch:i,page:a}=this.props;if(ct(t).isValid){i(we());const e={page:{id:a.id,title:mt(t)}};return i(_e(e)).then((()=>{var e;null===(e=document.getElementById("ip-headline-title"))||void 0===e||e.focus()}))}return Promise.resolve()},this.getRolesToImpersonate=(e,t)=>{if(!e||!t)return[];let i=[];return t.forEach((t=>{t.institutionRoleIds&&(i=t.institutionRoleIds.reduce(((t,i)=>{if(!t.some((e=>e.roleKey===i))){const a=e.filter((e=>e.roleKey===i))[0];a&&t.push({roleKey:a.roleKey,roleName:a.roleName})}return t}),i))})),i.sort(((e,t)=>{const i=e.roleName.toLowerCase(),a=t.roleName.toLowerCase();return i<a?-1:a<i?1:0}))},this.generateAudienceLabel=e=>{const t=this.props.localize.translate("ip.moduleList.allUsers"),i=this.props.localize.translate("ip.moduleList.multipleRoles");return ft(e,this.props.role.roles,t,i)},this.areRolesValid=e=>bt(e,this.props.role.roles||[]),this.syncSequence=(e,t)=>{let i=!1;for(let a=0;a<t.length;a++){const n=t[a];if(e.sequence===n.sequence&&e.id!==n.id){i=!0;break}}i&&t.forEach((t=>{if(t.sequence>=e.sequence&&e.id!==t.id){t.sequence+=1}}))},this.checkModuleIsValid=e=>!(!e.resources||0===e.resources.length)&&(!(!e.title||""===e.title)&&void 0!==e.available),this.createModuleDropdownOptions=e=>{const{canEditHTML:t=!1}=this.props,i=[{key:e,name:this.translation.optionCreateFeaturedLinksModuleText,className:"dropdown__toggle-text",onClick:()=>{this.overrideFocusAndOpenCreate(x,e)},icon:o.a.createElement(Je.Link,null)},{key:e,name:this.translation.optionCreateCustomContentModuleText,className:"dropdown__toggle-text",onClick:()=>{this.overrideFocusAndOpenCreate(S,e)},icon:o.a.createElement(Je.CustomContent,null)}];return t&&i.push({key:e,name:this.translation.optionCreateHTMLModuleText,className:"dropdown__toggle-text",onClick:()=>{this.overrideFocusAndOpenCreate(O,e)},icon:o.a.createElement(Je.HtmlEditor,null)}),i},this.filterModulesPreview=e=>{const t=e.available&&!(e.institutionRoleIds&&e.institutionRoleIds.length);return""===this.state.filterKey?t:t||e.available&&e.institutionRoleIds&&e.institutionRoleIds.includes(this.state.filterKey)},this.overrideFocusAndOpenCreate=(e,t)=>{var i,a;const{module:n}=this.props;let s=".modules-container .js-module-create-button";if(t){n.modules=null!==(i=n.modules)&&void 0!==i?i:[];let e=n.modules.length;for(let i=0;i<(null===(a=n.modules)||void 0===a?void 0:a.length);i++){if(n.modules[i].sequence>=t){e=i;break}}s=`.module-section:nth-of-type(${e}) .institution-page__create-new-bar:last-of-type`}this.props.setFocusOverride(s,".institution-page-container"),this.props.openCreate(e,t)},this.overrideFocusAndOpenEdit=(e,t=!1)=>{const{openEdit:i=(()=>{})}=this.props;this.props.setFocusOverride(`#dnd-${e} .module-wrapper__header-right .dropdown-toggle`,".institution-page-container"),i(e,t)},this.state={mode:"edit",currentPageIndex:0,currentViewerIndex:0,isShowPopup:!1,savedId:"",showContentCollectionWarning:!1,filterKey:"",rolesToImpersonate:this.getRolesToImpersonate(e.role.roles,null!==(t=e.module.modules)&&void 0!==t?t:[])}}UNSAFE_componentWillReceiveProps(e){if(e.role.roles===this.props.role.roles&&e.module.modules===this.props.module.modules||this.setState((()=>{var t;return{rolesToImpersonate:this.getRolesToImpersonate(e.role.roles,null!==(t=e.module.modules)&&void 0!==t?t:[])}})),e.variantOptions&&e.variantOptions.length>0){const t=e.variantOptions.findIndex((t=>e.page.variantId?e.page.variantId===t.variantId:!t.variantId));if(t<0)throw new Error("institution-page: Check your configuration. The variantOptions provided do not include a brand that matches the variant or a default brand.");t!==this.state.currentPageIndex&&this.setState((()=>({currentPageIndex:t})))}}render(){var e,t;const{common:i,dispatch:a,page:n,module:s,openAll:l,localize:r,openSettings:c,pluginsConfig:d,variantOptions:u,mode:p=""}=this.props,m=r.translate,h="institutionPage.home";this.translation={moduleName:m("ip.defaultData.moduleName"),imageResourceTitle:m("ip.defaultData.imageResourceTitle"),imageResourceDescription:m("ip.defaultData.imageResourceDescription"),optionCreateFeaturedLinksModuleText:m("ip.moduleList.createFeaturedLinksModuleText"),optionCreateCustomContentModuleText:m("ip.moduleList.createCustomContentModuleText"),optionCreateHTMLModuleText:m("ip.moduleList.createHTMLModuleText"),insertButtonTitle:m("ip.moduleList.createModuleText"),defaultLinkTitle:m("ip.defaultData.linkName")};const g=()=>{a({type:je})};if(s.loading&&!s.modules||n.loading&&!n.id)return o.a.createElement("div",{className:"index-container"},i.error&&o.a.createElement(Ti,{errorType:i.errorType,callClearError:g,translate:m,analyticsId:`${h}.error.popup`}),o.a.createElement(Ot,null));const v=null===(e=s.modules)||void 0===e?void 0:e.filter(this.checkModuleIsValid),E=null===(t=s.modules)||void 0===t?void 0:t.filter((e=>!this.checkModuleIsValid(e)));let b;v&&(b="preview"===this.state.mode?v.filter(this.filterModulesPreview):v);const I="admin"===p&&n.editIp&&"edit"===this.state.mode,f=m(I?"ip.moduleList.noModuleTitleAdmin":"ip.moduleList.noModuleTitleAll"),y=m(I?"ip.moduleList.noModuleDescAdmin":"ip.moduleList.noModuleDescAll"),C=m("ip.moduleList.createFirstText"),k=m("ip.moduleList.createFirstModuleAria");let L;const w=null==E?void 0:E.filter((e=>I||!1!==e.available));L=b&&b.length>0?o.a.createElement(_i,{items:b,onReorderItem:this.onReorderModules,scrollContainerId:"home-modules-section",editable:I,createModuleDropdownOptions:this.createModuleDropdownOptions,openEdit:this.overrideFocusAndOpenEdit,onDelete:this.onDeleteModule,dispatch:this.props.dispatch,locale:this.props.currentLocale,openAll:l,pluginsConfig:d,generateAudienceLabel:this.generateAudienceLabel,areRolesValid:this.areRolesValid,moreOptionsClassName:Oi,analyticsId:`${h}.homeModuleSection`}):0===(null==w?void 0:w.length)?o.a.createElement(Ut,{headline:f,image:Si.a,description:y,permission:I,buttonText:C,buttonAriaLabel:k,generateDropdownOptions:this.createModuleDropdownOptions,analyticsId:`${h}.heroZeroMessage`}):I?o.a.createElement(qt,{buttonAriaLabel:r.translate("ip.moduleList.createFirstModuleAria"),generateDropdownOptions:this.createModuleDropdownOptions,closedTitle:r.translate("ip.moduleList.createModuleText"),openedTitle:r.translate("ip.moduleList.createModuleCancel"),index:"0",analyticsId:`${h}.insertModule`}):"";const _=null==w?void 0:w.map(((e,t)=>o.a.createElement(jt,{key:e.id,title:m("ip.error.moduleLoadTitle"),size:"medium",description:m("ip.error.moduleLoadDescription"),bottomMargin:!I||t!==w.length-1}))),N=s.loading&&s.modules||n.loading&&n.id?o.a.createElement(Ot,{backDrop:!0}):"",M="admin"===p&&n.editIp?o.a.createElement(Ye,{currentPageIndex:this.state.currentPageIndex,currentViewerIndex:this.state.currentViewerIndex,onSwitchPage:this.onSwitchPage,onSwitchMode:this.onSwitchMode,onClickSettingsButton:c,variantId:n.variantId,viewerRoles:this.state.rolesToImpersonate,variantOptions:u,analyticsId:`${h}.header`}):"",T={popupTitle:m("ip.moduleList.deleteModuleTitle"),popupContent:m("ip.moduleList.deleteModuleContent"),popupContentWithWarning:m("ip.moduleList.deleteModuleContentCollectionWarning"),popupConfirm:m("ip.moduleList.deletePopupConfirm"),popupCancel:m("ip.moduleList.deletePopupCancel")},x={editBannerTitle:m("ip.banner.editBannerTitle"),editLogoTitle:m("ip.banner.editLogoTitle"),editIPTitle:m("ip.banner.editIPTitle"),invalidLongTitle:m("ip.editModule.validateTooLongMessage")},S=o.a.createElement("div",{className:"flex-page-container"+(I?" ip-editable":"")},i.error&&o.a.createElement(Ti,{errorType:i.errorType,callClearError:g,translate:m,analyticsId:`${h}.error.popup`}),N,this.state.isShowPopup?o.a.createElement(Dt,{title:T.popupTitle,id:"module-delete-confirmation",content:this.state.showContentCollectionWarning?T.popupContentWithWarning:T.popupContent,onOk:this.onPopupOk,onCancel:this.onPopupCancel,onOkText:T.popupConfirm,onCancelText:T.popupCancel,analyticsId:`${h}.confirmation.popup`}):"",M,o.a.createElement("div",{id:"home-modules-section",className:"flex-page-content"},o.a.createElement(xt,{bgUrl:n.bannerId,logoUrl:n.logoId,title:n.title||"",permission:I||!1,onModifyImage:this.onModifyImage,onUpdateTitle:this.onUpdateTitle,localeText:x,analyticsId:`${h}.banner`}),o.a.createElement("div",{className:"modules-container"},_,L)));return o.a.createElement("div",{className:"index-container"},S)}}var Ai=Object(c.b)((e=>({page:e.page,module:e.module,role:e.role,common:e.common,entitlement:e.entitlement})))(Object(Ze.a)(Pi));var Ri=e=>{const{title:t="",superTitle:i=""}=e;return o.a.createElement("header",{className:"panel-header-component"},o.a.createElement("h2",{className:"subheader panel-header-component__super-title"},i),o.a.createElement("h1",{className:"subheader panel-header-component__title"},t))};class Di extends o.a.Component{constructor(e){super(e),this.state={}}render(){var e;const{moduleId:t,module:i,localize:a}=this.props;if(null==i?void 0:i.loading)return o.a.createElement("div",{className:"view-all-page-component"},o.a.createElement(Ot,null));const n=null===(e=null==i?void 0:i.modules)||void 0===e?void 0:e.filter((e=>e.id===t))[0],s=null==n?void 0:n.resources.filter((e=>e.type===P)).map((e=>({title:e.details.title,link:e.details.href,id:e.id}))).map((e=>o.a.createElement("li",{className:"view-all-page-component__list-item",key:e.id},o.a.createElement("a",{className:"view-all-page-component__anchor",href:it(e.link),rel:"noopener noreferrer",target:"_blank"},e.title))));return o.a.createElement("div",{className:"flex-page-container"},o.a.createElement("div",{className:"view-all-page-component flex-page-content"},o.a.createElement(Ri,{superTitle:a.translate("ip.editPage.superTitle"),title:null==n?void 0:n.title}),o.a.createElement("ul",{className:"view-all-page-component__list"},s)))}}var $i=Object(c.b)((e=>({module:e.module})))(Object(Ze.a)(Di));class Fi extends o.a.Component{constructor(e){super(e),this.toggleExpanded=()=>{this.setState((e=>({expanded:!e.expanded})))};const{startExpanded:t=!1}=e;this.state={expanded:t}}UNSAFE_componentWillReceiveProps(e){const{startExpanded:t=!1}=e;t!==this.props.startExpanded&&this.setState((()=>({expanded:t})))}render(){const{className:e="",headerLeft:t,headerRight:i,analyticsEventAugmentor:a,analyticsId:n}=this.props,s=e?`collapsible-panel ${e}`:"collapsible-panel",l=`${n}.collapsiblePanel.toggle.button`,r=o.a.createElement("button",{className:"collapsible-panel__header","aria-expanded":this.state.expanded,onClick:a(et.AnalyticsEventTypes.CLICK_EVENT,this.toggleExpanded,l),"data-analytics-id":l},o.a.createElement("div",{className:"collapsible-panel__header-left"},t),o.a.createElement("div",{className:"collapsible-panel__header-right"},o.a.createElement("div",{className:"collapsible-panel__header-right-text"},i),this.state.expanded?o.a.createElement(Je.ArrowUp,{className:"collapsible-panel__header-right-chevron"}):o.a.createElement(Je.ArrowDown,{className:"collapsible-panel__header-right-chevron"}))),c=Object(Yt.a)({"collapsible-panel__content":!0,hidden:!this.state.expanded}),d=o.a.createElement("div",{className:c,"aria-hidden":!this.state.expanded},this.props.children);return o.a.createElement("div",{className:s},r,d)}}var Bi=Object(et.withAnalytics)(Fi);var Ui=e=>{const{ariaPrimary:t,clickPrimary:i,disabledPrimary:a=!1,textPrimary:n,ariaSecondary:s,clickSecondary:l,disabledSecondary:r=!1,textSecondary:c,analyticsId:d}=e;return o.a.createElement("footer",{className:"panel-footer-component"},o.a.createElement("div",{className:"panel-footer-component__buttons"},o.a.createElement("button",{className:"button button--secondary panel-footer-component__button",onClick:Object(et.useAnalyticsAugmentEventOnElement)(et.AnalyticsEventTypes.CLICK_EVENT,l,`${d}.${c}.button`),disabled:r,"aria-label":s},c),o.a.createElement("button",{className:"button button--primary panel-footer-component__button",onClick:Object(et.useAnalyticsAugmentEventOnElement)(et.AnalyticsEventTypes.CLICK_EVENT,i,`${d}.${n}.button`),disabled:a,"aria-label":t},n)))},Vi=i("AuQm");class ji extends o.a.Component{constructor(e){super(e),this.state={}}render(){const{onChanged:e,selectedId:t,localize:i,analyticsId:a}=this.props,n=i.translate;return o.a.createElement("div",{className:"image-orientation image-orientation-toggle"},o.a.createElement(Ge.SquareToggle,{type:Ge.SquareToggleType.fillContainer,onChanged:e,selectedId:t,radioGroup:"image-orientations",analyticsId:`${a}.squareToggleGroup`,options:[{altText:n("ip.editModule.imageOrientationOptionTitle.left"),id:$.LEFT,icon:o.a.createElement(Vi.u,{className:"image-orientation image-orientation-option"})},{altText:n("ip.editModule.imageOrientationOptionTitle.right"),id:$.RIGHT,icon:o.a.createElement(Vi.v,{className:"image-orientation image-orientation-option"})},{altText:n("ip.editModule.imageOrientationOptionTitle.none"),id:$.NONE,icon:o.a.createElement(Vi.w,{className:"image-orientation image-orientation-option"})}]}))}}var Hi=Object(Ze.a)(ji),zi=i("EGyI");class Ki extends o.a.Component{constructor(e){super(e),this.onEditButtonFocus=()=>{this.setState((()=>({editButtonFocused:!0})))},this.onEditButtonBlur=()=>{this.setState((()=>({editButtonFocused:!1})))},this.onDeleteButtonFocus=()=>{this.setState((()=>({deleteButtonFocused:!0})))},this.onDeleteButtonBlur=()=>{this.setState((()=>({deleteButtonFocused:!1})))},this.state={editButtonFocused:!1,deleteButtonFocused:!1}}render(){const{link:e,t,handleOpenEditLinkImageButtonClick:i,handleDeleteLinkImageButtonClick:a,buttonTitle:n,analyticsId:s,analyticsEventAugmentor:l,hasMaxImages:r=!1}=this.props,c=`${s}.edit.button`,d=`${s}.edit.link`,u=`${s}.delete.button`;let p;if(e.details.imageHref){const s={backgroundImage:`url('${ot(e.details.imageHref)}')`},r=this.state.editButtonFocused||this.state.deleteButtonFocused;p=o.a.createElement("div",{className:"image-thumbnail",style:s},o.a.createElement("button",{onFocus:this.onEditButtonFocus,onBlur:this.onEditButtonBlur,className:r?"image-thumbnail-edit visible":"image-thumbnail-edit","aria-label":t("ip.editModule.editLinkImage",{buttonTitle:n}),onClick:l(et.AnalyticsEventTypes.CLICK_EVENT,i,c),"data-analytics-id":c,tabIndex:0},o.a.createElement(Vt.Pencil,null)),o.a.createElement("button",{onFocus:this.onDeleteButtonFocus,onBlur:this.onDeleteButtonBlur,className:r?"image-thumbnail-delete visible":"image-thumbnail-delete","aria-label":t("ip.editModule.deleteLinkImage",{buttonTitle:n}),tabIndex:0,onClick:l(et.AnalyticsEventTypes.CLICK_EVENT,a,u),"data-analytics-id":u},o.a.createElement(Je.Trash,null)),o.a.createElement("div",{className:r?"overlay visible":"overlay"}))}return r||p||(p=o.a.createElement("div",{className:"edit-image-button-add"},o.a.createElement("button",{className:"add-button","aria-label":t("ip.editModule.addLinkImageTitle",{buttonTitle:n}),onClick:l(et.AnalyticsEventTypes.CLICK_EVENT,i,c),"data-analytics-id":c},o.a.createElement(Je.Add,null)),o.a.createElement("a",{className:"small-only-link",href:void 0,onClick:l(et.AnalyticsEventTypes.CLICK_EVENT,i,d),"data-analytics-id":d},t("ip.editModule.addLinkImage")))),o.a.createElement("div",{className:"edit-image-button"},p)}}const Wi=Object(zi.a)(Ki);var qi=Object(et.withAnalytics)(Wi);class Zi extends o.a.Component{constructor(e){super(e),this.validateLinkNameInput=e=>this.props.onValidateInput(e,this.translations.linkNamePlaceholder,this.translations.validateTooLongMessage),this.validateLinkURLInput=e=>rt(e,this.translations.linkURLPlaceholder),this.handleAddLinkButtonClick=e=>{const{offset:t=0}=this.props;this.props.onInsertLink(e,this.props.rowIndex+1+t)},this.handleDeleteButtonClick=e=>this.props.onDelete(e,this.props.link.id),this.handleOpenEditLinkImageButtonClick=e=>{const{onOpenEditLinkImage:t=(()=>{})}=this.props;t(e,this.props.link)},this.handleDeleteLinkImageButtonClick=e=>{const{onDeleteEditLinkImage:t=(()=>{})}=this.props;t(e,this.props.link.id)},this.translations={}}render(){const{link:e,dragPointRef:t,localize:i,canBeReordered:a,onUpdateResource:n,hasMaxImages:s=!1,isImageColVisible:l=!0,analyticsId:r,analyticsEventAugmentor:c}=this.props,d=i.translate;this.translations.validateTooLongMessage=d("ip.editModule.validateTooLongMessage"),this.translations.linkNamePlaceholder=d("ip.editModule.linkNamePlaceholder"),this.translations.linkURLPlaceholder=d("ip.editModule.linkURLPlaceholder"),this.translations.createLinkBtn=d("ip.editModule.createLinkBtn");const u=e.details.title,p=Object(Yt.a)({"module-table__button":!0,"drag-point":!0,hidden:!a});return o.a.createElement("div",{className:"module-table__row-container",id:`dnd-${e.id}`,key:e.id},o.a.createElement("div",{className:"module-table__row module-content__row drag-drop-item__highlight-area",tabIndex:-1},o.a.createElement("div",{className:"module-table__cells module-content__cells"},l&&o.a.createElement(qi,{link:e,hasMaxImages:s,handleOpenEditLinkImageButtonClick:this.handleOpenEditLinkImageButtonClick,handleDeleteLinkImageButtonClick:this.handleDeleteLinkImageButtonClick,buttonTitle:u,analyticsId:`${r}.imageEdit`}),o.a.createElement("div",{className:"module-table__cell module-content__name-column"},o.a.createElement(wt,{id:e.id,content:e.details.title,attr:"title",buttonTitle:d("ip.editModule.editLinkName",{linkName:u}),onValueChange:n,onValidateInput:this.validateLinkNameInput,placeholder:this.translations.linkNamePlaceholder,analyticsId:`${r}.titleEdit`})),o.a.createElement("div",{className:"module-table__cell module-content__url-column"},o.a.createElement(wt,{id:e.id,content:e.details.href,attr:"href",buttonTitle:d("ip.editModule.editLinkURL",{linkName:u}),onValueChange:n,onValidateInput:this.validateLinkURLInput,placeholder:this.translations.linkURLPlaceholder,analyticsId:`${r}.urlEdit`}))),o.a.createElement("div",{className:"module-table__row-actions module-content__buttons"},o.a.createElement("div",{ref:t,className:p,draggable:!0,role:"button",tabIndex:0,id:`${e.id}-drag-point`,"aria-label":d("ip.editModule.moveLinkBtn",{linkName:u})},o.a.createElement(Je.MoveItemUpDown,null)),o.a.createElement("button",{onClick:c(et.AnalyticsEventTypes.CLICK_EVENT,this.handleDeleteButtonClick,`${r}.delete-item.button`),className:"module-table__button","aria-label":d("ip.editModule.deleteLinkBtn",{linkName:u})},o.a.createElement(Je.Trash,null)))),o.a.createElement(Ht,{onClick:this.handleAddLinkButtonClick,buttonTitle:this.translations.createLinkBtn,analyticsId:`${r}`}))}}const Gi=Object(Ze.a)(Zi);var Ji=Object(et.withAnalytics)(Gi);var Xi=Object(Zt.DragNDropItem)((e=>{const{link:t,dragPointRef:i=(()=>{}),index:a,canBeReordered:n,offset:s=0,onInsertLink:l,onDeleteEditLinkImage:r=(()=>{}),onOpenEditLinkImage:c=(()=>{}),onUpdateResource:d,onValidateInput:u,onDelete:p,hasMaxImages:m=!1,isImageColVisible:h=!0,analyticsId:g}=e;return o.a.createElement(Ji,{key:t.id,link:t,dragPointRef:i,rowIndex:a,canBeReordered:n,offset:s,onInsertLink:l,onDeleteEditLinkImage:r,onOpenEditLinkImage:c,onUpdateResource:d,onDelete:p,onValidateInput:u,hasMaxImages:m,isImageColVisible:h,analyticsId:`${g}`})}));var Qi=Object(Zt.DragNDropContainer)((e=>{const{items:t,itemOffset:i=0,dragPointRef:a=(()=>{}),onInsertLink:n,onOpenEditLinkImage:s=(()=>{}),onDeleteEditLinkImage:l=(()=>{}),onUpdateResource:r,onValidateInput:c,onDelete:d,actions:u,state:p,translations:m,hideCutoff:h=!1,maxLinksViewable:g,hasMaxImages:v=!1,isImageColVisible:E=!0,analyticsId:b}=e,I=t.map(((e,m)=>o.a.createElement(Xi,{link:e,module:e,index:m,offset:i,key:e.id,preview:o.a.createElement("div",null,o.a.createElement("div",{className:"link-name"},e.details.title)),canBeReordered:t.length>1,onInsertLink:n,hasMaxImages:v,isImageColVisible:E,dragPointRef:a,onDeleteEditLinkImage:l,onOpenEditLinkImage:s,onUpdateResource:r,onValidateInput:c,onDelete:d,actions:u,state:p,analyticsId:`${b}.item`})));if(!h&&i+t.length>g){const e=o.a.createElement("div",{key:"AllLinksCutoff",className:"module-content__divider-container"},o.a.createElement("div",{className:"module-table__row module-content__row module-content__divider",id:"split-section-divider"},o.a.createElement("span",{className:"module-content__divider-text"},m.splitSectionText)),o.a.createElement("div",{className:"module-content__divider-bar"},o.a.createElement("div",{className:"module-content__divider-bar__line"})));I.splice(g-1-i,0,e)}return o.a.createElement("div",{className:"module-table__body",id:"modules-section"},0===i&&o.a.createElement(Ht,{onClick:e=>{n(e,0)},buttonTitle:m.createLinkBtn,analyticsId:`${b}`}),I)}));class Yi extends o.a.Component{constructor(e){super(e),this.translations={},this.resourceImages={},this.onReorderLinks=(e,t)=>{const i=this.props.module.resources.filter((e=>!this.isLinkResource(e))),a=this.props.module.resources.filter((t=>this.isLinkResource(t)&&!e.includes(t))),n=[...a[0]&&a[0].details.imageHref?[...a,...e]:[...e,...a],...i];this.props.setUnsavedResources(n,this.validateResources(n),(()=>{var e;null===(e=document.getElementById(`dnd-${t.id}`))||void 0===e||e.focus()}))},this.onUpdateResource=(e,t,i)=>{const a=this.props.module.resources.findIndex((t=>t.id===e));if(-1!==a&&t!==this.props.module.resources[a].details[i]){const n=this.props.module.resources.map(((e,n)=>n===a?{...e,details:{...e.details,[i]:t}}:e));this.props.setUnsavedResources(n,this.validateResources(n),(()=>{const t=document.getElementById(`${e}-${i}`);t&&t.focus()}))}},this.onDelete=(e,t)=>{e.preventDefault();const i=this.props.module.resources,a=i.findIndex((e=>e.id===t)),n=[...i.slice(0,a),...i.slice(a+1)];this.props.setUnsavedResources(n,this.validateResources(n),(()=>{this.jumpToFocus(a-1)}))},this.onInsertLink=(e,t)=>{e.preventDefault();const i=this.props.module.resources,a=F(this.translations.defaultLinkTitle,this.props.module.id),n=i.filter(this.isLinkResource),s=this.props.module.resources.filter((e=>!this.isLinkResource(e))),o=this.props.module.resources.filter((e=>this.isLinkResource(e)&&e.details.imageHref)).length,l=o>t?o:t,r=[...n.slice(0,l),a,...n.slice(l),...s];this.props.setUnsavedResources(r,this.validateResources(r),(()=>{this.jumpIntoFocusNewLink(l)}))},this.onImageOrientationToggleClick=e=>{const t=ht(this.props.module);if(e!==t){const i={...this.props.module.details,imageOrientation:e},a=this.saveOrRestoreImageHrefs(t,e);this.props.onUpdateDetails(i,gt(i.imageOrientation)),this.props.setUnsavedResources(a,this.validateResources(a))}},this.onDeleteEditLinkImage=(e,t)=>{this.setState((()=>({resourceId:t,isShowPopup:!0})))},this.onOpenEditLinkImage=(e,t)=>{this.props.dispatch(qe(t)),this.props.onOpenEditImagePanel(t)},this.onPopupCancel=()=>{this.setState((()=>({resourceId:null,isShowPopup:!1})))},this.onPopupOk=()=>{const e=this.props.module.resources.map((e=>e.id===this.state.resourceId?{...e,details:{...e.details,imageHref:"",imageId:""}}:e));this.props.setUnsavedResources(e,this.validateResources(e)),this.setState({resourceId:null,isShowPopup:!1}),this.props.dispatch(qe(null))},this.saveOrRestoreImageHrefs=(e,t)=>{this.props.dispatch(qe(null));const i=[],a=t===$.NONE,n=e===$.NONE;for(let e=0;e<this.props.module.resources.length;e++){let t=this.props.module.resources[e];this.isLinkResource(t)&&(a&&t.details.imageHref?(this.resourceImages[t.id]={imageHref:t.details.imageHref,imageId:t.details.imageId},t={...t,details:{...t.details,imageHref:"",imageId:""}}):n&&(t={...t,details:{...t.details,imageHref:this.resourceImages[t.id]?this.resourceImages[t.id].imageHref:"",imageId:this.resourceImages[t.id]?this.resourceImages[t.id].imageId:""}},delete this.resourceImages[t.id]),i.push(t))}return i},this.isImageResource=e=>e.type===A,this.isLinkResource=e=>e.type===P,this.hasValidTitleAndHref=e=>this.props.onValidateInput(e.details.title).isValid&&rt(e.details.href).isValid,this.jumpToFocus=e=>{let t=e;-1===t&&(t=0);const i=document.querySelectorAll("#modules-section .module-table__row-container .module-table__row")[t];null==i||i.focus()},this.jumpIntoFocusNewLink=e=>{let t=e;-1===t&&(t=0);const i=document.querySelectorAll("#modules-section .module-table__row-container .module-table__row")[t];if(i){const e=i.querySelector(".inline-edit-container__link");null==e||e.click()}},this.validateResources=e=>e.length>0&&e.filter(this.isLinkResource).every((e=>this.hasValidTitleAndHref(e))),this.translations={},this.state={resourceId:null,isShowPopup:!1},this.resourceImages={}}UNSAFE_componentWillReceiveProps(e){let t=!1,i=e.module.resources;if(!ht(e.module)){const t={...e.module.details,imageOrientation:$.LEFT};e.onUpdateDetails(t,gt(t.imageOrientation))}const a=e.session.image;if(a){const e=a.details?a.details.imageHref:null;i=i.map((i=>i.id===a.id&&e!==i.details.imageHref?(t=!0,a):i))}const n=[],s=[],o=[];let l=-1,r=!1;for(let e=0;e<i.length;e++){const t=i[e];this.isLinkResource(t)?t.details.imageHref?(r=l>=0&&e>l,s.push(t)):(l<0&&(l=e),o.push(t)):n.push(t)}if(r&&(i=[...s,...o,...n],t=!0),i.some((e=>this.isImageResource(e)))&&(i=i.filter((e=>!this.isImageResource(e))),t=!0),t){const t=[...i];e.setUnsavedResources(t,this.validateResources(t))}}render(){const e=this.props.localize.translate,{module:t,onValidateInput:i,analyticsId:a}=this.props;this.translations.createLinkBtn=e("ip.editModule.createLinkBtn"),this.translations.validateModuleName=e("ip.editModule.validateModuleName"),this.translations.validateTooLongMessage=e("ip.editModule.validateTooLongMessage"),this.translations.splitSectionText=e("ip.editModule.splitSectionText"),this.translations.incompleteLink=e("ip.editModule.incompleteLink"),this.translations.incompleteContent=e("ip.editModule.incompleteContent"),this.translations.defaultLinkTitle=e("ip.defaultData.linkName");const n=vt(t),s=n!==$.NONE,l=[],r=[];for(let e=0;e<t.resources.length;e++){const i=t.resources[e];this.isLinkResource(i)&&(i.details.imageHref&&s?l.push(i):r.push(i))}const c=l.length>=1,d=o.a.createElement("div",null,0===l.length&&0===r.length&&o.a.createElement(Ht,{onClick:e=>{this.onInsertLink(e,0)},buttonTitle:this.translations.createLinkBtn,analyticsId:`${a}`}),l.length>0&&o.a.createElement(Qi,{items:l,hasMaxImages:c,isImageColVisible:s,onReorderItem:this.onReorderLinks,scrollContainerId:"edit-module-section",translations:this.translations,onUpdateResource:this.onUpdateResource,onValidateInput:i,onDelete:this.onDelete,onInsertLink:this.onInsertLink,maxLinksViewable:5*(n===$.NONE?2:ei),onDeleteEditLinkImage:this.onDeleteEditLinkImage,onOpenEditLinkImage:this.onOpenEditLinkImage,analyticsId:`${a}.editSection`}),r.length>0&&o.a.createElement(Qi,{items:r,itemOffset:l.length,hasMaxImages:c,isImageColVisible:s,onReorderItem:this.onReorderLinks,scrollContainerId:"edit-module-section",translations:this.translations,onUpdateResource:this.onUpdateResource,onValidateInput:i,onDelete:this.onDelete,onInsertLink:this.onInsertLink,maxLinksViewable:5*(n===$.NONE?2:ei),onDeleteEditLinkImage:this.onDeleteEditLinkImage,onOpenEditLinkImage:this.onOpenEditLinkImage,analyticsId:`${a}.editSection`}));return o.a.createElement("div",{className:"edit-image-links-module"},this.state.isShowPopup?o.a.createElement(Dt,{title:e("ip.editPage.confirmDeleteTitle"),id:"inline-link-image-delete-confirmation",content:e("ip.editPage.confirmRemoveImageContentWarning"),onOk:this.onPopupOk,onOkText:e("ip.editPage.confirmDeleteBtn"),onCancel:this.onPopupCancel,onCancelText:e("ip.editPage.cancelDeleteBtn"),analyticsId:`${a}.confirmation.popup`}):"",o.a.createElement("div",null,o.a.createElement("h4",{className:"subheader edit-image-links-module__section-heading"},e("ip.editModule.moduleLayout")),o.a.createElement(Hi,{onChanged:this.onImageOrientationToggleClick,selectedId:n,analyticsId:`${a}.imageOrientation.toggle`})),o.a.createElement("h4",{className:"subheader edit-image-links-module__section-heading"},e("ip.editModule.moduleContent")),o.a.createElement("div",{className:"module-table"},o.a.createElement("div",{className:"module-table__head module-content__head"},o.a.createElement("div",{className:"module-table__heading-row"},s&&o.a.createElement("div",{className:"module-table__heading module-content__link-image-column"},e("ip.editModule.contentLinkImage")),o.a.createElement("div",{className:"module-table__heading module-content__name-column"},e("ip.editModule.contentLinkName")),o.a.createElement("div",{className:"module-table__heading module-content__url-column"},e("ip.editModule.contentURL")),o.a.createElement("div",{className:"module-table__row-actions"}))),d))}}var ea=Object(Ze.a)(Yi);class ta extends o.a.Component{shouldComponentUpdate(){return!1}render(){const{pluginsConfig:e={},startingBBML:t,onChange:i}=this.props,a=nt(e);return o.a.createElement(at.BbEditor,{bbml:t,onChange:i,plugins:a})}}var ia=ta;var aa=e=>{const{module:t,setUnsavedResources:i,pluginsConfig:a}=e,[n,l]=Object(s.useState)(null),r={},c=Object(Qe.a)(),d=Object(s.useRef)(!1),u=Object(s.useCallback)((e=>{if(d.current=d.current||e.isDirty,d){const a=e.toBbML(),s=[{...t.resources[0],details:{...t.resources[0].details,bbml:a}}];a?a&&n&&l(null):l(r.errorMessage),i(s,!!a)}}),[t,i,n,r.errorMessage,d]);return r.errorMessage=c("ip.editModule.validateContent"),o.a.createElement("div",{className:"edit-content-module"},o.a.createElement("h4",{className:"edit-content-module__section-heading"},c("ip.editModule.moduleContent")),o.a.createElement("div",{className:"content-editor bb-editor-fill"},o.a.createElement(ia,{startingBBML:t.resources[0].details.bbml||"",onChange:u,pluginsConfig:a})),n&&o.a.createElement("div",{className:"edit-content-module-error"},o.a.createElement(jt,{size:"small",title:n})))},na=i("nsO7");var sa=e=>{const{module:t,setUnsavedResources:i,currentLocale:a}=e,[n,l]=Object(s.useState)(null),{translate:r,isRtl:c}=Object(ui.a)(),u={},p=Object(s.useCallback)(((e,a)=>{if(a){const a=[{...t.resources[0],details:{...t.resources[0].details,html:e}}];e?e&&n&&l(null):l(u.errorMessage),i(a,!!e)}}),[t,i,n,u.errorMessage]),m=Object(na.throttle)(p,1e3);return u.errorMessage=r("ip.editModule.validateHtml"),o.a.createElement("div",{className:"edit-html-module"},o.a.createElement("div",{className:"content-editor bb-editor-fill"},o.a.createElement("span",{id:"html-editor-label-id",className:"html-editor-label"},r("ip.moduleList.createHTMLModuleText")),o.a.createElement(d.a,{locale:a},o.a.createElement(pi.a,{ariaLabel:r("ip.moduleList.createHTMLModuleText"),ariaLabelledBy:"html-editor-label-id",isRtl:c(),customClasses:"html-editor-container",value:Object(yt.a)(t.resources[0].details.html),onChange:m,readOnly:!1,allowFullScreen:!0,...e})),n&&o.a.createElement("div",{className:"edit-html-module-error"},o.a.createElement(jt,{size:"small",title:n}))))};var oa=e=>{const{dispatch:t,module:i,session:a,onOpenEditImagePanel:n,setUnsavedResources:s,onUpdateDetails:l,onValidateInput:r,pluginsConfig:c,analyticsId:d,currentLocale:u}=e;switch(i.type){case x:return o.a.createElement(ea,{dispatch:t,module:i,session:a,onOpenEditImagePanel:n,setUnsavedResources:s,onUpdateDetails:l,onValidateInput:r,analyticsId:`${d}.imageModule`});case S:return o.a.createElement(aa,{module:i,setUnsavedResources:s,pluginsConfig:c});case O:return o.a.createElement(sa,{module:i,setUnsavedResources:s,currentLocale:u});default:return null}},la=oa;class ra extends o.a.Component{constructor(e){super(e),this.shouldFocusPickerOnNextUpdate=!1,this.nextFocus=null,this.onEmptyInputFocus=e=>this.getFilteredSuggestions(e),this.onFilterChanged=(e,t)=>{const i=this.getFilteredSuggestions(t);return e?i.filter((t=>{var i;return null===(i=t.name)||void 0===i?void 0:i.toLowerCase().startsWith(e.toLowerCase())})):i},this.onSelectedChange=(e,t)=>{this.state.selectedItems.forEach(((t,i)=>{-1===(null==e?void 0:e.indexOf(t))&&(i<e.length?this.nextFocus=i:e.length?this.nextFocus=e.length-1:this.shouldFocusPickerOnNextUpdate=!0)}));let i=[];t&&this.isAllUsers([t])||(i=null==e?void 0:e.reduce(((e,t)=>(""!==t.key&&e.push(t.key),e)),[])),this.props.onUpdateInstitutionRoleIds(null!=i?i:[])},this.getFilteredSuggestions=e=>{const t=this.isAllUsers(e)?[]:this.allUsers();return this.props.role.roles.reduce(((t,i)=>((null==e?void 0:e.some((e=>e.key===i.roleKey)))||t.push({key:i.roleKey,name:i.roleName}),t)),t)},this.getSelectedItems=(e,t)=>It(e,t.roles),this.getItemAddedStatusMessage=e=>this.props.localize.translate("ip.editModule.rolesSelector.selectionAdded",{item:e.name}),this.removeButtonAriaLabel=e=>this.props.localize.translate("ip.editModule.rolesSelector.removeSelection",{item:null==e?void 0:e.name}),this.allUsers=()=>[{key:"",name:this.translations.allUsers}],this.isAllUsers=e=>1===(null==e?void 0:e.length)&&""===e[0].key,this.allUsersStringPopulated=()=>""!==this.props.localize.translate("ip.moduleList.allUsers"),this.translations={};const t=this.getSelectedItems(e.institutionRoleIds,e.role);this.state={hasFocusedInput:!1,isLoading:e.role.loading,selectedItems:t,disabledPickerItems:!t.length}}UNSAFE_componentWillReceiveProps(e){const t={selectedItems:this.state.selectedItems};e.expandRoles&&!this.state.hasFocusedInput&&this.allUsersStringPopulated()&&(this.shouldFocusPickerOnNextUpdate=!0,t.hasFocusedInput=!0);const i=e.institutionRoleIds!==this.props.institutionRoleIds,a=e.role.roles!==this.props.role.roles;if(i||a){const i=this.getSelectedItems(e.institutionRoleIds,e.role);e.role.loading||i.length===e.institutionRoleIds.length?(t.isLoading=e.role.loading,t.selectedItems=i,t.disabledPickerItems=!i.length):e.onUpdateInstitutionRoleIds(i.map((e=>e.key)))}this.setState((()=>t))}componentDidUpdate(){if(this.shouldFocusPickerOnNextUpdate&&this.picker&&(this.shouldFocusPickerOnNextUpdate=!1,this.picker.input.focus()),null!==this.nextFocus&&this.picker){const e=document.querySelectorAll("button.ms-TagItem-close")[this.nextFocus];null==e||e.focus(),this.nextFocus=null}}render(){const{localize:e,analyticsId:t}=this.props,{translate:i}=e;return this.translations.allUsers=i("ip.moduleList.allUsers"),this.translations.inputPlaceholder=i("ip.editModule.rolesSelector.inputPlaceholder"),this.translations.noResults=i("ip.editModule.rolesSelector.noResults"),this.translations.suggestionsAvailable=i("ip.editModule.rolesSelector.suggestionsAvailable"),o.a.createElement("div",{className:"role-picker-container"},o.a.createElement(Ge.TagPicker,{horizontalLayout:!0,componentRef:e=>{this.picker=e},disabledPickerItems:this.state.disabledPickerItems,onEmptyInputFocus:this.onEmptyInputFocus,onChange:this.onSelectedChange,onResolveSuggestions:this.onFilterChanged,selectedItems:this.state.selectedItems.length?this.state.selectedItems:this.allUsers(),getItemAddedStatusMessage:this.getItemAddedStatusMessage,removeButtonAriaLabel:this.removeButtonAriaLabel,pickerSuggestionsProps:{noResultsFoundText:this.translations.noResults,suggestionsAvailableAlertText:this.translations.suggestionsAvailable},inputLabel:this.translations.inputPlaceholder,analyticsId:`${t}.tagPicker`}))}}const ca=Object(Ze.a)(ra);var da=Object(et.withAnalytics)(ca);class ua extends o.a.Component{constructor(e){super(e),this.onUpdateDetails=(e,t)=>{if(e){const i={...this.state.module,details:e};this.setState((()=>({module:i,isModuleDirty:!0,isModuleValid:t})))}},this.onUpdateInstitutionRoleIds=e=>{this.setState((t=>({module:{...t.module,institutionRoleIds:e},areRolesDirty:!0})))},this.onUpdateTitle=(e,t)=>{if(t!==this.state.module.title){const e={...this.state.module,title:t},i=dt(t).isValid;this.setState((()=>({module:e,isModuleDirty:!0,isModuleValid:i})))}},this.onSave=()=>{this.setState({isSaving:!0});const e=(e=>{if(e&&e.type===O){const t=e.resources[0].details.html,i=[{...e.resources[0],details:{...e.resources[0].details,html:Object(yt.b)(t)}}];return{...e,resources:i}}return e})(this.state.module),t=mt(e);this.props.saveModule(t,this.state.isModuleDirty,this.state.areResourcesDirty,this.state.areRolesDirty).then((()=>{this.props.onClose()})).catch((()=>{})).finally((()=>{this.setState({isSaving:!1})}))},this.onCancel=()=>{this.state.isModuleDirty||this.state.areResourcesDirty||this.state.areRolesDirty?this.setState((()=>({popupProps:{title:this.translations.closeTitle,id:"edit-module-cancel-confirmation",content:this.translations.closeContent,onOk:this.onPopupOk,onCancel:this.onPopupCancel,onOkText:this.translations.closeBtn,onCancelText:this.translations.cancelBtnText}}))):this.props.onClose()},this.onPopupOk=()=>{this.setState((()=>({popupProps:null}))),this.props.onClose()},this.onPopupCancel=()=>{this.setState((()=>({popupProps:null})))},this.setUnsavedResources=(e,t,i=(()=>{}),a=!0)=>{this.setState((i=>({module:{...i.module,resources:e},areResourcesDirty:a,areResourcesValid:t})),i)},this.filterValidRolesOnModule=e=>e&&e.institutionRoleIds?{...e,institutionRoleIds:It(e.institutionRoleIds,this.props.role.roles).map((e=>e.key))}:e,this.overrideFocusAndOpenEditImagePanel=e=>{let t=null;e&&(t=e.id,e.details.imageHref?this.props.setFocusOverride(`#dnd-${e.id}.module-table__row-container .edit-image-button .add-button`,".institution-page-container"):this.props.setFocusOverride(`#dnd-${e.id}.module-table__row-container .edit-image-button .image-thumbnail-edit`,".institution-page-container")),this.props.onOpenEditImagePanel(t)},this.generateAudienceLabel=()=>{var e;const t=this.props.localize.translate("ip.editModule.rolesSelector.allUsers"),i=this.props.localize.translate("ip.editModule.rolesSelector.multipleRoles");this.props.localize.translate("ip.editModule.rolesSelector.unknownRole");return o.a.createElement("span",{className:"audience-container"},this.state.hasInvalidRoles&&o.a.createElement(Je.Attention,{className:"attention-icon"}),ft(null!==(e=this.state.module.institutionRoleIds)&&void 0!==e?e:[],this.props.role.roles,t,i))},this.clearSessionImage=()=>this.props.dispatch(qe(null)),this.validateModuleHeaderInput=e=>dt(e,this.translations.validateModuleName,this.translations.validateTooLongMessage),this.handleModuleHeaderEdit=e=>this.setState((()=>({isHeaderEditing:e}))),this.emptyCallback=()=>{};const{module:t=null,startDirty:i=!1,role:a,resourceStartValid:n=!0}=e,s=!(!t||!t.institutionRoleIds||a.loading)&&!bt(t.institutionRoleIds,a.roles||[]);this.state={module:s?this.filterValidRolesOnModule(t):t,isModuleDirty:i,areResourcesDirty:i,areRolesDirty:i||s,isModuleValid:!0,areResourcesValid:n,popupProps:null,isHeaderEditing:!1,hasInvalidRoles:s,isSaving:!1},this.translations={}}UNSAFE_componentWillReceiveProps(e){const{module:t=null,role:i}=this.props;if(!Et(e.module,t)||e.role.loading!==i.loading){const t=e.module&&e.module.institutionRoleIds&&!e.role.loading&&!bt(e.module.institutionRoleIds,e.role.roles||[]);this.setState((()=>({module:t?this.filterValidRolesOnModule(e.module):e.module,hasInvalidRoles:t})))}}componentWillUnmount(){this.props.dispatch({type:We})}render(){var e,t;const{expandRoles:i=!1}=this.props,a=this.state.isModuleDirty||this.state.areResourcesDirty||this.state.areRolesDirty,n=!this.state.isModuleValid||!this.state.areResourcesValid,s=!a||n||this.state.isSaving,l="institutionPage.editModule",r=this.props.localize.translate;return this.translations.closeTitle=r("ip.editModule.closeTitle"),this.translations.closeContent=r("ip.editModule.closeContent"),this.translations.closeBtn=r("ip.editModule.closeBtn"),this.translations.cancelBtnText=r("ip.editModule.cancelBtnText"),this.translations.validateModuleName=r("ip.editModule.validateModuleName"),this.translations.validateTooLongMessage=r("ip.editModule.validateTooLongMessage"),this.translations.incompleteBtn=r("ip.editModule.incompleteBtn"),o.a.createElement("div",null,o.a.createElement("div",{className:"edit-module-page flex-page-container"},o.a.createElement("div",{id:"edit-module-section",className:"flex-page-content has-footer"},this.state.popupProps?o.a.createElement(Dt,{...this.state.popupProps,analyticsId:`${l}.confirmation.popup`}):"",o.a.createElement("div",{className:"page-header "+(this.state.isHeaderEditing?"-is-editing":"")},o.a.createElement("span",{className:"page-header__super-title"},r("ip.editModule.pageHeader")),o.a.createElement(wt,{id:this.state.module.id,content:this.state.module.title,attr:"title",buttonTitle:r("ip.editModule.editModuleName"),onValueChange:this.onUpdateTitle,onValidateInput:this.validateModuleHeaderInput,onInputEdit:this.handleModuleHeaderEdit,isHeader:!0,analyticsId:`${l}.title`})),o.a.createElement(Bi,{className:"module-roles-panel",headerLeft:o.a.createElement("span",null,r("ip.editModule.rolesSelector.label")),headerRight:this.generateAudienceLabel(),startExpanded:i||this.state.hasInvalidRoles,analyticsId:`${l}.moduleRolesPanel`},o.a.createElement("div",{className:"module-roles-panel__content"},o.a.createElement("h2",{className:"subheader"},r("ip.editModule.rolesSelector.instructionsHeader")),r("ip.editModule.rolesSelector.instructionsDetails"),this.state.hasInvalidRoles&&o.a.createElement("div",{className:"module-roles-panel__unknown-role-error"},r("ip.moduleList.unknownRoleErrorMessage")),o.a.createElement(da,{institutionRoleIds:null!==(e=this.state.module.institutionRoleIds)&&void 0!==e?e:[],role:this.props.role,expandRoles:i||null!==(t=this.state.hasInvalidRoles)&&void 0!==t&&t,onUpdateInstitutionRoleIds:this.onUpdateInstitutionRoleIds,analyticsId:`${l}.moduleRolesPicker`}))),this.state.module.type!==O&&o.a.createElement("div",{className:"module-preview-component"},o.a.createElement("div",{className:"module-preview-component__container"},o.a.createElement("h3",{className:"subheader module-preview-component__title"},r("ip.moduleList.previewText")),o.a.createElement("h3",{className:"preview__title"},this.state.module.title),o.a.createElement(gi,{module:this.state.module,dispatch:this.emptyCallback,locale:this.props.currentLocale,openAll:this.emptyCallback,pluginsConfig:this.props.pluginsConfig,preview:!0,analyticsId:`${l}.previewModule`}))),o.a.createElement("div",{className:"module-editor-component"},o.a.createElement(la,{dispatch:this.props.dispatch,module:this.state.module,session:this.props.session,onOpenEditImagePanel:this.overrideFocusAndOpenEditImagePanel,setUnsavedResources:this.setUnsavedResources,onUpdateDetails:this.onUpdateDetails,onValidateInput:dt,pluginsConfig:this.props.pluginsConfig,analyticsId:`${l}.content`,currentLocale:this.props.currentLocale})))),o.a.createElement(Ui,{clickPrimary:this.onSave,textPrimary:r("ip.editModule.saveBtnText"),ariaPrimary:r("ip.editModule.saveChangesAria"),disabledPrimary:s,clickSecondary:this.onCancel,textSecondary:r("ip.editModule.cancelBtnText"),ariaSecondary:r("ip.editModule.cancelChangesAria"),analyticsId:`${l}.footer`}))}}var pa=Object(Ze.a)(ua);class ma extends o.a.Component{render(){const{title:e="",superTitle:t="",browserSettingsHref:i,localize:a,analyticsId:n,analyticsEventAugmentor:s}=this.props,l=`${n}.settings.link`;return o.a.createElement("header",{className:"panel-header-component panel-settings-header"},o.a.createElement("h2",{className:"subheader panel-header-component__super-title"},t),o.a.createElement("div",{className:"panel-settings-header__title-row"},o.a.createElement("h1",{className:"subheader panel-header-component__title"},e),o.a.createElement("a",{className:"icon super-clear button js-open-settings",title:a.translate("ip.editPage.browserSettings"),href:i,onClick:s(et.AnalyticsEventTypes.CLICK_EVENT,(()=>{}),l),"data-analytics-id":l},o.a.createElement(Vt.Settings,null),o.a.createElement("span",{className:"sr-only"},a.translate("ip.editPage.browserSettings")))))}}const ha=Object(Ze.a)(ma);var ga=Object(et.withAnalytics)(ha);class va extends o.a.Component{render(){const{contentCollectionSettings:e,customClasses:t="",localize:i,focusRef:a=(()=>{}),analyticsId:n,analyticsEventAugmentor:s,imageDimensionMessage:l=""}=this.props,r=i.translate,c=`${n}.insertFromCollection.link`,d=`${n}.insertFromCollection.button`;return e.shouldShowWindowSettingModal?o.a.createElement("button",{className:`button button--primary ${t}`,onClick:s(et.AnalyticsEventTypes.CLICK_EVENT,e.openWindowSettingModal,d),"data-analytics-id":d,"aria-label":r("ip.editPage.insertFromContentCollectionAria"),ref:a},r("ip.editPage.insertFromContentCollectionBtn")):o.a.createElement("a",{className:`button button--primary ${t}`,href:e.pickerHref,target:e.shouldOpenInNewWindow?"_blank":"","aria-label":`${r("ip.editPage.insertFromContentCollectionAria")} ${l}`,ref:a,rel:e.shouldOpenInNewWindow?"opener":"",onClick:s(et.AnalyticsEventTypes.CLICK_EVENT,(()=>{}),c),"data-analytics-id":c},r("ip.editPage.insertFromContentCollectionBtn"))}}const Ea=Object(Ze.a)(va);var ba=Object(et.withAnalytics)(Ea),Ia=i("tN4z");function fa(e,t,i=""){const{session:a,imageToSave:n}=e,s=a.image||null;let o=!1,l="",r="";return s&&(o=!!s.details[t],l=n?n.url:s.details[t],r=n?n.id:s.details[i]),{resource:s,imageUrl:l,imageId:r,enableTrashIcon:o,saveDisabled:!0,isShowPopup:!1,imageIsLoading:!1,imageIsError:!1}}class ya extends o.a.Component{constructor(e){super(e),this.onInsertImage=()=>{const e=this.state.imageUrl;if(e){const t=new Image;t.src=st(e),this.setState({imageIsLoading:!0}),t.onload=()=>{const t=e;this.setState((e=>({resource:{...e.resource,details:{...e.resource.details,[this.hrefKey]:t,[this.imageIdKey]:e.imageId}},saveDisabled:!1,imageIsLoading:!1,enableTrashIcon:!0})))},t.onerror=()=>{this.setState({imageIsError:!0,imageIsLoading:!1,imageUrl:""})}}},this.onPopupOk=()=>{this.setState((e=>({resource:{...e.resource,details:{...e.resource.details,[this.hrefKey]:"",[this.imageIdKey]:""}},saveDisabled:!1,isShowPopup:!1,enableTrashIcon:!1,imageUrl:"",imageId:""})))},this.onPopupCancel=()=>{this.setState({isShowPopup:!1})},this.onInputChange=e=>{e.target.value.trim(),this.setState({imageUrl:e.target.value})},this.onCloseError=()=>{this.setState({imageIsError:!1,imageUrl:"",imageId:""})},this.clickDeleteOnPreview=()=>{this.setState({isShowPopup:!0})},this.clickSave=()=>{this.props.dispatch(qe(this.state.resource)),this.props.onClose()},this.clickCancel=()=>{this.props.onClose()},this.hrefKey="imageHref",this.imageIdKey="imageId",this.state=fa(e,this.hrefKey,this.imageIdKey)}componentDidMount(){this.props.imageToSave&&this.state.imageUrl&&this.onInsertImage()}UNSAFE_componentWillReceiveProps(e){if(e.session.image&&e.session.image.id!==e.linkId&&e.onClose(),null===this.state.resource&&this.setState(fa(e,this.hrefKey)),e.imageToSave&&e.imageToSave.url!==this.state.imageUrl){const t=e.imageToSave;this.setState((()=>({imageUrl:t.url,imageId:t.id})),this.onInsertImage)}}render(){const{imageToSave:e=null,contentCollectionSettings:t={browserSettingsHref:"",openWindowSettingModal:()=>{},pickerHref:"",shouldShowWindowSettingModal:!1}}=this.props,i="institutionPage.editImage.resource",a=this.props.localize.translate,{resource:n,enableTrashIcon:s}=this.state,l=`${i}.deleteImage.button`,r=s?o.a.createElement("button",{className:"edit-image-component__delete-icon",onClick:this.props.analyticsEventAugmentor(et.AnalyticsEventTypes.CLICK_EVENT,this.clickDeleteOnPreview,l),"data-analytics-id":l,"aria-label":a("ip.editPage.deleteImageTitle")},o.a.createElement(Je.Trash,null)):"",c=this.state.imageIsLoading?o.a.createElement(Ia.AnalyticsCircularProgress,{ariaLabel:a("ip.editPage.imageIsLoadingAriaLabel")}):null,d=[{text:a("ip.editPage.invalidImageBtn"),action:this.onCloseError}],u=n&&n.details[this.hrefKey]?ot(n.details[this.hrefKey]):Jt.a,p=this.props.imageToSave?a("ip.editPage.confirmRemoveImageContent"):a("ip.editPage.confirmRemoveImageContentWarning");return o.a.createElement("div",null,o.a.createElement("div",{className:"edit-image-component flex-page-container"},this.state.isShowPopup?o.a.createElement(Dt,{title:a("ip.editPage.confirmDeleteTitle"),id:"resource-image-delete-confirmation",content:p,onOk:this.onPopupOk,onOkText:a("ip.editPage.confirmDeleteBtn"),onCancel:this.onPopupCancel,onCancelText:a("ip.editPage.cancelDeleteBtn"),analyticsId:`${i}.confirmation.popup`}):"",this.state.imageIsError?o.a.createElement($t,{title:a("ip.editPage.invalidImageSelectedTitle"),id:"edit-resource-image-error",content:a("ip.editPage.invalidImageSelectedContent"),onCancel:this.onCloseError,customControls:d,elementToFocusOnDismiss:this.contentCollectionLauncher,analyticsId:`${i}.error.popup`}):"",o.a.createElement("div",{className:"flex-page-content has-footer"},o.a.createElement(ga,{superTitle:a("ip.editPage.superTitle"),title:a("ip.editPage.editLinkImage"),browserSettingsHref:t.browserSettingsHref,analyticsId:`${i}.header`}),o.a.createElement("div",{className:"flex-page-content__grow edit-image-component__content"},o.a.createElement("div",{className:"edit-image-component__preview"},r,c,o.a.createElement("img",{className:"edit-image-component__preview-img",src:u,alt:""})),o.a.createElement("div",{className:"edit-image-component__content-collection"},o.a.createElement(ba,{customClasses:"edit-logo-component__content_collection_button",contentCollectionSettings:t,focusRef:e=>{this.contentCollectionLauncher=e},analyticsId:`${i}.content.launcher`}),!this.state.saveDisabled&&this.state.imageUrl&&o.a.createElement("div",{role:"alert","aria-live":"assertive",className:"edit-image-component__content-collection-warning",id:"edit-image-component-content-collection-warning"},a("ip.editPage.contentCollectionResourcePermissionMessage")))))),o.a.createElement(Ui,{clickPrimary:this.clickSave,disabledPrimary:this.state.saveDisabled,textPrimary:a("ip.editPage.saveChangesBtn"),ariaPrimary:a("ip.editPage.saveChangesAria"),clickSecondary:this.clickCancel,textSecondary:a("ip.editPage.cancelChangesBtn"),ariaSecondary:a("ip.editPage.cancelChangesAria"),analyticsId:`${i}.footer`}))}}const Ca=Object(Ze.a)(ya);var ka=Object(et.withAnalytics)(Ca);function La(e){const{page:t,type:i,imageToSave:a=null}=e,n=t.loading?null:t;let s=!1;if(n){s=!!("logo"===i?n.logoId:n.bannerId)}return{page:n,imageIsLoading:!1,enableTrashIcon:s,imageIsError:!1,saveDisabled:!0,isShowPopup:!1,imageUrl:a?a.url:"",imageId:a?a.id:""}}class wa extends o.a.Component{constructor(e){super(e),this.onInsertImage=()=>{const{type:e}=this.props,t=this.state.imageUrl;if(t){const i=new Image;i.src=st(t),this.setState({imageIsLoading:!0}),i.onload=()=>{const i="logo"===e?{logoId:t}:{bannerId:t};this.setState((e=>({page:{id:e.page.id,...i},saveDisabled:!1,imageIsLoading:!1,enableTrashIcon:!0})))},i.onerror=()=>{this.setState({imageIsError:!0,imageIsLoading:!1,imageUrl:"",imageId:""})}}},this.onPopupOk=()=>{const{type:e}=this.props,t="logo"===e?{logoId:""}:{bannerId:""};this.setState((e=>({page:{id:e.page.id,...t},saveDisabled:!1,isShowPopup:!1,enableTrashIcon:!1,imageUrl:"",imageId:""})))},this.onPopupCancel=()=>{this.setState({isShowPopup:!1})},this.onInputChange=e=>{this.setState({imageUrl:e.target.value})},this.onCloseError=()=>{this.setState({imageIsError:!1,imageUrl:"",imageId:"",isShowPopup:!1}),this.props.onClose()},this.clickCancel=()=>{this.props.onClose()},this.clickSave=()=>{const{dispatch:e}=this.props;e(we());const t={page:mt(this.state.page),imageIds:[this.state.imageId]};e(_e(t)).then((()=>{this.props.onClose()})).catch((e=>{if(e!==ve)throw e}))},this.clickDeleteOnPreview=()=>{this.setState({isShowPopup:!0})},this.state=La(e)}componentDidMount(){this.state.imageUrl&&this.onInsertImage()}componentDidUpdate(){const{page:e,imageToSave:t}=this.props;e.loading||null!==this.state.page||this.setState(La(this.props)),t&&t.url!==this.state.imageUrl&&this.setState({imageUrl:t.url,imageId:t.id},this.onInsertImage)}render(){const{imageToSave:e=null,contentCollectionSettings:t={browserSettingsHref:"",openWindowSettingModal:()=>{},pickerHref:"",shouldShowWindowSettingModal:!1}}=this.props,i="institutionPage.editImage.page";if(this.props.page.loading)return o.a.createElement("div",{className:"edit-logo-component"},o.a.createElement(Ot,null));const a=this.props.localize.translate,{page:n,enableTrashIcon:s}=this.state,l=`${i}.deleteImage.button`,r=s?o.a.createElement("button",{className:"edit-logo-component__delete-icon","aria-label":a("ip.editPage.deleteImageTitle"),onClick:this.props.analyticsEventAugmentor(et.AnalyticsEventTypes.CLICK_EVENT,this.clickDeleteOnPreview,l),"data-analytics-id":l},"logo"===this.props.type?o.a.createElement(Vt.Trash,null):o.a.createElement(Je.Trash,null)):"";let c="logo"===this.props.type?null==n?void 0:n.logoId:null==n?void 0:n.bannerId;c=c?st(c):"logo"===this.props.type?Tt.a:Nt.a;const d="logo"===this.props.type?a("ip.editPage.logoPageTitle"):a("ip.editPage.bannerPageTitle"),u=`edit-logo-component__preview edit-logo-component__preview-${this.props.type}`,p=this.props.page.loading&&this.props.page.id?o.a.createElement(Ot,{backDrop:!0}):"",m=this.state.imageIsLoading?o.a.createElement(Ia.AnalyticsCircularProgress,{ariaLabel:a("ip.editPage.imageIsLoadingAriaLabel")}):null,h=[{text:a("ip.editPage.invalidImageBtn"),action:this.onCloseError}],g=this.props.imageToSave?a("ip.editPage.confirmRemoveImageContent"):a("ip.editPage.confirmRemoveImageContentWarning"),v="logo"===this.props.type?a("ip.editPage.imagePixelDimensionMessageLogo"):a("ip.editPage.imagePixelDimensionMessageBanner");return o.a.createElement("div",null,o.a.createElement("div",{className:"edit-logo-component flex-page-container"},p,this.state.isShowPopup?o.a.createElement(Dt,{title:a("ip.editPage.confirmDeleteTitle"),id:"image-delete-confirmation",content:g,onOk:this.onPopupOk,onOkText:a("ip.editPage.confirmDeleteBtn"),onCancel:this.onPopupCancel,onCancelText:a("ip.editPage.cancelDeleteBtn"),analyticsId:`${i}.confirmation.popup`}):"",this.state.imageIsError?o.a.createElement($t,{title:a("ip.editPage.invalidImageSelectedTitle"),id:"edit-page-image-error",content:a("ip.editPage.invalidImageSelectedContent"),onCancel:this.onCloseError,customControls:h,elementToFocusOnDismiss:this.contentCollectionLauncher,analyticsId:`${i}.error.popup`}):"",o.a.createElement("div",{className:"flex-page-content has-footer"},o.a.createElement(ga,{superTitle:a("ip.editPage.superTitle"),title:d,browserSettingsHref:t.browserSettingsHref,analyticsId:`${i}.header`}),o.a.createElement("div",{className:"flex-page-content__grow edit-logo-component__content"},o.a.createElement("div",{className:u},r,m,o.a.createElement("img",{className:"edit-logo-component__preview-img",src:c,alt:""})),o.a.createElement("div",{className:"edit-logo-component__content-collection"},o.a.createElement(ba,{focusRef:e=>{this.contentCollectionLauncher=e},customClasses:"edit-logo-component__content_collection_button",contentCollectionSettings:t,analyticsId:`${i}.content.launcher`,imageDimensionMessage:v}),!this.state.saveDisabled&&this.state.imageUrl&&o.a.createElement("div",{role:"alert","aria-live":"assertive",className:"edit-logo-component__content-collection-warning",id:"edit-logo-component-content-collection-warning"},a("ip.editPage.contentCollectionPermissionMessage"))),o.a.createElement("div",null,o.a.createElement("span",{className:"edit-logo-component__user-message"},v))))),o.a.createElement(Ui,{clickPrimary:this.clickSave,disabledPrimary:this.state.saveDisabled,textPrimary:a("ip.editPage.saveChangesBtn"),ariaPrimary:a("ip.editPage.saveChangesAria"),clickSecondary:this.clickCancel,textSecondary:a("ip.editPage.cancelChangesBtn"),ariaSecondary:a("ip.editPage.cancelChangesAria"),analyticsId:`${i}.footer`}))}}const _a=Object(c.b)((e=>({page:e.page})))(Object(Ze.a)(wa));var Na=Object(et.withAnalytics)(_a),Ma=i("9OUN"),Ta=i("V8Kl");function xa(e,t){return[...e.slice(0,t),...e.slice(t+1)]}function Sa(e,t,i){return[...e.slice(0,t),i,...e.slice(t+1)]}function Oa(e,t){return e.sequence-t.sequence}const Pa={loading:!0,modules:[],receivedAt:null};const Aa={loading:!0,editIp:!1};const Ra={loading:!0,roles:void 0};const Da={error:!1,errorType:""};const $a={image:void 0,module:void 0};const Fa=Object(Ma.c)({module:(e=Pa,t)=>{if(t.type.startsWith("module.")&&t.type.endsWith(".fail"))return{...e,loading:!1};const i=t.module;switch(t.type){case Me:return{...e,loading:!0,...t.props};case Oe:{const i=t.modules.sort(Oa);return{...e,modules:i,loading:!1,receivedAt:Date.now()}}case he(Te):{const a=e.modules,n=a.findIndex((e=>e.id===i.id)),s={...t.link,id:t.data[0].id},o=[...i.resources,s],l={...i,resources:o};return{...e,modules:[...xa(a,n),l]}}case he(Se):{const a=e.modules,n=a.findIndex((e=>e.id===i.id)),s=i.resources.findIndex((e=>e.id===t.link.id)),o=Sa(i.resources,s,t.link),l={...i};return l.resources=o,{...e,loading:!1,modules:Sa(a,n,l)}}case he(xe):{const a=e.modules,n=a.findIndex((e=>e.id===i.id)),s=i.resources.findIndex((e=>e.id===t.linkId)),o=xa(i.resources,s),l={...i,resources:o};return{...e,modules:[...xa(a,n),l]}}case he(Pe):{const i=e.modules,a=[...function(e,t){const i={},a=t;return e&&(e.forEach((e=>{t.forEach(((t,a)=>{t.id===e.id&&(i[a]={...e,resources:t.resources,institutionRoleIds:t.institutionRoleIds})}))})),Object.keys(i).map(Number).forEach((e=>{a[e]=i[e]}))),a}(t.updatedModules,i),t.createdModule].sort(Oa);return{...e,loading:!1,modules:a}}case he(Ae):{const{moduleId:i}=t,a=e.modules,n=a.findIndex((e=>e.id===i));return-1!==n?{...e,loading:!1,modules:xa(a,n)}:e}case he(Re):{const i=e.modules,{moduleId:a,module:n,resources:s,institutionRoleIds:o}=t,l=i.findIndex((e=>e.id===a));if(-1!==l){const t={...i[l],...n};return s&&(t.resources=s),o&&(t.institutionRoleIds=o),{...e,modules:Sa(i,l,t),loading:!1}}return{...e,loading:!1}}case he($e):{const i=e.modules;if(i.length>0){const a=i.map((e=>{const i=t.data.findIndex((t=>t.id===e.id));return-1===i?e:{...e,sequence:t.data[i].sequence}})).sort(Oa);return{...e,modules:a,loading:!1}}const a=t.reorderedModules.map(((e,t)=>({...e,sequence:t})));return{...e,modules:a,loading:!1}}default:return e}},page:function(e=Aa,t){if(t.type.startsWith("page.")&&t.type.endsWith(".fail"))return{...e,loading:!1};switch(t.type){case Ce:return{...e,...t.page,loading:!1};case ye:return{...e,loading:!0};case he(Le):return{...e,editIp:t.data.canEdit};case he(ke):return{...e,...t.page,loading:!1};default:return e}},role:function(e=Ra,t){if(t.type.startsWith("role.")&&t.type.endsWith(".fail"))return{...e,loading:!1};switch(t.type){case Ie:return{...e,roles:t.roles,loading:!1};case be:return{...e,loading:!0};default:return e}},common:function(e=Da,t){if(t&&t.type){if(t.type.endsWith(".ok"))return{...e,error:!1,errorType:""};if(t.type.endsWith(".fail"))return{...e,error:!0,errorType:t.err.name};if(t.type===He)return{...e,featureFlags:t.flags};if(t.type===je)return{...e,error:!1,errorType:""}}return e},session:function(e=$a,t){switch(t.type){case ze:return{...e,image:t.resource};case Ke:return{...e,module:t.module};case We:return{...e,image:void 0,module:void 0};default:return e}}});var Ba=Fa;var Ua=e=>{class t extends o.a.Component{constructor(e){super(e),this.timeout=null,this.getResourceValidity=()=>this.props.type===x,this.sanitizeSequenceNumber=e=>{let t=Number(e);const i=this.props.moduleList.modules.length>0?this.props.moduleList.modules.map((e=>Number(e.sequence))).reduce(((e,t)=>Math.max(e,t))):0;return t=Number.isNaN(t)?0:t,t=t<0?0:t,t=t>i?i+1:t,t},this.saveModule=e=>{this.props.dispatchStartModuleXhr();const t=ut(e,"id","resources","institutionRoleIds"),i=e.resources.map((e=>ut(e,"id","moduleId"))),a=e.institutionRoleIds;return this.props.dispatchAddModule(t,i,a)};const{shouldCreateSession:t=!1}=e;this.createdSessionModule=!1,this.timeout=null,t&&this.createSessionModule()}componentDidUpdate(e){const{shouldCreateSession:t=!1}=this.props;!e.session.module&&t&&this.createSessionModule()}componentWillUnmount(){this.timeout&&clearTimeout(this.timeout)}getTranslations(){const e=this.props.localize.translate;return{moduleName:e("ip.defaultData.moduleName"),imageResourceTitle:e("ip.defaultData.imageResourceTitle"),imageResourceDescription:e("ip.defaultData.imageResourceDescription"),defaultLinkTitle:e("ip.defaultData.linkName")}}translationsReady(){return void 0!==this.props.localize}createSessionModule(){if(this.createdSessionModule)return;if(this.props.session.module||this.props.page.loading||this.props.moduleList.loading)return;if(!this.translationsReady())return void(this.timeout=setTimeout((()=>this.createSessionModule()),100));this.timeout=null;const e=this.getTranslations(),{module:t,resources:i}=j(this.props.type,e);t.resources=i,t.customPageId=this.props.page.id,t.sequence=this.sanitizeSequenceNumber(this.props.sequence),this.createdSessionModule=!0,this.props.dispatchSetSessionModule(t)}render(){const{session:t,role:i}=this.props,a=t.module;return a?o.a.createElement(e,{module:a,role:i,saveModule:this.saveModule,startDirty:!0,resourceStartValid:this.getResourceValidity(),...ut(this.props,"type","sequence","shouldCreateSession","page","localize","dispatchStartModuleXhr","dispatchSetSessionModule","dispatchAddModule","moduleList")}):o.a.createElement(Ot,null)}}t.displayName=`SessionModule(${pt(e)})`;const i=Object(c.b)((e=>({session:e.session,page:e.page,moduleList:e.module,role:e.role})),(e=>({dispatch:e,dispatchStartModuleXhr:()=>e(Fe()),dispatchSetSessionModule:t=>e((e=>({type:Ke,module:e}))(t)),dispatchAddModule:(t,i,a)=>e(((e,t,i)=>a=>{let n={...e};if(!t||0===t.length)return Promise.resolve().then((()=>a(me(ge(Pe),{err:"no module resources found!",createdModule:n}))));let s=[];return Z(n,t,i).then((e=>{s=e.updatedData,n=e.insertedData,n.resources=e.resources,n.institutionRoleIds=e.institutionRoleIds,a(me(he(Pe),{updatedModules:s,createdModule:n}))})).catch((e=>a(me(ge(Pe),{err:e,createdModule:n}))))})(t,i,a))})));return i(Object(Ze.a)(t))};var Va=e=>{class t extends o.a.Component{constructor(){super(...arguments),this.getCurrentModule=(e,t)=>{const i=e?e.filter((e=>e.id===t)):[];return i.length>0?i[0]:null},this.saveModule=e=>{const t={module:e,moduleId:e.id};this.props.dispatchStartModuleXhr();return this.props.dispatchUpdateModule(t)||Promise.resolve()}}render(){const t=this.getCurrentModule(this.props.moduleList.modules,this.props.moduleId);return o.a.createElement("div",{className:"existing-module-loader"},!t||this.props.moduleList.loading?o.a.createElement(Ot,null):o.a.createElement(e,{module:t,role:this.props.role,saveModule:this.saveModule,...ut(this.props,"moduleList","moduleId","dispatchStartModuleXhr","dispatchUpdateModule")}))}}t.displayName=`ExistingModule(${pt(e)})`;return Object(c.b)((e=>({moduleList:e.module,role:e.role,session:e.session})),(e=>({dispatch:e,dispatchStartModuleXhr:()=>e(Fe()),dispatchUpdateModule:t=>e(Ue(t))})))(t)};const ja=Object(Ma.e)(Ba,Object(Ma.a)(Ta.a)),Ha=e=>()=>{ja.getState().common.error||e()};function za(e,t,i,a,n,s){let l=a;if(null==a&&"undefined"!=typeof window&&window.location.search.match("setLang=")){const e=window.location.search.match(/setLang=([^$&]+)/);l=e?e[1]:""}!function(e,t){r.a.render(o.a.createElement(c.a,{store:ja},e),t)}(o.a.createElement(u.a,{theme:"light",isRtl:i,cssReset:"none"},o.a.createElement(d.a,{locale:l,babelfishInstance:n,babelfishFormatInstance:s,bundlesToLoad:["institution-page/locales/[locale]/ip.json"],isRtl:i},o.a.createElement("div",{className:"ip-app"},e))),t)}const Ka=Va(pa),Wa=Va(ka),qa=Ua(ka),Za=Ua(pa),Ga={renderIp:(e,t,i="",a,n,s)=>{const{openEditPageImage:l,openAll:r,openEdit:c,openCreate:d,openSettings:u,setFocusOverride:p,featureFlags:m={},editorPluginsConfig:h={},selectPage:g,variantId:v,variantOptions:E,canEditUnsafeHTML:b,mode:I}=s;ja.dispatch(Fe()),ja.dispatch(we()),ja.dispatch(Be(v)),ja.dispatch(Ne()),ja.dispatch({type:He,flags:m}),za(o.a.createElement(Ai,{onSwitchPage:g,openAll:r,openEdit:c,openEditPageImage:l,openCreate:d,openSettings:u,setFocusOverride:p,pluginsConfig:h,variantOptions:E,canEditHTML:b,mode:I}),e,t,i,a,n)},renderAll:(e,t,i,a,n,s)=>{za(o.a.createElement($i,{moduleId:t}),e,i,a,n,s)},renderEdit:(e,t,i,a,n,s,l,r,c,d,u)=>{za(o.a.createElement(Ka,{moduleId:t,onClose:Ha(i),onOpenEditImagePanel:a,setFocusOverride:n,pluginsConfig:d,expandRoles:u}),e,s,l,r,c)},renderEditLinkImage:(e,t,i,a,n,s,l,r,c,d)=>{za(o.a.createElement(Wa,{moduleId:i,linkId:t,onClose:Ha(a),contentCollectionSettings:c,imageToSave:d}),e,n,s,l,r)},renderCreateLinkImage:(e,t,i,a,n,s,l,r,c,d,u)=>{za(o.a.createElement(qa,{linkId:t,type:i,sequence:a,onClose:Ha(n),contentCollectionSettings:d,imageToSave:u}),e,s,l,r,c)},renderCreate:(e,t,i,a,n,s,l,r,c,d,u)=>{za(o.a.createElement(Za,{type:t,sequence:i,shouldCreateSession:!0,onClose:Ha(a),onOpenEditImagePanel:n,setFocusOverride:s,pluginsConfig:u}),e,l,r,c,d)},renderEditLogo:(e,t,i,a,n,s,l,r)=>{za(o.a.createElement(Na,{onClose:Ha(t),type:"logo",contentCollectionSettings:l,imageToSave:r,analyticsId:""}),e,i,a,n,s)},renderEditBanner:(e,t,i,a,n,s,l,r)=>{za(o.a.createElement(Na,{onClose:Ha(t),type:"banner",contentCollectionSettings:l,imageToSave:r,analyticsId:""}),e,i,a,n,s)},destroyReactControl:e=>{r.a.unmountComponentAtNode(e)},pageService:n,moduleService:a,defaultBanner:Nt.a,defaultLogo:Tt.a,errorTypes:v,devInit:()=>{}};t.default=Ga},"8qAH":function(e,t,i){e.exports=i.p+"cd7cba5e3b0993e9257a755466f89ea0.png"},DVRQ:function(e,t,i){e.exports=i.p+"036eb125019431f4dc650d9703e6de20.png"},"S+y2":function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 600 600" xml:space="preserve"><path fill="#FCCC9D" d="m403.656 227.682 20.821 8.53-8.416 20.544-20.821-8.53z"/><path fill="#FCCC9D" d="M394 207.2s23.5-1.3 24.5-2.1c4.6-10.1 16.5-14.7 26.8-10.3 10.4 4.5 13.4 16 10.7 26.9-7.2 28.6-65 33-62-14.5z"/><ellipse transform="matrix(.9975 -.07117 .07117 .9975 -10.129 30.688)" fill="#F1F2F2" cx="425.6" cy="157.5" rx="27.6" ry="7.6"/><ellipse transform="matrix(.9975 -.07117 .07117 .9975 -15.934 31.311)" fill="#F1F2F2" cx="431.4" cy="239.3" rx="18.9" ry="5.2"/><path fill="#F1F2F2" d="m453.1 155.5-55 3.9 14.4 81.2 37.8-2.7z"/><path fill="#3C2415" d="M402.7 163.2c5 1.8 13.7 2.5 23.4 1.9 9.7-.7 18.2-2.7 22.9-5.2-5-1.8-13.7-2.5-23.4-1.9-9.7.8-18.1 2.8-22.9 5.2z"/><path fill="#D1D3D4" d="M424.8 149.9c-15.7 1.1-28.2 5.6-27.9 9.9.3 4.3 13.3 7 29.1 5.8 15.7-1.1 28.2-5.6 27.9-9.9-.3-4.3-13.4-6.9-29.1-5.8zm1.2 14.3c-13.7 1-25-1.3-25.3-5-.3-3.7 10.6-7.6 24.3-8.5 13.7-1 25 1.3 25.3 5 .3 3.7-10.6 7.5-24.3 8.5z"/><path fill="#FCCC9D" d="M404.5 240c-1.4 0-2.8-.5-4-1.5-1-.8-9.7-8.6-10.2-19.4-.3-6 2.1-11.7 6.9-16.6 1.5-1.5 3.3-2.3 4.9-3 2.5-1.1 3.9-1.7 4.8-4.1 1.2-3.2 4.8-4.7 8-3.5 3.2 1.2 4.7 4.8 3.5 8-2.9 7.4-8.5 9.8-11.6 11-.4.2-.9.4-1.1.5-2.2 2.3-3.2 4.7-3.1 7.1.3 5.5 5.8 10.5 5.9 10.6 2.6 2.2 2.9 6.1.7 8.7-1.3 1.5-3 2.2-4.7 2.2zM449 224c-4.5 0-8.1-3.6-8.2-8-.4-20.5 8.6-36.4 8.9-37 2.3-3.9 7.3-5.3 11.2-3 3.9 2.2 5.3 7.2 3 11.2-.2.3-7.1 12.8-6.8 28.6.1 4.5-3.5 8.3-8 8.3 0-.1 0-.1-.1-.1z"/><path fill="#F1F2F2" d="M420.2 257.2c.8-1.7 1.7-3.3 2.5-5.1l-25.1-12.6-3.1 6.4 25.7 11.3z"/><path fill="#B5CF5C" d="M355.6 317.7c-1.1 0-2.2 0-3.3-.1-41.3-3.3-63-70.6-65.4-78.2-2.3-7.6 1.9-15.6 9.5-17.9 7.6-2.3 15.6 1.9 17.9 9.5 7 22.7 24.6 56.8 40.2 58 11.2.9 26.9-16.8 41.8-47.4l25.8 12.6c-20.8 42.6-42.6 63.5-66.5 63.5z"/><path fill="#A4BD5B" d="M356.2 313.6c-1.1 0-2.2 0-3.3-.1-9.2-.7-17.5-4.7-24.7-10.4-1.6-20.3-3.9-38.2-6-51.9-.7-1.5-1.4-3.1-2-4.6 2.5 14.5 5.5 35.6 7.4 60.6 7.3 5.7 15.5 9.7 24.7 10.4 1.1.1 2.2.1 3.3.1 23.9 0 45.7-20.8 66.5-63.5l-1.1-.5c-20.3 40.2-41.6 59.9-64.8 59.9z"/><path fill="#B5CF5C" d="M280 423.3h-1.9c-27.1-1-48.3-23.8-47.3-51 2.5-66.7-11-135.7-11.1-136.4-7.4-37.3 20.4-39.9 39.7-36.6 9.7 1.7 50.6 5.2 56.8 26.8.9 3.2 15.8 71.8 12.9 149.9-1 26.5-22.8 47.3-49.1 47.3z"/><path opacity=".25" fill="#3C2415" d="M282.9 315.2c-11.2-11.5-2.5-17.6-7.5-19.9-7.2-3.4-5.1-11.8-5.1-16.3 0 0 2-14.4-.3-17.1-11.3-13.5 7.8-17.2 9.5-22.6.6-2.1 20.8-16.9 16.8 5.4-2.6 14.7-3.4 18.1 5.4 20.2 10.8 2.7 11.7 37.7 2.9 37.1-2.4-.1-.5 31.7-7.4 28.3-6.3-3.1-1.8-8.6-6.8-10.4-5.5-2-5.8-3-7.5-4.7z"/><g opacity=".25" fill="#3C2415"><path opacity=".5" d="M294.7 254.9c.3-2.6.9-5.9 1.6-10.3.5-3 .6-5.3.4-7.1-.1.9-.2 1.9-.4 3-1.2 7.1-2.1 11.5-1.6 14.4zM270 257.8c-1.8-2.1-2.8-4-3.3-5.7-.8 2.6-.1 5.7 3.3 9.8.7.8 1 2.5 1.1 4.6.1-3.7 0-7.5-1.1-8.7zM304.6 297.9c-2.4-.1-.5 31.7-7.4 28.3-6.3-3.1-1.8-8.6-6.8-10.4-5.5-2-5.7-3-7.4-4.7-4.2-4.3-5.6-7.8-6-10.7-.3 3.3-.5 8.2 6 14.8 1.7 1.7 1.9 2.7 7.4 4.7 5 1.8.5 7.4 6.8 10.4 7 3.4 5.1-28.5 7.4-28.3 4.3.3 6.3-8 5.9-16.8-.3 7.1-2.3 12.9-5.9 12.7zM275.4 291.2c-3.8-1.8-5-5-5.3-8.3-.3 4.4-.2 9.9 5.3 12.4.8.4 1.3.9 1.5 1.5.3-2.8.8-4.6-1.5-5.6z"/></g><path fill="#FCCC9D" d="M215.1 371.8c-3.7-.4-8.2-3.6-11.4-6.6-1-4.1-3.6-7.7-7.5-9.9-7.4-4.1-16.8-1.4-20.9 6-.1.2-9 16-23.7 29.4-6.3 5.7-6.8 15.4-1 21.7 3 3.3 7.2 5 11.4 5 3.7 0 7.4-1.3 10.3-4 12.7-11.5 21.7-24.1 26.4-31.4 4.1 2.9 9.2 5.4 14.7 6h.9c4.1 0 7.7-3.1 8.1-7.3.5-4.4-2.8-8.5-7.3-8.9z"/><path fill="#B5CF5C" d="M171.6 359.9c-17.2-57-.3-98.9 17-120.6 18.6-23.5 41.6-37.3 42.6-37.7 7.3-3.1 15.7.4 18.8 7.7 3 7.3-.4 30-7.7 33.1-2.9 1.3-68.7 24.5-43.2 109.2 2.2 7.6-25.6 14.5-27.5 8.3z"/><path fill="#F1F2F2" d="M171.4 359.3c.1.2.1.4.2.6 2.5 7.2 29.4.1 27.6-7.4-3.5 4.9-20.1 8.1-27.8 6.8z"/><path fill="#A4BD5B" d="m222.5 253.3.7 3.9c5.3-6.3 17.9-14.1 19-14.5-1.1.4-9.5 2.9-19.7 10.6z"/><path fill="#F1F2F2" d="m280 202.9-2.7 15.6 6.7-10.7 9 16.5-3.7-23.9-13.9-7.7z"/><path fill="#FCCC9D" d="M277.3 217.6c-.4 0-4.7-12.1-5-12.2-9-.6-25.9-1.8-25.9-1.8.3-4.5 3.3-44.5 16.5-68.7 4.3-8 14.3-10.9 22.2-6.6 8 4.3 10.9 14.3 6.6 22.2-8.3 15.3-10.2 45.4-10.9 55.5l-3.5 11.6z"/><path fill="#C19A78" d="M258.7 181.5 282 191l-.8 9.4z"/><path fill="#FCCC9D" d="m330.8 60.6-26.2-5.3c-14.5-4.8-30.4 3.2-35.2 17.7l-4.5 22c-1.7-.7-3.5-1.1-5.4-1.1-8 0-14.5 6.5-14.5 14.5 0 7.9 6.3 14.3 14.2 14.5l-6.4 31.1c-4.8 14.5 3.2 30.4 17.7 35.2l15.9 5.3c14.5 4.8 30.4-3.2 35.2-17.7l6.5-19.7 5.7 2.3c1 .4 2.1.6 3.1.6 3.2 0 6.3-1.9 7.6-5.1 1.7-4.2-.3-9-4.5-10.7l-6.8-2.8 15.1-45.8c5-14.4-3-30.2-17.5-35z"/><path fill="#C19A78" d="m327.2 159.9.9-2.7-6.6-2.3zM259.8 103.5c-2.1 0-3.9 1.2-4.9 2.8.8-.5 1.8-.8 2.9-.8 3.2 0 5.7 2.6 5.7 5.7 0 1-.3 2-.8 2.9 1.7-1 2.8-2.8 2.8-4.9 0-3.2-2.6-5.7-5.7-5.7z"/><path fill="#333" d="M347.8 49.4c-20-33.2-67-24.1-74-3.5 0 0-37.6-3.2-22.6 50.8 2.3-1.6 5.2-2.6 8.2-2.6 5.8 0 10.8 3.5 13.1 8.5 16.5-9.4 17.1-30.3 17.1-30.3 39.8 42.8 80.6 20.8 97.6 3.2 0 0-21.9 3-39.4-26.1z"/><path fill="#F1F2F2" d="m273.3 202.3 4 15.3-7.6-10.2-7.6 17.2-26-25.6 9.5-21z"/><g><path fill="#B0BBCB" d="M329.1 375.9c.4-9.5.4-24 .4-24-63.9-13.4-98.4 10.3-98.4 10.3.1 8 0 1.9-.3 10-.4 10.8 2.7 20.8 8.2 29.1-2.7 18.4-11.2 67.6-34.4 139.5h41c15.1-38 26-90 31.1-117.7.4 0 .9.1 1.3.1h1.9c2.5 0 4.9-.2 7.3-.5 1.4 25.2 1.5 64-.9 118.1h41.2c3.3-76.1 1.2-127-.6-152 1.2-4 2-8.4 2.2-12.9z"/><g fill="#A1ADBB"><path d="M234.9 372.3c.3-8.1.4-2 .3-10 0 0 31.9-20.7 94.3-8.2V352c-63.9-13.4-98.4 10.3-98.4 10.3.1 8 0 1.9-.3 10-.4 10.8 2.7 20.8 8.2 29.1-2.7 18.4-11.2 67.6-34.4 139.5h4.1c23.1-71.9 31.7-121.1 34.4-139.5-5.5-8.3-8.6-18.4-8.2-29.1zM291.3 422.8c-1.3.2-2.7.3-4.1.4 1.4 25.2 1.5 63.9-.9 117.7h4.1c2.4-54.1 2.4-93 .9-118.1z"/><path d="M281.7 423.2c-.3 0-.6 0-.8-.1v.1c.2.1.5 0 .8 0z"/></g></g><path fill="#E7E7E7" d="M447.4 566.1H142.3c-4.3 0-7.9-3.6-7.9-7.9v-.6c0-4.3 3.6-7.9 7.9-7.9h305.1c4.3 0 7.9 3.6 7.9 7.9v.6c0 4.3-3.5 7.9-7.9 7.9z"/><path fill="#E7E7E7" d="M183.3 576.3c-4.3 0-7.9-3.6-7.9-7.9v-.6c0-4.3 3.6-7.9 7.9-7.9H388c4.3 0 7.9 3.6 7.9 7.9v.6c0 4.3-3.6 7.9-7.9 7.9"/><path fill="#333" d="M246.6 555.7h-73.7c-5.4 0-9.7-4.4-9.7-9.7v-.7c0-5.4 4.4-9.7 9.7-9.7h73.7c5.4 0 9.7 4.4 9.7 9.7v.7c0 5.3-4.4 9.7-9.7 9.7zM361.4 555.7h-73.7c-5.4 0-9.7-4.4-9.7-9.7v-.7c0-5.4 4.4-9.7 9.7-9.7h73.7c5.4 0 9.7 4.4 9.7 9.7v.7c0 5.3-4.4 9.7-9.7 9.7z"/></svg>'},Sqh5:function(e,t,i){e.exports=i.p+"1ead6a60c36b734443e04662e1ff416e.png"},gdCT:function(e,t){e.exports='<svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200"><defs><clipPath id="clip-path"><circle class="cls-1" cx="99.8" cy="99.9" r="99.8"/></clipPath><clipPath id="clip-path-6"><circle class="cls-1" cx="100" cy="100" r="100"/></clipPath><clipPath id="clip-path-7"><path class="cls-1" d="M139.3 120s-.8-1.2-7.3-1.2-8.7 1.2-8.7 1.2V98.2h16V120Z"/></clipPath><clipPath id="clip-path-11"><path class="cls-1" d="M75.3 144.7s-4.6-.3-19.1-.3-20.2.3-20.2.3V90.1h39.3v54.6Z"/></clipPath><style>.cls-1{fill:none}.cls-4{fill:#c08f2d}.cls-5{fill:#7f5d25}.cls-6{clip-path:url(#clip-path)}.cls-13{fill:#ffddac}.cls-14{fill:#333;opacity:.1;isolation:isolate}.cls-15{clip-path:url(#clip-path-7)}.cls-16{fill:#81b166}.cls-17{fill:#93ca74}.cls-18{clip-path:url(#clip-path-11)}</style></defs><circle cx="99.8" cy="99.9" r="99.8" style="fill:#fcb92a"/><circle cx="22.4" cy="83.9" r="7.2" style="fill:#fff170"/><circle class="cls-1" cx="99.8" cy="99.9" r="99.8"/><path class="cls-4" d="m94.2 123.5-87.7 4.3S45 104.2 48.9 98.2s45.3 25.3 45.3 25.3Z"/><path class="cls-5" d="M50.2 97.5c4.1 2.3 25.9 28 25.9 28l18.1-2s-10.5-7.7-22.4-16.7-21.6-9.3-21.6-9.3Z"/><path class="cls-4" d="M128.8 117H31.7s31.4-7.9 46.2-19.5c6.4-5 9.6-4.3 12.8-4 6 1 38.1 23.5 38.1 23.5Z"/><path class="cls-5" d="M95.2 95.4s14.2 16.2 13.4 19.1-5.9 2.2-5.9 2.2h26.2c.7-.2-17.1-12.3-23-15.9a56.85 56.85 0 0 0-10.7-5.4Z"/><path d="M197.4 125.2a100.82 100.82 0 0 0 3.2-25.3v-1.6c-1 .5-2 1-3 1.6-33.8 19.6-51.9 25.3-51.9 25.3h51.7Z" style="fill:#8e6f51" class="cls-6"/><path d="M222.5 125.2h-97.2s47.2-26.2 51.9-26.9 45.3 26.9 45.3 26.9Z" style="fill:#d7a57d" class="cls-6"/><path d="M178.3 98.3c11.2 9.2 19 26.8 19 26.8h25.2l-23.2-16a109.05 109.05 0 0 0-13.4-7.7 80.16 80.16 0 0 0-7.6-3.1Z" style="fill:#80614c" class="cls-6"/><path d="M201.4 129.6h-97.2s40.3-24.4 51.9-25.3c9.1-.7 45.3 25.3 45.3 25.3Z" style="fill:#d8b655" class="cls-6"/><path d="M157.3 104.3c1.8 1.7 7.8 6.9 11.7 12.3a59.87 59.87 0 0 1 7 12.7l29.2 1s-14.4-8.3-24.3-15.4a73.3 73.3 0 0 0-17.8-9.1 40.72 40.72 0 0 0-5.8-1.5Z" style="fill:#806a34" class="cls-6"/><path class="cls-13" d="M196.3 126.9c-35.2-9-72.7-13-96.3-13-26.7 0-64.5 3.3-96.4 13a100 100 0 0 0 192.7 0Z" style="clip-path:url(#clip-path-6)"/><path class="cls-13" d="M136.3 123.5h-9.9v-4.2a40.17 40.17 0 0 0 9.8 0v4.2h.1Z"/><path class="cls-14" d="m192.7 136.5-59.2-17.7h-1.1l-2.4.1 60 24c.9-2.1 1.8-4.2 2.7-6.4Z"/><g class="cls-15"><path class="cls-16" d="M132 120.6a1.54 1.54 0 0 1-1.5-1.5v-16.7a1.54 1.54 0 0 1 1.5-1.5 1.54 1.54 0 0 1 1.5 1.5v16.7a1.54 1.54 0 0 1-1.5 1.5Z"/></g><g class="cls-15"><path class="cls-17" d="M131.4 120.6a1.54 1.54 0 0 1-1.5-1.5v-16.7a1.54 1.54 0 0 1 1.5-1.5 1.54 1.54 0 0 1 1.5 1.5v16.7a1.54 1.54 0 0 1-1.5 1.5Z"/></g><g class="cls-15"><path class="cls-17" d="M131.3 113.6q-6.6 0-6.6-5.1a.8.8 0 1 1 1.6 0c0 1.7.6 3.5 5 3.5a.8.8 0 1 1 0 1.6Z"/></g><g class="cls-15"><path class="cls-17" d="M132.9 109.3a.8.8 0 0 1 0-1.6c1.6 0 2.5-.7 2.5-2a.8.8 0 0 1 1.6 0c-.1 2.2-1.6 3.6-4.1 3.6Z"/></g><path class="cls-14" d="M146.1 188.4 60 143l-8.6 1.4 80.1 50.2a104.89 104.89 0 0 0 14.6-6.2Z"/><g class="cls-18"><path class="cls-16" d="M58.8 118a2.4 2.4 0 0 1 0-4.8c5.6 0 6-2 6-4.8a2.4 2.4 0 0 1 4.8 0c0 6.3-3.6 9.6-10.8 9.6Z"/></g><g class="cls-18"><path class="cls-17" d="M52.8 128c-11.6 0-14-4.4-14-11.1a2.4 2.4 0 0 1 4.8 0c0 4.1.4 6.3 9.2 6.3a2.4 2.4 0 1 1 0 4.8Z"/></g><g class="cls-18"><path class="cls-16" d="M56.4 145.8a4.23 4.23 0 0 1-4.2-4.2V94.3a4.23 4.23 0 0 1 4.2-4.2 4.23 4.23 0 0 1 4.2 4.2v47.2a4.25 4.25 0 0 1-4.2 4.3Z"/></g><g class="cls-18"><path class="cls-17" d="M54.6 145.8a4.23 4.23 0 0 1-4.2-4.2V94.3a4.23 4.23 0 0 1 4.2-4.2 4.23 4.23 0 0 1 4.2 4.2v47.2a4.25 4.25 0 0 1-4.2 4.3Z"/></g></svg>'},vtwu:function(e,t,i){"use strict";var a=i("tUhR"),n=i("ryzT"),s=i("x5Wc"),o=i("gPqN"),l=i("gzzY"),r=i("n6x9"),c=i("ruNM"),d=i("trFw"),u=i("4Hg2"),p=i("UW9V"),m=i("JMB8"),h=i("PwJG"),g=i("Puuy"),v=i("smPU"),E=i("4OM/"),b=i("Fqn0");const I="customKeyBindings",f="keymapConfig",y={autocompletion:!0,bracketMatching:!0,closeBrackets:!0,foldGutter:!0,highlightActiveLine:!0,highlightSelectionMatches:!0,highlightSyntax:!0,history:!0,keymapConfig:{comment:!0,customKeyBindings:[],default:!0,lint:!0,search:!0},lineNumbers:!0,rectangularSelection:!0},C={...y,html:!0};var k;!function(e){e.AllowDownloadsWithoutUserActivation="allow-downloads-without-user-activation",e.AllowDownloads="allow-downloads",e.AllowForms="allow-forms",e.AllowModals="allow-modals",e.AllowOrientationLock="allow-orientation-lock",e.AllowPointerLock="allow-pointer-lock",e.AllowPopups="allow-popups",e.AllowPopupsToEscapeSandbox="allow-popups-to-escape-sandbox",e.AllowPresentation="allow-presentation",e.AllowSameOrigin="allow-same-origin",e.AllowScripts="allow-scripts",e.AllowStorageAccessByUserActivation="allow-storage-access-by-user-activation",e.AllowTopNavigation="allow-top-navigation",e.AllowTopNavigationByUserActivation="allow-top-navigation-by-user-activation"}(k||(k={}));class L{constructor(e,t){this.element=e;this.view=new o.d({state:t,dispatch:e=>{this.view.update([e]),this.emitChange()}}),this.element.appendChild(this.view.dom)}get editorElement(){return this.element}get editorView(){return this.view}getValue(){return this.view.state.doc.toString()}setValue(e){const{state:t}=this.view,i=t.update({changes:{from:0,to:t.doc.length,insert:e}});return this.view.update([i]),this}onChange(e){this.onChangeFunction=e}emitChange(){this.onChangeFunction&&this.onChangeFunction(this.getValue())}}const w={autocompletion:a.a,bracketMatching:n.a,closeBrackets:s.a,foldGutter:u.a,highlightActiveLine:p.a,highlightSelectionMatches:p.b,highlightSyntax:()=>r.a,history:m.a,html:h.a,lineNumbers:g.c,rectangularSelection:E.a},_={comment:[...l.a],default:[...c.a],foldGutter:[...u.b],history:[...m.b],lint:[...v.a],search:[...b.b]},N=e=>{const t=_[e];if(!t)throw new Error(`Unrecognized keymap ${e}`);return t},M=e=>{const t=[];if(!e)return t;const i=[];Object.entries(e).forEach((([e,a])=>{if(!1===a||e===f)return;const n=!0===(s=a)?void 0:s;var s;try{t.push(((e,t)=>{const i=w[e];if(!i)throw new Error(`Unrecognized extension ${e}`);return i(t)})(e,n)),e in _&&i.push(...N(e))}catch(t){console.error(`Failed to create extension ${e} with config ${n}`,t)}}));const a=e.keymapConfig;if(a){Object.entries(a).forEach((([e,t])=>{if(!1!==t&&e!==I)try{i.push(...N(e))}catch(e){console.error(e)}}));const e=a.customKeyBindings;e&&i.unshift(...e)}if(i.length>0)try{t.push(Object(o.h)([...i]))}catch(e){console.error(`Failed to create keymap with keybindings ${i}`,e)}return t};var T=i("ERkP");class x extends T.Component{constructor(e){super(e),this.onChange=e=>{const{onChange:t,value:i}=this.props;t&&t(e,e!==i)},this.editorRef=T.createRef()}componentDidMount(){const{extensionsConfig:e,value:t,ariaLabel:i,ariaLabelledBy:a}=this.props;this.editor=((e,t,i="",a=y,n)=>{if(!(e instanceof Node))throw new Error(`Cannot append a code editor to invalid DOM element ${e}`);const s={"aria-label":t,"aria-labelledBy":null!=n?n:""},l=M(a),r=d.e.create({doc:i,extensions:[...l,o.d.contentAttributes.of(s)]});return new L(e,r)})(this.editorRef.current,i,t,e,a),this.editor.onChange(this.onChange)}render(){return T.createElement("div",{className:"code-editor-container",ref:this.editorRef})}}var S=i("A4Z1"),O=i("+Twb"),P=i("Agfx");const A=Object(P.makeStyles)((e=>Object(P.createStyles)({htmlEditor:{"& iframe":{width:"100%",minHeight:"77px",margin:"0px 0px 10px",border:"none"},"& .code-editor-container":{"& .cm-content, & .cm-gutter":{minHeight:"150px"},"& .cm-gutters":{margin:"1px"},"& .cm-scroller":{overflow:"auto"},"& .cm-wrap":{border:`1px solid ${e.palette.border.main}`,paddingRight:"2px"}}}}))),R=e=>{const t=A(),i=T.useRef(null),{onChange:a,readOnly:n,src:s,value:o,ariaLabel:l,ariaLabelledBy:r,customClasses:c="",sandboxAttributes:d,allowFullScreen:u}=e,p=d?d.join(" "):void 0;return T.useEffect((()=>{let e=[];return null!==i.current&&(e=Object(O.c)(i.current)),()=>{e.forEach((e=>e()))}})),T.createElement("div",{className:`${c} ${t.htmlEditor}`},!1!==n?T.createElement("iframe",{src:s,title:l,ref:i,sandbox:p,allowFullScreen:u,"aria-labelledby":r}):T.createElement(x,{extensionsConfig:C,onChange:a,value:o,ariaLabel:l,ariaLabelledBy:r}))},D=e=>T.createElement(S.a,{theme:"light",isRtl:e.isRtl},T.createElement(R,{...e}));i.d(t,"b",(function(){return k})),i.d(t,"a",(function(){return D}))}}]);