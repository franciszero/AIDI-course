(window.webpackJsonp=window.webpackJsonp||[]).push([[162],{"8wib":function(e,a,n){var t=n("ziER"),i=n("5JeM"),l=new t({id:"icon-medium-settings",use:"icon-medium-settings-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-settings"><path fill-rule="evenodd" clip-rule="evenodd" d="M21.4277 6.2062l-2.779.674a8.3399 8.3399 0 00-1.7651-1.7008l.5771-2.8038a.4939.4939 0 00-.3024-.5594l-1.9855-.7817a.4933.4933 0 00-.6028.2026l-1.4904 2.444a8.2935 8.2935 0 00-2.4509.0405L9.0563 1.333a.4956.4956 0 00-.6098-.1818l-1.9568.8509a.4934.4934 0 00-.2827.5703l.674 2.778a8.3417 8.3417 0 00-1.7018 1.7651l-2.8038-.5761a.4946.4946 0 00-.5594.3024l-.7817 1.9855a.495.495 0 00.2026.6028l2.444 1.4894a8.3611 8.3611 0 00.0406 2.4509l-2.3887 1.5734a.4952.4952 0 00-.1809.6098l.851 1.9568a.4938.4938 0 00.5692.2827l2.779-.6741a8.3178 8.3178 0 001.7652 1.7019l-.5772 2.8028a.4936.4936 0 00.3034.5594l1.9845.7827a.4946.4946 0 00.6029-.2026l1.4903-2.4441a8.3594 8.3594 0 002.451-.0405l1.5724 2.3877a.4943.4943 0 00.6097.1819l1.9569-.8509a.4953.4953 0 00.2836-.5703l-.674-2.7791a8.3321 8.3321 0 001.7008-1.7641l2.8038.5772a.4948.4948 0 00.5594-.3034l.7817-1.9855a.4938.4938 0 00-.2026-.6029l-2.444-1.4893a8.298 8.298 0 00-.0405-2.451l2.3887-1.5733a.4936.4936 0 00.1808-.6098l-.8509-1.9559a.4944.4944 0 00-.5693-.2836z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path fill-rule="evenodd" clip-rule="evenodd" d="M12 16c-2.2057 0-4-1.7943-4-4s1.7943-4 4-4 4 1.7943 4 4-1.7943 4-4 4z" stroke-width="2" /></symbol>'});i.add(l);e.exports=l},ClYT:function(e,a){e.exports='<div bb-first-time-container class="page-base-calendar" bb-cache-compilation="base-calendar" bb-offcanvas-pausal-scope>\n  <bb-base-header page-title-key="base.calendar.pageTitle">\n    <div name="base-header-tools" class="base-header-tools" bb-foundation-wait="calendar.canCreateSomeCalendarEntry">\n      <div class="ftue-btn-container">\n        <button id="new-event-button"\n                class="standard-button main-control guidance-wrapper guidance-wrapper-inline button"\n                bb-guidance-target\n                component-key="base.calendar.addEvent"\n                aria-expanded="false"\n                data-dropdown="new-event-dropdown"\n                ng-if="calendar.canCreateSomeCalendarEntry"\n                bb-translate-attrs="{\'aria-label\': \'base.calendar.addButtonLabel\', \'title\': \'base.calendar.addButtonLabel\'}"\n                aria-describedby="guidance-new-event"\n                analytics-id="base.calendar.newEventButton.button">\n          <bb-svg-icon size="small" icon="add"></bb-svg-icon>\n          <bb-svg-icon size="medium" icon="add-circle"></bb-svg-icon>\n        </button>\n        <button id="event-button"\n                class="standard-button main-control guidance-wrapper guidance-wrapper-inline"\n                bb-guidance-target\n                component-key="base.calendar.addEvent"\n                bb-peek-sref="event-create({ selectedDate: calendar.formattedDate })"\n                ng-if="!calendar.canCreateSomeCalendarEntry"\n                bb-translate-attrs="{\'aria-label\': \'base.calendar.addButtonLabel\', \'title\': \'base.calendar.addButtonLabel\'}"\n                aria-describedby="guidance-new-event"\n                analytics-id="base.calendar.eventButton.button">\n          <bb-svg-icon size="small" icon="add"></bb-svg-icon>\n          <bb-svg-icon size="medium" icon="add-circle"></bb-svg-icon>\n        </button>\n        <bb-guidance class="guidance-element-overlay button-wrapped push-right push-bottom"\n                     id="guidance-new-event"\n                     component-key="base.calendar.addEvent"\n                     page-container-selector=".page-base-calendar"\n                     display-priority="30">\n          <bb-translate>base.calendar.addEventGuidance</bb-translate>\n        </bb-guidance>\n      </div>\n      <ul id="new-event-dropdown" data-dropdown-content class="dropdown f-dropdown dropdown-menu" tabindex="-1" ng-if="calendar.canCreateSomeCalendarEntry">\n        \x3c!-- htmlhint:analytics-id:disable --\x3e\n        <li ng-if="calendar.canCreateCalendarItem">\n          <a role="button"\n             class="js-calendar-add-event-link"\n             bb-peek-sref="event-create({ selectedDate: calendar.formattedDate })"\n             tabindex="0"\n             bb-translate\n             analytics-id="base.calendar.addEvent.link">\n            base.calendar.addEvent\n          </a>\n        </li>\n        <li ng-if="calendar.canCreateCourseSchedule">\n          <a role="button"\n             class="js-calendar-add-course-schedule-link"\n             bb-peek-sref="class-schedule({ selectedDate: calendar.formattedDate })"\n             tabindex="0"\n             bb-translate\n             analytics-id="base.calendar.addCourseSchedule.link">\n            base.calendar.addCourseSchedule\n          </a>\n        </li>\n        <li ng-if="calendar.canCreateOfficeHours">\n          <a role="button"\n             bb-peek-sref="office-hours({ selectedDate: calendar.formattedDate })"\n             tabindex="0"\n             bb-translate\n             analytics-id="base.calendar.addOfficeHours.link">\n            base.calendar.addOfficeHours\n          </a>\n        </li>\n        \x3c!-- htmlhint:analytics-id:enable --\x3e\n      </ul>\n      <a id="settings-button"\n         class="standard-button"\n         bb-peek-sref="calendar-settings"\n         bb-translate-attrs="{\'aria-label\': \'base.calendar.settingButtonLabel\', \'title\': \'base.calendar.settingButtonLabel\'}"\n         analytics-id="base.calendar.settingsButton.link">\n        <bb-svg-icon size="small" icon="settings"></bb-svg-icon>\n        <bb-svg-icon size="medium" icon="settings"></bb-svg-icon>\n      </a>\n    </div>\n  </bb-base-header>\n\n  <div id="body-content">\n    <div>\n      <bb-calendar ng-if="calendar.localeSettings.calendar.firstDayOfWeek != null"\n                   show-month-view-guidance="true"\n                   show-all-courses-month-view-guidance="true"\n                   schedule-item-source="calendar.scheduleItems"\n                   due-date-item-source="calendar.dueDateItems"\n                   view-calendar-item="calendar.viewCalendarItem"\n                   on-item-time-update="calendar.updateCalendarItemTime"\n                   current-view-date="calendar.currentViewDate"\n                   view="calendar.view"\n                   guidance-page-container-selector="\'.page-base-calendar\'"\n                   show-create-entry="calendar.canCreateSomeCalendarEntry"\n                   first-day-of-week="calendar.localeSettings.calendar.firstDayOfWeek">\n      </bb-calendar>\n    </div>\n    \x3c!-- add the confirmation needed element here just try to reuse the confirmation-needed modal, instead of create a new modal instance manually --\x3e\n    <div class="hide"\n         bb-confirmation-needed="x-bb-recurring-or-single-event"\n         modal-name="calendar-item-edit"\n         show-type="always"\n         ng-click="calendar.editSingleEvent()"\n         other-choice-action="calendar.editSeries()"\n         analytics-id="base.calendar.editRecurringOrSingleEvent"\n    ></div>\n  </div>\n  <div ui-view></div>\n</div>\n'},VCKY:function(e,a,n){var t=n("ziER"),i=n("5JeM"),l=new t({id:"icon-small-add",use:"icon-small-add-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-add"><path d="M1 8c0-3.866 3.134-7 7-7v0c3.866 0 7 3.134 7 7v0c0 3.866-3.134 7-7 7v0c-3.866 0-7-3.134-7-7v0zM11 8H5M8 5v6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});i.add(l);e.exports=l},dV61:function(e,a,n){var t=n("ziER"),i=n("5JeM"),l=new t({id:"icon-small-trash",use:"icon-small-trash-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-trash"><path d="M4 4l2-3h4l2 3M2 5l1 10h10l1-10M1 4h14M8 7v5M11 7l-.5 5M5 7l.5 5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});i.add(l);e.exports=l},lGua:function(e,a,n){var t=n("ziER"),i=n("5JeM"),l=new t({id:"icon-small-settings",use:"icon-small-settings-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-settings"><path d="M7.5977 1.5453c.1998-.2709.6048-.2709.8046 0l.9644 1.307a.5.5 0 00.5534.1798l1.5484-.4906c.3209-.1016.6485.1364.651.473l.0119 1.6242a.5001.5001 0 00.342.4707l1.5411.5133c.3193.1064.4445.4916.2486.7653l-.945 1.321a.5002.5002 0 000 .582l.945 1.321c.1959.2737.0707.6589-.2486.7653l-1.5411.5133a.5.5 0 00-.342.4706l-.0119 1.6243c-.0025.3366-.3301.5746-.651.473L9.92 12.9679a.5.5 0 00-.5533.1798l-.9644 1.307c-.1998.2709-.6048.2709-.8046 0l-.9644-1.307a.5.5 0 00-.5534-.1798l-1.5484.4906c-.3209.1016-.6485-.1364-.651-.473l-.012-1.6243a.4999.4999 0 00-.342-.4706l-1.541-.5133c-.3193-.1064-.4445-.4916-.2486-.7653l.945-1.321a.5.5 0 000-.582l-.945-1.321c-.1959-.2737-.0707-.6589.2486-.7653l1.541-.5133a.5.5 0 00.342-.4707l.012-1.6242c.0025-.3366.3301-.5746.651-.473l1.5484.4906a.5.5 0 00.5534-.1798l.9644-1.307z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M10 8c0 1.1046-.8954 2-2 2s-2-.8954-2-2 .8954-2 2-2 2 .8954 2 2z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});i.add(l);e.exports=l},q2ny:function(e,a,n){"use strict";n.r(a);n("PCGa"),n("VCKY"),n("lGua"),n("smDF"),n("8wib"),n("dV61");var t=n("Llzl"),i=n("D57K"),l=n("aHpC"),r=n("zGdY"),s=n("IbyE"),d=n("Au0D"),c=n("pjml"),o=n("TnpK"),u=n("7pcG"),b=n("nYZ0"),h=n("0JpG");const m="ultra.base.calendar.controller";let p=class{constructor(e,a,n,t,i,l,s,c,o){this.$ngRedux=e,this.$scope=a,this.CalendarItemModel=n,this.DueDateCalendarItemModel=t,this.CalendarModel=i,this.calendarService=l,this.ultraState=s,this.contentService=c,this.bbLocalize=o,this.canCreateCalendarItem=!1,this.canCreateCourseSchedule=!1,this.canCreateOfficeHours=!1,this.canCreateSomeCalendarEntry=!1,this.viewCalendarItem=e=>{if(e.isDueItem()){if(e.isConditionalRelease())return;this.calendarService.viewDueCalendarItem(e)}else this.routerParams={calendarId:e.calendarId,itemSourceId:e.itemSourceId,itemSourceType:e.itemSourceType,repeatRuleType:e.recurRules&&e.recurRules.repeatRuleType||"",repeatRuleCourseId:e.recurRules&&e.recurRules.repeatRuleCourseId||"",repeatRuleUserId:e.recurRules&&e.recurRules.repeatRuleUserId||""},e.permissions.edit||e.permissions.delete?(this.routerState="event-edit",e.recurRules?e.recurRules.repeatRuleType?this.editSeries():this.$scope.$broadcast("show-confirmation","calendar-item-edit"):this.ultraState.goPeekState(this.routerState,this.routerParams)):(this.routerState="event-view",this.ultraState.goPeekState(this.routerState,this.routerParams))},this.updateCalendarItemTime=(e,a,n)=>this.calendarService.updateCalendarItemTime(e,a,n).then((()=>{e.recurRules&&r.q.ClassSchedule===e.recurRules.repeatRuleType&&this.$scope.$emit("reloadCourseSchedule",e.calendarId)})),a.calendar=this,this.subscribeToReduxChanges();const u=this.bbLocalize.getAppLocaleISO();this.getLocaleSettings({locale:u}),this.view=s.includes("**.deadline.**")?d.a.Deadline:d.a.Schedule,this.scheduleItems=n.$collection(),this.dueDateItems=t.$collection(),i.$collection().$fetch({limit:1e4}).$then((e=>{for(const a of e)a.id!==r.U.Institution&&a.id!==r.U.Personal&&(this.canCreateCalendarItem=this.canCreateCalendarItem||a.permissions.canCreateCalendarItem,this.canCreateCourseSchedule=this.canCreateCourseSchedule||a.permissions.canCreateCourseSchedule,this.canCreateOfficeHours=this.canCreateOfficeHours||a.permissions.canCreateOfficeHours);this.canCreateSomeCalendarEntry=this.canCreateCalendarItem||this.canCreateCourseSchedule||this.canCreateOfficeHours})),a.$on("calendar-settings-updated",(()=>{a.$broadcast("calendar-refresh"),a.$broadcast("deadline-refresh")})),a.$watch("calendar.currentViewDate.toISOString()",(e=>{e&&(this.formattedDate=e)})),this.$scope.$on("deleteContentFromCalendar",((e,a)=>{this.contentService.deleteContent(a)}))}editSingleEvent(){this.openPanel(!1)}editSeries(){this.openPanel(!0)}openPanel(e){this.routerParams.updateSeries=e,this.ultraState.goPeekState(this.routerState,this.routerParams)}subscribeToReduxChanges(){const e=this.$ngRedux.connect((e=>({localeSettings:s.Yb.locale.getLocaleSettings(e,this.bbLocalize.getAppLocaleISO())})),(e=>({getLocaleSettings:a=>e(s.V.locale.getLocaleSettings(a))})))(this);this.$scope.$on("$destroy",e)}};p=Object(i.a)([Object(i.c)(0,Object(l.b)("$ngRedux")),Object(i.c)(1,Object(l.b)("$scope")),Object(i.c)(2,Object(l.b)(c.g.serviceName)),Object(i.c)(3,Object(l.b)(c.x.serviceName)),Object(i.c)(4,Object(l.b)(c.f.serviceName)),Object(i.c)(5,Object(l.b)(u.b)),Object(i.c)(6,Object(l.b)(o.d)),Object(i.c)(7,Object(l.b)(b.f)),Object(i.c)(8,Object(l.b)(h.serviceName))],p);var v=n("tqR7"),g=n("hqh6"),w=n("2kFz"),f=n("MV2l"),C=n("ClYT");n.d(a,"moduleName",(function(){return S})),n.d(a,"controllerName",(function(){return y})),n.d(a,"template",(function(){return C}));const S="ultra.base.calendar",y=m;t.module(S,[h.moduleName,d.b,v.a,w.c,f.a,g.a,u.a,c.N,o.b,b.d]).controller(m,class extends p{})}}]);