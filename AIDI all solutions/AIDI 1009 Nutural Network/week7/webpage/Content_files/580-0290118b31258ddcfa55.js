(window.webpackJsonp=window.webpackJsonp||[]).push([[580],{"4J8k":function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var i=a("zYa8"),n=a("dmkk");const s="ultra.components.directives.bbUiIcon.large.AvatarMultiple";Object(i.a)(n.a,s,"bbUiIconLargeAvatarMultiple")},"8gSl":function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var i=a("zYa8"),n=a("SxMs");const s="ultra.components.directives.bbUiIcon.large.Post";Object(i.a)(n.a,s,"bbUiIconLargePost")},"8wib":function(e,t,a){var i=a("ziER"),n=a("5JeM"),s=new i({id:"icon-medium-settings",use:"icon-medium-settings-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-settings"><path fill-rule="evenodd" clip-rule="evenodd" d="M21.4277 6.2062l-2.779.674a8.3399 8.3399 0 00-1.7651-1.7008l.5771-2.8038a.4939.4939 0 00-.3024-.5594l-1.9855-.7817a.4933.4933 0 00-.6028.2026l-1.4904 2.444a8.2935 8.2935 0 00-2.4509.0405L9.0563 1.333a.4956.4956 0 00-.6098-.1818l-1.9568.8509a.4934.4934 0 00-.2827.5703l.674 2.778a8.3417 8.3417 0 00-1.7018 1.7651l-2.8038-.5761a.4946.4946 0 00-.5594.3024l-.7817 1.9855a.495.495 0 00.2026.6028l2.444 1.4894a8.3611 8.3611 0 00.0406 2.4509l-2.3887 1.5734a.4952.4952 0 00-.1809.6098l.851 1.9568a.4938.4938 0 00.5692.2827l2.779-.6741a8.3178 8.3178 0 001.7652 1.7019l-.5772 2.8028a.4936.4936 0 00.3034.5594l1.9845.7827a.4946.4946 0 00.6029-.2026l1.4903-2.4441a8.3594 8.3594 0 002.451-.0405l1.5724 2.3877a.4943.4943 0 00.6097.1819l1.9569-.8509a.4953.4953 0 00.2836-.5703l-.674-2.7791a8.3321 8.3321 0 001.7008-1.7641l2.8038.5772a.4948.4948 0 00.5594-.3034l.7817-1.9855a.4938.4938 0 00-.2026-.6029l-2.444-1.4893a8.298 8.298 0 00-.0405-2.451l2.3887-1.5733a.4936.4936 0 00.1808-.6098l-.8509-1.9559a.4944.4944 0 00-.5693-.2836z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path fill-rule="evenodd" clip-rule="evenodd" d="M12 16c-2.2057 0-4-1.7943-4-4s1.7943-4 4-4 4 1.7943 4 4-1.7943 4-4 4z" stroke-width="2" /></symbol>'});n.add(s);e.exports=s},"9Ss5":function(e,t){e.exports='<div class="element-image avatar no-select" aria-hidden="true"\n     ng-class="[avatarsClasses, {\'alert-outline\': isWarningRender}]"\n     bb-load-bundle="components/directives/avatar" bb-cache-compilation="avatar">\n  <div class="avatar-inner" ng-if="isAvatarRender && (!autoUpdate || !autoUpdate())">\n    <div ng-if="::(!first && !second)" class="first avatar-single">\n      \x3c!-- If no user is set --\x3e\n      <div class="initials">\n        <bb-translate>components.directives.avatar.notAssignedInitials</bb-translate>\n      </div>\n    </div>\n\n    <div ng-if="::(first && first.avatarUrl)" class="first avatar-single image-avatar">\n      <img ng-src="{{::first.avatarUrl}}" bb-image-grayscale="{{::isGray()}}" alt="" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.firstAvatarImg : null">\n      \x3c!-- If first user is set and has avatar image --\x3e\n    </div>\n\n    <div ng-if="::(first && !first.avatarUrl && first.userInitials)"\n         class="first avatar-single {{::first.avatarBg}}">\n      \x3c!-- If first user is set, but does not have avatar image, but has non-CJK name Will still render default--\x3e\n      <img ng-src="{{::first.avatarUrl}}" bb-image-grayscale="{{::isGray()}}" alt="" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.firstAvatarImg : null">\n    </div>\n\n    <div ng-if="::(first && !first.avatarUrl && !first.userInitials)"\n         class="first avatar-single avatar-placeholder">\n      \x3c!-- If first user is set, but does not have avatar image and name contains CJK characters --\x3e\n      \x3c!-- Show default avatar image --\x3e\n      <img ng-if="::(!first.isMultiUser)" src="./static/images/avatar-placeholder.svg" bb-image-grayscale="{{::isGray()}}" alt="" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.firstAvatarImg : null">\n      <div class="multi-user-id" ng-if="::(first.isMultiUser)">\n        <bb-ui-icon-large-users></bb-ui-icon-large-users>\n      </div>\n    </div>\n\n    <div ng-if="::(second && second.avatarUrl && participants == 2)" class="second avatar-single image-avatar">\n      <img ng-src="{{second.avatarUrl}}" bb-image-grayscale="{{::isGray()}}" alt="" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.firstAvatarImg : null">\n      \x3c!-- If second user is set and has avatar image --\x3e\n    </div>\n\n    <div ng-if="::(second && !second.avatarUrl && participants == 2 && second.userInitials)"\n         class="second avatar-single {{::second.avatarBg}}">\n      \x3c!-- If second user is set, but does not have avatar image, but has non-CJK name. Will still render default --\x3e\n      <img ng-src="{{second.avatarUrl}}" bb-image-grayscale="{{::isGray()}}" alt="" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.secondAvatarImg : null">\n    </div>\n\n    <div ng-if="::(second && !second.avatarUrl && participants == 2 && !second.userInitials)"\n         class="second avatar-single avatar-placeholder">\n      \x3c!-- If second user is set, but does not have avatar image and name contains CJK characters --\x3e\n      \x3c!-- Show default avatar image --\x3e\n      <img ng-if="::(!second.isMultiUser)" src="./static/images/avatar-placeholder.svg" bb-image-grayscale="{{::isGray()}}" alt="" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.secondAvatarImg : null">\n      <div class="multi-user-id" ng-if="::(second.isMultiUser)">\n        <bb-ui-icon-large-avatar-multiple></bb-ui-icon-large-avatar-multiple>\n      </div>\n    </div>\n\n    <div ng-if="participants > 2" class="second avatar-single">\n      \x3c!-- If more than 2 participants involved, show `+3` type of avatar for right side --\x3e\n      \x3c!-- htmlhint:analytics-id:disable --\x3e\n      <div class="initials" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.twoPlusAvatar">\n        <bb-translate translate-values=\'{num: participants - 1}\' aria-hidden="true">components.directives.avatar.twoPlusInitials</bb-translate>\n      </div>\n      \x3c!-- htmlhint:analytics-id:enable --\x3e\n    </div>\n  </div>\n\n  <div class="avatar-inner" ng-if="isAvatarRender && autoUpdate && autoUpdate()">\n\n    <div ng-if="!first && !second" class="first avatar-single">\n      \x3c!-- If no user is set --\x3e\n      \x3c!-- htmlhint:analytics-id:disable --\x3e\n      <div class="initials" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.firstAvatarImg : null">\n        <bb-translate>components.directives.avatar.notAssignedInitials</bb-translate>\n      </div>\n      \x3c!-- htmlhint:analytics-id:enable --\x3e\n    </div>\n\n    <div ng-if="first && first.avatarUrl" class="first avatar-single image-avatar">\n      <img ng-src="{{first.avatarUrl}}" bb-image-grayscale="{{isGray()}}" alt="" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.firstAvatarImg : null">\n      \x3c!-- If first user is set and has avatar image --\x3e\n    </div>\n\n    <div ng-if="first && !first.avatarUrl && first.userInitials"\n         class="first avatar-single {{first.avatarBg}}">\n      \x3c!-- If first user is set, but does not have avatar image, but has non-CJK name --\x3e\n      \x3c!-- Show default image --\x3e\n      <img src="./static/images/avatar-placeholder.svg" bb-image-grayscale="{{isGray()}}" alt="" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.firstAvatarImg : null">\n    </div>\n\n    <div ng-if="first && !first.avatarUrl && !first.userInitials"\n         class="first avatar-single avatar-placeholder">\n      \x3c!-- If first user is set, but does not have avatar image and name contains CJK characters --\x3e\n      \x3c!-- Show default avatar image --\x3e\n      <img ng-if="::(!first.isMultiUser)" src="./static/images/avatar-placeholder.svg" bb-image-grayscale="{{isGray()}}" alt="" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.firstAvatarImg : null">\n      <div class="multi-user-id" ng-if="::(first.isMultiUser)">\n        <bb-ui-icon-large-avatar-multiple></bb-ui-icon-large-avatar-multiple>\n      </div>\n    </div>\n\n    <div ng-if="second && second.avatarUrl && participants == 2" class="second avatar-single image-avatar">\n      <img ng-src="{{second.avatarUrl}}" bb-image-grayscale="{{isGray()}}" alt="" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.secondAvatarImg : null">\n      \x3c!-- If second user is set and has avatar image --\x3e\n    </div>\n\n    <div ng-if="second && !second.avatarUrl && participants == 2 && second.userInitials"\n         class="second avatar-single {{second.avatarBg}}">\n      \x3c!-- If second user is set, but does not have avatar image, but has non-CJK name --\x3e\n      \x3c!-- Show default image --\x3e\n      <img src="./static/images/avatar-placeholder.svg" bb-image-grayscale="{{isGray()}}" alt="" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.secondAvatarImg : null">\n    </div>\n\n    <div ng-if="second && !second.avatarUrl && participants == 2 && !second.userInitials"\n         class="second avatar-single avatar-placeholder">\n      \x3c!-- If second user is set, but does not have avatar image and name contains CJK characters --\x3e\n      \x3c!-- Show default avatar image --\x3e\n      <img ng-if="::(!second.isMultiUser)" src="./static/images/avatar-placeholder.svg"  bb-image-grayscale="{{isGray()}}" alt="" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.secondAvatarImg : null">\n      <div class="multi-user-id" ng-if="::(second.isMultiUser)">\n        <bb-ui-icon-large-avatar-multiple></bb-ui-icon-large-avatar-multiple>\n      </div>\n    </div>\n\n    <div ng-if="participants > 2" class="second avatar-single">\n      \x3c!-- If more than 2 participants involved, show `+3` type of avatar for right side --\x3e\n      \x3c!-- htmlhint:analytics-id:disable --\x3e\n      <div class="initials" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.twoPlusAvatar : null">\n        <bb-translate translate-values=\'{num: participants - 1}\' aria-hidden="true">components.directives.avatar.twoPlusInitials</bb-translate>\n      </div>\n      \x3c!-- htmlhint:analytics-id:enable --\x3e\n    </div>\n  </div>\n</div>\n'},BXQP:function(e,t){e.exports='<div class="timestamp" bb-load-bundle="components/directives/duration" ng-cloak bb-cache-compilation="duration-directive">\n  <div ng-if="!duration.needAgo()">\n    <div class="js-split-datetime" ng-if="duration.separateDatetime()">\n      <span class="date" ng-bind="duration.date"></span>\n      <span class="time" ng-bind="duration.time"></span>\n    </div>\n    <bb-datetime ng-if="!duration.separateDatetime()" ng-class="{\'date\':duration.date}" value="date" format="Short"></bb-datetime>\n  </div>\n  <div ng-if="duration.needAgo()"\n       class="js-duration-ago"\n       bb-translate="components.directives.duration.agoText"\n       translate-values="{durationDate: duration.date, durationTime: duration.time}"></div>\n</div>'},FU3Y:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var i=a("zYa8"),n=a("An0y");const s="ultra.components.directives.bbUiIcon.large.Wiki";Object(i.a)(n.a,s,"bbUiIconLargeWiki")},GbCx:function(e,t,a){},LI5i:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var i=a("zYa8"),n=a("Ei1Y");const s="ultra.components.directives.bbUiIcon.large.RetentionCenter";Object(i.a)(n.a,s,"bbUiIconLargeRetentionCenter")},NMEb:function(e,t,a){"use strict";var i=a("Llzl");var n=class{static convertToGrayscale(e){const t=document.createElement("canvas"),a=t.getContext("2d"),i=e.naturalWidth,n=e.naturalHeight;t.width=i,t.height=n,a.drawImage(e,0,0);const s=a.getImageData(0,0,i,n);let r;const o=s.data.length;for(let e=0;e<o;e+=4)r=(s.data[e]+s.data[e+1]+s.data[e+2])/3,s.data[e]=r,s.data[e+1]=r,s.data[e+2]=r;return a.putImageData(s,0,0,0,0,s.width,s.height),t.toDataURL()}};a.d(t,"a",(function(){return s}));const s="ultra.components.directives.imageGrayscale";class r{constructor(e,t,a){this.scope=e,this.element=t,this.attributes=a;"true"===this.attributes.bbImageGrayscale&&c()&&t.one("load",this.onLoadCallback())}onLoadCallback(){return()=>{const e=n.convertToGrayscale(this.element[0]);this.element[0].src=e}}}class o{constructor(){this.restrict="A",this.link=(e,t,a)=>new r(e,t,a)}}function c(){const e=document.documentMode;return 10===e||11===e}const l=i.module(s,[]);c()&&l.directive("bbImageGrayscale",["$injector",e=>e.instantiate(o)])},SSV0:function(e,t,a){var i=a("ziER"),n=a("5JeM"),s=new i({id:"icon-small-accommodation",use:"icon-small-accommodation-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-accommodation"><circle cx="8" cy="8" r="7" stroke-width="2" /><path d="M4 6l1 2 5-3M12 10l-1-2-5 3" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});n.add(s);e.exports=s},UFXJ:function(e,t,a){"use strict";a.r(t);a("zhNR"),a("1wt3"),a("lGua"),a("8wib");var i=a("Llzl"),n=a("D57K"),s=a("Fvsw"),r=a("r133"),o=a("jhBu"),c=a("lr7J"),l=a("0JpG");function d(e){return function(t){return t.filter((t=>e.indexOf(t.type)>=0))}}var u=a("OaxLs"),m=a("iG2q"),b=a("TnpK"),h=a("lEL+"),v=a("aHpC"),g=a("Sa5G"),p=m.a;const f="ultra.base.stream.controller";let y=class{constructor(e,t,a,i){let n;const s=function(e,a){a&&"base.recentActivity"===t.current.name&&a.run()},r=[a.$onEvent(u.a,s),()=>i.cancel(n),e.$root.$on("$stateChangeSuccess",(function(t,r,o,c){c.name&&(i.cancel(n),n=i((()=>s(0,a.currentTask)),e,2e3,!1))}))];e.$on("$destroy",(()=>{r.forEach((e=>e()))})),s(0,a.currentTask)}};y=Object(n.a)([Object(n.c)(0,Object(v.b)("scope")),Object(n.c)(1,Object(v.b)(b.d)),Object(n.c)(2,Object(v.b)(u.d)),Object(n.c)(3,Object(v.b)(h.b))],y);class I extends y{constructor(e,t,a,i,n,s,r,o,c){super(e,o,n,c),this.$scope=e,this.context=t,this.bbLocalize=a,this.memberships=i,this.streamEntryLoader=n,this.EntitlementService=s,this.$q=r,this.ultraState=o,this.timeoutService=c,this.viewFilters=[],this.viewFilterFocused=!1,e.baseStream=this,this.date=t.getServerTime();const l={label:a.translateSync({locale:a.getLocale(this.$scope),key:"base.stream.filters.all"}),type:"ShowAll",filter:null};this.viewFilters.push(l),this.selectedViewFilter=l,this.hasStudentRole=i.some((e=>e.isStudentMembership())),this.hasInstructorRole=i.some((e=>e.isActAsInstructorMembership())),this.addViewFilters(this.hasStudentRole),this.EntitlementService.hasSystemEntitlement(g.a.CreateSystemAnnouncement).then((e=>{this.isEntitledToCreateSystemAnnouncements=e})),e.$watch("baseStream.selectedViewFilter",(()=>{this.streamEntryLoader.setViewFilter(this.selectedViewFilter.filter)}))}changeFilter(e){this.selectedViewFilter=e}loadNewEntries(){this.$scope.$broadcast(r.b)}hasEntryShown(){return 0!==this.streamEntryLoader.countViewEntries()}isStreamEmpty(){return!this.isStreamLoading()&&!this.selectedViewFilter.filter&&!this.hasEntryShown()}isStreamLoading(){return this.streamEntryLoader.isStreamLoading()}loadMoreEntriesIntoView(){if(this.streamEntryLoader&&this.streamEntryLoader.buckets&&this.streamEntryLoader.buckets.previous&&this.streamEntryLoader.buckets.previous.queuedView&&this.streamEntryLoader.buckets.previous.queuedView.length>0)if(this.ultraState.is("base.recentActivity")){const e=this.$q.defer();this.$scope.$root.$broadcast(c.a,"base-stream",e.promise),this.streamEntryLoader.buckets.previous.loadMoreEntriesIntoView(),e.resolve()}else this.streamEntryLoader.buckets.previous.loadMoreEntriesIntoView()}setViewFilterFocused(e){this.viewFilterFocused=e}addViewFilters(e){e&&this.viewFilters.push({label:this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.$scope),key:"base.stream.filters.assignmentsAndTests"}),type:p.AssignmentsAndTests.toString(),filter:d(p.AssignmentsAndTests.getSupportedTypes())}),this.viewFilters.push({label:this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.$scope),key:"base.stream.filters.gradesAndFeedback"}),type:p.GradesAndFeedback.toString(),filter:d(p.GradesAndFeedback.getSupportedTypes())})}}I.$inject=["$scope",s.b,l.serviceName,"memberships",u.d,o.b,"$q",b.d,h.b];var x=a("J0Qq"),w=(a("3Yz5"),a("jciN")),S=a("HtY7"),E=a("+g6d"),A=a("IWgv"),C=a("lHMO"),T=a("ZNC7"),L=a("xpqL"),k=a("mCEN"),D=a("zYa8"),U=a("qaIz");const M="ultra.components.directives.bbUiIcon.large.Alert";Object(D.a)(U.a,M,"bbUiIconLargeAlert");var $=a("uvxX"),N=a("hD4Q");const j="ultra.components.directives.bbUiIcon.large.Calendar";Object(D.a)(N.a,j,"bbUiIconLargeCalendar");var P=a("iim8"),O=a("xiEu"),F=a("fnCh"),z=a("WfnG"),R=a("m4m5"),G=a("8gSl"),V=a("LI5i"),_=a("k12r"),J=a("FU3Y"),W=a("vO4n");const B="ultra.directives.streamEntry";class Y{constructor(e,t,a,i,n,s){this.element=e,this.scope=t,this.streamEntryManager=a,this.streamEntryLoader=i,this.timeout=n,this.localize=s,null!=this.scope.item().title&&(this.titleAriaLabel=this.localize.translateSync({locale:this.localize.getLocale(this.scope),key:"base.stream.dismissAccessibleLabel",params:{entryName:this.scope.item().title.replace(/<\/?bdi>/g,"")},noWrap:!0,noEscape:!0}))}removeImportantEntry(e){this.streamEntryManager.removeStreamEntryFromServer(e).then((()=>{this.streamEntryLoader.removeImportantEntry(e)}),(e=>{console.error(e)}))}analyticsContext(e){const t={contextType:"stream",streamType:e.type,id:e.id,courseId:e.courseId};return e.analyticsContext?e.analyticsContext(t):t}displayTime(){this.element.find(".timestamp").addClass("focused")}hideTime(){this.element.find(".timestamp").removeClass("focused")}getNotificationShapeCSS(){const e=[],t=this.scope.item().notificationShapeType;return t?(e.push(t.shape.getCSSClass()),(!this.scope.previousItem()||!this.scope.previousItem().notificationShapeType&&t.shape!==T.a.DefaultNotification||this.scope.previousItem().notificationShapeType&&this.scope.previousItem().notificationShapeType.shape!==t.shape)&&e.push(t.shape.getFirstCSSClass())):e.push(T.a.DefaultNotification.getCSSClass()),e}isUserCourseAvailable(e){const t=this.scope.getUserCourseAvailablities&&this.scope.getUserCourseAvailablities();return!(t&&t[e.courseId]&&!t[e.courseId][e.entrySpecificData.streamUser.id])}getItemIcon(){var e;return null!==(e=this.scope.item().icon)&&void 0!==e?e:""}getItemIconColor(){return this.scope.item().isImportant?"error":"primary"}hasCourseColor(){return!!this.scope.item().courseColorClass}getIconAriaLabel(){return this.scope.item().icon?this.localize.translateSync({key:`components.directives.element-image.element-image-accessibility.img-icon-${this.scope.item().icon}`,locale:this.localize.getLocale(this.scope)}):""}}Y.NEW_INDICATOR_FADE_OUT_SELECTOR="ball-bounce-out",Y.NEW_INDICATOR_TIME_TO_FADE=3e4,Y.$inject=["element","scope",L.b,u.d,h.b,l.serviceName];class H{constructor(e){this.$injector=e,this.replace=!0,this.restrict="E",this.template=W,this.scope={index:"&",item:"&",getUserCourseAvailablities:"&?userCourseAvailablities",previousItem:"&"},this.link=(e,t)=>{e.streamEntry=this.$injector.instantiate(Y,{element:t,scope:e})}}}H.$inject=["$injector"],i.module(B,[S.a,E.a,A.a,C.a,r.a,w.a,L.a,u.c,h.a,k.a,M,$.a,j,P.a,O.a,F.a,z.a,R.a,G.a,V.a,_.a,J.a,"ngSanitize","angular-inview","ngAnimate"]).directive("bbStreamEntry",["$injector",e=>e.instantiate(H)]);var q=a("pjml"),K=a("aExF");a.d(t,"moduleName",(function(){return X})),a.d(t,"controllerName",(function(){return Q})),a.d(t,"template",(function(){return K}));const X="ultra.base.stream",Q=f;i.module(X,["ngAnimate","ngSanitize",x.a,B,s.a,r.a,c.b,q.N,u.c,L.a,b.b,h.a]).controller(f,class extends I{})},WfnG:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var i=a("zYa8"),n=a("cdNx");const s="ultra.components.directives.bbUiIcon.large.Kudos";Object(i.a)(n.a,s,"bbUiIconLargeKudos")},aExF:function(e,t){e.exports='<div class="js-base-stream-container" bb-first-time-container bb-cache-compilation="base-stream" bb-offcanvas-pausal-scope>\n  <bb-base-header page-title-key="base.stream.pageTitle" hide-search="true" has-filter="true">\n    \x3c!--FILTER--\x3e\n    <div name="base-header-tools" class="base-header-tools">\n      <div class="base-header-select">\n        <div class="filter-wrapper" bb-translate>base.stream.filters.filterBy</div>\n        <div class="select-wrapper">\n          <div bb-foundation>\n            <button data-dropdown="streams-filter"\n                    ng-focus="baseStream.setViewFilterFocused(true)"\n                    bb-click-focus=".item-selected > a"\n                    ng-blur="baseStream.setViewFilterFocused(false)"\n                    bb-translate-attrs="{ \'aria-label\': \'base.stream.filter.name\' }"\n                    aria-describedby="filter-stream-value"\n                    aria-controls="streams-filter" aria-haspopup="true"\n                    analytics-id="feature.base.stream.filter.dropdown.button">\n              <div class="select-value" ng-class="{focus: baseCourses.courseFilterFocused}">\n                <span id="filter-stream-value" ng-bind="baseStream.selectedViewFilter.label"></span>\n              </div>\n            </button>\n            <ul role="listbox" id="streams-filter" class="f-dropdown feature-filter" data-dropdown-content aria-hidden="true" tabindex="-1">\n              <li ng-repeat="filter in baseStream.viewFilters" ng-class="{\'item-selected\': baseStream.selectedViewFilter === filter}" role="presentation" data-filter-type="{{filter.type}}">\n                <a href="javascript:void(0);" role="option" aria-checked="{{baseStream.selectedViewFilter === filter}}" ng-click="baseStream.changeFilter(filter)" analytics-id="feature.base.stream.select.view.filter.link">\n                  <span>{{filter.label}}</span>\n                </a>\n              </li>\n            </ul>\n          </div>\n        </div>\n      </div>\n      \x3c!-- htmlhint:analytics-id:disable --\x3e\n      <a id="stream-settings-button" class="standard-button" bb-peek-sref="notification-settings.content"\n         bb-translate-attrs="{ \'aria-label\': \'base.stream.settings.button\' }"\n         analytics-id="feature.base.stream.settings.button">\n        <bb-svg-icon size="small" icon="settings"></bb-svg-icon>\n        <bb-svg-icon size="medium" icon="settings"></bb-svg-icon>\n      </a>\n      \x3c!-- htmlhint:analytics-id:enable --\x3e\n    </div>\n  </bb-base-header>\n  \x3c!--START-- notification bar --\x3e\n  <div ng-if="baseStream.isEntitledToCreateSystemAnnouncements" class="notification-bar row collapse">\n    <span class="columns small-12 medium-8" bb-translate>base.stream.notification.bar.label</span>\n    <div class="columns small-12 medium-4 button-group equal-buttons buttons-2">\n      \x3c!-- htmlhint:analytics-id:disable --\x3e\n      <a class="button button--secondary" bb-peek-sref="notification-create.steps" bb-translate analytics-id="feature.base.stream.notification.bar.create.button">base.stream.notification.bar.create</a>\n      \x3c!-- htmlhint:analytics-id:enable --\x3e\n    </div>\n  </div>\n  \x3c!--END-- notification bar --\x3e\n  <div id="body-content" class="base-recent-activity">\n\n    \x3c!--STREAM--\x3e\n    <div class="row collapse">\n      <div class="">\n        <div class="activity-stream row collapse" id="activity-stream">\n          \x3c!--IMPORTANT--\x3e\n          <div class="js-importantStreamEntries activity-group notification columns main-column angular-animate" ng-if="baseStream.streamEntryLoader.buckets.important.view.length != 0">\n            <h2 class="activity-group-title" bb-translate>base.stream.groupings.important</h2>\n            <ul class="activity-feed">\n              <bb-stream-entry item="item"\n                               index="$index"\n                               previous-item="important[$index - 1]"\n                               ng-repeat="item in important = baseStream.streamEntryLoader.buckets.important.view track by item.id"\n                               user-course-availablities="baseStream.streamEntryLoader.streamEntryManager.userCourseAvailabilities"\n                               analytics-id="base.stream.groupings.important.streamEntry">\n              </bb-stream-entry>\n            </ul>\n          </div>\n          \x3c!--UPCOMING--\x3e\n          <div class="js-upcomingStreamEntries activity-group columns main-column" ng-if="baseStream.streamEntryLoader.buckets.upcoming.view.length != 0">\n            <h2 class="activity-group-title" bb-translate>base.stream.groupings.upcoming</h2>\n            <ul class="activity-feed">\n              <bb-stream-entry item="item"\n                               index="$index"\n                               previous-item="upcoming[$index-1]"\n                               ng-repeat="item in upcoming = baseStream.streamEntryLoader.buckets.upcoming.view track by item.id"\n                               user-course-availablities="baseStream.streamEntryLoader.streamEntryManager.userCourseAvailabilities"\n                               analytics-id="base.stream.groupings.upcoming.streamEntry">\n              </bb-stream-entry>\n            </ul>\n            \x3c!-- htmlhint:analytics-id:disable --\x3e\n            <button class="js-show-more expand button button--text" ng-if="baseStream.streamEntryLoader.buckets.upcoming.hasMoreInView" ui-sref="base.deadline" analytics-id="feature.base.stream.showMore" bb-translate>base.stream.showMore</button>\n            \x3c!-- htmlhint:analytics-id:enable --\x3e\n          </div>\n          \x3c!--TODAY--\x3e\n          <div class="js-todayStreamEntries activity-group columns main-column" ng-if="baseStream.streamEntryLoader.buckets.today.view.length != 0">\n            <h2 class="activity-group-title" bb-translate>base.stream.groupings.today</h2>\n            <span class="heading-date"><bb-date format="full">baseStream.date</bb-date></span>\n            <ul class="activity-feed">\n              <bb-stream-entry item="item"\n                               index="$index"\n                               previous-item="today[$index - 1]"\n                               ng-repeat="item in today = baseStream.streamEntryLoader.buckets.today.view track by item.id"\n                               user-course-availablities="baseStream.streamEntryLoader.streamEntryManager.userCourseAvailabilities"\n                               analytics-id="base.stream.groupings.today.streamEntry">\n              </bb-stream-entry>\n            </ul>\n          </div>\n          \x3c!--PREVIOUS--\x3e\n          <div class="js-previousStreamEntries activity-group columns main-column"\n              ng-if="baseStream.streamEntryLoader.buckets.previous.view.length != 0 || baseStream.streamEntryLoader.buckets.previous.queuedView.length != 0">\n            <h2 class="activity-group-title" bb-translate>base.stream.groupings.recent</h2>\n            <ul class="activity-feed"\n                bb-infinite-scroll="baseStream.loadMoreEntriesIntoView()"\n                infinite-scroll-immediate-check="true"\n                infinite-scroll-container="\'#main-content-inner\'"\n                infinite-scroll-disabled="baseStream.isStreamLoading()"\n                infinite-scroll-current-count="baseStream.streamEntryLoader.buckets.previous.view.length"\n                infinite-scroll-total-count="baseStream.streamEntryLoader.buckets.previous.allEntries.length"\n                infinite-scroll-load-limit="baseStream.streamEntryLoader.buckets.previous.MAX_ENTRIES_TO_PROGRESSIVE_LOAD"\n                infinite-scroll-tray-id="base-stream"\n                infinite-scroll-focusable-children-selector=".element-card .name a"\n                infinite-scroll-localization-keys-prefix="base.stream.infiniteScroll">\n              <bb-stream-entry item="item"\n                               index="$index"\n                               previous-item="previous[$index - 1]"\n                               ng-repeat="item in previous = baseStream.streamEntryLoader.buckets.previous.view track by item.id"\n                               user-course-availablities="baseStream.streamEntryLoader.streamEntryManager.userCourseAvailabilities"\n                               analytics-id="base.stream.groupings.recent.streamEntry">\n              </bb-stream-entry>\n            </ul>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    \x3c!--Stream entries loading indicator (must use ng-show to properly display)--\x3e\n    <div class="spinner bb-secondary-color-2 relatively-centered" ng-show="baseStream.isStreamLoading()" aria-hidden="true"></div>\n\n    \x3c!--No stream entries based on filter selected indicator--\x3e\n    <div class="empty-note" ng-if="!baseStream.hasEntryShown() && baseStream.selectedViewFilter.filter">\n      <bb-animated-gif src="./static/images/ftue/ftuMMicon_emptyStreamSearch.gif"></bb-animated-gif>\n      <span bb-translate>base.stream.noResults</span>\n      <bb-translate>base.stream.newFilter</bb-translate>\n    </div>\n\n    \x3c!--No stream entries to view at all indicator--\x3e\n    <div class="empty-note" ng-if="baseStream.isStreamEmpty()">\n      <bb-animated-gif src="./static/images/ftue/ftuMMicon_EmptyStream.gif"></bb-animated-gif>\n      <span bb-translate>base.stream.noActivity.{{::baseStream.hasInstructorRole ? \'instructor\' : \'others\'}}</span>\n      <bb-translate>base.stream.connect.{{::baseStream.hasInstructorRole ? \'instructor\' : \'others\'}}</bb-translate>\n    </div>\n    <div ui-view></div>\n  </div>\n\n  <div ui-view="base-recentActivity-base"></div>\n</div>\n'},fnCh:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var i=a("zYa8"),n=a("xwJZ");const s="ultra.components.directives.bbUiIcon.large.Grades";Object(i.a)(n.a,s,"bbUiIconLargeGrades")},iYZE:function(e,t,a){(function(a){var i,n,s;!function(a,r){"use strict";"object"==typeof e.exports?e.exports=r():(n=[],void 0===(s="function"==typeof(i=r)?i.apply(t,n):i)||(e.exports=s))}(0,(function(){"use strict";var e="function"==typeof a?function(e){return new a(JSON.stringify(e))}:function(e){return JSON.stringify(e)};function t(e,t){t!==e.head&&(e.end?e.end===t&&(e.end=t.n):e.end=t,i(t.n,t.p),i(t,e.head),e.head=t,e.head.n=null)}function i(e,t){e!==t&&(e&&(e.p=t),t&&(t.n=e))}function n(e){if(!(this instanceof n))return new n(e);this.capacity=e>0?e:Number.MAX_VALUE,this.removeAll()}var s=n.prototype;return s.get=function(e){var a=this.hash[e];if(a)return t(this.linkedList,a),JSON.parse(this.data[e].toString())},s.set=function(a,i){var n=this.hash[a];return void 0===i||(n||(this.hash[a]={key:a},this.linkedList.length+=1,n=this.hash[a]),t(this.linkedList,n),this.data[a]=e(i),this.linkedList.length>this.capacity&&this.remove(this.linkedList.end.key)),this},s.update=function(e,t){if(this.has(e)){var a=this.get(e);this.set(e,t(a))}return this},s.remove=function(e){var t=this.hash[e];return t?(t===this.linkedList.head&&(this.linkedList.head=t.p),t===this.linkedList.end&&(this.linkedList.end=t.n),i(t.n,t.p),delete this.hash[e],delete this.data[e],this.linkedList.length-=1,this):this},s.removeAll=function(){return this.data={},this.hash={},this.linkedList={length:0,head:null,end:null},this},s.info=function(){return{capacity:this.capacity,length:this.linkedList.length}},s.keys=function(){for(var e=[],t=this.linkedList.head;t;)e.push(t.key),t=t.p;return e},s.has=function(e){return!!this.hash[e]},n}))}).call(this,a("+ZX+").Buffer)},iim8:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var i=a("zYa8"),n=a("U21b");const s="ultra.components.directives.bbUiIcon.large.Course";Object(i.a)(n.a,s,"bbUiIconLargeCourse")},jciN:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return h}));var i=a("D57K"),n=(a("SSV0"),a("Llzl")),s=a("PdQf"),r=a("g66W"),o=a("5MwF"),c=a("0JpG"),l=a("NMEb"),d=a("4J8k"),u=a("aHpC"),m=a("9Ss5"),b=a("VdDF");const h="ultra.directives.avatar";class v{constructor(e,t,a,i,n){this.scope=e,this.$element=t,this.attributes=a,this.bbLocalize=i,this.$timeout=n,this.backgroundColors=12;const s=this.scope.$watchGroup(["user.givenName","user.familyName","user.ui.displayName","user.avatar.permanentUrl","user","inactive()","isWarningRender"],(()=>{void 0!==this.scope.user&&(this.renderAvatars(),this.scope.autoUpdate&&this.scope.autoUpdate()||s())})),r=this.scope.$watchCollection("users",(()=>{this.scope.users&&(this.renderAvatars(),this.scope.autoUpdate&&this.scope.autoUpdate()||r())}))}getAvatarBG(e){return"default-avatar-"+(parseInt((e&&e.id||"0").replace(/[^\d]/g,""),10)%this.backgroundColors+1)}avatarParticipantsClass(e){switch(e){case 0:return"no-participants";case 1:return"one-participant";case 2:return"two-participants";default:return"two-plus-participants"}}canDisplayAvatarForUser(e){return!!e&&(!!(e.givenName||e.familyName||this.isAnonymousStudent(e))||!(!e.avatar||!e.avatar.permanentUrl||"default"===e.avatar.permanentUrl))}getInitials(e){return!e||this.isAnonymousStudent(e)||!e.givenName||!e.familyName||Object(r.g)(e.givenName)||Object(r.g)(e.familyName)||Object(r.h)(e.givenName)||Object(r.h)(e.familyName)?null:(e.givenName.charAt(0)+e.familyName.charAt(0)).toLowerCase()}buildAvatarData(e){const t={};if(!this.canDisplayAvatarForUser(e))return null;if(t.avatarBg=this.getAvatarBG(e),t.userInitials=this.getInitials(e),e.ui&&e.ui.displayName?t.username=e.ui.displayName:e.givenName||e.familyName||this.isAnonymousStudent(e)?this.bbLocalize.formatUsername(e,c.ILocaleUsernameFormat.Long,this.scope,{noWrap:!0,noEscape:!0}).then((e=>{t.username=e})):t.username=null,e.avatar&&e.avatar.permanentUrl&&"default"!==e.avatar.permanentUrl){if(/^https?/.test(e.avatar.permanentUrl)&&-1===e.avatar.permanentUrl.indexOf("ts=")){const t=(b.a.isValidDate(e.lastModifiedAt)?e.lastModifiedAt:new Date).getTime();e.avatar.permanentUrl=e.avatar.permanentUrl+(e.avatar.permanentUrl.indexOf("?")>=0?"&ts=":"?ts=")+encodeURIComponent(t)}t.avatarUrl=e.avatar.permanentUrl}return t.isMultiUser=Object(s.k)(e),t}isAnonymousStudent(e){if(e.isAnonymousStudent)return e.isAnonymousStudent()}renderAvatars(){let e=this.scope.users;if(!e&&this.scope.user&&(e=this.scope.user),n.isArray(e)||(e=null!=e?[e]:[]),0===e.length)return this.scope.first=null,this.scope.second=null,this.scope.participants=0,void(this.scope.isAvatarRender=!0);this.scope.participants=e.length,this.scope.avatarsClasses={},n.isDefined(this.scope.inactive)&&(this.scope.avatarsClasses.inactive=this.scope.inactive()),this.scope.avatarsClasses.inactive||(this.scope.avatarsClasses.outline=!0),!this.scope.avatarsClasses.inactive&&n.isDefined(this.scope.customizedActiveStyle)&&(this.scope.avatarsClasses.outline=!0,this.scope.avatarsClasses[this.scope.customizedActiveStyle]=!0),this.scope.avatarsClasses[this.avatarParticipantsClass(e.length)]=!0,this.scope.first=this.buildAvatarData(e[0]),2===e.length?this.scope.second=this.buildAvatarData(e[1]):e.length>2&&(this.scope.second={}),this.scope.isAvatarRender=!0}}let g=class{constructor(e,t){this.bbLocalize=e,this.$timeout=t,this.restrict="E",this.template=m,this.scope={user:"=?",inactive:"&?",users:"=?",autoUpdate:"&?",isGray:"&?",hasException:"&?",customizedActiveStyle:"@?",analyticsIdTagPrefix:"@",isWarningRender:"=?"},this.link=(e,t,a)=>new v(e,t,a,this.bbLocalize,this.$timeout)}};g=Object(i.a)([Object(i.c)(0,Object(u.b)(c.serviceName)),Object(i.c)(1,Object(u.b)("$timeout"))],g),o.a.features.newAvatar?n.module(h,[d.a]).directive("bbAvatar",["$compile",t=>({restrict:"E",scope:!1,priority:Number.MAX_VALUE,terminal:!0,link(a,i,n){const s=Object.prototype.hasOwnProperty.call(n,"users")?"bb-user-avatar-group":"bb-user-avatar",r=e(i[0].outerHTML.replace(/bb\-avatar/g,s));i.replaceWith(r),t(r)(a)}})]):n.module(h,[l.a,d.a]).directive("bbAvatar",["$injector",e=>e.instantiate(g)])}).call(this,a("71td"))},lGua:function(e,t,a){var i=a("ziER"),n=a("5JeM"),s=new i({id:"icon-small-settings",use:"icon-small-settings-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-settings"><path d="M7.5977 1.5453c.1998-.2709.6048-.2709.8046 0l.9644 1.307a.5.5 0 00.5534.1798l1.5484-.4906c.3209-.1016.6485.1364.651.473l.0119 1.6242a.5001.5001 0 00.342.4707l1.5411.5133c.3193.1064.4445.4916.2486.7653l-.945 1.321a.5002.5002 0 000 .582l.945 1.321c.1959.2737.0707.6589-.2486.7653l-1.5411.5133a.5.5 0 00-.342.4706l-.0119 1.6243c-.0025.3366-.3301.5746-.651.473L9.92 12.9679a.5.5 0 00-.5533.1798l-.9644 1.307c-.1998.2709-.6048.2709-.8046 0l-.9644-1.307a.5.5 0 00-.5534-.1798l-1.5484.4906c-.3209.1016-.6485-.1364-.651-.473l-.012-1.6243a.4999.4999 0 00-.342-.4706l-1.541-.5133c-.3193-.1064-.4445-.4916-.2486-.7653l.945-1.321a.5.5 0 000-.582l-.945-1.321c-.1959-.2737-.0707-.6589.2486-.7653l1.541-.5133a.5.5 0 00.342-.4707l.012-1.6242c.0025-.3366.3301-.5746.651-.473l1.5484.4906a.5.5 0 00.5534-.1798l.9644-1.307z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M10 8c0 1.1046-.8954 2-2 2s-2-.8954-2-2 .8954-2 2-2 2 .8954 2 2z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});n.add(s);e.exports=s},lHMO:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return m}));var i=a("D57K"),n=(a("1wt3"),a("GbCx"),a("71td")),s=a("Llzl"),r=a("Y88D"),o=a("dJ97"),c=a("aHpC"),l=a("RPob"),d=a("0JpG"),u=a("av75");const m="ultra.directives.stream.entryBody.streamEntryBody";!function(e){e.fn.truncate=function({length:a=100}){const i=e.extend({},t,{length:a});return this.each((function(){const t=e(this);let a=t.text().length-i.length;a<0||!a&&!i.truncated||e.each(t.contents().get().reverse(),(function(t,n){const s=e(n),r=s.text().length;return r<=a?(i.truncated=!0,a-=r,void s.remove()):3===n.nodeType?(e(n.splitText(r-a-1)).replaceWith(i.ellipsis),!1):(s.truncate(e.extend(i,{length:r-a})),!1)}))}))};const t={length:1/0,ellipsis:"â€¦"}}(e);class b{constructor(e,t){this.id=e,this.content=t,this.showContent=!1}showTheContent(){this.showContent=!0}hideTheContent(){this.showContent=!1}}let h=class{constructor(e,t,a){this.$compile=e,this.$sce=t,this.localize=a,this.replace=!0,this.restrict="E",this.link=(e,t)=>{const a=e.bodyType()||u.a.SimpleText;if(e.bodyContent()&&e.bodyContent().isInteractive&&(e.interactiveBodyContent=new b(e.$id,e.bodyContent())),e.bodyContent()&&e.bodyType()===u.a.SimpleText){const t=e.bodyContent();if("string"==typeof t.fullText){const a=[{tag:"table",replacementText:`[${this.localize.translateSync({key:"base.stream.entryBody.announcements.tableWithContent",locale:this.localize.getLocale(e)})}]`},{tag:"math",replacementText:this.localize.translateSync({key:"course.content.mathPlaceholder",locale:this.localize.getLocale(e)}),replacementTextPlural:this.localize.translateSync({key:"course.content.mathPlaceholder.plural",locale:this.localize.getLocale(e)})},{tagQuery:'img[data-bbtype="collab_video"]',replacementAttribute:"title"}],i=Object(l.w)((new DOMParser).parseFromString(t.fullText,"text/html"),a),s=n("<div></div>").append(i.body.innerHTML).truncate({length:100}).html();e.bodyContent().bodyText=s}}t.replaceWith(this.$compile(a.getTemplateHtml())(e))},this.scope={bodyType:"&type",bodyContent:"&content"}}};h=Object(i.a)([Object(i.c)(0,Object(c.b)("$compile")),Object(i.c)(1,Object(c.b)("$sce")),Object(i.c)(2,Object(c.b)(d.serviceName))],h),s.module(m,["ngSanitize",r.a,o.a,d.moduleName]).directive("bbStreamEntryBody",["$injector",e=>e.instantiate(h)])}).call(this,a("71td"))},m4m5:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var i=a("zYa8"),n=a("GY9d");const s="ultra.components.directives.bbUiIcon.large.Message";Object(i.a)(n.a,s,"bbUiIconLargeMessage")},r133:function(e,t,a){"use strict";a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return l}));var i=a("Llzl"),n=a("Fvsw"),s=a("0JpG"),r=a("0+Qs"),o=a("BXQP");const c="ultra.directives.bbDuration",l="refresh.relative.dates";class d{constructor(e,t,a,i){this.scope=e,this.bbContext=t,this.bbLocalize=a,this.interval=i,this.date="",this.time="",this.lessThanOneDay=!1;const n=e.$watch("date",(()=>{this._localizeRelativeDate(),e.autoUpdate&&!e.autoUpdate()&&e.date&&n()}));e.$on(l,(()=>{this._localizeRelativeDate()})),this.interval((()=>{this._localizeRelativeDate()}),this.scope,d.DEFAULT_REFRESH_INTERVAL)}needAgo(){return!!(this.scope.hasAgo&&this.scope.hasAgo()&&this.lessThanOneDay)}separateDatetime(){return!(!this.scope.separateDatetime||!this.scope.separateDatetime())}_localizeRelativeDate(){if(this.scope.date){let e={},t=new Date;const a=this.scope.isRelativeToServerDate&&this.scope.isRelativeToServerDate();(null==a||a)&&(e={relativeTo:this.bbContext.getServerTime()},t=this.bbContext.getServerTime());const i=t.getTime()-this.scope.date.getTime();if(i>=6e4&&this.scope.date.setSeconds(30),this.lessThanOneDay=i<=864e5,this.needAgo()||this.separateDatetime()){const t=this.bbLocalize.getFormatEnum(s.ILocaleDateFormat,this.scope.dateFormat)||s.ILocaleDateFormat.Short;this.bbLocalize.formatDuration(this.scope.date,this.scope,e,t).then((e=>{this.date=e.date||"",this.time=e.time||""}))}}}}d.DEFAULT_REFRESH_INTERVAL=18e4,d.$inject=["scope",n.b,s.serviceName,r.b];class u{constructor(e){this.$injector=e,this.restrict="E",this.replace=!0,this.template=o,this.scope={date:"=",autoUpdate:"&?",isRelativeToServerDate:"&?",dateFormat:"@?",hasAgo:"&?",separateDatetime:"&?"},this.link=e=>{e.duration=this.$injector.instantiate(d,{scope:e})}}}u.$inject=["$injector"],i.module(c,[n.a,s.moduleName,r.a]).directive("bbDuration",["$injector",e=>e.instantiate(u)])},r6lH:function(e,t,a){"use strict";a.d(t,"a",(function(){return b})),a.d(t,"b",(function(){return h}));var i=a("nsO7"),n=a("Llzl"),s=a("jhBu"),r=a("Sa5G"),o=a("ZQFV"),c=a("0JpG"),l=a("pjml"),d=a("wgY5"),u=a("nmzr"),m=a("+O05");const b="ultra.service.telemetry",h="telemetry";class v{constructor(e,t,a,i,n,s,r,o,c,l,d,u,m,b,h,v,g){this.cacheFactory=e,this.$q=t,this.entitlement=a,this.bbLocalize=i,this.ActivityVsGradeModel=n,this.ContentActivityInDetailModel=s,this.CourseActivityModel=r,this.CourseGradesModel=o,this.CourseNotificationsModel=c,this.MultimediaActivityInDetailModel=l,this.MultimediaStatisticsModel=d,this.NotificationUsers=u,this.StudentActivityModel=m,this.StudentGradesModel=b,this.SufficientDataModel=h,this.TelemetryDiscussionActivityModel=v,this.TelemetryDiscussionXrayModel=g,this.SUFFICIENT_DATA_KEY="SufficientData",this.sufficientDataCache=e.createCache("sufficientTelemetryData"),this.notificationsCache=e.createCache("notifications")}loadActivityVsGradeData(e){return this.ActivityVsGradeModel.$find(e).$allow([404]).$asPromise()}loadStudentGradeData(e,t){return this.StudentGradesModel.$find(e,t?{userId:t}:{}).$allow([404,400]).$asPromise()}loadCourseGradeData(e){return this.CourseGradesModel.$find(e).$allow([404,400]).$asPromise()}loadStudentActivityData(e,t){return this.StudentActivityModel.$find(e,t?{userId:t}:{}).$allow([400]).$asPromise()}loadContentActivityInDetailData(e,t){return this.ContentActivityInDetailModel.$collection().getContentActivityInDetail(e,t).$asPromise()}loadMultimediaActivityInDetailData(e,t){return this.MultimediaActivityInDetailModel.$collection().getMultimediaActivityInDetail(e,t).$asPromise()}loadMultimediaStatisticsData(e,t){return this.MultimediaStatisticsModel.getMultimediaStatistics(e,t).$asPromise()}loadCourseActivityData(e){return this.CourseActivityModel.$find(e).$allow([400]).$asPromise()}loadNotificationUsers(e,t,a){const n={};return t&&(n.limit=t),a&&(n.offset=a),this.NotificationUsers.$find(e,n).$asPromise().then((e=>i.keyBy(e.users,"userId")))}loadNotifications(e,t,a,i){return this.getNotificationsPromise(e,t,a,i).promise}loadDiscussionActivityData(e,t,a){return a?this.TelemetryDiscussionActivityModel.getDiscussionActivityReport(e,t,a).$asPromise():this.TelemetryDiscussionActivityModel.getDiscussionActivityReport(e,t).$asPromise()}loadDiscussionXrayReport(e,t,a){return this.TelemetryDiscussionXrayModel.getDiscussionXrayReport(e,t,a).$asPromise()}hasSufficientActivityData(e){return this.getSufficientDataPromise().promise.then((t=>!(!t||!t.coursesWithActivity)&&i.includes(t.coursesWithActivity,e)))}hasSufficientGradeData(e){return this.getSufficientDataPromise().promise.then((t=>!(!t||!t.coursesWithGrades)&&i.includes(t.coursesWithGrades,e)))}canViewAllUserData(e){return this.entitlement.hasCourseEntitlement(o.q.ViewGrades,e)}formatMessageRecipients(e){return(e||[]).map((e=>e.id)).join(",")}determineContentSupportsActivityData(e){const t=this.$q.defer();return m.a.isExternalSubmissionsAssessment(e)?t.resolve(!1):this.contentSupportsActivityData(e)?this.canViewAllUserData(e.courseId).then((e=>{t.resolve(e)})).catch((e=>{t.reject(e)})):t.resolve(!1),t.promise}contentSupportsActivityData(e){return(r.g.TestLink.isEqualTo(e.contentHandler)||r.g.UltraAssignment.isEqualTo(e.contentHandler))&&e.hasGradingColumn()}determinePanelSref(e,t){return this.canViewAllUserData(e).then((a=>a?this.createPanelSref(u.L.INSTRUCTOR_CLASS,e,t):this.createPanelSref(u.L.STUDENT_PROGRESS,e,t)))}createPanelSref(e,t,a){let i='({ courseId: "'+t+'"';return a&&(i+=', notificationId: "'+a+'"'),i+=" })",e.toString()+i}exportFilename(e,t,a,i,n){let s="";e&&(s=e.courseId+"_");const r=this.bbLocalize.formatDateSync(new Date,c.ILocaleDateFormat.ISO).replace(/[^0-9]/g,"");let o="";t&&a&&t.id!==a.id&&(o=t.userName+"_");const l=i?"_"+i:"";let d="";return n&&(d=n.replace(/\s+/g,"_")+"_"),s+o+d+r+l}getSufficientDataPromise(){let e=this.sufficientDataCache.get(this.SUFFICIENT_DATA_KEY);return e||(e={promise:this.SufficientDataModel.$new().$fetch().$allow([404,400]).$asPromise()},this.sufficientDataCache.put(this.SUFFICIENT_DATA_KEY,e)),e}getNotificationsPromise(e,t,a,i){const n=e+t+a+i;let s=this.notificationsCache.get(n);if(!s){const r={};t&&(r.userId=t),a&&(r.includeDismissed=a),i&&(r.notificationType=i),s={promise:this.CourseNotificationsModel.$find(e,r).$asPromise()},s.promise.then((e=>(e.currentStudent.forEach((e=>{e.ui={createdDay:d.utc(e.created).startOf("day").toDate()}})),e))),this.notificationsCache.put(n,s)}return s}}v.$inject=["DSCacheFactory","$q",s.b,c.serviceName,l.sb.serviceName,l.tb.serviceName,l.ub.serviceName,l.vb.serviceName,l.wb.serviceName,l.zb.serviceName,l.Ab.serviceName,l.Cb.serviceName,l.Db.serviceName,l.Eb.serviceName,l.Fb.serviceName,l.xb.serviceName,l.yb.serviceName];n.module(b,[l.N,s.a]).service(h,v)},uvxX:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var i=a("zYa8"),n=a("Pam5");const s="ultra.components.directives.bbUiIcon.large.Announcement";Object(i.a)(n.a,s,"bbUiIconLargeAnnouncement")},vO4n:function(e,t){e.exports='<li class="stream-item-container" ng-class="streamEntry.getNotificationShapeCSS()" bb-click-to-invoke-child="a.js-title-link">\n  <div class="stream-item angular-animate">\n    <div class="stream-item-contents">\n      <div class="element-card">\n        <ng-switch on="(item().entrySpecificData && item().entrySpecificData.streamUser.avatar.permanentUrl && \'stream\') ||\n                       (item().entrySpecificData && item().entrySpecificData.contentItem && \'content\') ||\n                       (item().entrySpecificData && item().entrySpecificData.gradebookColumn && \'gradebook\') || \'other\'">\n          <bb-avatar ng-switch-when="stream" class="element-image" user="item().entrySpecificData.streamUser" auto-update="true" inactive="!streamEntry.isUserCourseAvailable(item())"></bb-avatar>\n          <div ng-switch-when="content" class="element-image" bb-content-item-icon="::item().entrySpecificData.contentItem" show-alert-icon="::item().isImportant"></div>\n          <div ng-switch-when="gradebook" class="element-image" bb-content-item-icon content-column="::item().entrySpecificData.gradebookColumn" show-alert-icon="::item().isImportant"></div>\n          <div ng-switch-default class="element-image">\n            <ng-switch on="::streamEntry.getItemIcon()">\n              <bb-ui-icon-large-alert ng-switch-when="alert-error" color="{{::streamEntry.getItemIconColor()}}" title-access="{{::streamEntry.getIconAriaLabel()}}"></bb-ui-icon-large-alert>\n              <bb-ui-icon-large-announcement ng-switch-when="announcement" fill-color="{{::streamEntry.hasCourseColor() ? \'\' : \'none\'}}" color="{{::streamEntry.getItemIconColor()}}" title-access="{{::streamEntry.getIconAriaLabel()}}"></bb-ui-icon-large-announcement>\n              <bb-ui-icon-large-calendar ng-switch-when="calendar" color="{{::streamEntry.getItemIconColor()}}" title-access="{{::streamEntry.getIconAriaLabel()}}"></bb-ui-icon-large-calendar>\n              <bb-ui-icon-large-course ng-switch-when="course" color="{{::streamEntry.getItemIconColor()}}" title-access="{{::streamEntry.getIconAriaLabel()}}"></bb-ui-icon-large-course>\n              <bb-ui-icon-large-document-multiple ng-switch-when="document-multiple" color="{{::streamEntry.getItemIconColor()}}" title-access="{{::streamEntry.getIconAriaLabel()}}"></bb-ui-icon-large-document-multiple>\n              <bb-ui-icon-large-grades ng-switch-when="grades" color="{{::streamEntry.getItemIconColor()}}" title-access="{{::streamEntry.getIconAriaLabel()}}"></bb-ui-icon-large-grades>\n              <bb-ui-icon-large-kudos ng-switch-when="kudos" color="{{::streamEntry.getItemIconColor()}}" title-access="{{::streamEntry.getIconAriaLabel()}}"></bb-ui-icon-large-kudos>\n              <bb-ui-icon-large-message ng-switch-when="message" color="{{::streamEntry.getItemIconColor()}}" title-access="{{::streamEntry.getIconAriaLabel()}}"></bb-ui-icon-large-message>\n              <bb-ui-icon-large-post ng-switch-when="post" color="{{::streamEntry.getItemIconColor()}}" title-access="{{::streamEntry.getIconAriaLabel()}}"></bb-ui-icon-large-post>\n              <bb-ui-icon-large-retention-center ng-switch-when="retention-center" color="{{::streamEntry.getItemIconColor()}}" title-access="{{::streamEntry.getIconAriaLabel()}}"></bb-ui-icon-large-retention-center>\n              <bb-ui-icon-large-survey ng-switch-when="survey" color="{{::streamEntry.getItemIconColor()}}" title-access="{{::streamEntry.getIconAriaLabel()}}"></bb-ui-icon-large-survey>\n              <bb-ui-icon-large-wiki ng-switch-when="wiki" color="{{::streamEntry.getItemIconColor()}}" title-access="{{::streamEntry.getIconAriaLabel()}}"></bb-ui-icon-large-wiki>\n              <bb-ui-content-icon ng-switch-default icon="streamEntry.getItemIcon()" color="{{::streamEntry.getItemIconColor()}}" not-decorative="true"></bb-ui-content-icon>\n            </ng-switch>\n          </div>\n        </ng-switch>\n\n        <div class="element-details {{item().courseColorClass}}" ng-class="{\'with-action-button\': item().isImportant && item().remove}"\n             analytics-context="{{streamEntry.analyticsContext(item())}}">\n\n          <bb-duration date="item().notificationCreationDate" auto-update="true" separate-datetime="true" date-format="Medium"></bb-duration>\n\n          \x3c!-- NOTE: intentionally using ng-if instead of ng-show to improve performance by\n               not calling out to in-view as much since most stream entries will not be NEW entries --\x3e\n          <div class="context ellipsis" ng-switch on="::(item().courseId && \'linkToCourse\')\n                || \'doNotLink\'">\n            \x3c!-- htmlhint:analytics-id:disable --\x3e\n            <a ng-switch-when="linkToCourse"\n               bb-peek-sref="course.outline({courseId: item().courseId, coursesOrOrganizations: item().isOrganization ? \'organizations\' : \'courses\'})"\n               ng-focus="streamEntry.displayTime()"\n               ng-blur="streamEntry.hideTime()"\n               ng-bind-html="item().header"\n               analytics-id="stream.entry.course"></a>\n            \x3c!-- htmlhint:analytics-id:enable --\x3e\n            <span ng-switch-when="doNotLink" ng-bind-html="item().header"></span>\n            <span ng-bind-html="item().headerSubtitle"></span>\n          </div>\n\n          <div class="name">\n            <ng-switch on="(item().body.stateRef && \'linkToPeekState\') ||\n                           (item().body.externalRef && \'linkToExternalUrl\') ||\n                           (item().body.clickHandler && \'linkToHandler\') ||\n                           \'doNotLink\'">\n              \x3c!-- htmlhint:analytics-id:disable --\x3e\n              <a class="js-title-link"\n                 ng-focus="streamEntry.displayTime()"\n                 ng-blur="streamEntry.hideTime()"\n                 ng-switch-when="linkToPeekState"\n                 bb-peek-sref="{{item().body.stateRef}}"\n                 href="javascript:void(0);"\n                 ng-bind-html="item().title"\n                 analytics-id="stream.entry.title"></a>\n              <a class="js-title-link"\n                 ng-blur="streamEntry.hideTime()"\n                 ng-focus="streamEntry.displayTime()"\n                 ng-switch-when="linkToExternalUrl"\n                 target="{{item().body.externalRef.target ? item().body.externalRef.target : _self}}"\n                 ng-href="{{item().body.externalRef.href}}"\n                 ng-bind-template="{{item().title}}"\n                 analytics-id="stream.entry.title"></a>\n              <a class="js-title-link"\n                 ng-blur="streamEntry.hideTime()"\n                 ng-focus="streamEntry.displayTime()"\n                 ng-switch-when="linkToHandler"\n                 ng-click="item().body.clickHandler()"\n                 ng-bind-template="{{item().title}}"\n                 href="javascript:void(0);"\n                 analytics-id="stream.entry.title"></a>\n              \x3c!-- htmlhint:analytics-id:enable --\x3e\n              <span ng-switch-when="doNotLink" ng-bind-html="item().title"></span>\n            </ng-switch>\n          </div>\n\n          <div class="content">\n              <bb-stream-entry-body type="::item().body.type" content="::item().body.content"></bb-stream-entry-body>\n          </div>\n\n        </div>\n      </div>\n    </div>\n    <div class="card-actions" ng-if="::(item().isImportant && item().remove)">\n      <button ng-focus="streamEntry.displayTime()"\n              ng-blur="streamEntry.hideTime()"\n              class="button button--secondary small dismiss-button"\n              bb-click="streamEntry.removeImportantEntry(item())"\n              bb-translate aria-label="{{streamEntry.titleAriaLabel}}"\n              bb-enter-key-up-focus=".element-card .name a"\n              index-to-focus="{{index()+1}}"\n              analytics-id="base.stream.dismiss">\n        base.stream.dismiss\n      </button>\n    </div>\n  </div>\n</li>\n'},xiEu:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var i=a("zYa8"),n=a("fWA+");const s="ultra.components.directives.bbUiIcon.large.DocumentMultiple";Object(i.a)(n.a,s,"bbUiIconLargeDocumentMultiple")}}]);