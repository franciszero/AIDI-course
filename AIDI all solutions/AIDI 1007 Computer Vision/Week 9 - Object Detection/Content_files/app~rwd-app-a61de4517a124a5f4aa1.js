(window.webpackJsonp=window.webpackJsonp||[]).push([[90],{"+Twb":function(e,t,n){"use strict";const s="bb-auto-resize",o={className:s,html:()=>`\n<script class="${r} ${s}" type="text/javascript">\n  document.documentElement.style.height = 0;\n  var resizeFunc = () => {\n    var height = document.documentElement.scrollHeight;\n    var source = new URL(document.referrer).origin;\n    var w = window;\n    while (w !== top) {\n      w = w.parent;\n      w.postMessage({ type: '${s}', height }, source);\n    }\n  }\n  window.addEventListener('load', resizeFunc);\n  window.addEventListener('resize', resizeFunc);\n<\/script>\n`,listener:e=>{const t=t=>{var n;if((null===(n=t.data)||void 0===n?void 0:n.type)===s&&e.contentWindow===t.source){const{height:n}=t.data;Number.isNaN(n)||(e.height=String(n))}};return window.addEventListener("message",t,!1),()=>window.removeEventListener("message",t)}},r="bb-embedded-html",i={autoResize:!0},a={autoResize:o},c=e=>(new DOMParser).parseFromString(e,"text/html"),l=(e,t=i)=>{let n="";for(const[e,s]of Object.entries(t))s&&e in a&&(n+=a[e].html().trim());return n+e},d=e=>{const t=c(e);if("bb-no-alternate-domain"===t.body.id)throw Error("No alternate domain is configured.");const n=t.getElementsByClassName(r);let s=e;for(let e=0;e<n.length;e++)s=s.replace(n[e].outerHTML,"");return s},u=(e,t=i)=>{const n=[];for(const[s,o]of Object.entries(t)){const t=!!o&&s in a&&a[s].listener;t&&n.push(t(e))}return n};var p=n("BQM5");const b=["action","background","cite","classid","codebase","data","formaction","longdesc","href","icon","manifest","poster","profile","src","usemap"],m=b.map((e=>`*[${e}]`)).join(","),g=e=>b.some((t=>e.hasAttribute(t)&&!(e=>{if(null===e)return null;try{return new URL(e)}catch(e){return null}})(e.getAttribute(t)))),h=e=>`<pre>${Object(p.encode)(e)}</pre>`,f=e=>{const t=c(e).querySelectorAll(m);let n=e;for(let e=0;e<t.length;e++){const s=t[e];if(g(s)){const e=s.outerHTML;n=n.replace(e,h(e))}}return n};n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return d})),n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return f}))},"0XUZ":function(e,t,n){"use strict";n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return l})),n.d(t,"d",(function(){return d})),n.d(t,"a",(function(){return u})),n.d(t,"e",(function(){return o}));var s,o,r=n("nbDY"),i=n.n(r),a=n("zGdY"),c=n("cg8W");!function(e){e.Inline="inline",e.InlineOnly="inlineOnly",e.Attachment="attachment"}(s||(s={}));class l extends i.a{constructor(e,t){super(e),this.handle=e,this.iconClass=t}}l.ClassicAssignment=new l(a.t.ClassicAssignment,"img-icon-assignment"),l.UltraAssignment=new l(a.t.UltraAssignment,"img-icon-assignment"),l.Attendance=new l(a.t.Attendance,"img-icon-attendance"),l.Audio=new l(a.t.Audio,"img-icon-audio"),l.Blog=new l(a.t.Blog,"img-icon-blog"),l.Discussion=new l(a.t.Discussion,"img-icon-discussion"),l.Document=new l(a.t.Document,"img-icon-document-text"),l.ExternalLink=new l(a.t.ExternalLink,"img-icon-link"),l.LtiLink=new l(a.t.LtiLink,"img-icon-lti"),l.PartnerCloud=new l(a.t.PartnerCloud,"img-icon-link"),l.LtiPlacement=new l(a.t.LtiPlacement,"img-icon-lti"),l.CloudDocumentPlacement=new l(a.t.LtiLink,"img-icon-document-cloud"),l.CollaborativeCloudDocumentPlacement=new l(a.t.LtiLink,"img-icon-collaborative-cloud"),l.File=new l(a.t.File,"img-icon-document-blank"),l.Folder=new l(a.t.Folder,"img-icon-folder"),l.LearningModule=new l(a.t.LearningModule,"img-icon-learning-module"),l.Image=new l(a.t.Image,"img-icon-photo"),l.Journal=new l(a.t.Journal,"img-icon-journal"),l.Kaltura=new l(a.t.Kaltura,"img-icon-video"),l.Page=new l(a.t.Page,"img-icon-document-text"),l.RusticiScorm=new l(a.t.RusticiScorm,"img-icon-scormengine"),l.SurveyLink=new l(a.t.SurveyLink,"img-icon-survey"),l.TestLink=new l(a.t.TestLink,"img-icon-test"),l.Video=new l(a.t.Video,"img-icon-video"),l.Wiki=new l(a.t.Wiki,"img-icon-wiki"),l.CourseLink=new l(a.t.CourseLink,"img-icon-document-blank"),l.Unknown=new l(a.t.Unknown,"img-icon-document-blank");class d extends i.a{}d.ADD=new d("ADD"),d.DELETE=new d("DELETE");class u extends i.a{}u.Date=new u("Date_Range"),u.Grade=new u("Grade_Range"),u.GradePercentage=new u("Grade_Range_Percentage"),u.ACL=new u("ACL"),u.ForcedSequence=new u("Pre_Content");class p extends c.b{constructor(e){super(e)}static from(e){return null!=e?new p(e):null}canEdit(){return this.state.permissions&&this.state.permissions.edit}canDelete(){return this.state&&this.state.permissions&&this.state.permissions.delete}}!function(e){e.Root="ROOT",e.Interactive="INTERACTIVE",e.Indirect="INDIRECT"}(o||(o={}))},"1hyT":function(e,t,n){"use strict";n.d(t,"d",(function(){return l})),n.d(t,"e",(function(){return m})),n.d(t,"b",(function(){return g})),n.d(t,"c",(function(){return h}));var s=n("0XUZ"),o=n("uq3J"),r=n("zGdY"),i=n("G3FW");const a=e=>{var t;return null===(t=e.permissions)||void 0===t?void 0:t.edit};const c=/\/([^\/]*)_.*\..*$/,l=e=>{var t;const n=null===(t=e.iconUrl)||void 0===t?void 0:t.match(c);if(!n)return r.t.Unknown;switch(n[1]){case"assignment":return r.t.UltraAssignment;case"discussion":return r.t.Discussion;case"file":return r.t.File;case"folder":return r.t.Folder;case"link":return r.t.ExternalLink;case"test":return r.t.TestLink;default:return r.t.Unknown}},d=e=>{var t,n,s;return(null!==(s=null===(n=null===(t=e.adaptiveReleaseRules)||void 0===t?void 0:t.rules)||void 0===n?void 0:n.length)&&void 0!==s?s:0)>0},u=e=>!e.isAvailable&&!e.isPartiallyVisible,p=e=>e.visibility===r.w.Restricted,b=e=>d(e)&&p(e),m=e=>{if(!e.contentDetail)return!1;const t=e.contentDetail[s.b.Folder.toString()];return!(!s.b.Folder.isEqualTo(e.contentHandler)||!(null==t?void 0:t.isBbPage))||!!s.b.Unknown.isEqualTo(e.contentHandler)&&void 0};function g(e){switch(e){case r.G.Embed:return s.c.Inline;case r.G.EmbedOnly:return s.c.InlineOnly;case r.G.Link:return s.c.Attachment}}function h(e){switch(e){case s.c.Inline:return r.G.Embed;case s.c.InlineOnly:return r.G.EmbedOnly;case s.c.Attachment:return r.G.Link}}t.a={canCreate:e=>{var t;return null===(t=e.permissions)||void 0===t?void 0:t.create},canDelete:e=>{var t;return null===(t=e.permissions)||void 0===t?void 0:t.delete},canEdit:a,canEditAvailability:e=>{var t;return a(e)||(null===(t=e.permissions)||void 0===t?void 0:t.modifyAvailability)},canHaveAttempts:function(e){return s.b.UltraAssignment.isEqualTo(e.contentHandler)||s.b.TestLink.isEqualTo(e.contentHandler)||s.b.LtiLink.isEqualTo(e.contentHandler)||s.b.LtiPlacement.startsWith(e.contentHandler)||s.b.PartnerCloud.isEqualTo(e.contentHandler)||s.b.Discussion.isEqualTo(e.contentHandler)||s.b.CourseLink.isEqualTo(e.contentHandler)||s.b.Journal.isEqualTo(e.contentHandler)||s.b.RusticiScorm.isEqualTo(e.contentHandler)},canOpenConditionalRelease:e=>{var t,n;return null===(n=null===(t=null==e?void 0:e.permissions)||void 0===t?void 0:t.adaptiveRelease)||void 0===n?void 0:n.view},canUpdateReviewState:e=>{var t;return null===(t=e.permissions)||void 0===t?void 0:t.canUpdateReviewState},canHaveReviewState:function(e){var t;return null===(t=e.permissions)||void 0===t?void 0:t.canHaveReviewState},canViewReviewState:function(e){var t;return null===(t=e.permissions)||void 0===t?void 0:t.canViewReviewState},canViewAsInstructor:e=>{var t;return a(e)||(null===(t=e.permissions)||void 0===t?void 0:t.viewDesigner)},fileAssociationModeToFileRenderType:g,fileRenderTypeToFileAssociationMode:h,getContentHandlerByIconUrl:l,hasAdaptiveReleaseRules:d,hasConversation:e=>!!e.attachedForumLink,isBbPage:m,isFolderContentItem:e=>s.b.Folder.isEqualTo(e.contentHandler)&&!m(e),isDiscussion:e=>!!s.b.Discussion.isEqualTo(e.contentHandler)||s.b.CourseLink.isEqualTo(e.contentHandler)&&s.b.Discussion.isEqualTo(l(e)),isLink:e=>s.b.ExternalLink.isEqualTo(e.contentHandler),isUnknownContentItem:e=>s.b.Unknown.isEqualTo(e.contentHandler),isConditionalReleaseLocked:b,isExternalSubmissionsAssessment:function(e){var t,n;if(!e)return!1;if(s.b.TestLink.isEqualTo(e.contentHandler)&&e.contentDetail){const o=e.contentDetail[s.b.TestLink.handle];return!!(null===(n=null===(t=null==o?void 0:o.test)||void 0===t?void 0:t.deploymentSettings)||void 0===n?void 0:n.isCollectExternalSubmissions)}return!1},isHiddenFromStudents:u,isVisibleToStudents:e=>!!e.isAvailable&&!e.isPartiallyVisible&&!Object(o.b)(e),isRestricted:p,isReviewableItemLocked:e=>p(e),isNotAccessibleButVisibleForcedSequenceItem:e=>b(e)||!u(e)&&!a(e),isQuestionAnalysisAvailable:function(e){return!!s.b.UltraAssignment.isEqualTo(e.contentHandler)||s.b.TestLink.isEqualTo(e.contentHandler)},getContentHandler:function(e){if(!e.contentHandler)return s.b.Unknown;let t=s.b.parse(e.contentHandler.toString());return e.contentHandler.toString().indexOf(s.b.LtiPlacement.handle)>=0&&(t=s.b.LtiPlacement),m(e)&&(t=s.b.Page),t},requiresManualMarking:function(e){var t,n,o,r;return!Object(i.c)(e)&&!Object(i.b)(e)&&!(s.b.UltraAssignment.isEqualTo(null===(t=e.contentHandler)||void 0===t?void 0:t.toString())||s.b.ClassicAssignment.isEqualTo(null===(n=e.contentHandler)||void 0===n?void 0:n.toString())||s.b.TestLink.isEqualTo(null===(o=e.contentHandler)||void 0===o?void 0:o.toString())||s.b.SurveyLink.isEqualTo(null===(r=e.contentHandler)||void 0===r?void 0:r.toString()))}}},"1spm":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));const s={GRADEBOOK_COLUMN_LOAD:"gradebook-column.load",GRADEBOOK_COLUMN_LOAD_MULTIPLE:"gradebook-column.multiple.load",GRADEBOOK_COLUMN_PERSIST:"gradebook-column.persist",GRADEBOOK_COLUMN_POST_READY_GRADES:"gradebook-column.ready.grades.post",GRADEBOOK_COLUMN_RUBRIC_ASSOCIATIONS_DELETE:"gradebook-column.rubricAssociations.delete",GRADEBOOK_COLUMN_DELETE:"gradebook-column.delete",GRADEBOOK_COLUMNS_LOAD:"gradebook-columns.load"}},"2bmK":function(e,t,n){"use strict";var s=new class{constructor(){this.baseUrl=""}setBaseUrl(e){this.baseUrl=e}getUrl(e){if(!this.baseUrl)throw new Error("UrlManager cannot build a URL without first being initialized with a base URL!");return new URL(null!=e?e:"",this.baseUrl).toString()}};function o(e,t){const n=e.split(";");return t.split(";").forEach((e=>{const t=e.split("=");var s,o;s=n,o=t[0],s.some((e=>e.split("=")[0]===o))||n.push(`${t[0]}=${t[1]}`)})),n.join(";")}const r=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(.\d{3})?Z$/;function i(e){return JSON.parse(e,((e,t)=>"string"==typeof t&&r.test(t)?new Date(t):t))}async function a(e){var t,n;await e.validate();const s=e.toRequest(),r=await fetch(s),i=e.getSession();if(null!=(null==i?void 0:i.cookies)){const e=null!==(t=function(e){var t;return e.headers.raw?e.headers.raw()["set-cookie"].map((e=>e.split(";")[0])).join(";"):null!==(t=e.headers.get("Set-Cookie"))&&void 0!==t?t:""}(r))&&void 0!==t?t:"";i.cookies=i.cookies?o(e,null!==(n=i.cookies)&&void 0!==n?n:""):e}return r.ok||await e.failed(r),r}async function c(e){var t;const n=await a(e),s=null!==(t=n.headers.get("Content-Type"))&&void 0!==t?t:"";return s.startsWith("application/json")||console.warn(`Expected API response to be of type "application/json" but its actual Content-Type is ${s}`,JSON.stringify(e)),async function(e){return i(await e.text())}(n)}async function l(e){return(await a(e)).text()}var d,u,p;!function(e){e.Aborted="Aborted",e.Unknown="Unknown",e.API="API"}(d||(d={}));class b{constructor(e){this._type=e}get errorType(){return this._type}}class m extends b{constructor(){super(d.Aborted)}}class g{setXhrRequest(e){this.xhr=e}abort(){var e;null===(e=this.xhr)||void 0===e||e.abort()}}class h{constructor(){this.subscribers=[]}subscribe(e){return this.subscribers.push(e),()=>{const t=this.subscribers.indexOf(e);t>=0&&this.subscribers.splice(t)}}clear(){this.subscribers=[]}push(e){this.subscribers.forEach((t=>{t(e)}))}}function f(e){const t=new h,n=new g,s=async function(e,t,n){await e.validate();const s=e.toXhr();return n.setXhrRequest(s),new Promise(((n,r)=>{s.upload.addEventListener("progress",(e=>{t.push({lengthComputable:e.lengthComputable,loaded:e.loaded,total:e.total})})),s.addEventListener("load",(()=>{var i,a;const c=e.getSession();if(null!=(null==c?void 0:c.cookies)){const e=null!==(i=function(e){var t;return null!==(t=e.getResponseHeader("Set-Cookie"))&&void 0!==t?t:""}(s))&&void 0!==i?i:"";c.cookies=c.cookies?o(e,null!==(a=c.cookies)&&void 0!==a?a:""):e}t.clear(),(s.status<200||s.status>=300)&&r(e.xhrFailed(s.response)),n({response:s.response,request:s})})),s.addEventListener("abort",(()=>{t.clear(),r(new m)})),s.upload.addEventListener("error",(()=>{t.clear(),r(e.xhrFailed())})),s.send(e.xhrBody())}))}(e,t,n).then((({response:t,request:n})=>{var s;const o=null!==(s=n.getResponseHeader("Content-Type"))&&void 0!==s?s:"";return o.startsWith("application/json")||console.warn(`Expected API response to be of type "application/json" but its actual Content-Type is ${o}`,e.toString()),i(t)}));return{result:s,progress:t,abort:n}}!function(e){e[e.Ok=200]="Ok",e[e.Created=201]="Created",e[e.Accepted=202]="Accepted",e[e.NoContent=204]="NoContent",e[e.BadRequest=400]="BadRequest",e[e.Unauthorized=401]="Unauthorized",e[e.Forbidden=403]="Forbidden",e[e.NotFound=404]="NotFound",e[e.Conflict=409]="Conflict",e[e.TooManyRequests=429]="TooManyRequests",e[e.InternalServerError=500]="InternalServerError"}(u||(u={})),function(e){e.Get="GET",e.Delete="DELETE",e.Patch="PATCH",e.Post="POST",e.Put="PUT"}(p||(p={})),n.d(t,"e",(function(){return a})),n.d(t,"f",(function(){return c})),n.d(t,"g",(function(){return l})),n.d(t,"h",(function(){return f})),n.d(t,"d",(function(){return d})),n.d(t,"c",(function(){return b})),n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return p})),n.d(t,"i",(function(){return s}))},"4XpK":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));const s={GRADEBOOK_GRADE_LOAD_BY_COLUMN:"gradebook-grade.load.by.column.id",GRADEBOOK_BULKVIEW_LOAD:"gradebook-grade-bulk-view.load",GRADEBOOK_GRADES_LOAD:"gradebook-grades.load",GRADEBOOK_GRADE_PERSIST_BY_GRADE_ID:"gradebook-grade.persist.by.grade.id",GRADEBOOK_GRADE_PERSIST_BY_USER_ID:"gradebook-grade.persist.by.user.id",GRADEBOOK_GRADE_POST_GRADE_BY_GRADE_ID:"gradebook-grade.post.grade.by.grade.id",GRADEBOOK_GRADES_INVALIDATE:"gradebook-grades.invalidate"}},"4qp4":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));const s={CONTENT_LOAD:"content.load",CONTENT_CREATE:"content.create",CONTENT_PERSIST:"content.persist",CONTENT_PERSIST_MULTIPLE:"content.persist.multiple",CONTENT_DELETE:"content.delete",CONTENT_PERSIST_ADAPTIVE_RELEASE_MULTIPLE:"content.persist.adaptive.release.multiple",CONTENT_DELETE_ADAPTIVE_RELEASE:"content.delete.adaptive.release",CONTENT_UPDATE_IN_STORE:"content.update.in.store",CONTENT_DELETE_IN_STORE:"content.delete.in.store",CONTENT_MOVE_IN_STORE:"content.move.in.store",CONTENT_DELETE_ALL_ADAPTIVE_RELEASE_IN_STORE:"content.delete.adaptive.release.in.store",CONTENT_DELETE_ADAPTIVE_RELEASE_RULE_IN_STORE:"content.delete.adaptive.release.in.store.individual",CONTENT_IMPORT_COMPLETE:"content.import.complete",CONTENT_SEARCH_LOAD:"content.search.load"}},"5MwF":function(e,t,n){"use strict";var s={};n.r(s),n.d(s,"default",(function(){return r}));var o=n("nsO7"),r={},i={batchRestAPI:!0,collab:!0,componentDemos:!1,courseNotice:!1,devtools_allyMock:!1,devtools_digestHub:!0,devtools_disableFtue:!1,devtools_enableSetLangQuery:!1,externalCourse:!1,httpEase:!0,journal:!1,learnApiCaching:!0,organizationA4L:!1,organizationPredict:!1,overallGradeAlert:!1,predictSisCards:!1,reactAssessmentsSettings:!1,rightToLeftSupport:!0,useReactRendererForDocumentEditor:!1,multipleAttemptsInGroupAssessments:!0};const a={externalCourse:!1,reactAssessmentsSettings:!1,devtools_allyMock:!1,devtools_disableFtue:!1},c={externalCourse:!1,reactAssessmentsSettings:!1,devtools_allyMock:!1,devtools_disableFtue:!1},l={devtools_enableSetLangQuery:!0},d=function(e,t,n){return!(e in n)||n[e]};var u={"^(https://ultra-integ.int.bbpd.io)$":(e,t)=>d(e,0,a),"^(https://ultra-canary.bbpd.io)$":(e,t)=>d(e,0,c),".*(bbpd.io)":(e,t)=>((e,t,n)=>e in n?n[e]:i[e])(e,0,l)},p=n("Q/M7");var b=(()=>{const e={...i},t=p.j(),n=u[Object.keys(u).find((e=>!!t.match(e)))];if("all"===n)for(const t of Object.keys(e))e[t]=!0;else if("function"==typeof n)for(const t of Object.keys(e))e[t]=n(t,e[t]);else null!=n&&Object.assign(e,n);return e})();var m={};var g={production:!0};const h={apiBasePath:"/learn/api",basePath:"/ultra",buildInfo:"undefined"!=typeof window&&window.__buildInfo||{},chartsApiBasePath:"/charts/api",institutionApiBasePath:"/institution/api",partnerCloudBasePath:"/webapps/partner-cloud/app",defaultBasePage:"base.recentActivity",localeLoader:{fallbackLocales:["en-us","en"]},directivesPerf:!1,features:Object.assign(b,m),storageKeyForFeatureFlags:"bb_feature_flags",showFeaturePrototypes:!1,errorDetails:!1,infiniteScrollThrottleMS:500,production:!0,unitTesting:!1,showComingSoonScreens:!0,showDigestHud:!0,streamLoadingInterval:12e4,telemetryApiBasePath:"/telemetry/api",telemetryApiTimeoutMS:2e3,telemetryAppId:"ultra",trialSiteSuggestionsUrl:"https://community.blackboard.com/community/ideas",trialSiteContactSalesUrl:"http://bbbb.blackboard.com/EducatorPreviewcontact",trialSiteLiveChatUrl:"https://chat.edusupportcenter.com/chat/websiteChat?short_name=educatorpreview&key=educatorpreview1707",trialSiteSupportPhone:"1-844-435-2162",cloudStorageIntegrationServices:[],disableAllFtueGuidance:!1,allyAutoUpdateInterval:500,allyClearCacheInterval:1e4,allyInitializationTimeout:1e4,cloudStorageIntegrationInitializationTimeout:1e4},f=JSON.parse(sessionStorage.getItem(h.storageKeyForFeatureFlags)||"{}");o.isEmpty(f)||(console.warn("Attention! Feature flags are overridden by client setting!",f),console.warn("To clear, please logout and re-login"),Object.assign(h.features,f)),s&&Object.assign(h,s),h.production=g.production;t.a=h},"5Yha":function(e,t,n){"use strict";function s(e){var t,n;const s=e.getBoundingClientRect();return s.top>=0&&s.left>=0&&s.bottom<=(null!==(t=window.innerHeight)&&void 0!==t?t:document.documentElement.clientHeight)&&s.right<=(null!==(n=window.innerWidth)&&void 0!==n?n:document.documentElement.clientWidth)}function o(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function r(e){const t=e.getAttribute("tabindex");e.setAttribute("tabindex","-1"),e.focus({preventScroll:!0}),t&&e.setAttribute("tabindex",t),s(e)||e.scrollIntoView({behavior:"smooth"})}n.d(t,"e",(function(){return s})),n.d(t,"b",(function(){return o})),n.d(t,"f",(function(){return r})),n.d(t,"d",(function(){return i})),n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return c}));const i=(e,t,n=0)=>e.map((e=>({value:`${e}`,label:t(e+n)}))),a=e=>Math.max(4e3,Math.ceil(e.length/20*1e3));function c(e,t,n){return"function"==typeof e.closest?e.closest(`a, button, .${t}, .${n}`):null}},"8/Ce":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));const s={BLOG_PARTICIPANTS_LOAD:"blog.participants.load",BLOG_PARTICIPANT_CLEAR_ACTIVITY_FLAG:"blog.participants.clear.ActivityFlag"}},Ajje:function(e,t,n){"use strict";var s;n.d(t,"a",(function(){return s})),function(e){e.HasNotStarted="hasNotStarted",e.Loading="loading",e.Loaded="loaded",e.Error="error"}(s||(s={}))},AuQm:function(e,t,n){"use strict";var s=n("RxZr"),o=n("ERkP"),r=n.n(o),i=n("Agfx");const a={width:"100%",flex:"1",flexGrow:"1",padding:"8px 24px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},c=Object(i.makeStyles)((e=>Object(i.createStyles)({root:{display:"flex",height:"100%",marginBottom:"10px",boxShadow:`inset 0 -1px 0 0 ${e.palette.border.main}`,"& .backNavButton":{...a,justifyContent:"flex-start"},"& .forwardNavButton":{...a,justifyContent:"flex-end"},"& $currentSlideHeader":{fontSize:e.typography.fontSizeXLarge,margin:0,[e.breakpoints.up("sm")]:{fontWeight:e.typography.fontWeightLight,fontSize:e.typography.fontSizeXXLarge}},"& .adjacentSlideLabel":{fontWeight:e.typography.fontWeightLight,display:"none",[e.breakpoints.up("sm")]:{display:"inline-block"}}},disabledNavButton:{visibility:"hidden"},backIcon:{marginRight:"24px"},forwardIcon:{marginLeft:"24px"},currentSlideHeader:{[e.breakpoints.up("sm")]:{flex:"1"},textAlign:"center",padding:"16px",flexGrow:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},hiddenLiveRegion:{position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",border:"0",selectors:{clip:"rect(0,0,0,0)"}},indicator:{height:"8px",width:"8px",borderRadius:"50%",backgroundColor:e.palette.indicatorPrimary.main,display:"inline-block",position:"absolute",top:"calc(50% - 20px)",border:`1px solid ${e.palette.indicatorPrimary.contrastText}`},indicatorForward:{right:"20px"},indicatorBackward:{left:"20px"}})));var l=n("tN4z"),d=n("8jBL"),u=n("7O4Y");const p=e=>{var t,n,s;const{slides:r,onSlideChangeMessage:i,analyticsId:a,slideIndex:p=0,onSlideChange:b}=e,m=o.useRef(null);o.useEffect((()=>{var e;null===(e=m.current)||void 0===e||e.focus()}),[p]);const g=o.useCallback((()=>{b(-1)}),[b]),h=o.useCallback((()=>{b(1)}),[b]),f=c(e),O=r[p],E=r[p-1],y=r[p+1],I=!E||!E.name,C=!y||!y.name;return o.createElement("div",{"data-analytics-id":a},o.createElement("div",{className:Object(u.a)("carousel",f.root)},o.createElement(l.AnalyticsIconButton,{onClick:g,disabled:I,analyticsId:`${a}.backButton`,className:Object(u.a)("backNavigationButton","backNavButton",{[f.disabledNavButton]:I}),"aria-label":(null==E?void 0:E.name)||"disabled-back-button"},(null==E?void 0:E.indicator)&&o.createElement("span",{className:Object(u.a)("indicatorBackward",f.indicator,f.indicatorBackward)}),o.createElement(d.BackArrow,{className:f.backIcon}),o.createElement("span",{className:"adjacentSlideLabel"},null!==(t=null==E?void 0:E.name)&&void 0!==t?t:"")),o.createElement("h2",{className:Object(u.a)("currentSlideHeader",f.currentSlideHeader),ref:m},null!==(n=null==O?void 0:O.name)&&void 0!==n?n:""),o.createElement(l.AnalyticsIconButton,{onClick:h,disabled:C,analyticsId:`${a}.nextButton`,className:Object(u.a)("forwardNavigationButton","forwardNavButton",{[f.disabledNavButton]:C}),"aria-label":(null==y?void 0:y.name)||"disabled-forward-button"},o.createElement("span",{className:"adjacentSlideLabel"},null!==(s=null==y?void 0:y.name)&&void 0!==s?s:""),o.createElement(d.ForwardArrow,{className:f.forwardIcon}),(null==y?void 0:y.indicator)&&o.createElement("span",{className:Object(u.a)("indicatorForward",f.indicator,f.indicatorForward)}))),null==O?void 0:O.getContent(),o.createElement(l.AnalyticsOffScreenAnnouncement,{changeTrigger:p,message:i(p),className:`${f.hiddenLiveRegion}`,analyticsId:`${a}.hiddenLiveRegion`}))};var b=n("5Yha");const m="click-to-invoke-container",g="click-to-invoke-ref",h=e=>{const{className:t,elementToClickRef:n,children:s,...i}=e,a=Object(o.useRef)(null);return r.a.createElement("div",{className:Object(u.a)(m,t),onClick:e=>{var t,s,o;null===(t=n.current)||void 0===t||t.classList.add(g);Object(b.c)(e.target,m,g)===a.current&&(null===(s=n.current)||void 0===s||s.click()),null===(o=n.current)||void 0===o||o.classList.remove(g)},ref:a,...i},s)};var f=n("k25C"),O=n("VQ4P"),E=n("P+Wz");const y=Object(i.makeStyles)((()=>Object(i.createStyles)({root:{height:"273px",position:"relative",width:"100%"}}))),I=({aspect:e,image:t,zoom:n,onCropComplete:s})=>{const r=Object(O.a)(),i=y(),[a,c]=o.useState({x:0,y:0}),[l,d]=o.useState(!1),u=o.useCallback((e=>{const t=e.nativeEvent.code;(e=>e===E.Key.ArrowLeft||e===E.Key.ArrowRight||e===E.Key.ArrowUp||e===E.Key.ArrowDown)(t)&&(d(!0),c((e=>((e,t)=>{switch(t){case E.Key.ArrowLeft:return{x:e.x-25,y:e.y};case E.Key.ArrowRight:return{x:e.x+25,y:e.y};case E.Key.ArrowUp:{const t=e.y-25;return{x:e.x,y:t}}case E.Key.ArrowDown:{const t=e.y+25;return{x:e.x,y:t}}default:return e}})(e,t))))}),[d]),p=o.useCallback(((e,t)=>{l&&(s(e,t),d(!1))}),[l,d,s]);return o.createElement("div",{className:i.root,tabIndex:0,onClick:e=>e.currentTarget.focus(),onKeyDown:u},o.createElement("span",{className:"sr-only"},r("cr.components.imageCrop.moveImageAriaLabel")),o.createElement(f.a,{crop:a,onCropChange:c,onCropAreaChange:p,onCropComplete:s,aspect:e,image:t,zoom:n,restrictPosition:!0,objectFit:"horizontal-cover"}))},C=Object(i.makeStyles)((e=>Object(i.createStyles)({root:{display:"flex",backgroundColor:e.palette.background.b2,flexDirection:"column",padding:"0 20px 24px",[e.breakpoints.up("sm")]:{padding:"22px 30px 24px 90px",flexDirection:"row",alignItems:"flex-start"}},stats:{display:"flex"},summaryStat:{flex:"1",margin:"20px 24px",display:"inline-flex",flexDirection:"column",[e.breakpoints.up("sm")]:{flex:"auto",margin:"0 25px"}},number:{fontSize:e.typography.fontSizeDefault,fontWeight:e.typography.fontWeightBold,[e.breakpoints.up("sm")]:{fontSize:e.typography.fontSizeXLarge}},label:{textTransform:"uppercase",fontSize:e.typography.fontSizeSmall,fontWeight:e.typography.fontWeightSemiBold},postButton:{alignSelf:"center",width:"90%",[e.breakpoints.up("sm")]:{marginInlineStart:"auto",width:"fit-content"}}})));var v=n("HuI8");const S=e=>{const{participation:t,participationToGrade:n,gradesToPost:s,postButton:r}=e.summary,i=C(e),{formatNumber:a}=Object(v.a)();return o.createElement("div",{className:i.root},o.createElement("div",{className:i.stats},o.createElement("div",{className:Object(u.a)("summary-statistic",i.summaryStat)},o.createElement("div",null,o.createElement("span",{className:i.number},t.studentsParticipating)),o.createElement("span",{className:i.label},t.key)),n&&o.createElement("div",{className:Object(u.a)("summary-statistic",i.summaryStat)},o.createElement("span",{className:i.number},a(n.count)),o.createElement("span",{className:i.label},n.key)),s&&o.createElement("div",{className:Object(u.a)("summary-statistic",i.summaryStat)},o.createElement("span",{className:i.number},a(s.count)),o.createElement("span",{className:i.label},s.key))),s&&s.count>0&&o.createElement(l.AnalyticsDefaultButton,{analyticsId:r.analyticsId,className:Object(u.a)("post-all-grades",i.postButton),onClick:r.onClick},r.label))};var j=n("0x+l");const T="38px",A=Object(i.makeStyles)((e=>Object(i.createStyles)({backdrop:{backgroundColor:e.palette.brand.main},source:{position:"relative",mixBlendMode:"screen"},contents:{position:"absolute",top:"0",left:"0",width:"100%",height:T,display:"flex",alignItems:"center",justifyContent:"center",mixBlendMode:"difference","& *":{color:e.palette.common.white}},root:{height:T,borderRadius:"0px",backgroundColor:e.palette.common.white},bar:{border:"none",borderRadius:"0px",backgroundColor:e.palette.common.black}}))),_=e=>{const t=A(),{bar:n,root:s}=t,{children:r,variant:i,...a}=e;return o.createElement("div",{className:t.backdrop},o.createElement("div",{className:t.source},o.createElement(l.AnalyticsLinearProgress,{classes:{bar:n,root:s},variant:"determinate",...a}),o.createElement("div",{className:t.contents},r)))};var R;!function(e){e.Probably="probably",e.Maybe="maybe",e.Empty=""}(R||(R={}));const N=e=>{const[t,n]=o.useState(!1);return o.useEffect((()=>{n(((e="",t=document.createElement("audio"))=>!!(null==t?void 0:t.canPlayType)&&t.canPlayType(e)===R.Probably)(e))}),[e]),t},w=e=>{const{analyticsId:t,children:n,mimeType:s,placement:r,title:i}=e;return N(s)?n:o.createElement(l.AnalyticsTooltip,{analyticsId:`${t}.mediaCompatibilityCheck.tooltip`,title:i,placement:r},o.createElement("div",null,n))},D=Object(i.makeStyles)((e=>Object(i.createStyles)({root:{display:"inherit"}}))),L=e=>{var t;const n=D(),{components:s,onEnd:r}=e,[i,a]=o.useState(0),c=o.useRef();return o.useEffect((()=>{var e,t,n,o;return(null==s?void 0:s.length)>0&&(null===(t=null===(e=null==s?void 0:s[i-1])||void 0===e?void 0:e.onHide)||void 0===t||t.call(e),null===(o=null===(n=s[i])||void 0===n?void 0:n.onShow)||void 0===o||o.call(n),(()=>{var e;c.current=setTimeout((()=>{i<s.length-1?a(i+1):r&&r()}),null===(e=s[i])||void 0===e?void 0:e.duration)})()),()=>{c.current&&clearTimeout(c.current)}}),[i]),o.createElement("div",{className:n.root,"aria-live":"polite"},null===(t=null==s?void 0:s[i])||void 0===t?void 0:t.component)},P=(e,t,n=0)=>{const s=[];if(t-n<0)return s;for(let o=t;o>=n;o-=1e3)s.push({component:e(o/1e3),duration:1e3});return s},k=100,x=e=>{const{Progress:t=l.AnalyticsLinearProgress,initialDuration:n,initialTimestep:s=k,children:r,ariaLabel:i}=e,[a,c]=o.useState(0);return o.useEffect((()=>{let e=0;const t=setInterval((()=>{e+=s,e>=n&&clearInterval(t),c(Math.min(100,Math.floor(e/n*100)))}),s);return()=>{clearInterval(t)}}),[]),o.createElement(t,{analyticsId:"components-react.timed-progress",ariaLabel:i,value:a},r)};var B,M=n("fN3Q");class U{constructor(){this.timedDisplayList=[]}static getInstance(){return U.INSTANCE||(U.INSTANCE=new U),U.INSTANCE}addTimedDisplay(e,t){if(this.timedDisplayList.find((t=>t.id===e)))throw new Error("Instance with unique id already exists. Instances must each have a unique id");return this.timedDisplayList.push({id:e,listener:t,isStarted:!1}),!!this.timedDisplayList.find((e=>e.isStarted))}removeTimedDisplay(e){const t=this.timedDisplayList.find((t=>t.id===e));t&&(t.isStarted&&this.stopTimedDisplay(e),this.timedDisplayList=this.timedDisplayList.filter((e=>e!==t)))}startTimedDisplay(e){if(this.timedDisplayList.find((t=>t.isStarted&&t.id!==e)))return!1;for(const t of this.timedDisplayList)t.id===e&&(t.isStarted=!0),t.listener(e,!0);return!0}stopTimedDisplay(e){for(const t of this.timedDisplayList)t.id===e&&(t.isStarted=!1),t.listener(e,!1)}getInstanceCount(){return this.timedDisplayList.length}resetInstances(){this.timedDisplayList=[]}}!function(e){e[e.ReadyToRecordDisabled=0]="ReadyToRecordDisabled",e[e.ReadyToRecord=1]="ReadyToRecord",e[e.PreRecording=2]="PreRecording",e[e.Recording=3]="Recording",e[e.ReadyToPlay=4]="ReadyToPlay"}(B||(B={}));const G=Object(i.makeStyles)((e=>Object(i.createStyles)({root:{padding:"10px"},label:{paddingTop:"1px"}}))),F=e=>{const{analyticsId:t,onClick:n,title:s,disabled:r}=e,i=Object(O.a)(),a=G();return o.createElement(l.AnalyticsIconButton,{className:a.root,analyticsId:`${t}.record.button`,onClick:n,disabled:r},o.createElement(j.AudioOn,null),o.createElement(l.AnalyticsTypography,{className:a.label,component:"span",variant:"inherit"},null!=s?s:i("cr.components.audioRecording.recordButtonLabel")))},q=Object(i.makeStyles)((e=>Object(i.createStyles)({prerecordingMessage:{backgroundColor:e.palette.brand.main,"& *":{color:e.palette.common.white}},wrapperOuter:{width:"100%",display:"flex",justifyContent:"space-between"},wrapperInner:{display:"flex",alignItems:"center","& > svg":{margin:"0 4px 0 10px"}}})));var H=n("yQJI");const V=Object(i.makeStyles)((e=>Object(i.createStyles)({container:{display:"flex",justifyContent:"space-between",pointerEvents:"auto"},button:{padding:"10px"},icon:{color:e.palette.brand.main}})));var K;!function(e){e[e.Loading=0]="Loading",e[e.ReadyToPlay=1]="ReadyToPlay",e[e.Playing=2]="Playing"}(K||(K={}));const $=[K.Loading,K.Playing],W=e=>{const{analyticsId:t,ariaLabel:n,children:s,className:r,label:i,src:a,mimeType:c=H.a}=e,d=V(e),p=Object(O.a)(),{state:b,onReadyToPlayShow:m,onPlayingShow:g}=((e=K.Loading)=>{const[t,n]=o.useState(e),s=o.useCallback((()=>{t!==K.Loading&&n(K.Loading)}),[t]),r=o.useCallback((()=>{t!==K.ReadyToPlay&&n(K.ReadyToPlay)}),[t]),i=o.useCallback((()=>{t!==K.Playing&&n(K.Playing)}),[t]);return{state:t,onLoadingShow:s,onReadyToPlayShow:r,onPlayingShow:i}})(),h=$.includes(b),f=o.useRef(null),E=N(c),[y,I]=o.useState(!1),C=o.useCallback((e=>{var t;e.preventDefault(),e.stopPropagation(),g(),null===(t=f.current)||void 0===t||t.play()}),[g,f]),v=o.useCallback((e=>{console.error(e.type,": Loading audio."),E||I(!0)}),[E]);return o.createElement("div",{className:Object(u.a)(d.container,"bb-audio-player",r)},o.createElement("audio",{ref:f,src:a,onLoadedMetadata:m,onEnded:m,onError:v,preload:"metadata",tabIndex:-1}),o.createElement(w,{analyticsId:t,title:p("cr.components.audioRecording.playbackUnsupported"),placement:"top",mimeType:c},o.createElement(l.AnalyticsIconButton,{analyticsId:`${t}.audio.play.button`,"aria-label":i?void 0:null!=n?n:p("cr.components.audioPlayer.playLabel"),className:d.button,disabled:h||y,onClick:C},o.createElement(j.Volume,{className:d.icon}),!!i&&o.createElement(l.AnalyticsTypography,{component:"span",variant:"inherit"},i))),s)},z=Object(i.makeStyles)((e=>Object(i.createStyles)({icon:{color:e.palette.brand.main}}))),Q=e=>{const t=z(),{analyticsId:n,...s}=e;return o.createElement(l.AnalyticsIconButton,{analyticsId:`${n}.clearAudio.button`,...s},o.createElement(j.Clear,{className:t.icon}))};var Y=n("n7/H");const J=e=>{var t,n,s;const r=q(),{translate:i,formatComposedDuration:a}=Object(v.a)(),{onAudioDeleted:c,playLabel:d,progressLabel:u,recordLabel:p,recordingSession:m,src:g}=e,h=null===(t=m.recorderOptions)||void 0===t?void 0:t.mimeType,f=N(h),[O,E]=o.useState(!1),[y,I]=o.useState(!1),C=`${e.analyticsId}.audio.recorder`,S=null!==(s=null===(n=m.recordingOptions)||void 0===n?void 0:n.maxDuration)&&void 0!==s?s:6e5,{state:T,isRecording:A,onReadyToRecordShow:R,onPreRecordingShow:D,onRecordingShow:k,onReadyToPlayShow:G}=((e=B.ReadyToRecord)=>{const[t,n]=o.useState(e),[s]=o.useState((()=>M.v4()));o.useEffect((()=>{if(!(s.length<=0))return U.getInstance().addTimedDisplay(s,((e,t)=>{s!==e&&n(t?B.ReadyToRecordDisabled:B.ReadyToRecord)})),()=>U.getInstance().removeTimedDisplay(s)}),[s]);const r=o.useCallback((()=>{[B.ReadyToRecord,B.Recording].includes(t)||(U.getInstance().stopTimedDisplay(s),n(B.ReadyToRecord))}),[t,s]),i=o.useCallback((()=>{t===B.ReadyToRecord&&U.getInstance().startTimedDisplay(s)&&n(B.PreRecording)}),[t,s]),a=o.useCallback((()=>{t===B.PreRecording&&n(B.Recording)}),[t]),c=o.useCallback((()=>{t===B.Recording&&(U.getInstance().stopTimedDisplay(s),n(B.ReadyToPlay))}),[t,s]),l=t===B.Recording;return{state:t,onReadyToRecordShow:r,onPreRecordingShow:i,onRecordingShow:a,onReadyToPlayShow:c,isRecording:l}})(g?B.ReadyToPlay:B.ReadyToRecord),H=o.useCallback((()=>{E(!1)}),[]),V=o.useCallback((async()=>{I(!1);try{await m.onEnableRecording(),D()}catch(e){E(!0)}}),[m,E,D]),K=o.useCallback((async()=>{if(A)return await m.onRecordStop(),void G();R()}),[m,A,G]),$=o.useCallback((async()=>{R(),c(),I(!0)}),[c,R]),z=()=>o.createElement(l.AnalyticsIconButton,{className:"stop-audio-recording","aria-label":i("cr.components.audioRecording.stopInProgressRecording"),analyticsId:`${C}.stop.button`,onClick:K},o.createElement(j.Stop,null)),J=e=>o.createElement("div",{className:r.wrapperInner},o.createElement(j.AudioOn,null),o.createElement(l.AnalyticsTypography,{component:"span"},e)),X=()=>{const e=i("cr.components.audioRecording.introMessage",{seconds:S/1e3});return{component:J(e),duration:Object(b.a)(e)}},Z=e=>J(i("cr.components.audioRecording.countdown",{seconds:e}));switch(T){case B.PreRecording:return o.createElement("div",{className:r.prerecordingMessage},o.createElement("div",{className:r.wrapperOuter},o.createElement(L,{components:[X(),...P(Z,3e3,1e3)],onEnd:()=>{k(),m.onRecordStart()}}),z()));case B.Recording:return o.createElement(x,{ariaLabel:null!=u?u:i("cr.components.audioRecording.progressBarAriaLabel"),Progress:_,initialDuration:S},o.createElement("div",{className:r.wrapperOuter},o.createElement("div",{className:r.wrapperInner},o.createElement(j.AudioOn,null),o.createElement(l.AnalyticsTypography,{component:"span","aria-live":"polite"},i("cr.components.audioRecording.recording"))),o.createElement("div",{className:r.wrapperInner},o.createElement(L,{components:P((ee=e=>i("cr.components.audioRecording.recordingTimer",{timer:a(e,Y.ILocaleComposedDurationFormat.MinutesSeconds)}),e=>o.createElement(l.AnalyticsTypography,{component:"span"},ee(e))),S),onEnd:G}),z())));case B.ReadyToPlay:return o.createElement(W,{analyticsId:C,label:null!=d?d:i("cr.components.audioPlayer.playLabel"),src:g},o.createElement(Q,{analyticsId:C,"aria-label":i("cr.components.audioRecording.clearAudioAriaLabel"),onClick:$}));case B.ReadyToRecord:case B.ReadyToRecordDisabled:default:return o.createElement(o.Fragment,null,o.createElement(w,{analyticsId:C,title:i("cr.components.audioRecording.recordingUnsupported"),placement:"left",mimeType:h},o.createElement(l.AnalyticsClickAwayListener,{analyticsId:`${C}.record.button.clickAwayListener`,onClickAway:H},o.createElement("div",null,o.createElement(l.AnalyticsTooltip,{analyticsId:`${C}.record.button.blocked.tooltip`,title:i("cr.components.audioRecording.recordingBlocked"),placement:"left",onClose:H,open:O,disableFocusListener:!0,disableHoverListener:!0,disableTouchListener:!0},o.createElement("div",null,o.createElement(F,{title:p,analyticsId:C,onClick:V,disabled:T===B.ReadyToRecordDisabled||!f})))))),y&&o.createElement(l.AnalyticsOffScreenAnnouncement,{analyticsId:C,type:"polite",message:i("cr.components.audioRecording.recordingDeleted")}))}var ee},X=Object(i.makeStyles)((()=>Object(i.createStyles)({searchInputControl:{margin:"0 !important",borderStyle:"unset !important",boxShadow:"unset !important",height:"40px !important"}}))),Z=e=>{var t;const n=Object(O.a)(),s=X();return o.createElement(l.AnalyticsISearchBox,{clearButtonAriaLabel:n("cr.components.searchBox.clearButtonAriaLabel"),...e,InputProps:{...null==e?void 0:e.InputProps,inputProps:{className:s.searchInputControl,...null===(t=null==e?void 0:e.InputProps)||void 0===t?void 0:t.inputProps}}})};var ee=n("ks7T"),te=n("5HEc");const ne=Object(i.makeStyles)((e=>Object(i.createStyles)({root:{margin:"0",padding:"0",'& div[x-placement="top"]':{borderTop:`1px solid ${e.palette.background.b5}`,borderBottom:"none"},'& div[x-placement="bottom"]':{borderTop:"none",borderBottom:`1px solid ${e.palette.background.b5}`}},pageDropdownButton:{background:e.palette.common.white,borderRadius:"2px",boxShadow:"none",border:`1px solid ${e.palette.background.b5}`,margin:"0 8px",padding:"7px 3px",fontWeight:e.typography.fontWeightRegular,minWidth:"10px","&::after":{content:'""',borderTopColor:e.palette.background.b9,width:"0",display:"inline-block",verticalAlign:"middle",height:"12px",borderWidth:"6px 4px 0 4px",border:"7px solid transparent",margin:"0 10px",position:"relative",top:"2px"},"&:hover":{background:"none"},"& span":{padding:"0 0 0 10px","&::after":{content:'""',borderRight:`1px solid ${e.palette.background.b5}`,width:"10px",height:"25px"}}},pageDropdownPopper:{zIndex:10,borderLeft:`1px solid ${e.palette.background.b5}`,borderRight:`1px solid ${e.palette.background.b5}`},pageDropdownMenuList:{maxHeight:"216px",width:"62px",overflow:"scroll"}}))),se={flip:{enabled:!0},preventOverflow:{enabled:!0,boundariesElement:"#page-selector-menu"},hide:{enabled:!0}},oe=e=>{const[t,n]=r.a.useState(!1),s=r.a.useRef(null),i=r.a.useRef(null),{items:a,value:c,onChange:d,getOnChangeAnnouncement:p,buttonAriaLabel:m,elementSelectorToFocus:g,analyticsId:h,className:f}=e,E=Object(O.a)(),y=ne(e),I=g?document.querySelector(g):null,C=Object(u.a)(y.pageDropdownButton,f&&`${f}-button`),v=Object(u.a)(y.pageDropdownMenuList,f&&`${f}-dropdown-menu-list`),S=Object(o.useCallback)((()=>{n(!1)}),[]),j=Object(o.useCallback)((()=>{n(!t)}),[t]);function T(e){var t;d(e),S(),I?Object(b.f)(I):null===(t=s.current)||void 0===t||t.focus({preventScroll:!1})}return r.a.useEffect((()=>{let e;return t&&(e=setTimeout((()=>{var e;null===(e=i.current)||void 0===e||e.focus({preventScroll:!0})}),125)),function(){clearTimeout(e)}}),[t]),r.a.createElement("div",{className:y.root},r.a.createElement(l.AnalyticsDefaultButton,{ref:s,className:C,"aria-controls":t?"page-selector-menu":void 0,"aria-haspopup":"menu","aria-expanded":t,onClick:j,"aria-label":m||E("cr.components.pagination.pagination.dropdownButtonAriaLabel",{currentPage:c.label,lastPage:a.length}),analyticsId:`${h}.button`},c.label),r.a.createElement(l.AnalyticsPopper,{anchorEl:s.current,open:t,transition:!0,disablePortal:!0,placement:"bottom",className:y.pageDropdownPopper,id:"page-selector-menu",role:t?void 0:"menu",modifiers:se,analyticsId:`${h}.popper`},r.a.createElement(l.AnalyticsPaper,{analyticsId:`${h}.paper`},r.a.createElement(l.AnalyticsClickAwayListener,{onClickAway:S,analyticsId:`${h}.clickAwayListener`},r.a.createElement(l.AnalyticsMenuList,{className:v,disableListWrap:!0,analyticsId:`${h}.menuList`},a.map(((e,t)=>r.a.createElement(l.AnalyticsMenuItem,{button:!0,key:e.value,selected:e.value===c.value,"aria-selected":e.value===c.value,onClick:()=>T(e),value:e.value,"data-label":e.label,ref:e=>i.current=0===t?e:i.current,onKeyDown:t=>((e,t)=>{var n;"Escape"===e.key&&(e.stopPropagation(),S(),null===(n=s.current)||void 0===n||n.focus({preventScroll:!0})),"Enter"!==e.key&&" "!==e.key||(e.stopPropagation(),T(t))})(t,e),analyticsId:`${h}.menuItem`},e.label))))))),r.a.createElement(l.AnalyticsOffScreenAnnouncement,{analyticsId:`${h}.offScreenAnnouncement`,type:"polite",message:p(c.label,a.length),changeTrigger:c.label}))},re=Object(i.makeStyles)((e=>Object(i.createStyles)({root:{display:"flex",alignItems:"center",justifyContent:"center"},paginationLabel:{margin:"0 8px",display:"flex",alignItems:"center",fontWeight:e.typography.fontWeightRegular,fontSize:e.typography.fontSizeDefault}}))),ie=e=>{const{numberOfPages:t,onPageChange:n,page:s,analyticsId:r,elementSelectorToFocus:i,className:a,compact:c}=e,{translate:d,formatNumber:p}=Object(v.a)(),m=(e=>{const t=[];for(let n=0;n<e;n+=1)t.push(n);return t})(t),g=Object(b.d)(m,p,1),h=re(e),f=o.createElement(oe,{onChange:e=>n(Number(e.value)),getOnChangeAnnouncement:(e,t)=>d("cr.components.pagination.pagination.dropdownButtonAriaLabel",{currentPage:e,lastPage:t}),items:g,value:{value:String(s),label:p(s+1)},analyticsId:`${r}.components.common.pagination.pageSelectDropdown`,className:a,elementSelectorToFocus:i}),O=o.createElement(l.AnalyticsIconButton,{disabled:0===s,onClick:()=>n(s-1),className:"js-pagination-page-down-button",analyticsId:`${r}.components.common.pagination.pageDownButton`,"aria-label":d("cr.components.pagination.pagination.prevPageButton")},o.createElement(ee.a,null));return o.createElement("div",{className:Object(u.a)(h.root,"js-pagination-container",a)},c&&O,o.createElement("div",{className:h.paginationLabel,id:"components-common-pagination-page"},d("cr.components.pagination.pagination.pageCount",{paginationDropdownComponent:f,pageCount:m.length})),!c&&O,o.createElement(l.AnalyticsIconButton,{disabled:s===m.length-1,onClick:()=>n(s+1),className:"js-pagination-page-up-button",analyticsId:`${r}.components.common.pagination.pageUpButton`,"aria-label":d("cr.components.pagination.pagination.nextPageButton")},o.createElement(te.a,null)))},ae=e=>{const{totalItems:t,rangeStart:n,rangeEnd:s,className:r}=e,i=Object(O.a)();return o.createElement("div",{className:Object(u.a)(r)},i("cr.components.pagination.pageInformation.information",{totalItems:t,rangeStart:n,rangeEnd:s}))},ce=Object(i.makeStyles)((e=>Object(i.createStyles)({pageSizeContainer:{display:"flex",alignItems:"center"},inputLabel:{display:"inline-block",margin:"0",fontWeight:e.typography.fontWeightRegular}}))),le=e=>{const{pageSizeOptions:t,initialPageSize:n,analyticsId:s,className:r,onPageSizeChange:i}=e,{translate:a,formatNumber:c}=Object(v.a)(),d=Object(b.d)(t,c),[p,m]=o.useState((()=>{const e=d.map((e=>e.value)).indexOf(n),t=Math.max(0,e);return d[t]})),g=ce();return o.createElement("div",{className:"page-size-component"},o.createElement("div",{className:Object(u.a)(g.pageSizeContainer,r)},o.createElement(oe,{analyticsId:`${s}.components.pagination.pageSizeDropdown`,onChange:e=>{m(e),i(Number(e.value))},getOnChangeAnnouncement:(e,t)=>a("cr.components.pagination.pageSize.itemsPerPageAriaLabel.plural",{currentStudents:e}),value:p,items:d,className:r,buttonAriaLabel:a("cr.components.pagination.pageSize.itemsPerPageAriaLabel.plural",{currentStudents:p.value})}),o.createElement(l.AnalyticsInputLabel,{className:g.inputLabel,analyticsId:`${s}.components.pagination.pageSizeDropdown.label`},a("cr.components.pagination.pageSize.itemsPerPage"))))},de=Object(i.makeStyles)((e=>Object(i.createStyles)({scrollUpContainer:{margin:"auto",marginRight:0,fontWeight:e.typography.fontWeightRegular,fontSize:e.typography.fontSizeDefault,"& a":{color:"initial",textDecoration:"none",scrollBehavior:"smooth"}},[e.breakpoints.down("sm")]:{scrollUpContainer:{marginRight:"auto",lineHeight:"60px"}}}))),ue=e=>{const{elementIdToBeScrolled:t,analyticsId:n}=e,s=Object(O.a)(),r=de(e);const i=o.useCallback((e=>function(e,t){t.preventDefault();const n=document.querySelector(`#${e}`);Object(b.f)(n)}(t,e)),[t]);return o.createElement("div",{className:r.scrollUpContainer},o.createElement(l.AnalyticsLink,{href:"#",onClick:i,"aria-label":s("cr.components.scrollToElementButton.scrollAriaLabel"),analyticsId:`${n}.button`},o.createElement(j.UpArrow,{"aria-hidden":"true",role:"presentation"})," ",s("cr.components.scrollToElementButton.scrollTopList")))};var pe=n("3/0u");const be=Object(i.makeStyles)((()=>Object(i.createStyles)({confirmationCalloutDialog:{"& .ms-Dialog-title":{padding:"0"},"& .ms-Dialog-footer":{paddingTop:"20px"}}})));var me=n("WBPx");const ge=({analyticsId:e,target:t,onDismiss:n,onSuccess:s,textContent:r,isVisible:i})=>{const a=be(),c=`${e}.confirmationCalloutDialog`;let l=!1;o.useEffect((()=>{i&&setTimeout((()=>{l=!0}),1e3)}),[i]);return o.createElement(o.Fragment,null,i&&o.createElement(pe.Dialog,{onDismiss:e=>{("scroll"!==(null==e?void 0:e.type)||l)&&(null==n||n())},showAsCallout:!0,target:t,calloutProps:{setInitialFocus:!0,preventDismissOnResize:!0},dialogContentProps:{type:pe.DialogType.actionConfirmation,title:r.title,subText:r.body,showCloseButton:!1,className:a.confirmationCalloutDialog},analyticsId:c},o.createElement(pe.DialogFooter,null,o.createElement(me.AnalyticsDefaultButton,{onClick:n,analyticsId:`${c}.secondaryButton`},r.secondaryButtonText),o.createElement(me.AnalyticsPrimaryButton,{onClick:s,analyticsId:`${c}.primaryButton`}," ",r.primaryButtonText," "))))};var he=n("THXI");const fe=Object(i.makeStyles)((e=>Object(i.createStyles)({skipLink:{...he.i,fontSize:e.typography.fontSizeSmall,"&:active, &:focus, &:hover":{left:"0px",top:"0px",height:"auto",margin:"0px",clip:"auto",textAlign:"center",backgroundColor:e.palette.brand.main,color:e.palette.brand.contrastText,display:"block",width:"100%",zIndex:"9999",outline:"medium none"}}})));var Oe=n("eqO1");const Ee=e=>{const{customClassNames:t,focusNextSelector:n,targetSelector:s}=e,r=Object(O.a)(),i=fe(Object(Oe.t)()),a=Object(u.a)(...t||[],i.skipLink),c=o.useRef(null),d=o.useCallback((()=>{const e=c.current;let t=null==e?void 0:e.closest(".bb-offcanvas-panel");t||(t=null==e?void 0:e.closest("#site-wrap"));const n=null==t?void 0:t.querySelector(s);null==n||n.focus(),n&&!n.contains(document.activeElement)&&null==n.getAttribute("tabindex")&&(n.setAttribute("tabindex","-1"),n.focus())}),[s]);return((e,t,n=!1)=>{const[s,r]=o.useState(!1),i=o.useCallback((e=>{const o=!n||!s,i="Tab"===e.code&&!e.shiftKey;if(o&&i&&t){const n=document.querySelector(t);n&&(n.focus(),e.preventDefault(),r(!0))}}),[t,s,n]);o.useEffect((()=>{var t;return null===(t=e.current)||void 0===t||t.addEventListener("keydown",i),()=>{var t;null===(t=e.current)||void 0===t||t.removeEventListener("keydown",i)}}),[e.current,i])})(c,n),o.createElement(l.AnalyticsLink,{ref:c,href:"#",onClick:d,className:a,analyticsId:"components.accessibility.skip-link"},r("cr.components.accessibility.skipLink.message"))};var ye,Ie,Ce=n("MC1S"),ve=n("GR+8"),Se=n("myse");!function(e){e.Hour="hour",e.Minute="minute",e.AmPm="amPm"}(ye||(ye={})),function(e){e[e.Pageup=33]="Pageup",e[e.Pagedown=34]="Pagedown",e[e.End=35]="End",e[e.Home=36]="Home",e[e.Left=37]="Left",e[e.Up=38]="Up",e[e.Right=39]="Right",e[e.Down=40]="Down",e[e.Esc=27]="Esc",e[e.Enter=13]="Enter"}(Ie||(Ie={}));var je,Te=n("np6O"),Ae=n("wgY5"),_e=n.n(Ae);!function(e){e[e.Up=1]="Up",e[e.Down=-1]="Down"}(je||(je={}));const Re=new Map([[ye.Hour,"h"],[ye.Minute,"m"],[ye.AmPm,"h"]]),Ne=e=>{e.stopPropagation();const t=e.which;t!==Ie.Up&&t!==Ie.Down&&t!==Ie.Home&&t!==Ie.End&&t!==Ie.Left&&t!==Ie.Right&&t!==Ie.Pageup&&t!==Ie.Pagedown||e.preventDefault()},we=e=>{const{formatNumber:t,parseNumber:n,isRtl:s}=Object(v.a)(),r=Re.get(e.type),i=()=>{const{type:t,is24hr:n}=e;return t===ye.Hour?n?0:1:0},a=()=>{const{type:t,is24hr:n}=e;return t===ye.Hour?n?23:12:59},c=t=>{const{date:n,onChangeValue:s}=e,o=_e()(n);e.type===ye.AmPm?o.add(12*t,r):o.add(1*t,r),s(o.toDate())},l=o.useCallback((t=>{const{onChangeValue:n,closeSpinner:o,type:i,is24hr:a,date:c}=e,l=_e()(c);if(i!==ye.AmPm)switch(Ne(t),t.which){case Ie.Esc:o();break;case Ie.Right:{const e=s()?-1:1;n(l.add(e,r).toDate());break}case Ie.Up:n(l.add(1,r).toDate());break;case Ie.Left:{const e=s()?1:-1;n(l.add(e,r).toDate());break}case Ie.Down:n(l.add(-1,r).toDate());break;case Ie.Pageup:i===ye.Hour?n(l.add(3,r).toDate()):i===ye.Minute&&n(l.add(10,r).toDate());break;case Ie.Pagedown:i===ye.Hour?n(l.add(-3,r).toDate()):i===ye.Minute&&n(l.add(-10,r).toDate());break;case Ie.Home:i===ye.Hour?n(l.hour(a?23:12).toDate()):i===ye.Minute&&n(l.minute(59).toDate());break;case Ie.End:i===ye.Hour?n(l.hour(a?0:1).toDate()):i===ye.Minute&&n(l.minute(0).toDate())}else((t,n)=>{const{closeSpinner:s,onChangeValue:o}=e;Ne(t);const r=t.which;r===Ie.Esc?s():r!==Ie.Up&&r!==Ie.Down&&r!==Ie.Home&&r!==Ie.End&&r!==Ie.Left&&r!==Ie.Right&&r!==Ie.Pageup&&r!==Ie.Pagedown||o(n.add(12,"h").toDate())})(t,l)}),[e.date]),d=o.useCallback((s=>{const{type:o,value:r,updateTimeInput:c}=e,l=s.target.value;if(o===ye.AmPm)return void c({amPm:l.toUpperCase()});const d=((e,s)=>{const o=n(e),r=i(),c=a();return Number.isNaN(o)?n(s).toString():o>=r&&o<=c?e:t(o<r?r:c)})(l,r);o===ye.Hour?c({hour:d}):c({minute:d})}),[e.value]),u=o.useCallback((t=>{Ne(t),t.which===Ie.Esc&&e.closeSpinner()}),[]);return o.createElement("div",{className:e.className},o.createElement(Te.AnalyticsIconButton,{"aria-label":e.ariaLabel.upButton,className:"spinner-btn",onKeyUp:u,onClick:()=>c(je.Up),onKeyDown:Ne,title:e.ariaLabel.upButton,analyticsId:e.analyticsId.upButton,"data-testid":"add-btn"},o.createElement(j.ArrowUp,null)),o.createElement("input",{type:"text",className:e.className+"-input",ref:e.inputRef,"aria-label":e.ariaLabel.input,value:e.value,role:"spinbutton","aria-valuenow":parseInt(e.value,10),"aria-valuemax":a(),"aria-valuemin":i(),onChange:d,onFocus:e=>e.target.select(),onKeyUp:l,onKeyDown:Ne,onKeyPress:t=>{t.which===Ie.Enter&&e.closeSpinner()},onClick:e.onInputClick,"data-analytics-id":e.analyticsId.input}),o.createElement(Te.AnalyticsIconButton,{"aria-label":e.ariaLabel.downButton,className:"spinner-btn",onClick:()=>c(je.Down),onKeyUp:u,onKeyDown:Ne,title:e.ariaLabel.downButton,analyticsId:e.analyticsId.downButton,"data-testid":"sub-btn"},o.createElement(j.ArrowDown,null)))};class De extends o.PureComponent{constructor(e){super(e),this.timePickerRef=null,this.timeInputRef=null,this.hourInputRef=null,this.getFormattedHour=e=>{const{is24HourMode:t}=this.state;return t?e:e%12==0?12:e%12},this.onToggleSpinner=()=>{this.setState((e=>({isDisplaySpinner:!e.isDisplaySpinner})))},this.getValueWithCurrentTime=()=>{const{value:e}=this.props;if(null==e)return new Date;const t=new Date;return e.setHours(t.getHours()),e.setMinutes(t.getMinutes()),e},this.onFocusTime=()=>{if(""!==this.state.timeStr)return;const{localize:e,onChangeValue:t}=this.props,n=this.getValueWithCurrentTime(),s=e.formatTime(n,Y.ILocaleTimeFormat.Short);this.updateTimePickerState(n,s),t(n)},this.onChangeTimeInput=e=>{const t=e.target.value;if(this.setState({timeStr:t}),""===t)return;e.persist();const{onValidateCallback:n,localize:s}=this.props;this.timeoutPromiseWrapper(s.parseTime,[t,Y.ILocaleTimeFormat.Short],s).then((e=>{if(e){n(!0);const t=new Date(e);this.updateTimePickerState(t)}else n(!1)}))},this.onHandlerBlur=()=>{var e,t;const{is24HourMode:n}=this.state;let{hour:s,minute:o,amPm:r}=this.state;const{localize:i,onChangeValue:a,onValidateCallback:c}=this.props;let{value:l}=this.props;if(""===this.state.timeStr){l=this.getValueWithCurrentTime();const e=l.getHours();if(!n&&this.meridianValues){const t=e<=11?this.meridianValues.am:this.meridianValues.pm;this.setState({amPm:t}),r=t}s=e.toString(),o=l.getMinutes().toString()}const d=new Date(l);let u=Number(s),p=!1;if(!u&&0!==u){const e=i.parseNumber(s);p=!e&&0!==e,u=this.getFormattedHour(e||l.getHours())}let b=Number(o),m=!1;if(!b&&0!==b){const e=i.parseNumber(o);m=!e&&0!==e,b=e||l.getMinutes()}let g=0,h=u;if(!n&&this.meridianValues&&(h=u%12,g=i.getMeridianOffset(r),-1===g)){const e=l.getHours()<=11?this.meridianValues.am:this.meridianValues.pm;this.setState({amPm:e}),g=i.getMeridianOffset(e)}h<12&&12===g&&(h+=g),d.setHours(h),d.setMinutes(b);const f=this.timeoutPromiseWrapper(i.formatTime,[d,Y.ILocaleTimeFormat.Short],i).then((e=>{this.setState((t=>({timeStr:""!==t.timeStr?e:"",hour:p?i.formatNumber(u):t.hour,minute:m?i.formatNumber(b,{minimumIntegerDigits:2}):t.minute}))),c(!0),a(d)}));null===(t=(e=this.props).onDateTimeChanging)||void 0===t||t.call(e,f),setTimeout((()=>{var e;(null===(e=this.timePickerRef)||void 0===e?void 0:e.contains(document.activeElement))||this.closeSpinner()}))},this.onTimeInputKeyPress=e=>{e.which===Ie.Enter&&this.closeSpinner()},this.timeoutPromiseWrapper=(e,t,n)=>new Promise((s=>{e.apply(this,t),setTimeout((()=>{const o=e.apply(n,t);s(o)}))})),this.errorMessage=()=>{const{isValueValid:e,errorEmptyMessage:t,errorFormatMessage:n}=this.props;if(e||!n&&!t)return null;let s=n;if(!this.state.timeStr){if(!t)return null;s=t}return o.createElement("span",{className:"error-message"},o.createElement(j.Attention,null),s)},this.updateTimeInput=e=>{const{hour:t,minute:n,amPm:s}=this.state;this.setState({hour:(null==e?void 0:e.hour)||t,minute:(null==e?void 0:e.minute)||n,amPm:(null==e?void 0:e.amPm)||s})},this.closeSpinner=()=>{this.setState({isDisplaySpinner:!1})},this.state={timeStr:"",hour:"",minute:"",amPm:"",is24HourMode:!1,isDisplaySpinner:!1,tzShort:""}}componentDidMount(){const{localize:e,value:t,onValidateCallback:n}=this.props,s=new Date,o=this.timeoutPromiseWrapper(e.formatTimezone,[s,Y.ILocaleTimezoneFormat.Short],e),r=this.timeoutPromiseWrapper(e.getMeridianValues,[],e);Promise.all([o,r]).then((s=>{const o=s[1];this.meridianValues=o,this.setState({is24HourMode:o.use24Time,tzShort:s[0]}),t&&!this.state.timeStr&&this.timeoutPromiseWrapper(e.formatTime,[t,Y.ILocaleTimeFormat.Short],e).then((e=>{this.updateTimePickerState(t,e),n(!0)}))}))}componentDidUpdate(e,t){var n;const{localize:s,value:o,onValidateCallback:r}=this.props,i=(null==o?void 0:o.getTime())!==(null===(n=e.value)||void 0===n?void 0:n.getTime());if(o&&i){const e=this.timeoutPromiseWrapper(s.formatTime,[o,Y.ILocaleTimeFormat.Short],s);let t;this.meridianValues||(t=this.timeoutPromiseWrapper(s.getMeridianValues,[],s)),Promise.all([e,t]).then((e=>{const t=e[1];t&&(this.meridianValues=t,this.setState({is24HourMode:t.use24Time})),this.updateTimePickerState(o,e[0]),r(!0)}))}o||o===e.value||(this.setState({timeStr:"",hour:"",minute:"",amPm:""}),r(!0));const{isDisplaySpinner:a}=this.state;t.isDisplaySpinner!==a&&a&&this.hourInputRef&&this.hourInputRef.focus()}updateTimePickerState(e,t){const{is24HourMode:n}=this.state,{localize:s}=this.props,o=Number(e.getMinutes());let r=Number(e.getHours()),i="";!n&&this.meridianValues&&(i=r<=11?this.meridianValues.am:this.meridianValues.pm,r=this.getFormattedHour(r)),this.setState((e=>({hour:s.formatNumber(r),minute:s.formatNumber(o,{minimumIntegerDigits:2}),amPm:null==i?void 0:i.toLocaleUpperCase(),timeStr:t||e.timeStr})))}render(){const{timeStr:e,hour:t,minute:n,isDisplaySpinner:s,tzShort:r,amPm:i,is24HourMode:a}=this.state,{disabled:c,localize:l,analyticsId:d,analyticsEventAugmentor:u,placeholder:p,ariaLabel:b,value:m,readonly:g}=this.props,h="spinner-control "+(i?"":"no-am-pm"),f=u(Se.AnalyticsEventTypes.CLICK_EVENT,(()=>{}),d+".input.text"),O=u(Se.AnalyticsEventTypes.CLICK_EVENT,(()=>{}),d+".hour.input.text"),E=u(Se.AnalyticsEventTypes.CLICK_EVENT,(()=>{}),d+".minute.input.text"),y=u(Se.AnalyticsEventTypes.CLICK_EVENT,(()=>{}),d+".amPm.input.text");return o.createElement("div",{className:"time-picker",ref:e=>this.timePickerRef=e,onBlur:this.onHandlerBlur,"data-analytics-id":d},o.createElement("div",{className:"calendar-input-container"},o.createElement("input",{type:"text",className:"time-input",value:e,onChange:this.onChangeTimeInput,ref:e=>this.timeInputRef=e,disabled:c,readOnly:g,onFocus:this.onFocusTime,onKeyPress:this.onTimeInputKeyPress,onClick:f,"data-analytics-id":`${d}.input.text`,placeholder:p||void 0,"aria-label":b||l.translate("cr.components.timePicker.time")}),o.createElement(Te.AnalyticsIconButton,{"aria-label":l.translate("cr.components.timePicker.toggleTimePicker"),className:"btn-date open-datepicker toggle-btn",disabled:c||g,onClick:this.onToggleSpinner,onFocus:this.onFocusTime,"aria-expanded":this.state.isDisplaySpinner,title:l.translate("cr.components.timePicker.toggleTimePicker"),analyticsId:d+".open.button"},o.createElement(j.Away,null)),this.errorMessage()),s&&o.createElement(Ce.Callout,{className:"js-time-picker-callout",target:this.timeInputRef,doNotLayer:!0,directionalHint:5},o.createElement("div",{className:h,"aria-hidden":!s,role:"region","aria-label":l.translate("cr.components.timePicker.timePicker"),tabIndex:-1},o.createElement("div",{className:"spinners-hour-and-minute"},o.createElement(we,{className:"spinner-hour",type:ye.Hour,is24hr:a,onChangeValue:this.props.onChangeValue,closeSpinner:this.closeSpinner,updateTimeInput:this.updateTimeInput,value:t,onInputClick:O,inputRef:e=>this.hourInputRef=e,ariaLabel:{upButton:l.translate("cr.components.timePicker.increaseHour"),input:l.translate("cr.components.timePicker.hour"),downButton:l.translate("cr.components.timePicker.decreaseHour")},analyticsId:{upButton:`${d}.increaseHour.button`,input:`${d}.hour.input.text`,downButton:`${d}.decreaseHour.button`},date:m}),o.createElement("div",{className:"hour-min-separator"},l.translate("cr.components.timePicker.hourMinSeparator")),o.createElement(we,{className:"spinner-min",type:ye.Minute,is24hr:a,onChangeValue:this.props.onChangeValue,closeSpinner:this.closeSpinner,updateTimeInput:this.updateTimeInput,value:n,onInputClick:E,ariaLabel:{upButton:l.translate("cr.components.timePicker.increaseMinute"),input:l.translate("cr.components.timePicker.minute"),downButton:l.translate("cr.components.timePicker.decreaseMinute")},analyticsId:{upButton:`${d}.increaseMinute.button`,input:`${d}.minute.input.text`,downButton:`${d}.decreaseMinute.button`},date:m})),o.createElement(we,{className:"spinner-ampm",type:ye.AmPm,is24hr:a,onChangeValue:this.props.onChangeValue,closeSpinner:this.closeSpinner,updateTimeInput:this.updateTimeInput,value:i,onInputClick:y,ariaLabel:{upButton:l.translate("cr.components.timePicker.changeToAmPm"),input:l.translate("cr.components.timePicker.amPm"),downButton:l.translate("cr.components.timePicker.changeToAmPm")},analyticsId:{upButton:`${d}.changeAmPm.button`,input:`${d}.amPm.input.text`,downButton:`${d}.changeAmPm.button`},date:m})),o.createElement("hr",null),o.createElement("div",{className:"tz-offset"},o.createElement("span",null,r))))}}const Le=Object(ve.a)(Object(Se.withAnalytics)(De)),Pe=e=>o.createElement(l.AnalyticsSvgIcon,{analyticsId:"components-react.icons.accommodationColor",...e,fontSize:"small",x:"0px",y:"0px",viewBox:"0 0 10 10",enableBackground:"new 0 0 10 10"},o.createElement("polygon",{fill:"#C36FD3",stroke:"#822798",strokeLinejoin:"round",strokeMiterlimit:"10",points:"8.5,9.5 5,6.5 1.5,9.5 1.5,0.5  8.5,0.5 "}));n("IzIX");var ke=n("2BVn"),xe=n("wbW+");const Be=Object(i.makeStyles)((e=>Object(i.createStyles)({root:{width:"100%"},keywordPickerComponent:{margin:0,width:"100%","& .ms-KeywordPicker-list":{margin:"10px 0 0 0",border:"none",display:"flex",flexDirection:"row","& li":{width:"auto",display:"block",minWidth:"50px","& .ms-TagItem":{backgroundColor:e.palette.background.b5,"& span":{display:"flex",fontSize:"14px",textAlign:"center",alignItems:"center",justifyContent:"center",fontWeight:e.typography.fontWeightRegular,fontFamily:e.typography.fontFamily},"& button":{padding:0,width:"auto",color:e.palette.common.black,paddingRight:"6px"}}}},"& .ms-KeywordPicker-label":{padding:0,color:e.palette.text.hint,fontWeight:e.typography.fontWeightRegular,fontSize:e.typography.fontSizeDefault,fontFamily:e.typography.fontFamily,"&":{flip:!1,marginRight:"14px"}},'& label[class*="floatAbove"]':{color:"initial",fontWeight:e.typography.fontWeightSemiBold,padding:"0 3px"},"& .ms-KeywordPicker-input":{borderRadius:"2px",border:`1px solid ${e.palette.border.dark}`,fontSize:e.typography.fontSizeDefault,fontFamily:e.typography.fontFamily}},keywordPickerClearFiltersWrapper:{width:"100%",display:"flex",justifyContent:"flex-end"},keywordPickerClearFilters:{padding:0,border:"none",cursor:"pointer",color:e.palette.link.selected,backgroundColor:"transparent","&:hover":{textDecoration:"underline",backgroundColor:"transparent"}}}))),Me=e=>{const t=o.useRef(null),{onFilterChanged:n,className:s,analyticsId:r}=e,i=Object(O.a)(),[a,c]=o.useState([]),d=o.useCallback((e=>{const t=null!=e?e:[];c(t),n(t)}),[n]),p=o.useCallback((()=>{c([]),n([])}),[n]),b=o.useCallback((e=>{var n;"Enter"===e.key&&(e.stopPropagation(),null===(n=t.current)||void 0===n||n.focus({preventScroll:!0}),p())}),[p]),m=Be(e),g=a.length>0?i("cr.components.searchBar.cleanFiltersButton"):"",h=Object(u.a)(m.root,s&&`${s}-keyword-picker-wrapper`),f=Object(u.a)(m.keywordPickerComponent,s&&`${s}-keyword-picker-component`),E=Object(u.a)(m.keywordPickerClearFiltersWrapper,s&&`${s}-keyword-picker-clear-filters-wrapper`),y=Object(u.a)(m.keywordPickerClearFilters,s&&`${s}-keyword-picker-clear-filters`);return o.createElement("div",{className:h},o.createElement(ke.KeywordPicker,{ref:t,selectedItems:a,className:f,removeButtonAriaLabel:e=>i("cr.components.searchBar.removeButtonAriaLabel",{name:null==e?void 0:e.name}),inputLabel:i("cr.components.searchBar.label"),onRenderItem:e=>o.createElement(xe.TagItem,{...e},e.item.name),onChange:e=>d(e),getItemAddedStatusMessage:e=>i("cr.components.searchBar.addedToList",{text:e}),analyticsId:r}),a.length>0&&o.createElement("div",{className:E},o.createElement(l.AnalyticsDefaultButton,{className:y,onClick:p,onKeyDown:b,"aria-label":g,analyticsId:`${r}.clearFilters.button`},g)))},Ue=e=>o.createElement(l.AnalyticsSvgIcon,{analyticsId:"components-react.icons.helfulLinkLayoutLeft",...e,width:"56",height:"28",viewBox:"0 0 56 28"},o.createElement("g",{fill:"none",fillRule:"evenodd"},o.createElement("g",{stroke:"currentcolor"},o.createElement("path",{d:"M26.498 27.5H1.502A1.002 1.002 0 0 1 .5 26.498V1.502C.5.949.948.5 1.502.5h24.996c.554 0 1.002.449 1.002 1.002v24.996c0 .553-.448 1.002-1.002 1.002z"}),o.createElement("path",{d:"M20.5 14.5a2 2 0 1 1-4.001-.001 2 2 0 0 1 4.001.001z"}),o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M.5 24.5l8-8 8 8 6-5 5 4M34.5 4.5h21M34.5 9.5h21M34.5 14.5h21M34.5 19.5h21M34.5 24.5h21"})))),Ge=e=>o.createElement(l.AnalyticsSvgIcon,{analyticsId:"components-react.icons.helfulLinkLayoutRight",...e,width:"56",height:"28",viewBox:"0 0 56 28"},o.createElement("g",{fill:"none",fillRule:"evenodd"},o.createElement("g",{stroke:"currentcolor"},o.createElement("path",{d:"M54.498 27.5H29.502a1.002 1.002 0 0 1-1.002-1.002V1.502C28.5.949 28.948.5 29.502.5h24.996c.554 0 1.002.449 1.002 1.002v24.996c0 .553-.448 1.002-1.002 1.002z"}),o.createElement("path",{d:"M48.5 14.5a2 2 0 1 1-4.001-.001 2 2 0 0 1 4.001.001z"}),o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M28.5 24.5l8-8 8 8 6-5 5 4M21.5 4.5H.5M21.5 9.5H.5M21.5 14.5H.5M21.5 19.5H.5M21.5 24.5H.5"})))),Fe=e=>o.createElement(l.AnalyticsSvgIcon,{analyticsId:"components-react.icons.helpfulLinksLayoutText",...e,width:"56",height:"28",viewBox:"0 0 56 28"},o.createElement("g",{fill:"none",fillRule:"evenodd"},o.createElement("g",{stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round"},o.createElement("path",{d:"M24.5 4.5h-21M24.5 9.5h-21M24.5 14.5h-21M24.5 19.5h-21M24.5 24.5h-21M52.5 4.5h-21M52.5 9.5h-21M52.5 14.5h-21M52.5 19.5h-21M52.5 24.5h-21"}))));var qe=n("8uXS");const He={email:!1,phone:!1,sanitizeHtml:!0,truncate:150},Ve=({plainText:e,analyticsIdTagPrefix:t})=>{const n=e=>{const n=e.buildTag();return n.setAttr("analytics-id",`${t}.linkified-text.link`),n},s=o.useMemo((()=>qe.a.link(e,{...He,replaceFn:n})),[e]);return o.createElement("span",{dangerouslySetInnerHTML:{__html:s}})};var Ke=n("+Koh");const $e=e=>{const{menuOptions:t,optionClicked:n,analyticsIdPrefix:s,ariaLabel:r,isRtl:i,id:a,className:c}=e,[d,u]=o.useState(!1),p=o.useRef(null);return o.createElement(o.Fragment,null,t.length>0&&o.createElement("div",{id:a,className:c},o.createElement(l.AnalyticsIconButton,{analyticsId:`${s}.button`,key:`${s}.button`,"aria-label":r,ref:p,onClick:()=>u((e=>!e))},o.createElement(Ke.Menu,null)),o.createElement(l.AnalyticsJssThemeProvider,{theme:"light",cssReset:"none",isRtl:i},o.createElement(l.AnalyticsMenu,{analyticsId:`${s}.menu`,anchorEl:p.current,open:d,onClose:()=>u(!1)},t.map((e=>o.createElement(l.AnalyticsMenuItem,{analyticsId:e.analyticsId,key:e.analyticsId,"aria-label":e.label,onClick:()=>(e=>{n(e),u(!1)})(e)},e.label)))))))};var We=n("ml91");const ze=Object(i.makeStyles)((e=>Object(i.createStyles)({settingsButton:{[e.breakpoints.up("md")]:{minHeight:"unset",color:e.palette.text}}}))),Qe=e=>{const{labelKey:t,analyticsId:n,action:s}=e,r=ze(),i=Object(Oe.t)(),a=Object(O.a)(),c=Object(Oe.s)(i.breakpoints.up("md"));return o.createElement(l.AnalyticsIconButton,{className:r.settingsButton,analyticsId:n,"aria-label":a(t),onClick:s},o.createElement(j.Settings,null),c&&o.createElement(l.AnalyticsTypography,{component:"span",variant:"inherit"},a(t)))};var Ye=n("Wc/J");const Je=Object(i.makeStyles)((e=>Object(i.createStyles)({panelHeaderContainerRoot:t=>({borderBottom:`1px solid ${e.palette.border.main}`,height:"48px",backgroundColor:e.palette.background.b9,[e.breakpoints.up("sm")]:{height:"56px"},[e.breakpoints.up("md")]:{backgroundColor:e.palette.background.default,height:"107px"}}),containerWrapper:{display:"flex",height:"100%",justifyContent:"center",alignItems:"center",margin:"0 5px",[e.breakpoints.up("md")]:{justifyContent:"center",alignItems:"flex-start",flexDirection:"column",margin:"0 30px"}},menuToggle:t=>({color:e.palette.secondary.main,marginRight:`${t.closeButtonWidth}px`,"&:hover":{color:e.palette.primary.contrastText}}),menuToggleWrapper:t=>({minWidth:t.menuToggleMinWidth?`${t.menuToggleMinWidth}px`:"inherit",display:"flex",justifyContent:"flex-start",flex:1,[e.breakpoints.up("md")]:{display:"none"}}),subHeader:{display:"none",[e.breakpoints.up("md")]:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",width:"100%"}},rightContentContainer:{marginLeft:"auto"},headingWrapperContainer:{width:"100%",display:"flex",overflow:"hidden",whiteSpace:"nowrap","& h1":{display:"flex",justifyContent:"center",alignItems:"center",width:"100%"},[e.breakpoints.up("md")]:{justifyContent:"space-between",width:"100%","& h1":{width:"fit-content"}}}}))),Xe=e=>{const{subHeaderText:t,children:n,analyticsIdPrefix:s,showMenuToggleButton:r,menuToggleRef:i,readyToFocus:a,skipLinkClassName:c,skipLinkFocusNext:d,skipLinkTarget:p,settingsButtonProps:b}=e,m=Object(O.a)(),g=o.useRef(null);((e,t=!1)=>{o.useEffect((()=>{t&&e.current&&e.current.focus()}),[e,t])})(g,a);const h=Object(Oe.t)(),f=Object(Oe.s)(h.breakpoints.up("md")),E=Je({...e,closeButtonWidth:40});return o.createElement("div",{className:E.panelHeaderContainerRoot},o.createElement("div",{className:E.containerWrapper},o.createElement("div",{className:E.subHeader},o.createElement("div",null,t),o.createElement("div",{className:E.rightContentContainer},b&&f&&o.createElement(Qe,{...b}))),o.createElement("div",{className:E.menuToggleWrapper},r&&o.createElement(l.AnalyticsIconButton,{ref:i,className:Object(u.a)(E.menuToggle,"left-off-canvas-toggle","menu-toggle"),analyticsId:`${s}.menu-toggle-button`},o.createElement(Ye.a,null),o.createElement("span",{className:"sr-only"},m("cr.components.panelHeader.menuToggleButtonAriaLabel")))),o.createElement("div",{tabIndex:-1,ref:g,className:E.headingWrapperContainer},n),p&&o.createElement(Ee,{targetSelector:p,focusNextSelector:d,customClassNames:["js-panel-header-skip-link",c]})))},Ze=Object(i.makeStyles)((e=>Object(i.createStyles)({panelHeaderControlsRoot:t=>({"& a:focus":{color:e.palette.secondary.main},"& a:hover":{color:e.palette.primary.contrastText},minWidth:t.minWidth?`${t.minWidth}px`:"15vw",flex:1,display:"flex",justifyContent:"flex-end",[e.breakpoints.up("md")]:{display:"block",flex:0,justifyContent:"center",marginLeft:0}}),panelHeaderControlsWrapper:{display:"flex"}}))),et=o.forwardRef(((e,t)=>{const{children:n}=e,{isRtl:s}=Object(v.a)(),r=Ze(e),i=Object(Oe.t)(),a=Object(Oe.s)(i.breakpoints.up("md"));return o.createElement(l.AnalyticsJssThemeProvider,{theme:a?"light":"dark",isRtl:s(),cssReset:"none"},o.createElement("div",{className:r.panelHeaderControlsRoot},o.createElement("div",{ref:t,className:r.panelHeaderControlsWrapper},n)))})),tt=Object(i.makeStyles)((e=>Object(i.createStyles)({headerText:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:e.palette.primary.contrastText,backgroundColor:e.palette.background.b9,[e.breakpoints.up("md")]:{margin:0,color:e.palette.text.primary,backgroundColor:e.palette.background.default,textAlign:"unset",width:"auto"}},headerTextEditButtonWrapper:{display:"flex",justifyContent:"initial",alignItems:"center",cursor:"pointer",width:"auto",maxWidth:"100%","&:hover":{textDecoration:"underline","& $editButton":{opacity:1}}},editButton:{[e.breakpoints.up("md")]:{opacity:0,color:e.palette.text.secondary,marginBottom:"-4px","&:hover":{color:e.palette.text.primary},"&:focus":{opacity:1,color:e.palette.text.secondary}}},headerTextFieldRoot:{display:"block",border:"none",borderRadius:0,backgroundColor:"transparent",color:e.palette.primary.contrastText,[e.breakpoints.up("md")]:{color:e.palette.text.primary},"& input":{backgroundColor:"transparent",color:e.palette.primary.contrastText,border:"none",padding:0,margin:0,fontFamily:e.typography.h3.fontFamily,fontSize:e.typography.h3.fontSize,fontWeight:e.typography.h3.fontWeight,lineHeight:e.typography.h3.lineHeight,textAlign:"center",[e.breakpoints.up("md")]:{textAlign:"unset",fontFamily:e.typography.display1.fontFamily,fontSize:e.typography.display1.fontSize,fontWeight:e.typography.display1.fontWeight,lineHeight:e.typography.display1.lineHeight,color:e.palette.text.primary}},"& input:focus":{boxShadow:"none",backgroundColor:"transparent"}},headerTextFieldFocused:{"&&":{boxShadow:"none"},[e.breakpoints.up("md")]:{"&&":{boxShadow:`0 2px 0 0 ${e.palette.focus.main}`}}}}))),nt=e=>{const{shouldWrap:t,wrapper:n,children:s}=e;return t?n(s):s},st=e=>{const{editButtonAriaLabel:t,onHeaderTextChange:n,initialIsEditMode:s,placeholder:r,onEnterEditMode:i,onExitEditMode:a,inputRef:c,...d}=e,{headerText:p,analyticsIdPrefix:b,settingsButtonProps:m}=d,g=Object(Oe.t)(),h=Object(Oe.s)(g.breakpoints.up("md")),f=tt(e),[O,E]=Object(o.useState)(0),[y,I]=Object(o.useState)(0),C=o.Children.toArray(e.children).length,v=Object(o.useCallback)((e=>E((null==e?void 0:e.clientWidth)||0)),[C,h]),S=Object(o.useCallback)((e=>I((null==e?void 0:e.clientWidth)||0)),[C,h]),[j,T]=Object(o.useState)(!!s),[A,_]=Object(o.useState)(p),R=o.useRef(A),N=Object(o.useCallback)((()=>{T(!1),null==a||a();const e=A.trim();e&&e!==p?(_(e),null==n||n(e)):_(R.current)}),[A]),w=Object(o.useMemo)((()=>j?Math.max(O+40,y):0),[O,y,j]);return o.createElement(Xe,{...d,menuToggleMinWidth:w,menuToggleRef:v},o.createElement(o.Fragment,null,!j&&o.createElement(nt,{shouldWrap:h,wrapper:e=>o.createElement("div",{className:f.headerTextEditButtonWrapper},e)},o.createElement(o.Fragment,null,o.createElement(l.AnalyticsTypography,{onClick:()=>T(!0),className:Object(u.a)(f.headerText,"js-header-text","js-editable-header-text"),"data-analytics-id":`${b}.enter-edit-mode-header`,component:"h1",variant:h?"display1":"h3"},A),o.createElement(et,{ref:S},o.createElement(l.AnalyticsIconButton,{className:Object(u.a)(f.editButton,"js-enter-edit-mode-button"),"aria-label":t,analyticsId:`${b}.enter-edit-mode-button`,onClick:()=>{R.current=A,T(!0),null==i||i()}},o.createElement(We.a,null)),!h&&e.children,m&&!h&&o.createElement(Qe,{...m})))),j&&o.createElement(o.Fragment,null,o.createElement(l.AnalyticsTextField,{className:"js-header-text-input",value:A===r?"":A,autoFocus:!0,fullWidth:!0,InputProps:{classes:{root:f.headerTextFieldRoot,focused:f.headerTextFieldFocused}},ref:c,placeholder:r,onChange:e=>_(e.target.value),onKeyDown:e=>"Enter"===e.nativeEvent.code&&N(),onBlur:N,analyticsId:`${b}.header-text-input`}),o.createElement(et,{minWidth:w,ref:S},!h&&e.children,m&&!h&&o.createElement(Qe,{...m})))))},ot=Object(i.makeStyles)((e=>Object(i.createStyles)({headerText:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:e.palette.primary.contrastText,[e.breakpoints.up("md")]:{margin:0,color:e.palette.text.primary,textAlign:"unset",width:"auto",display:"block",maxWidth:"100%"}}}))),rt=e=>{const t=ot(e),n=Object(Oe.t)(),s=Object(Oe.s)(n.breakpoints.up("md")),{headerText:r,settingsButtonProps:i}=e;return o.createElement(Xe,{...e},o.createElement(o.Fragment,null,"string"==typeof r?o.createElement(l.AnalyticsTypography,{className:Object(u.a)(t.headerText,"js-header-text","js-readonly-header-text"),component:"h1",variant:s?"display1":"h3"},r):r,o.createElement(et,null,!s&&e.children,i&&!s&&o.createElement(Qe,{...i}))))};var it=n("pXFS"),at=n("0S6Y"),ct=n("1WL5");const lt=Object(i.makeStyles)((()=>Object(i.createStyles)({root:{width:"100%"},sliderWrapper:{display:"flex",alignItems:"center",margin:"20px 20px"},slider:{margin:"0 20px"}}))),dt=e=>{const{aspect:t,image:n,onCropComplete:s}=e,r=Object(O.a)(),[i,a]=o.useState(1),c=lt();return o.createElement("div",{className:c.root},o.createElement(I,{aspect:t,image:n,zoom:i,onCropComplete:s}),o.createElement("div",{className:c.sliderWrapper},o.createElement(at.a,null),o.createElement(it.a,{analyticsId:"image.crop.zoom.slider",className:c.slider,"aria-label":r("cr.components.imageCrop.sliderAriaLabel"),value:i,onChange:(e,t)=>{a(t)},min:1,max:3,step:.05}),o.createElement(ct.a,null)))};var ut=n("caKH"),pt=n("Kh60"),bt=n("WBbv"),mt=n("HcyP"),gt=n("0euz"),ht=n("Oa+x"),ft=n("NdLt");const Ot=Object(i.makeStyles)((()=>Object(i.createStyles)({contentWrapper:{display:"flex",justifyContent:"center"},content:{display:"flex",flexDirection:"column",alignItems:"center",width:"100%",maxWidth:"632px"}})));async function Et(e,t,n,s){const o=await function(e){return new Promise(((t,n)=>{const s=new Image,o=()=>{i(),t(s)},r=e=>{i(),n(e)},i=()=>{s.removeEventListener("load",o),s.removeEventListener("error",r)};s.addEventListener("load",o),s.addEventListener("error",r),s.src=`${e}?noSignedURL=true`}))}(e),r=document.createElement("canvas");r.width=t.width>s?t.width:s,r.height=t.height>n?t.height:n;const i=r.getContext("2d");return null==i||i.drawImage(o,t.x,t.y,t.width,t.height,0,0,r.width,r.height),new Promise((t=>{r.toBlob((n=>{t(new File([n],function(e){const t=function(e){const t=e.lastIndexOf("/")+1,n=e.lastIndexOf(".");return e.slice(t,n)}(e);return`${t}.png`}(e),{type:"image/png"}))}))}))}const yt=e=>{const{aspect:t,image:n,open:s,onCancel:r,onCropSave:i,minHeight:a,minWidth:c}=e,l=Ot(),d=Object(O.a)(),[u,p]=o.useState(null),b=o.useCallback((async()=>{if(!u)return;const e=await Et(n,u,a,c);i(e)}),[n,i,u]),m=o.useCallback(((e,t)=>{p(t)}),[]);return o.createElement(ut.a,{open:s,maxWidth:"lg",analyticsId:"image.crop.modal","aria-labelledby":"image-crop-modal-title"},o.createElement(pt.a,{id:"image-crop-modal-title",hideCloseButton:!0,analyticsId:"image.crop.modal.title"},d("cr.components.imageCropModal.title")),o.createElement("div",{className:l.contentWrapper},o.createElement(bt.a,{analyticsId:"image.crop.modal.content",className:l.content},o.createElement(mt.a,{analyticsId:"image.crop.modal.content.text"},d("cr.components.imageCropModal.content")),o.createElement(dt,{aspect:t,image:n,onCropComplete:m}))),o.createElement(gt.a,{analyticsId:"image.crop.modal.actions"},o.createElement(ht.a,{analyticsId:"image.crop.modal.cancel.button",onClick:r},d("cr.components.imageCropModal.cancel")),o.createElement(ft.AnalyticsPrimaryButton,{analyticsId:"image.crop.modal.save.button",onClick:b},d("cr.components.imageCropModal.done"))))};var It=n("RPob");const Ct="10px",vt=Object(i.makeStyles)((e=>Object(i.createStyles)({root:{color:e.palette.text.primary,display:"flex",flexFlow:"wrap",backgroundColor:e.palette.background.paper,position:"relative",transform:"translateZ(0)","&:hover $rootControlsInline button":{backgroundColor:e.palette.background.b9,color:e.palette.secondary.light},"&:hover $rootControlsInline button:hover":{color:e.palette.primary.contrastText}},rootControls:{display:"flex",flex:"1 0 100%",order:1,alignItems:"stretch",minHeight:"58px",minWidth:0},rootControlsWidgets:{display:"flex","& button":{color:e.palette.text.secondary,height:"100%",minHeight:"48px",width:"48px",borderRadius:"0"},"& button:hover, & button:focus":{backgroundColor:e.palette.background.b4,color:e.palette.primary.main}},rootControlsInline:{flex:"0 1 auto",position:"absolute",right:0,zIndex:100,minHeight:"auto","& $rootControlsWidgets":{flexDirection:"column-reverse"}},contextMenu:{display:"flex",marginLeft:"auto"},inlineRenderToggle:{display:"flex"},inlineRenderToggleSeparator:{alignSelf:"center",borderLeft:`1px solid ${e.palette.background.b5}`,height:"50%",width:"1px"},mediaRoot:{margin:"0 auto",order:2,textAlign:"center",width:"100%"},documentPreviewHidden:{height:0,display:"none","div& iframe":{height:0,minHeight:0,visibility:"hidden"}},mediaRootInline:{order:0},attachmentMeta:{display:"flex",alignItems:"center",flex:1,height:"100%",minWidth:0,paddingLeft:Ct,paddingRight:Ct,wordBreak:"break-all"},attachmentMetaClickable:{"&:hover,&:focus":{backgroundColor:e.palette.background.b4,cursor:"pointer",textDecoration:"underline"}},icon:{marginRight:"10px"},fileText:{flexShrink:1,lineHeight:"unset",textAlign:"unset",fontWeight:e.typography.fontWeightBold},contextMenuHovered:{"& svg":{color:e.palette.primary.main},"& button.is-expanded svg":{color:e.palette.brand.main}}})));function St(e,t){var n,s,o,r;return{resourceUrl:Object(It.f)(null!==(n=e.permanentUrl)&&void 0!==n?n:"/"),viewerUrl:e.viewerUrl?Object(It.f)(e.viewerUrl):void 0,fileName:null!==(s=e.fileName)&&void 0!==s?s:"",alternativeText:null!=t?t:"",displayName:null!==(o=e.fileName)&&void 0!==o?o:"",mimeType:null!==(r=e.mimeType)&&void 0!==r?r:"application/octet-stream"}}var jt=n("IbyE");const Tt=104857600,At=["application/pdf","application/msword","application/vnd.oasis.opendocument.text","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-powerpoint","application/vnd.oasis.opendocument.presentation","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/x-mspowerpoint","application/x-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.slideshow","application/vnd.ms-excel","application/vnd.ms-excel.sheet.binary.macroEnabled.12","application/vnd.ms-excel.sheet.macroEnabled.12","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","text/csv","text/plain","application/rtf"],_t=10485760,Rt={"application/vnd.ms-excel":_t,"application/vnd.ms-excel.sheet.binary.macroEnabled.12":_t,"application/vnd.ms-excel.sheet.macroEnabled.12":_t,"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":_t,"text/csv":_t};function Nt(e){let t="";return e.mimeType&&(t=e.mimeType.substring(0,e.mimeType.indexOf("/"))),t}function wt(e){return Rt[e.mimeType]}function Dt(e){if(void 0===e.fileSize)return!0;const t=wt(e);return!t||e.fileSize<t}function Lt(e){if(void 0===e.fileSize)return!0;const t=e.fileSize<Tt,n=Dt(e);return t&&n}function Pt(e){return!!e.viewerUrl}function kt(e){return-1!==At.indexOf(e)}function xt(e,t){return t&&Lt(e)&&kt(e.mimeType)}function Bt(e,t=!1){if(e.mimeType){const n=Nt(e),s=function(e){let t="";return e.mimeType&&(t=e.mimeType.substring(e.mimeType.indexOf("/")+1)),t}(e);switch(n){case"image":return null!==e.resourceUrl&&["jpeg","gif","png"].indexOf(s)>-1;case"audio":return null!==e.resourceUrl&&["mpeg","mp3","mp4","flac","wav","ogg"].indexOf(s)>-1;case"video":return null!==e.resourceUrl&&["mp4"].indexOf(s)>-1;default:return void 0!==e.viewerUrl&&xt(e,t)}}return!1}function Mt(e){return e===jt.t.Inline||e===jt.t.InlineOnly}function Ut(e){return void 0===e.render||Mt(e.render)}function Gt(e){return"image"===e}const Ft=Object(i.makeStyles)((e=>Object(i.createStyles)({fileViewerContainer:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%","& img":{maxHeight:"100%",maxWidth:"100%"},"& video":{maxHeight:"100%",maxWidth:"100%",display:"inline-block",marginBottom:"-5px"},"& audio":{width:"100%",display:"inline-block",marginBottom:"-6px"},"& iframe":{width:"100%",height:"100%",minHeight:"500px",[e.breakpoints.up("sm")]:{minHeight:"700px"},[e.breakpoints.up("md")]:{minHeight:"880px"},borderWidth:1,borderStyle:"solid",borderColor:e.palette.border.main}},fileViewerContainerImage:{alignItems:"stretch","& div":{backgroundColor:"unset",display:"flex"}},fileViewerContainerIframe:{alignItems:"stretch"}})));function qt(e){const{file:t,disableMediaModal:n,analyticsId:s,inlineMediaAdditionalAttributes:r}=e;if(t.viewerUrl)return o.createElement("iframe",{src:t.viewerUrl,allowFullScreen:!0,allow:"clipboard-write *",...t.alternativeText?{title:t.isDecorative?"":t.alternativeText}:null,...r});switch(Nt(t)){case"image":return o.createElement(Ce.MediaGallery,{disabled:n,analyticsId:`${s}.media-gallery`},function(e,t){return e.isDecorative?o.createElement("img",{src:e.resourceUrl,...t,alt:""}):e.alternativeText?o.createElement("img",{src:e.resourceUrl,...t,alt:e.alternativeText}):o.createElement("img",{src:e.resourceUrl,...t})}(t,r));case"video":return o.createElement(Ce.VideoPlayer,{videoSrc:t.resourceUrl,altText:t.alternativeText,additionalAttributes:r});case"audio":return o.createElement(Ce.AudioPlayer,{audioSrc:t.resourceUrl,altText:t.alternativeText,additionalAttributes:r});default:return o.createElement(o.Fragment,null)}}const Ht=e=>{const t=Ft();let n;return e.file.viewerUrl?n=t.fileViewerContainerIframe:"image"===Nt(e.file)&&(n=t.fileViewerContainerImage),o.createElement("div",{className:Object(u.a)(t.fileViewerContainer,n)},qt(e))};var Vt=n("Gvux");const Kt=e=>{switch(e.name){case"pdf":return o.createElement(Vt.Pdf,{className:e.iconClass});case"presentation":return o.createElement(Vt.Presentation,{className:e.iconClass});case"spreadsheet":return o.createElement(Vt.Spreadsheet,{className:e.iconClass});case"zip":return o.createElement(Vt.Zip,{className:e.iconClass});case"audio":return o.createElement(Vt.Audio,{className:e.iconClass});case"photo":return o.createElement(Vt.Photo,{className:e.iconClass});case"video":return o.createElement(Vt.Video,{className:e.iconClass});case"document-text":return o.createElement(Vt.DocumentText,{className:e.iconClass})}return o.createElement(Vt.DocumentBlank,{className:e.iconClass})};var $t=n("Y+9S");function Wt(e,t){return t&&Bt(e)&&!e.viewerUrl&&("video"===Nt(e)||"image"===Nt(e)&&Ut(e))}function zt(e,t){return!Wt(e,t)}function Qt(e,t,n,s,o){return("audio"===Nt(e)||"video"===Nt(e))&&Bt(e,o)||"image"===Nt(e)&&Bt(e,o)&&function(e,t){return Ut(e)&&Bt(e,t)&&"audio"!==Nt(e)&&"video"!==Nt(e)}(e,o)||t&&s&&Bt(e,o)||n&&Pt(e)}function Yt(e,t){return void 0!==t&&!e}function Jt(e,t){return e&&t.items.length>0}function Xt(e,t,n,s,r,i,a){const c={directionalHint:7,directionalHintFixed:!1,items:[]};return void 0!==s&&Yt(t,s)&&c.items.push({name:n("cr.components.fileViewer.deleteFile"),key:"deleteFile",icon:o.createElement(j.Trash,null),onClick:()=>s()}),function(e,t){return!t||t&&e.render!==jt.t.InlineOnly}(e,i)&&c.items.push({name:n(a?"cr.components.fileViewer.downloadFile":"cr.components.fileViewer.download"),key:"downloadFile",icon:o.createElement(j.Download,null),additionalAttributes:{"data-key":"downloadFile"},onClick:()=>function(e){Object($t.o)($t.c.DownloadLinkClicked);const t=Object(It.f)(Object(It.k)(e.resourceUrl,e.fileName));window.open(t,"_self")}(e)}),void 0!==r&&r.length>0&&c.items.push(...r),c}const Zt=e=>{var t;const{file:n,disableMediaModal:s=!1,readOnly:r=!0,onDelete:i,showContextMenu:a=!0,analyticsId:c="fileViewer",additionalContextualMenuItems:d,isAllyEnabled:p=!1,inlineMediaAdditionalAttributes:b,widgets:m,expandInlineFilesOnLoad:g=!1,supportsInlineDocumentRender:h=!1}=e,[f,E]=o.useState(g),y=vt(),I=Object(O.a)(),[C,v]=o.useState(!1),S=Ut(n)&&Pt(n)&&(r&&h||g),T=o.useCallback((e=>{null==e||e.stopPropagation(),E((e=>(e||C||v(!0),!e)))}),[C]),A=function(e,t,n,s){return Pt(e)&&(!t&&!n||!s)}(n,r,g,f),_=Xt(n,r,I,i,d,h,p),R={};_.items&&_.items.length>0&&_.items.every((e=>{var t,n;return void 0!==(null===(t=e.additionalAttributes)||void 0===t?void 0:t["data-ally-show"])&&void 0!==(null===(n=e.additionalAttributes)||void 0===n?void 0:n["data-ally-content-ref"])}))&&(R["data-ally-show"]="instructorfeedback",R["data-ally-content-ref"]=null===(t=_.items[0].additionalAttributes)||void 0===t?void 0:t["data-ally-content-ref"]);const N=r&&C,w=Qt(n,r,g,f,h)||N,D="cr.components.fileViewer.aria."+(w?"hideFile":"viewFile"),L="cr.components.fileViewer."+(w?"hideFile":"viewFile");return o.createElement("div",{className:y.root},o.createElement("div",{className:Object(u.a)(y.rootControls,"js-file-viewer-root-controls",Wt(n,r)?y.rootControlsInline:void 0,Wt(n,r)?"js-file-viewer-controls-inline":void 0)},zt(n,r)&&o.createElement("div",{className:Object(u.a)(y.attachmentMeta,"js-file-viewer-attachment-meta",S?y.attachmentMetaClickable:void 0),onClick:S?T:void 0,"aria-label":S?I(D,{displayName:n.displayName}):void 0,"aria-expanded":S?w&&!A:void 0,"aria-controls":S?`file-preview-${n.resourceUrl}`:void 0,role:S?"button":void 0,tabIndex:S?0:void 0,title:S?I(L):void 0},o.createElement(Kt,{name:Object(jt.Hb)(n.mimeType),iconClass:y.icon}),o.createElement("span",{className:y.fileText},n.displayName)),o.createElement("div",{className:Object(u.a)(y.rootControlsWidgets,"js-file-viewer-attachment-widgets")},m,function(e,t,n){return zt(e,t)&&Yt(t,n)}(n,r,i)&&void 0!==i&&o.createElement(l.AnalyticsIconButton,{analyticsId:`${c}.deleteFile`,title:I("cr.components.fileViewer.deleteFile"),"aria-label":I("cr.components.fileViewer.aria.deleteFile",{displayName:n.displayName}),onClick:i},o.createElement(j.Trash,null)),Jt(a,_)?o.createElement("div",{className:Object(u.a)(y.contextMenu,"js-file-viewer-context-menu"),...R},o.createElement(Ce.ActionMenu,{title:I("cr.components.fileViewer.menuTitle",{displayName:n.displayName}),ariaLabel:I("cr.components.fileViewer.menuTitle",{displayName:n.displayName}),menuProps:_,analyticsId:`${c}.action.menu`})):void 0,S?o.createElement("div",{className:y.inlineRenderToggle},Jt(a,_)||m?o.createElement("div",{className:y.inlineRenderToggleSeparator}):void 0,o.createElement(l.AnalyticsIconButton,{analyticsId:`${c}.inlineRender.toggle`,"aria-expanded":w&&!A,"aria-controls":`file-preview-${n.resourceUrl}`,"aria-label":I(D,{displayName:n.displayName}),title:I(L),onClick:T,className:Object(u.a)(y.fileText,"js-file-viewer-inline-render-toggle")},w&&!A?o.createElement(j.ChevronUp,null):o.createElement(j.ChevronDown,null))):void 0)),w&&o.createElement("div",{className:Object(u.a)(y.mediaRoot,"js-file-viewer-inline-preview",A?y.documentPreviewHidden:void 0),id:`file-preview-${n.resourceUrl}`},o.createElement(Ht,{file:n,disableMediaModal:s,analyticsId:c,inlineMediaAdditionalAttributes:b})))},en=Object(i.makeStyles)((()=>({root:{'& input[type="text"], & input[type="text"]:focus':{margin:"0",background:"transparent",height:"auto",boxShadow:"none",minHeight:"34px",border:"none",outline:"none"},"& fieldset":{marginBottom:"24px","&:last-of-type":{marginBottom:0}},"& fieldset label":{marginLeft:"0"}},formControl:{marginBottom:"24px"},tooLargeContainer:{display:"flex",flexDirection:"row"},tooLargeInfoIcon:{marginTop:"3px"},tooLargeTextContainer:{margin:"0 9px;","& p:first-of-type":{marginBottom:"9px"}}}))),tn=1048576,nn=e=>{var t,n,s;const{analyticsId:r,onCancel:a,onSave:c,supportsInlineDocumentRender:d=!1,canProvideDescription:u=!0}=e,[p,b]=o.useState(e.file),m=Object(O.a)(),g=en(),h=Nt(p),f=function(e){return"audio"===e}(h),E=Gt(h),y=function(e){return["image","video","audio"].indexOf(e)>-1}(h),I=function(e){return"video"===e}(h),{alternativeText:C,displayName:v}=p,S=(!f&&!I||C.length>0)&&v.length>0,T=Math.round(100),A=Math.round((null!==(t=wt(p))&&void 0!==t?t:Tt)/tn);return o.createElement(ut.c,{hidden:e.hidden,onDismiss:()=>{b(p),a()},dialogContentProps:{title:m("cr.components.filePropertyDialog.title")},modalProps:{className:g.root},analyticsId:r,"aria-labelledby":"file-properties-dialog-title"},o.createElement(l.AnalyticsTextField,{analyticsId:`${r}.displayName.textfield`,id:"file-property-dialog-displayName",className:g.formControl,label:`${m("cr.components.filePropertyDialog.displayName")}`,fullWidth:!0,onChange:e=>{const t=e.target.value;let n=p.alternativeText;p.alternativeText===p.displayName&&(n=t),b({...p,displayName:t,alternativeText:n})},inputProps:{maxLength:200},required:!0,value:p.displayName}),u&&E&&Bt(p)&&o.createElement(i.CheckboxGroup,{className:g.formControl,legendText:m("cr.components.filePropertyDialog.imageType"),legendVariant:"subtitle2"},o.createElement(l.AnalyticsFormControlLabel,{analyticsId:`${r}.isDecorative.label`,label:m("cr.components.filePropertyDialog.makeDecorative"),checked:!0===p.isDecorative,control:o.createElement(l.AnalyticsCheckbox,{analyticsId:`${r}.isDecorative.checkbox`,id:"file-property-dialog-decorative",onChange:(e,t)=>{b({...p,isDecorative:t})}})})),u&&y&&!p.isDecorative&&o.createElement(l.AnalyticsTextField,{analyticsId:`${r}.altText.textfield`,id:"file-property-dialog-alternativeText",className:g.formControl,fullWidth:!0,label:`${m("cr.components.filePropertyDialog.alternativeText")}`,onChange:e=>{b({...p,alternativeText:e.target.value})},required:f||I,value:p.alternativeText}),(Bt(p,d)||xt(p,d))&&!f&&!I&&o.createElement(l.AnalyticsRadioGroup,{analyticsId:`${r}.displayOptions.radioGroup`,name:"display-options",legendText:m("cr.components.filePropertyDialog.displayAs.label"),legendVariant:"subtitle2",value:p.render,onChange:e=>{const t=e.target.value;b({...p,render:t})}},o.createElement(l.AnalyticsFormControlLabel,{analyticsId:`${r}.displayOptions.radioGroup.inline`,htmlFor:"displayAsInline",value:jt.t.Inline,control:o.createElement(l.AnalyticsRadio,{id:"displayAsInline",analyticsId:`${r}.displayOptions.radio.inline`}),label:m("cr.components.filePropertyDialog.displayAs.inline")}),o.createElement(l.AnalyticsFormControlLabel,{analyticsId:`${r}.displayOptions.radioGroup.inlineOnly`,htmlFor:"displayAsInlineOnly",value:jt.t.InlineOnly,control:o.createElement(l.AnalyticsRadio,{id:"displayAsInlineOnly",analyticsId:`${r}.displayOptions.radio.inlineOnly`}),label:m("cr.components.filePropertyDialog.displayAs.inlineOnly")}),o.createElement(l.AnalyticsFormControlLabel,{analyticsId:`${r}.displayOptions.radioGroup.attachment`,htmlFor:"displayAsAttachment",value:jt.t.Attachment,control:o.createElement(l.AnalyticsRadio,{id:"displayAsAttachment",analyticsId:`${r}.displayOptions.radio.attachment`}),label:m("cr.components.filePropertyDialog.displayAs.attached")})),d&&kt(p.mimeType)&&!Lt(p)&&o.createElement("div",{className:g.tooLargeContainer},o.createElement(j.Information,{className:g.tooLargeInfoIcon}),o.createElement("div",{className:g.tooLargeTextContainer},o.createElement("p",null,m("cr.components.filePropertyDialog.displayAs.tooLarge")),o.createElement("p",null,Dt(p)?m("cr.components.filePropertyDialog.displayAs.tip",{maxFilesizeInMB:T}):m("cr.components.filePropertyDialog.displayAs.extensionSpecificTip",{extension:`.${null===(s=null===(n=p.fileName)||void 0===n?void 0:n.split(".").pop())||void 0===s?void 0:s.toLowerCase()}`,maxFilesizeInMB:A})))),o.createElement(Ce.DialogFooter,null,o.createElement(l.AnalyticsDefaultButton,{analyticsId:r,onClick:a},m("cr.components.global.close")),o.createElement(l.AnalyticsPrimaryButton,{analyticsId:`${r}.dialogFooter.save.button`,disabled:!S,onClick:()=>c(p)},m("cr.components.filePropertyDialog.save"))))},sn=Object(i.makeStyles)((e=>({container:{display:"flex",alignItems:"center",gap:"10px",padding:"10px 5px 10px 10px",backgroundColor:e.palette.background.b2},progress:{lineHeight:1,maxHeight:"40px",maxWidth:"40px"},title:{flex:"1 1",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},cancelButton:{color:e.palette.text.secondary,"&:hover":{color:e.palette.text.primary}}}))),on=e=>{const{className:t,filename:n,processing:s,percentage:o,onCancel:i,displayAsError:a}=e,c=sn(),d=Object(O.a)();return r.a.createElement("div",{className:Object(u.a)(c.container,t)},r.a.createElement(l.AnalyticsCircularProgress,{ariaLabel:d("cr.components.fileUploadProgress.processing"),formatPercentage:e=>"number"==typeof e?d("cr.components.fileUploadProgress.percent",{percentage:e}):"",size:40,value:o,classes:{root:c.progress},variant:s||"number"!=typeof o?"indeterminate":"static",error:a,showPercent:!0}),r.a.createElement("div",{className:c.title},!!n&&d("cr.components.fileUploadProgress.uploadingFile",{filename:n})),!s&&!!i&&r.a.createElement(l.AnalyticsIconButton,{"aria-label":d(n?"cr.components.fileUploadProgress.cancelFileUpload":"cr.components.fileUploadProgress.cancelFileUploadWithoutName",{filename:n}),analyticsId:"components.directives.fileUpload.cancelUploadText.button",className:c.cancelButton,onClick:i},r.a.createElement(j.Close,null)))};var rn=n("DbXq");const an=e=>{const{customBadgeClass:t}=e,n=Object(O.a)();return o.createElement(rn.a,{position:"inline",color:"indicatorPrimary",badgeContent:n("cr.components.newFeatureBadge.content"),offScreenLabel:n("cr.components.newFeatureBadge.ariaLabel"),classes:{badge:t}})},cn=e=>{const{onDismiss:t,analyticsId:n,isVisible:s}=e,o=Object(O.a)();return r.a.createElement(ut.c,{analyticsId:`${n}.connectionLostDialog`,hidden:!s,"aria-labelledby":"connection-lost-dialog",onDismiss:t,dialogContentProps:{type:pe.DialogType.normal,showCloseButton:!0,title:o("components.services.assessment.modal.connection-lost.title"),titleId:`${n}.connectionLostDialog.titleClose.button`,subText:o("components.services.assessment.modal.connection-lost.description"),subTextId:"connection-lost-dialog-description",closeButtonAriaLabel:o("global.close")},modalProps:{isAlert:!0}},r.a.createElement(pe.DialogFooter,null,r.a.createElement(l.AnalyticsPrimaryButton,{analyticsId:`${n}.connectionLostDialog.ok.button`,onClick:t},o("global.ok"))))};var ln=n("hgFh");const dn=Object(i.makeStyles)((e=>Object(i.createStyles)({root:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",background:e.palette.background.b2,minHeight:"58px",padding:"8px"},progressInfo:{display:"flex",flexDirection:"row",alignItems:"center"},progressLabel:{marginLeft:"8px"}}))),un=e=>{const{analyticsId:t,fileName:n,onCancel:s,isDeterminate:i,progress:a,onComplete:c}=e,l=dn(),[d,u]=Object(o.useState)(0),[p,b]=Object(o.useState)(void 0),m=Object(O.a)(),g=m("cr.components.uploadProgressBanner.label",{fileName:n}),h=m("cr.components.uploadProgressBanner.cancelButton.ariaLabel"),f=Object(o.useRef)();return f.current=c,Object(o.useEffect)((()=>{if(i&&void 0!==a&&d<Math.floor(a)){p&&clearTimeout(p);const e=setTimeout((()=>{u((e=>e+1))}),5);b(e)}return f.current&&(i?100===d:100===a)&&f.current(),()=>{p&&clearTimeout(p)}}),[i,a,d]),r.a.createElement("div",{className:l.root},r.a.createElement("div",{className:l.progressInfo},r.a.createElement(ln.a,{value:d,showPercent:i,variant:i?"determinate":"indeterminate",size:"medium",ariaLabel:""}),r.a.createElement("span",{className:l.progressLabel},g)),void 0!==a&&a<100&&r.a.createElement(Te.AnalyticsIconButton,{className:"js-upload-progres-banner-cancel-button",analyticsId:`${t}.cancelUpload.button`,"aria-label":h,onClick:s},r.a.createElement(j.Close,null)))};function pn(e,t){const n=Object(o.useRef)(null);return Object(o.useLayoutEffect)((()=>{if(null===n.current)return()=>{};const t=new IntersectionObserver((t=>{if(1!==t.length)return;const{isIntersecting:n}=t[0];n&&e()}),{threshold:1});return t.observe(n.current),()=>t.disconnect()}),[e]),r.a.createElement(r.a.Fragment,null,t&&r.a.createElement("span",{style:{display:"block"},ref:n}))}const bn=({hasMore:e,loader:t})=>pn(t,e);var mn=n("kNOQ");const gn=Object(i.makeStyles)((e=>({preventScroll:{position:"fixed",top:0},focusVisibleLoadButton:{...he.i,"&:active, &:focus":{position:"sticky",bottom:0,padding:"2px 4px",backgroundColor:e.palette.background.default,zIndex:1,clip:"unset",height:"unset",width:"unset",[e.breakpoints.up("md")]:{bottom:"-30px"}}}}))),hn=e=>{const{itemLoader:t,unloadedItemsCount:n,analyticsId:s,textKey:o,visibleOnFocus:i}=e,a=Object(O.a)(),c=gn();return r.a.createElement(l.AnalyticsButtonBase,{className:Object(u.a)(i?c.focusVisibleLoadButton:["sr-only",c.preventScroll]),onClick:t,disabled:0===n,analyticsId:s},a(o,{loadCount:n}))},fn=e=>{const{afterLoad:t,incomingLoadCount:n,loader:s,axLoadMoreButtonLabelKey:i,showLoadButtonOnFocus:a=!1}=e,[c,l]=Object(o.useState)(!1),d=pn(s,0!==n),u=Object(mn.b)((()=>{null==t||t(),l(!1)}));Object(o.useLayoutEffect)((()=>{c&&u()}),[c,u]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(hn,{analyticsId:"components.directives.content.content-outline.infiniteScroll.content.loadMoreButton.label.plural",itemLoader:async()=>{await s(),l(!0)},unloadedItemsCount:n,textKey:null!=i?i:"components.directives.content.content-outline.infiniteScroll.content.loadMoreButton.label.plural",visibleOnFocus:a}),d)};var On=n("zTL+"),En=n("GQY/");const yn=Object(i.makeStyles)((e=>Object(i.createStyles)({banner:{padding:"12px 30px"}}))),In=e=>{const t=yn(),n=Object(O.a)();return o.createElement(On.a,{severity:"info",icon:o.createElement(En.a,null),onClose:e.onClose,className:t.banner,closeText:n("global.close")},e.message)};var Cn=n("qllV");const vn=Object(i.makeStyles)((e=>Object(i.createStyles)({banner:{padding:"12px 30px"}}))),Sn=e=>{const t=vn(),n=Object(O.a)();return o.createElement(On.a,{severity:"error",icon:o.createElement(Cn.a,null),onClose:e.onClose,className:t.banner,closeText:n("global.close")},e.message)},jn=()=>{const[e,t]=o.useState(!0),n=Object(O.a)();return o.createElement(o.Fragment,null,e&&o.createElement(On.a,{severity:"warning",onClose:()=>t(!1),icon:o.createElement(Cn.a,{color:"primary"}),closeText:n("course.content.forcedSequenceBannerDismiss")},n("course.content.forcedSequenceBannerText")))};function Tn(e){const t=Object(O.a)();return{...{announceOptionSelected:e=>t("cr.components.combobox.announceOptionSelected",{optionLabel:e.label}),announceOptionDeselected:e=>t("cr.components.combobox.announceOptionDeselected",{optionLabel:e.label}),announceValueCleared:t("cr.components.combobox.announceValueCleared"),announceSearchResults:(e,n)=>t("cr.components.combobox.announceSearchResults",{count:e,searchString:n}),noResults:e=>t("cr.components.combobox.noResults",{searchString:e}),clearButtonLabel:t("cr.components.combobox.clearButtonLabel"),searchLabel:t("cr.components.combobox.searchLabel")},...e}}function An(e){return{...Tn(),...{loadingResults:Object(O.a)()("cr.components.combobox.loadingResults")},...e}}function _n(e){const t=Tn(),n=Object(O.a)();return{...t,...{createOptionLabel:e=>n("cr.components.combobox.createOptionLabel",{searchString:e})},...e}}const Rn=Object(i.makeStyles)((()=>Object(i.createStyles)({comboboxContainerWidth:{"& > div":{width:"100%"}},comboboxWidth:{width:"100%"},comboboxReset:{"& input":{border:0,margin:"0px",height:"100%"},"& input:focus":{boxShadow:"none"}}}))),Nn=Object(i.makeStyles)((()=>({clampText:{display:"-webkit-box","-webkit-line-clamp":2,"-webkit-box-orient":"vertical",overflow:"hidden"},toggleTruncateButtonContainer:{marginTop:"20px"},internalTextContent:{cursor:"text",margin:0,wordBreak:"break-word",overflowWrap:"anywhere"}})));var wn=n("EZIA");const Dn=e=>{const{textContent:t,analyticsId:n,readMoreText:s,readLessText:i,textClassName:a}=e,c=Nn(),[l,d]=Object(o.useState)(!1),[p,b]=Object(o.useState)(!1),[m]=Object(o.useState)((()=>Object(M.v4)())),g=Object(o.useRef)(null),h=()=>{if(null==g?void 0:g.current){const e=window.getComputedStyle(g.current).getPropertyValue("line-height");d(g.current.scrollHeight>Math.ceil(2*parseFloat(e)))}};Object(o.useEffect)((()=>{const e=new ResizeObserver(h);return(null==g?void 0:g.current)&&e.observe(g.current),()=>e.disconnect()}),[]),Object(o.useEffect)((()=>{h()}),[t]);const f=(e=>!p&&(null==e?void 0:e.length)>250?`${e.substring(0,250)}...`:e)(t),O=l?{"aria-labelledby":`btn-more-${m}`}:{};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{role:"region",...O,id:`region-${m}`},!p&&r.a.createElement("span",{className:"sr-only"},f),r.a.createElement("p",{"aria-hidden":!p,className:Object(u.a)({[c.clampText]:!p},c.internalTextContent,a),ref:g,"data-testid":"text-content"},t)),l&&r.a.createElement(wn.a,{onClick:e=>{e.stopPropagation(),b((e=>!e))},color:"secondary",component:"button",id:`btn-more-${m}`,"aria-expanded":p,"aria-controls":`region-${m}`,analyticsId:n,className:c.toggleTruncateButtonContainer},p?i:s))};function Ln(e=(()=>({}))){return(t,n)=>{const s=s=>{const[i,a]=Object(o.useState)(!1),c=Object(o.useRef)(),l=Object(o.useCallback)((()=>(a(!0),new Promise((e=>{c.current=t=>{a(!1),e(t)}})))),[]),d=Object(o.useCallback)(((e,t)=>{var n;a(!1),null===(n=c.current)||void 0===n||n.call(c,{confirmed:!!e,results:t})}),[]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(t,{...s,openModal:l}),i&&r.a.createElement(n,{...e(s),exitCallback:d}))};return s.displayName=`withModal(${t.displayName||t.name||"Component"})`,s}}const Pn=Object(i.makeStyles)((e=>Object(i.createStyles)({linkIcon:{color:e.palette.text.primary,backgroundColor:e.palette.background.b4,left:"4px"}}))),kn=e=>{const t=Pn(),n=Object(u.a)(t.linkIcon,e.className);return r.a.createElement(l.AnalyticsBadge,{anchorOrigin:{horizontal:"left",vertical:"top"},badgeContent:r.a.createElement(j.Link,null),classes:{badge:n}},e.children)};function xn(e,t){const[n,s]=Object(o.useState)(!1),i=Object(o.useRef)(),a=null!=t?t:{},c=Object(o.useCallback)((()=>(s(!0),new Promise((e=>{i.current=t=>{s(!1),e(t)}})))),[]),l={...a,exitCallback:Object(o.useCallback)(((e,t)=>{var n;s(!1),null===(n=i.current)||void 0===n||n.call(i,{confirmed:!!e,results:t})}),[])};return{displayModal:c,modal:r.a.createElement(r.a.Fragment,null,n?r.a.createElement(e,{...l}):null)}}const Bn=Object(i.makeStyles)((e=>({uploadFromDeviceContainer:{margin:"12px 0"},fileSizeText:{display:"flex",flexDirection:"column",fontWeight:e.typography.fontWeightLight,margin:"12px 0"},fileUploadBtn:{width:"100%"},uploadIcon:{marginRight:"5px"},fileInput:{display:"none"},uploadProgressContainer:{display:"flex",flexDirection:"row"},progressBar:{marginRight:"5px"},fileName:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"300px"}}))),Mn=e=>{const{onFileUpload:t,analyticsId:n,validFormats:s,onFileUploadError:i}=e,a=Bn(),c=Object(O.a)(),[d]=Object(o.useState)((()=>"supported-format-id"+Object(M.v4)()));return r.a.createElement("div",{className:a.uploadFromDeviceContainer},r.a.createElement(l.AnalyticsDashedButton,{id:"file-upload-button",className:a.fileUploadBtn,analyticsId:`${n}.upload-from-device.button`,onClick:()=>{Object(It.w)(s.join(","),!1).then((e=>{Object(It.G)(e,s)?t(e[0]):i(new Error("File invalid"))}))},"aria-describedby":d},r.a.createElement(j.Upload,{className:a.uploadIcon}),c("cr.components.fileUpload.uploadFile")),r.a.createElement("div",{className:a.fileSizeText},r.a.createElement("span",{id:d},c("cr.components.fileUpload.fileFormat"))))},Un=e=>{const{onFileUpload:t,analyticsId:n,validFormats:s,onFileUploadError:i}=e,a=Object(O.a)(),c=Bn(),[d,u]=Object(o.useState)(!1),[p,b]=Object(o.useState)();return r.a.createElement(r.a.Fragment,null,r.a.createElement(Mn,{onFileUpload:e=>{const n={file:e,fileName:e.name,fileType:e.type};b(e.name),u(!0),Object(jt.lc)(n).then((e=>{u(!1),t(e)})).catch((e=>{u(!1),i(e)}))},analyticsId:n,validFormats:s,onFileUploadError:i}),d&&r.a.createElement("div",{className:c.uploadProgressContainer},r.a.createElement(l.AnalyticsCircularProgress,{className:c.progressBar,ariaLabel:a("cr.components.fileUpload.uploadInProgress"),size:"small"}),r.a.createElement("span",{className:c.fileName},p)))};class Gn{constructor(){this.providerAdded=!1,this.renderSnackbarCallback=()=>{},this.dismissSnackbarCallback=()=>{},this.snackbarQueue=[],this.currentSnackbar=null}static getInstance(){return Gn.INSTANCE||(Gn.INSTANCE=new Gn),Gn.INSTANCE}setProvider(e,t){if(this.providerAdded)throw Error("Only a single provider can be added.");this.renderSnackbarCallback=e,this.dismissSnackbarCallback=t,this.providerAdded=!0}dequeueSnackbar(e){var t;this.snackbarQueue=this.snackbarQueue.filter((t=>t.viewKey!==e)),(null===(t=this.currentSnackbar)||void 0===t?void 0:t.viewKey)===e&&this.dismissSnackbarCallback()}renderNextSnackbar(){this.currentSnackbar=null;const e=this.snackbarQueue.shift();e&&(this.currentSnackbar=e,this.renderSnackbarCallback(e.messageProps,e.actionProps))}enqueueSnackbar(e,t,n,s){if(!this.providerAdded)throw Error("Cannot enqueue a snackbar because a provider is not yet registered.");const r={...t};if(s&&(r.icon=o.createElement(s,null)),this.snackbarQueue.push({viewKey:e,messageProps:r,actionProps:n}),null===this.currentSnackbar){const e=this.snackbarQueue.shift();e&&(this.currentSnackbar=e,this.renderSnackbarCallback(e.messageProps,e.actionProps))}}}Gn.INSTANCE=null;const Fn=()=>{const{enqueueSnackbar:e,closeSnackbar:t}=Object(l.useSnackbar)(),n=Object(O.a)(),s=r.a.useRef(),o=r.a.useRef();return r.a.useEffect((()=>{s.current=(t,s)=>{const o=null!=s?s:{closeButtonAriaLabel:n("cr.components.global.close")},a={isPersistent:!0,...o,...t},{isPersistent:c}=a;e(r.a.createElement(i.SnackbarMessage,{...a}),{autoHideDuration:c?null:2e4,resumeHideDuration:c?void 0:2e4,persist:c,action:r.a.createElement(i.SnackbarAction,{...o})})}}),[e,n]),r.a.useEffect((()=>{o.current=t}),[t]),r.a.useEffect((()=>{Gn.getInstance().setProvider(((...e)=>{var t;return null===(t=s.current)||void 0===t?void 0:t.call(s,...e)}),(()=>{var e;return null===(e=o.current)||void 0===e?void 0:e.call(o)}))}),[]),null},qn=()=>r.a.createElement(l.AnalyticsSnackbarProvider,{onExited:()=>{Gn.getInstance().renderNextSnackbar()},variant:"default"},r.a.createElement(Fn,null));function Hn(e,t=!0){const n=r.a.useRef();r.a.useEffect((()=>{n.current=Gn.getInstance()}),[]),r.a.useEffect((()=>()=>{var s;t&&(null===(s=n.current)||void 0===s||s.dequeueSnackbar(e))}),[e,t]);return{enqueueSnackbar:r.a.useCallback(((t,s)=>{var o;null===(o=n.current)||void 0===o||o.enqueueSnackbar(e,t,s)}),[e]),dequeueSnackbar:r.a.useCallback((()=>{var t;null===(t=n.current)||void 0===t||t.dequeueSnackbar(e)}),[e])}}var Vn;!function(e){e[e.AssessmentTimerToasts=0]="AssessmentTimerToasts",e[e.AssessmentConnectivity=1]="AssessmentConnectivity",e[e.AssessmentQuestionFetchFailure=2]="AssessmentQuestionFetchFailure",e[e.CourseContentOutlineDragAndDrop=3]="CourseContentOutlineDragAndDrop",e[e.CourseContentReleaseConditionLargeMemberSets=4]="CourseContentReleaseConditionLargeMemberSets",e[e.CourseGroupSetVisibility=5]="CourseGroupSetVisibility",e[e.CourseTasksAndLogsDelete=6]="CourseTasksAndLogsDelete",e[e.GradesDownloadToasts=7]="GradesDownloadToasts"}(Vn||(Vn={}));var Kn=({image:e,className:t,presentationOnly:n})=>r.a.createElement("div",{className:t,dangerouslySetInnerHTML:{__html:e},"aria-hidden":n});const $n=Object(i.makeStyles)((()=>Object(i.createStyles)({container:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",padding:"30px 0"},illustration:{marginBottom:"20px","& svg":{width:"250px"}}}))),Wn=e=>{const{illustration:t,prominentText:n,subText:s}=e,r=$n();return o.createElement("div",{className:r.container},o.createElement(Kn,{image:t,className:r.illustration,presentationOnly:!0}),o.createElement(l.AnalyticsTypography,{variant:"h2"},n),s&&o.createElement("span",null,s))};var zn=n("O8mP"),Qn=n("izEs");const Yn=r.a.forwardRef(((e,t)=>{const{icon:n,text:s,children:o,analyticsId:i,...a}=e;return r.a.createElement(Qn.a,{button:!0,ref:t,analyticsId:i,...a},r.a.createElement(l.AnalyticsListItemIcon,{analyticsId:`${i}.icon`},n),r.a.createElement(l.AnalyticsListItemText,{analyticsId:`${i}.text`},s),o)})),Jn=e=>{const{items:t,...n}=e;return r.a.createElement(zn.a,{variant:"menu",className:"react-container",...n},t.map((e=>!e.hidden&&r.a.createElement(Yn,{...e}))))};var Xn=n("nsO7");const Zn=Object(i.makeStyles)((e=>Object(i.createStyles)({multiSelectContainer:{backgroundColor:e.palette.background.b1,paddingLeft:"12px",overflowX:"hidden",maxHeight:"130px","&.with-scroll":{overflowY:"scroll"}},divider:{marginRight:"0",marginBottom:"3px"},MultiselectCheckbox:{width:"100%","& fieldset":{width:"100%"}},multiselectFormControl:{"&.MuiFormControl-root":{width:"100%"}},list:{width:"100%"},listItem:{paddingTop:"0",paddingBottom:"0"}})));var es=n("9Ktm"),ts=n("oNm+");const ns=o.memo((({analyticsId:e,item:t,onChange:n})=>{const s=Zn();return o.createElement(l.AnalyticsListItem,{analyticsId:`${e}.listItem`,className:s.listItem,disableGutters:!0},o.createElement(l.AnalyticsFormControlLabel,{analyticsId:`${e}.formControlLabel`,label:t.label,htmlFor:`ind-checkbox-${t.value}`,control:o.createElement(l.AnalyticsCheckbox,{analyticsId:`${e}.multiSelectItem.input.checkbox`,id:`ind-checkbox-${t.value}`,checked:t.checked,value:t.value,onChange:n})}))}),Xn.isEqual),ss=o.memo((({analyticsId:e,items:t,checkboxGroupLegendText:n,headerDescription:s,selectAllItemsLabel:r,onChange:i,onChangeSelectAllItems:a})=>{const c=Zn(),d=Object(o.useMemo)((()=>{const e=t.filter((e=>e.checked));return e.length?e.length===t.length?"true":"mixed":"false"}),[t]),u=Object(o.useCallback)((e=>{let t=!0;const{value:n,checked:s}=e.target;null==i||i((e=>e.map((e=>{const o=e.value===n?{...e,checked:s}:{...e};return o.checked||(t=!1),o})))),null==a||a(t)}),[i,a]);return o.createElement("div",{className:c.MultiselectCheckbox},o.createElement(es.a,{legendText:n,legendVariant:"h3"},o.createElement("span",null,s),t.length>0&&o.createElement(l.AnalyticsFormControl,{analyticsId:`${e}.formControl`,fullWidth:!0,className:c.multiselectFormControl},o.createElement("div",{className:c.multiSelectContainer},o.createElement(l.AnalyticsList,{analyticsId:`${e}.list`,className:c.list},o.createElement(l.AnalyticsListItem,{analyticsId:`${e}.listItem`,className:c.listItem,disableGutters:!0,key:"select-all"},o.createElement(l.AnalyticsFormControlLabel,{analyticsId:`${e}.formControlLabel`,label:r,htmlFor:"select-all",control:o.createElement(l.AnalyticsCheckbox,{analyticsId:`${e}.selectAllOption`,id:"select-all",checked:"false"!==d,indeterminate:"mixed"===d,value:"indeterminate-checkbox",onChange:e=>{const t="mixed"===d||e.target.checked;null==i||i((e=>e.map((e=>({...e,checked:t}))))),null==a||a(t)},inputProps:{"aria-controls":t.map((e=>`ind-checkbox-${e.value}`)).join(" "),"aria-checked":d}})})))),o.createElement(ts.a,{variant:"fullWidth",className:c.divider}),o.createElement("div",{className:`${c.multiSelectContainer} with-scroll`},o.createElement(l.AnalyticsList,{analyticsId:`${e}.list`,className:c.list},t.map((t=>o.createElement(ns,{key:t.value,analyticsId:e,item:t,onChange:u}))))))))}),Xn.isEqual);var os,rs;!function(e){e.Change="change",e.Saving="saving",e.Saved="saved",e.SaveFailure="saveFailure",e.ValidationFailure="validationFailure"}(os||(os={})),function(e){e.Assessments="assessments"}(rs||(rs={}));var is=n("5vtU"),as=n("M0dR"),cs=n("dTdb"),ls=n("/Qa0");const ds=Object(i.makeStyles)((e=>Object(i.createStyles)({dndUploadArea:{boxSizing:"border-box",border:`2px dashed ${e.palette.border.main}`,backgroundColor:e.palette.background.b2,display:"flex",alignItems:"space-around",flexDirection:"column",marginTop:"8px",padding:"24px"},dndUploadComponent:{display:"flex",flexDirection:"column"},uploadArea:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",marginBottom:"12px"},uploadTitle:{textAlign:"center"},uploadButton:{border:`2px solid ${e.palette.border.dark}`,padding:"10px",fontWeight:e.typography.fontWeightSemiBold,width:"fit-content",margin:"auto"},uploadInstructions:{display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center"},uploadIcon:{marginBottom:"8px"},errorMessage:{display:"flex",alignItems:"center",flexDirection:"row",color:e.palette.error.main,margin:"12px 0px"},errorText:{margin:"0px 8px"},errorMessageContainer:{width:"100%"}}))),us=e=>{const{analyticsIdPrefix:t,instructions:n,onUploadFiles:s,errorMessage:o}=e,i=Object(O.a)(),a=ds(),c="upload-desc-text-id",l=e=>{e.preventDefault(),e.stopPropagation()};return r.a.createElement("div",{"data-analytics-id":`${t}.dragDropArea`,className:a.dndUploadComponent},r.a.createElement("div",{className:a.dndUploadArea},r.a.createElement("div",{onDragOver:e=>{l(e)},onDragLeave:e=>{l(e)},onDrop:e=>{l(e),s((()=>Promise.resolve(e.dataTransfer.files)))},"data-testid":"dndUploadDropArea",className:a.uploadArea},r.a.createElement(cs.a,{className:a.uploadIcon}),r.a.createElement(as.a,{variant:"h3",component:"div",className:a.uploadTitle},i("assessments.canvas.common.dndUpload.primaryInstructions")),r.a.createElement("div",{className:a.uploadInstructions,id:c},n)),r.a.createElement(is.a,{onClick:()=>{s()},analyticsId:`${t}.dndUploadButton`,className:a.uploadButton,"aria-describedby":c},i("assessments.canvas.common.dndUpload.secondaryInstructions.uploadButtonText"))),r.a.createElement("div",{className:a.errorMessageContainer},o&&r.a.createElement("div",{className:a.errorMessage},r.a.createElement(ls.a,{color:"error"}),r.a.createElement("p",{className:a.errorText},o))))},ps=e=>{const{sort:t,sortable:n}=e;if(!n)return null;let s=j.SortArrows;return"ascending"===t?s=j.SortArrowAscending:"descending"===t&&(s=j.SortArrowDescending),o.createElement(s,null)};var bs=n("IPrp");const ms=Object(i.makeStyles)((e=>({container:{padding:"0 16px",display:"none",[e.breakpoints.up("sm")]:{display:"flex"}},smallAndMediumOnlyContainer:{display:"flex",[e.breakpoints.up("md")]:{display:"none"}},chevron:{transition:"color 250ms cubic-bezier(0.55, 0, 0.1, 1), transform 250ms cubic-bezier(0.55, 0, 0.1, 1)",color:e.palette.text.secondary,"&:hover":{color:e.palette.action.active}},chevronOpen:{transform:"rotate(180deg)"}}))),gs=e=>{const{open:t,hideOnDesktop:n}=e,s=ms(e);return r.a.createElement("div",{className:Object(u.a)(s.container,n&&s.smallAndMediumOnlyContainer)},r.a.createElement(bs.a,{className:Object(u.a)(s.chevron,t&&s.chevronOpen)}))},hs=Object(i.makeStyles)((e=>({button:{color:e.palette.link.active,textDecoration:"underline",verticalAlign:"baseline","&:hover":{color:e.palette.link.focus},"&:focus":{color:e.palette.link.hover}},close:{marginInlineStart:"6px"}})));var fs=n("D57K"),Os=n("DN+C");const Es=/\{[01]\}/;class ys{parse(e){return{2:e[2].split(Es),start:e.start.split(Es),middle:e.middle.split(Es),end:e.end.split(Es)}}}Object(fs.a)([Object(Os.LRUMemoize)(),Object(fs.b)("design:type",Function),Object(fs.b)("design:paramtypes",[Object]),Object(fs.b)("design:returntype",Object)],ys.prototype,"parse",null);const Is=new ys,Cs=()=>{const e=(()=>{const{babelfishFormat:e,locale:t}=Object(v.a)();return e.getFormatterSync(t).cldr.main("listPatterns/listPattern-type-standard")})();return Is.parse(e)},vs=(e,t,n)=>{const[s,o,i]=e;return r.a.createElement(r.a.Fragment,null,s,t,o,n,i)},Ss='a[href], button, input, textarea, select, details, [tabindex]:not([tabindex="-1"])';var js;!function(e){e[e.NextElementInList=0]="NextElementInList",e[e.More=1]="More"}(js||(js={}));const Ts=Object(o.memo)((({items:e,maxItems:t=e.length,analyticsId:n,canExpand:s=!1,collapseKey:i="global.close",moreKey:a="components.services.localize.items.more.plural"})=>{(t<=0||t>e.length)&&(t=e.length);const c=hs(),d=Object(O.a)(),[p,b]=Object(o.useState)(!1),m=p?e.length:t,g=Cs(),h=Object(o.useRef)(null),f=Object(o.useRef)(null),[E,y]=Object(o.useState)(void 0),I=Object(o.useRef)(-1);if(Object(o.useLayoutEffect)((()=>{var e;if(null===h.current||p||(I.current=h.current.querySelectorAll(Ss).length-1),h.current&&E===js.NextElementInList){const t=h.current.querySelectorAll(Ss).item(I.current);null==t||t.focus(),t||null===(e=f.current)||void 0===e||e.focus()}}),[e,p,E]),0===e.length)return null;if(1===e.length)return r.a.createElement(r.a.Fragment,null,e[0]);if(2===e.length&&2===t)return vs(g[2],e[0],e[1]);const C=`${n}.items`,v=d(a,{count:e.length-m}),S=s?r.a.createElement(l.AnalyticsButtonBase,{analyticsId:`${n}.more`,onClick:()=>{b(!0),y(js.NextElementInList)},autoFocus:E===js.More,className:c.button,"aria-expanded":p,"aria-controls":C},v):v;if(1===m)return vs(g[2],e[0],S);let j=vs(g.start,e[0],e[1]);if(e.length>m){for(let t=2;t<m;t++)j=vs(g.middle,j,e[t]);j=vs(g.end,j,S)}else for(let t=2;t<e.length;t++)j=vs(t===e.length-1?g.end:g.middle,j,e[t]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{id:C,ref:h},j),p?r.a.createElement(l.AnalyticsButtonBase,{analyticsId:`${n}.close`,"aria-expanded":p,"aria-controls":C,onClick:()=>{b(!1),y(js.More)},ref:f,className:Object(u.a)(c.button,c.close)},d(i)):void 0)}));n.d(t,"s",(function(){return s.a})),n.d(t,"G",(function(){return s.b})),n.d(t,"e",(function(){return p})),n.d(t,"f",(function(){return h})),n.d(t,"Q",(function(){return S})),n.d(t,"F",(function(){return J})),n.d(t,"E",(function(){return W})),n.d(t,"M",(function(){return Z})),n.d(t,"J",(function(){return ie})),n.d(t,"H",(function(){return ae})),n.d(t,"I",(function(){return le})),n.d(t,"K",(function(){return ue})),n.d(t,"h",(function(){return ge})),n.d(t,"W",(function(){return Le})),n.d(t,"a",(function(){return Pe})),n.d(t,"L",(function(){return Me})),n.d(t,"u",(function(){return Ue})),n.d(t,"v",(function(){return Ge})),n.d(t,"w",(function(){return Fe})),n.d(t,"D",(function(){return Ve})),n.d(t,"P",(function(){return $e})),n.d(t,"l",(function(){return st})),n.d(t,"R",(function(){return rt})),n.d(t,"gb",(function(){return b.e})),n.d(t,"cb",(function(){return b.b})),n.d(t,"db",(function(){return b.c})),n.d(t,"x",(function(){return yt})),n.d(t,"r",(function(){return Zt})),n.d(t,"eb",(function(){return Xt})),n.d(t,"n",(function(){return Ht})),n.d(t,"o",(function(){return nn})),n.d(t,"q",(function(){return on})),n.d(t,"kb",(function(){return St})),n.d(t,"fb",(function(){return Nt})),n.d(t,"bb",(function(){return kt})),n.d(t,"ab",(function(){return xt})),n.d(t,"Z",(function(){return Bt})),n.d(t,"jb",(function(){return Mt})),n.d(t,"hb",(function(){return Ut})),n.d(t,"ib",(function(){return Gt})),n.d(t,"O",(function(){return an})),n.d(t,"i",(function(){return cn})),n.d(t,"X",(function(){return un})),n.d(t,"mb",(function(){return pn})),n.d(t,"Y",(function(){return bn})),n.d(t,"y",(function(){return fn})),n.d(t,"z",(function(){return In})),n.d(t,"m",(function(){return Sn})),n.d(t,"t",(function(){return jn})),n.d(t,"ob",(function(){return Tn})),n.d(t,"nb",(function(){return An})),n.d(t,"pb",(function(){return _n})),n.d(t,"lb",(function(){return Rn})),n.d(t,"V",(function(){return Dn})),n.d(t,"sb",(function(){return Ln})),n.d(t,"C",(function(){return kn})),n.d(t,"qb",(function(){return xn})),n.d(t,"p",(function(){return Un})),n.d(t,"U",(function(){return qn})),n.d(t,"T",(function(){return Gn})),n.d(t,"rb",(function(){return Hn})),n.d(t,"S",(function(){return Vn})),n.d(t,"A",(function(){return Wn})),n.d(t,"j",(function(){return Jn})),n.d(t,"N",(function(){return ss})),n.d(t,"d",(function(){return os})),n.d(t,"c",(function(){return rs})),n.d(t,"k",(function(){return us})),n.d(t,"b",(function(){return ps})),n.d(t,"g",(function(){return gs})),n.d(t,"B",(function(){return Ts}))},BWPL:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));const s={COURSE_MEMBERSHIPS_LOAD:"course.memberships.load",USER_MEMBERSHIPS_LOAD:"user.memberships.load",COURSE_MEMBERSHIP_SET:"course.membership.set",COURSE_MEMBERSHIP_LOAD:"course.membership.load"}},BfLg:function(e,t,n){n.p=window.publicPath||n.p},Brcr:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var s=n("PPJ4"),o=n("zGdY");function r(e){return Object(o.Id)(s.d,e)}},Bv6r:function(e,t,n){"use strict";n.d(t,"b",(function(){return O})),n.d(t,"a",(function(){return E})),n.d(t,"c",(function(){return y}));var s=n("iKGo"),o=n("zGdY"),r=n("9EWH"),i=n("JGST"),a=n("vIkp"),c=n("M5qL"),l=n("Unv+"),d=n("4XpK"),u=n("U7Ic"),p=n("bV+l"),b=n("nsO7"),m=n("8/Ce");const g=(e,t)=>{if(!t)return{id:null,view:null};const n=e.views.byBlogId[t.blogId]||{},s=Object.keys(n).find((e=>{const s=n[e],o=Object(b.isEqual)(s.query.paging,t.paging),r=Object(b.isEqual)(s.query.searchText,t.searchText)||!s.query.searchText&&!t.searchText,i=Object(b.isEqual)(s.query.submissionStatus,t.submissionStatus)||!s.query.submissionStatus&&!t.submissionStatus;return o&&r&&i}));return{id:s,view:s?n[s]:null}},h=e=>["views","byBlogId",e.blogId],f=(e,t,n)=>{const s=e.views.byBlogId[n];Object.keys(s).forEach((e=>{t.views.byBlogId[n][e].isValid=!1}))},O=Object(s.g)({byBlogId:{},gradeColumnToBlog:{},views:{byBlogId:{}},isLoading:!1},{[m.a.BLOG_PARTICIPANTS_LOAD]:Object(s.o)(g,h),[Object(s.j)(m.a.BLOG_PARTICIPANTS_LOAD)]:(e,t)=>{const{data:n,query:o}=t,{byCourseMembershipId:i,paging:a}=n,c=Object(r.a)(e,(e=>{const t=o.blogId;e.byBlogId[t]||(e.byBlogId[t]={}),Object.keys(i).forEach((t=>{const n=i[t];e.byBlogId[o.blogId][t]={courseMembershipId:t,userId:n.user.id,attemptStatus:n.attemptStatus,entriesCount:n.entriesCount,lastAttemptDate:n.lastAttemptDate,hasNewActivity:n.hasNewActivity}}))}));return Object(s.q)(c,t,{viewResolver:g,viewsPathResolver:h,paging:a,values:Object.keys(i)})},[Object(s.h)(m.a.BLOG_PARTICIPANTS_LOAD)]:Object(s.m)(g,h),[m.a.BLOG_PARTICIPANT_CLEAR_ACTIVITY_FLAG]:(e,t)=>{const{participantId:n,blogId:s}=t;return n&&s?Object(r.a)(e,(e=>{var t;const o=null===(t=e.byBlogId[s])||void 0===t?void 0:t[n];o&&(o.hasNewActivity=!1)})):e},[Object(s.j)(a.a.BLOG_LOAD)]:(e,t)=>Object(r.a)(e,(e=>{const{blog:n}=t;n&&(e.gradeColumnToBlog[n.gradeColumnId]=n.id)})),[Object(s.j)(c.a.BLOG_ENTRY_REMOVE)]:(e,t)=>{const{entry:n}=t;if(n.assignedUserId!==n.creatorId)return e;const s=e.byBlogId[n.blogId];if(!s)return e;return s[n.assignedUserId]?Object(r.a)(e,(e=>{const t=e.byBlogId[n.blogId][n.assignedUserId];t.entriesCount-=1,0===t.entriesCount&&t.attemptStatus===o.l.NeedsGrading&&(t.attemptStatus=null)})):e},[Object(s.j)(d.a.GRADEBOOK_GRADE_PERSIST_BY_USER_ID)]:(e,t)=>{const{grade:n}=t,s=e.gradeColumnToBlog[n.columnId];if(!e.byBlogId[s])return e;return e.byBlogId[s][n.memberId]?Object(r.a)(e,(t=>{t.byBlogId[s][n.memberId].attemptStatus=o.l.Completed,f(e,t,s)})):e},[Object(s.j)(d.a.GRADEBOOK_GRADE_PERSIST_BY_GRADE_ID)]:(e,t)=>{const{grade:n}=t,s=e.gradeColumnToBlog[n.columnId];if(!e.byBlogId[s])return e;return e.byBlogId[s][n.memberId]?Object(r.a)(e,(t=>{if(n.lastAttemptId){const e=n.displayGrade.score?o.l.Completed:o.l.NeedsGrading;t.byBlogId[s][n.memberId].attemptStatus=e}else{const e=n.manualScore?o.l.Completed:null;t.byBlogId[s][n.memberId].attemptStatus=e}f(e,t,s)})):e},[Object(s.j)(l.a.GRADEBOOK_ATTEMPT_UPDATE)]:(e,t)=>Object(r.a)(e,(n=>{for(const[s,o]of Object.entries(e.views.byBlogId))Object.keys(o).forEach((e=>{n.views.byBlogId[s][e].query.courseId===t.attempt.courseId&&(n.views.byBlogId[s][e].isValid=!1),t.attempt.courseId||(n.views.byBlogId[s][e].isValid=!1)}))})),[Object(s.j)(u.a.STUDENT_PREVIEW_EXIT)]:(e,t)=>Object(r.a)(e,(t=>{for(const[n,s]of Object.entries(e.views.byBlogId))Object.keys(s).forEach((e=>{t.views.byBlogId[n][e].isValid=!1}))}))}),E={loadParticipantList:e=>Object(s.b)(m.a.BLOG_PARTICIPANTS_LOAD,(async(t,n)=>{const o=!((e,t)=>{const{view:n}=g(e.blog.participants,t);return!n||!n.isLoading&&!n.isValid})(n(),e);if(!o){t(Object(s.a)(m.a.BLOG_PARTICIPANTS_LOAD,{query:e}));try{const n=await i.h(e);t(Object(s.a)(Object(s.j)(m.a.BLOG_PARTICIPANTS_LOAD),{query:e,data:n}))}catch(n){t(Object(s.a)(Object(s.h)(m.a.BLOG_PARTICIPANTS_LOAD),{query:e})),t(Object(s.a)(Object(s.j)(p.a.APP_ERROR),{error:n}))}}})),updateParticipantActivity:(e,t)=>Object(s.a)(m.a.BLOG_PARTICIPANT_CLEAR_ACTIVITY_FLAG,{participantId:e,blogId:t})},y={getBlogParticipantByMembershipId:(e,t,n)=>{const s=e.blog.participants.byBlogId[t];return s?s[n]:null},getBlogParticipantsByQuery:(e,t)=>{const{view:n}=g(e.blog.participants,t);return n&&n.values?n.values.map((n=>e.blog.participants.byBlogId[t.blogId][n])):null},getPagingByQuery:(e,t)=>{const{view:n}=g(e.blog.participants,t);return n?n.paging:null},isLoading:(e,t)=>{const{view:n}=g(e.blog.participants,t);return n?n.isLoading:null}}},C3Ga:function(e,t,n){"use strict";var s=n("WftU"),o=n("5MwF"),r=n("n7/H");var i=n("tfZW");class a extends s.Babelfish{constructor(e,t=i.a.getInstance()){super(e),this.preferredLocalesCache=new Map,this.overrideLoader=t,this.overrideLoader.onOverrideAdded(this.onOverrideAdded.bind(this))}getBundlePath(e,t){if(o.a.unitTesting){if(!t.match(/^force\!/))return t.match(/^forcereset$/)?void this.reset():void 0;t=t.replace(/^force\!/,"")}return t.indexOf("://")>0?t:"locales/"+this.normalizeLocale(e)+"/_combined.json"}loadIncludedBundle(e){const t=(e=>{const t=/locales\/([a-zA-Z0-9\-]+)\//.exec(e);if(!t||t.length<=0)throw new Error(`Could not find locale in path ${e}`);return t[1]})(e);return new r.InstantPromise((s=>{n("spHl")("./"+e.replace("locales/","").replace(t,this.normalizeLocale(t))).then(s).catch((()=>s(null)))}))}loadPath(e){return e.indexOf("://")>=0?i.a.loadFromRemotePath(e):this.loadIncludedBundle(e)}load(e){return this.loadedBundles[e]||(this.loadedBundles[e]=this.loadPath(e)),this.loadedBundles[e]}onOverrideAdded(e){this.preferredLocalesCache=new Map}loadBundles(e){"string"==typeof e&&(e=[e]);const t=[];return this.normalizeLocales(e).forEach((e=>{t.push(this.overrideLoader.getOverridePathForLocale(e).then((e=>{if(e&&e.path)return this.loadBundle(e.ultraLocale,e.path)})),super.loadBundles(e))})),r.InstantPromise.all(t)}getPreferredLocales(e){"string"==typeof e&&(e=[e]);const t=e.join("|");if(!this.preferredLocalesCache.has(t)){let n=[];this.normalizeLocales(e).forEach((e=>{n=n.concat(this.overrideLoader.getPreferredLocales(e))})),this.preferredLocalesCache.set(t,Array.from(new Set(n)))}return this.preferredLocalesCache.get(t)}getLocaleForFormatting(e){return this.overrideLoader.getBaseLocale(e)||e}}let c;t.a=class{static getInstance(){return null==c&&(c=new a({fallbackLocales:[]})),c}static getTestInstance(e){if(!o.a.unitTesting)throw new Error("Use getInstance() instead");return new a({fallbackLocales:[]},e)}}},CY5M:function(e,t,n){"use strict";const s="launch_attempt",o="assessment";var r=n("IbyE");const i="geolocation *; microphone *; camera *; midi *; encrypted-media *; fullscreen *",a=/^\/webapps\/blackboard\/execute\/blti\/launchReturn/;function c(e){const{bbFileData:t,courseId:n,contentId:s,handle:o}=e,i="string"==typeof t?JSON.parse(t):t,a={courseId:n,parentContentId:s,linkType:r.i.parse(i.linkType),linkRefId:i.linkRefId,handle:o};return r.i.LtiLink.isEqualTo(i.linkType)&&(a.url=i.url,a.launchInNewWindow=i.launchInNewWindow,i.customParameters&&(a.customParameters=JSON.stringify(i.customParameters))),!r.i.LtiLink.isEqualTo(i.linkType)||"IFRAME"!==i.target&&"embedded-app"!==i.bbtype||(a.renderAsEmbed=!0),(r.i.LtiPlacement.isEqualTo(i.linkType)||r.i.LtiLink.isEqualTo(i.linkType))&&i.linkRefUuid&&(a.linkRefUuid=i.linkRefUuid),a}function l({contentDetail:e,contentHandler:t,launchInNewWindow:n}){var s,o,i;if(!t)return null;let a=null===(s=null==e?void 0:e[t.toString()])||void 0===s?void 0:s.launchLink;if(!a)return null;let c,l=null;return r.i.LtiPlacement.startsWith(t)?l=null===(o=null==e?void 0:e[t.toString()])||void 0===o?void 0:o.placement.url:r.i.LtiLink.isEqualTo(t)&&(l=null===(i=null==e?void 0:e[t.toString()])||void 0===i?void 0:i.url),l&&Object(r.Pb)(l)?c=null!=n&&n:(c=!0,a=Object(r.ab)(a,{target_override:"window"})),{link:a,launchNewWindow:c}}function d(e){if(!e)return null;const t=e.split("-")[0];return t.includes(":")?t.split(":")[1]:t}function u(e){const t=e,n=e;return r.i.PartnerCloud.isEqualTo(e.linkType)?function({courseId:e,linkRefId:t}){const n=d(t),s=`/launch/content?provider_id=${encodeURIComponent(null!=n?n:"null")}&course_id=${encodeURIComponent(null!=e?e:"null")}&link_ref_id=${encodeURIComponent(null!=t?t:"null")}`;return Object(r.mb)(r.kb.partnerCloudBasePath+s)}(n):r.i.LtiLink.isEqualTo(e.linkType)?function({linkRefId:e,linkRefUuid:t,launchInNewWindow:n,courseId:s,url:o,customParameters:i,parentContentId:a}){let c=`/webapps/blackboard/execute/blti/launchLink?cim_placement_id=${encodeURIComponent(null!=e?e:"null")}&course_id=${encodeURIComponent(null!=s?s:"null")}&url=${encodeURIComponent(null!=o?o:"null")}`,l=null;i&&(l={custom_parameters:i}),a&&(l={...l,parent_id:a}),l&&(c=Object(r.ab)(c,l));let d=Object(r.mb)(c);return t&&(d=Object(r.ab)(d,{blti_placement_uuid:t})),!n&&o&&Object(r.Pb)(o)||(d=Object(r.ab)(d,{target_override:"window"})),d}(n):r.i.LtiPlacement.isEqualTo(e.linkType)?(null==t?void 0:t.handle)?function({handle:e,courseId:t,customParameters:n}){const s={handle:e,course_id:t,custom_parameters:n},o=Object(r.ab)("/webapps/blackboard/execute/blti/launchPlacement",s);return Object(r.mb)(o)}(t):function({courseId:e,linkRefId:t,parentContentId:n,linkRefUuid:s}){let o=`/webapps/blackboard/execute/blti/launchPlacement?blti_placement_id=${encodeURIComponent(null!=t?t:"null")}&course_id=${encodeURIComponent(null!=e?e:"null")}`;n&&(o=Object(r.ab)(o,{parent_id:n}));let i=Object(r.mb)(o);return s&&(i=Object(r.ab)(i,{blti_placement_uuid:s})),i}(n):""}var p=n("nmzr");class b{static getLTILaunchReturnLocation(e){switch(e){case s:return new m;case o:return new g;default:throw new Error("No valid return locations found")}}}class m{getRouteName(){return p.c.ASSESSMENT_ATTEMPT_IMS_PROCTORING}getRouteParams(e){const{content_id:t,course_id:n,returnToProctoringToolOnEndAssessment:s,password:o}=e;return{courseId:n,contentId:t,returnToProctoringToolOnEndAssessment:s,password:o}}}class g{getRouteName(){return p.c.ASSESSMENT_OVERVIEW}getRouteParams(e){return{contentId:e.content_id}}}const h=new class{constructor(){this.capabilitiesMessageListener=e=>{if("org.imsglobal.lti.capabilities"===e.data.subject)this.handleCapabilities(e)}}handleCapabilities(e){const t="lti_storage_frame",n={message_id:e.data.message_id,subject:"org.imsglobal.lti.capabilities.response",supported_messages:[{subject:"org.imsglobal.lti.capabilities"},{subject:"org.imsglobal.lti.get_data",frame:t},{subject:"org.imsglobal.lti.put_data",frame:t}]};!e.source||e.source instanceof MessagePort||e.source instanceof ServiceWorker||e.source.postMessage(n,e.origin)}init(e){e.addEventListener("message",this.capabilitiesMessageListener,!1)}};var f=n("tN4z"),O=n("caKH"),E=n("ERkP"),y=n.n(E),I=n("VQ4P");const C=({email:e,exitCallback:t})=>{const n=!!e,s=Object(I.a)(),[o,r]=Object(E.useState)(!0),i=()=>{r(!1)};return y.a.createElement(O.a,{analyticsId:"course.content.ltiNeedsApproval",className:"react-container",open:o,onClose:i,TransitionProps:{onExited:()=>{t(),r(!0)}}},y.a.createElement(f.AnalyticsDialogTitle,{analyticsId:"lti.modal.needs-approval.title"},s("course.content.ltiNeedsApprovalTitle")),y.a.createElement(f.AnalyticsDialogContent,{analyticsId:"lti.modal.needs-approval.content"},n?y.a.createElement(y.a.Fragment,null,y.a.createElement(f.AnalyticsDialogContentText,{analyticsId:"lti.modal.needs-approval.content.description"},s("course.content.ltiNeedsApprovalDescription")),y.a.createElement(f.AnalyticsDialogContentText,{analyticsId:"lti.modal.needs-approval.content.email"},y.a.createElement(f.AnalyticsLink,{href:`mailto:${e}`,analyticsId:"components.services.lti.needsApproval.email.link"},e))):y.a.createElement(f.AnalyticsDialogContentText,{analyticsId:"lti.modal.needs-approval.content.no-email"},s("course.content.ltiNeedsApprovalDescriptionNoEmail"))),y.a.createElement(f.AnalyticsDialogActions,{analyticsId:"lti.modal.needs-approval.actions"},y.a.createElement(f.AnalyticsPrimaryButton,{analyticsId:"global.ok",onClick:i},s("global.ok"))))};var v=n("RPob"),S=n("7O4Y"),j=n("Agfx");const T=Object(j.makeStyles)((e=>Object(j.createStyles)({modalContent:{textAlign:"center",alignItems:"center",justifyContent:"center",display:"flex"},isLoading:{display:"inline-flex",width:"100%",alignItems:"center",justifyContent:"center"},iframeContainer:{display:"block",margin:"0 16px",[e.breakpoints.up("md")]:{margin:"0 20px"}},ltiBanner:{display:"flex",alignItems:"center",padding:"8px 24px",gap:"12px",borderBottom:`1px solid ${e.palette.border.main}`},ltiGroupsBanner:{display:"flex",flex:1,justifyContent:"space-between",alignItems:"center",flexWrap:"wrap"},refreshButton:{marginLeft:"auto"},bannerActions:{display:"flex",gap:"12px"},loadingIframeContainer:{display:"none"},needsToEnrollParagraph:{paddingTop:"32px"},documentName:{fontSize:"1rem",fontWeight:e.typography.fontWeightSemiBold,lineHeight:"1.5"}})));var A=n("0x+l"),_=n("uDfI"),R=n("GuFu"),N=n("Ajje");const w=e=>{var t,n;const s=T(),o=Object(I.a)(),{content:i,analyticsId:a,isInstructor:c,handleUpdateUrlIFrame:l,url:d,courseId:u}=e,p=null==i?void 0:i.assignedGroups,b=!!p&&p.length>0,m=Object(R.p)("feature.content.cloudDocument.groups"),g=p&&p.length?p[0].groupId:"",[h,O]=Object(E.useState)(g),C=o("cloudDocument.parentDocument");let S="";(null==i?void 0:i.isGroupContent)&&!S&&b&&(S=b&&(null===(t=p[0].group)||void 0===t?void 0:t.title)||"");const w=function(e,t){const n=Object(_.d)(),s=Object(_.e)((e=>r.gc.group.getGroupsLoadingStatus(e))),o=Object(_.e)((e=>r.gc.group.getGroupByGroupId(e,t)));return Object(E.useEffect)((()=>{""===t||(null==o?void 0:o.memberships)||s!==N.a.HasNotStarted||n(r.X.group.loadGroupById(e,t))}),[e,t,n,null==o?void 0:o.memberships,s]),o}(u,h),D=!!(null==w?void 0:w.memberships)&&w.memberships.length>0;Object(E.useEffect)((()=>{O(b?p[0].groupId:"")}),[null==i?void 0:i.assignedGroups,p,b]);const L=!c&&!(null===(n=null==w?void 0:w.signUpSheet)||void 0===n?void 0:n.isShowGroupMembers);return y.a.createElement("div",{className:s.ltiGroupsBanner},b&&c?y.a.createElement("div",{className:"document-selector"},y.a.createElement(f.AnalyticsTextField,{id:"lti.launchFrame.groups",analyticsId:`${a}.groups`,select:!0,value:h,onChange:e=>{if(O(e.target.value),d.indexOf("&group_id")>0||""!==h){const t=d.slice(0,d.indexOf("&group_id"));l(Object(v.c)(t,"group_id",e.target.value))}},label:o("cloudDocument.documentSelector")},p.map((e=>y.a.createElement(j.MenuItem,{button:!0,key:e.groupId,value:e.groupId},e.groupTitle))))):y.a.createElement(y.a.Fragment,null,(c&&C||S)&&y.a.createElement(f.AnalyticsTypography,{component:"span",className:s.documentName},c?C:S)),!(null==i?void 0:i.isGroupContent)&&c&&m&&!b&&y.a.createElement(f.AnalyticsIconButton,{onClick:()=>e.handleEditGroups(),analyticsId:`${a}.addToGroups`},y.a.createElement(A.Add,null),y.a.createElement(f.AnalyticsTypography,{component:"span",variant:"inherit"},o("cloudDocument.groups.assignToGroups"))),b&&D&&!L&&y.a.createElement(f.AnalyticsLink,{"aria-label":o("cloudDocument.groups.showMembersForGroup",{groupName:S}),analyticsId:`${a}.link.showMembers`,href:"#",onClick:()=>{e.showGroupMembers(h)},className:"show-group-members"},o("cloudDocument.groups.showMembers")))},D=[a],L=e=>{var t,n,s,o,a,c;const l="lti.launchFrame",[d,u]=Object(E.useState)(!1),b=null!==(t=e.iframeHeight)&&void 0!==t?t:window.innerHeight,[m,g]=Object(E.useState)(!0),[h,O]=Object(E.useState)(0),y=Object(E.useRef)(null),C=T(),j=Object(I.a)(),[N,L]=Object(E.useState)(Object(v.f)(e.url)),P=Object(_.e)((e=>r.gc.app.getRoute(e).params)),k=P.courseId,x=null!==(n=P.contentId)&&void 0!==n?n:"",B=Object(R.a)(k,x),M=!d||m?C.loadingIframeContainer:"",U=null!==(o=null===(s=null==B?void 0:B.permissions)||void 0===s?void 0:s.edit)&&void 0!==o&&o,G=!!(null===(a=null==B?void 0:B.selfEnrollmentGroups)||void 0===a?void 0:a.some((({group:e})=>!!(null==e?void 0:e.isSelfEnrolledAllowed)))),F=B&&G&&!U&&!(null===(c=null==B?void 0:B.assignedGroups)||void 0===c?void 0:c.length),q=Object(E.useCallback)((()=>{O((e=>e+1)),g(!0)}),[g,O]),H=Object(E.useCallback)((()=>{p.bb.leavePeekState(),p.bb.goPeekState(Object(p.gb)({courseId:k,contentId:x}))}),[k,x]);return Object(E.useEffect)((()=>{var e;if(g(!0),null===(e=null==B?void 0:B.assignedGroups)||void 0===e?void 0:e.length)L(Object(v.c)(N,"group_id",B.assignedGroups[0].groupId));else{const e=N.indexOf("&group_id")>0?N.slice(0,N.indexOf("&group_id")):N;L(e)}}),[null==B?void 0:B.assignedGroups,N]),E.createElement("div",null,d&&B&&E.createElement("section",{className:C.ltiBanner},e.showAssignToGroups&&E.createElement(w,{courseId:k,content:B,url:N,analyticsId:l,isInstructor:U,handleEditGroups:e.assignToGroups,handleUpdateUrlIFrame:e=>{L(e),q()},showGroupMembers:e.showGroupMembers}),e.showRefreshFrameButton&&E.createElement(f.AnalyticsPrimaryButton,{className:C.refreshButton,disabled:m,onClick:q,endIcon:E.createElement(A.Refresh,null),analyticsId:`${l}.refreshButton`},j(!d||m?"global.loading":"lti.launchFrame.refreshLabel"))),F?E.createElement(f.AnalyticsTypography,{align:"center",className:C.needsToEnrollParagraph},j("cloudDocument.groups.mustJoinGroupBeforeOpenContent"),E.createElement(f.AnalyticsLink,{className:"group-enroll-link",analyticsId:`${l}.link.groupEnroll`,href:"#",onClick:H},j("cloudDocument.groups.mustJoinGroupBeforeOpenContentLink"))):E.createElement("div",{style:{height:`${b}px`},className:Object(S.a)(C.modalContent,{[C.isLoading]:!d})},(!d||m)&&E.createElement("div",null,E.createElement(f.AnalyticsCircularProgress,{id:"lti.launchFrame.loading",label:j("lti.launchFrame.loading"),ariaLabel:"lti.launchFrame.loading",size:"small"}),E.createElement("div",{className:"sr-only",role:"status","aria-live":"polite"},j("lti.launchFrame.loading"))),E.createElement("iframe",{ref:y,onLoad:()=>{var t,n,s,o;u(!0),g(!1);try{const r=null===(n=null===(t=y.current)||void 0===t?void 0:t.contentWindow)||void 0===n?void 0:n.location,i=D.some((e=>{var t;return e.test(null!==(t=null==r?void 0:r.pathname)&&void 0!==t?t:"")}));if(i){const t=Object(v.e)(null!==(s=null==r?void 0:r.href)&&void 0!==s?s:"");null===(o=null==e?void 0:e.onLtiReturned)||void 0===o||o.call(e,t)}}catch(e){}},key:h,id:"lti-launch-iframe",name:"lti-launch-iframe",allow:i,src:N,title:e.title,style:{height:`${b}px`},className:Object(S.a)(e.className,C.iframeContainer,M)})))};var P=n("myse");const k=Object(j.makeStyles)((e=>Object(j.createStyles)({containerPeekPanel:{position:"absolute",top:0,left:0,bottom:0,right:0,overflowY:"auto",[e.breakpoints.up("sm")]:{padding:"35px 20px 90px 20px","& .main-header.panel-header.simple-header":{padding:"0",margin:"-30px 0 0 0","& .ms-Panel-commands, & .ms-Panel-headerText":{backgroundColor:"transparent",width:"auto"}}},"& section":{borderBottom:`1px solid ${e.palette.border.main}`,marginTop:"20px",marginLeft:"16px",paddingBottom:"20px","&:last-child":{borderBottom:"none"}}},containerBody:{[e.breakpoints.down("xs")]:{padding:"0 20px 0 10px"}},description:{marginLeft:"20px",color:e.palette.text.hint},header:{"& .ms-Panel-header":{boxShadow:"none",[e.breakpoints.up("sm")]:{marginLeft:"10px"}}},footer:{position:"absolute",left:0,bottom:0,right:0,"& .ms-Panel-footer":{justifyContent:"center"}},additionalToolIcon:{display:"inline-block",verticalAlign:"top",paddingLeft:"10px",paddingTop:"3px"},additionalTools:{fontWeight:e.typography.fontWeightSemiBold},additionalToolTextContainer:{flex:"1",display:"inline-block",verticalAlign:"top",paddingLeft:"10px",minHeight:"32px",maxWidth:"272px",lineHeight:"16px",[e.breakpoints.up("sm")]:{minWidth:"200px"}},additionalToolText:{display:"block",fontWeight:e.typography.fontWeightBold},additionalToolLink:{display:"block"},descriptionBox:{"& div":{border:`1px solid ${e.palette.background.b5}`},"& textarea":{height:"146px"}},additionalToolsItemContainer:{display:"flex"},additionalToolsItemContainerTrashCanIcon:{display:"flex",justifyContent:"space-between"},unassignGroupButton:{marginLeft:"auto",marginRight:"10px",marginTop:"-5px","& [disabled] span":{color:e.palette.action.disabled}},groupsSectionHint:{marginTop:"10px",color:e.palette.text.hint},groupsSection:{"& button":{opacity:0,[e.breakpoints.down("xs")]:{opacity:1},"@media (hover: none) and (pointer: coarse)":{opacity:1},"&:focus":{opacity:1}},"&:hover":{"& button":{opacity:1,transition:"transform 100ms, background-color 250ms, color 250ms, box-shadow 250ms, opacity 250ms"}}}})));var x=n("Zwiy"),B=n("8jBL");const M=({titleText:e,contentText:t,analyticsId:n,rootId:s,confirmationText:o,exitCallback:r})=>{const i=Object(I.a)();return E.createElement(O.a,{analyticsId:`${n}.dialog`,open:!0,onClose:()=>r(),"aria-labelledby":`${s}.dialog-title`},E.createElement(f.AnalyticsDialogTitle,{analyticsId:`${n}.dialog-title`,onClose:()=>r(),id:`${s}.dialog-title`},i(e)),E.createElement(f.AnalyticsDialogContent,{analyticsId:`${n}.dialog-content`},E.createElement(f.AnalyticsDialogContentText,{analyticsId:`${n}.dialog-description`,id:`${s}.dialog-description`},i(t))),E.createElement(f.AnalyticsDialogActions,{analyticsId:`${n}.dialog-events`},E.createElement(f.AnalyticsDefaultButton,{analyticsId:`${n}.dialog.cancel.button`,onClick:()=>r()},i("global.cancel")),E.createElement(f.AnalyticsPrimaryButton,{analyticsId:`${n}.dialog.confirm.button`,onClick:()=>r(!0)},i(o))))},U=Object(P.withAnalytics)((e=>{var t,n,s;const{analyticsId:o,analyticsEventAugmentor:i,courseId:a,addGoals:c,alignedGoalsCount:l,showGoals:d,contentId:u,onClose:b,allowConversations:m,assignToGroups:g,showAssignToGroups:h,groupContentStarted:O}=e,C=k(),v=Object(I.a)(),j=Object(_.d)(),T="CloudDocumentAllowClassConversations",N=Object(R.e)(a),w=Object(R.a)(a,u),[D,L]=Object(E.useState)(m),[U,G]=Object(E.useState)(null==w?void 0:w.description),[F,q]=Object(E.useState)(!!(null==w?void 0:w.assignedGroups)&&(null==w?void 0:w.assignedGroups.length)>0),[H,V]=Object(E.useState)(!1),[K,$]=Object(E.useState)(!1),W=Object(R.i)("cloudDocument","organization"),z=Object(E.useCallback)((e=>{L(e.currentTarget.checked)}),[]),Q=Object(E.useCallback)((e=>{G(e.currentTarget.value)}),[]),Y=i(P.AnalyticsEventTypes.CHANGE_EVENT,Q,`${o}.description`),J=Object(E.useCallback)((()=>{if(w){const e={...w,description:U};j(r.X.content.persistContent(w,e)).then((e=>{const t=e.contents[u];b(t,D,!1)}))}}),[w,U,D,b]),X=Object(E.useCallback)((e=>{V(!1),e&&w&&j(r.X.group.deleteByContentId(u)).then((()=>{const e={...w,assignedGroups:[],isGroupContent:!1};b(e,D,!0),q(!1)}))}),[D,w,u,j,b]),Z=Object(E.useCallback)((()=>{p.bb.leavePeekState()}),[]);y.a.useEffect((()=>{$(!!U&&(null==U?void 0:U.length)>750)}),[U]);const ee={analyticsId:`${o}.header`,title:v("cloudDocument.settings"),smallHeaderTitle:null!==(t=null==N?void 0:N.name)&&void 0!==t?t:"",type:x.BbPanelType.peek,hideNavMenu:!1,navMenuAriaLabel:v("global.navigationMenu")},te={primaryButtonProps:{text:v("cloudDocument.footer.save"),id:"cloud-document-next-button",disabled:K,onClick:J},secondaryButtonProps:{text:v("cloudDocument.footer.cancel"),id:"cloud-document-cancel-button",onClick:Z}},ne=Object(E.useRef)(null);Object(E.useLayoutEffect)((()=>{if(ne.current){const e=ne.current.querySelector("h1.ms-Panel-headerText");e&&(e.tabIndex=0)}}),[]);const se=Object(R.p)("feature.content.cloudDocument.groups");return y.a.createElement("div",null,y.a.createElement("div",{className:C.containerPeekPanel},y.a.createElement("div",{ref:ne,className:Object(S.a)("main-header","panel-header","simple-header",C.header)},y.a.createElement(x.BbPanelHeader,{...ee})),y.a.createElement("div",{className:C.containerBody},y.a.createElement("section",null,y.a.createElement(f.AnalyticsFormControlLabel,{analyticsId:`${o}.allowClassConversations`,label:y.a.createElement(f.AnalyticsTypography,null,v("cloudDocument.detailsAndInfoSection.conversationChoice")),htmlFor:T,control:y.a.createElement(f.AnalyticsCheckbox,{id:T,analyticsId:`${o}.checkAllowClassConversation`,checked:D,inputProps:{"aria-checked":D?"true":"false","aria-describedby":"conversationChoiceDescription"},onChange:z})}),y.a.createElement(f.AnalyticsTypography,{id:"conversationChoiceDescription",className:C.description},v(W("cloudDocument.detailsAndInfoSection.conversationChoiceDescription")))),y.a.createElement("section",null,y.a.createElement("h2",{className:C.additionalTools},v("cloudDocument.additionalTools")),y.a.createElement("div",{className:C.additionalToolsItemContainer},y.a.createElement("div",{className:C.additionalToolIcon},y.a.createElement(B.Goal,null)),y.a.createElement("div",{className:C.additionalToolTextContainer},y.a.createElement("span",{className:C.additionalToolText},v("cloudDocument.goals.goalsAndStandards")),void 0!==l&&y.a.createElement("span",null,0===l?y.a.createElement(f.AnalyticsLink,{analyticsId:`${o}.link.addGoals`,href:"#",onClick:c,className:C.additionalToolLink},v("cloudDocument.goals.alignWithGoals")):y.a.createElement(f.AnalyticsLink,{analyticsId:`${o}.link.showGoals`,href:"#",onClick:d,className:C.additionalToolLink},v("cloudDocument.goals.alignedGoals.plural",{number:l})))))),se&&h&&y.a.createElement("section",{className:C.groupsSection},y.a.createElement("div",{className:Object(S.a)(F?C.additionalToolsItemContainerTrashCanIcon:"")},y.a.createElement("div",{className:C.additionalToolsItemContainer},y.a.createElement("div",{className:C.additionalToolIcon},y.a.createElement(B.Groups,null)),y.a.createElement("div",{className:C.additionalToolTextContainer},y.a.createElement("span",{className:C.additionalToolText},v("cloudDocument.groups.assignedGroups")),y.a.createElement("span",null,(null===(n=null==w?void 0:w.assignedGroups)||void 0===n?void 0:n.length)&&(null===(s=null==w?void 0:w.assignedGroups)||void 0===s?void 0:s.length)>0?y.a.createElement(f.AnalyticsLink,{analyticsId:`${o}.link.showGroups`,href:"#",onClick:g,className:C.additionalToolLink},v("cloudDocument.groups.groupsNumber.plural",{number:w.assignedGroups.length})):y.a.createElement(f.AnalyticsLink,{analyticsId:`${o}.link.assignToGroups`,href:"#",onClick:g,className:C.additionalToolLink},v("cloudDocument.groups.assignToGroups"))),O&&y.a.createElement(f.AnalyticsTypography,{className:C.groupsSectionHint},v(W("cloudDocument.groups.unassignGroupHint"))))),F&&y.a.createElement("div",{className:"styles.unassignGroupButton"},y.a.createElement(f.AnalyticsIconButton,{disabled:O,"aria-label":v("cloudDocument.groups.unassignButtonAriaLabel"),analyticsId:`${o}.button.unassignGroups`,onClick:()=>V(!0)},y.a.createElement(A.Trash,null)),H&&y.a.createElement(M,{titleText:"cloudDocument.groups.unassignGroupsModal.title",contentText:W("cloudDocument.groups.unassignGroupsModal.content"),analyticsId:`${o}.unassignGroups`,rootId:"cloudDocument.settings.unassignGroups",confirmationText:"cloudDocument.groups.unassignGroupsModal.confirmation",exitCallback:X})))),y.a.createElement("section",null,y.a.createElement(f.AnalyticsTextField,{classes:{root:C.descriptionBox},analyticsId:`${o}.description`,id:"cloud-document-description",label:v("cloudDocument.descriptionLabel"),placeholder:v("cloudDocument.placeholderDescription"),multiline:!0,fullWidth:!0,rows:4,value:U,onChange:Y,error:K,helperText:v("cloudDocument.descriptionMaxCharactersLabel")})))),y.a.createElement("div",{className:C.footer},y.a.createElement(x.BbPanelFooter,{analyticsId:`${o}.footer`,...te})))}));n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return o})),n.d(t,"e",(function(){return i})),n.d(t,"g",(function(){return a})),n.d(t,"j",(function(){return c})),n.d(t,"k",(function(){return l})),n.d(t,"m",(function(){return d})),n.d(t,"l",(function(){return u})),n.d(t,"i",(function(){return"ultra_return_loc"})),n.d(t,"f",(function(){return b})),n.d(t,"n",(function(){return h})),n.d(t,"h",(function(){return C})),n.d(t,"c",(function(){return L})),n.d(t,"d",(function(){return U}))},D5sL:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));const s={COMPLETED_DELEGATED_ATTEMPT_GRADE_BY_GRADER_LOAD:"completed.delegatedAttemptGradeByGraderLoad",COMPLETED_DELEGATED_ATTEMPT_GRADE_ON_ATTEMPT_LOAD:"completed.delegatedAttemptGradeOnAttemptLoad",PATCH_DELEGATED_ATTEMPT_GRADE:"patch.delegatedAttemptGrade",INSTRUCTOR_SUBMISSION_LIST_ATTEMPT_DELETED_EVENT:"instructor-submission-list-attempt-deleted-event",TOGGLE_VISIBILITY_DELEGATED_ATTEMPT_GRADE:"toggle.visibility.delegatedAttemptGrade"}},DRH8:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"e",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return c})),n.d(t,"f",(function(){return l})),n.d(t,"d",(function(){return d})),n.d(t,"g",(function(){return u}));var s=n("ERkP"),o=n("HuI8");const r=e=>e.indexOf("E")>-1||e.indexOf("e")>-1,i=(e,t)=>e.toLowerCase().startsWith("ar-sa")&&t,a=(e,t)=>i(e,t)?"en-us":e,c=(e,t)=>i(e,t)?"ltr":void 0,l=e=>{const t=(e=e.indexOf("E")>0?e.replace("E","e"):e).substring(e.indexOf("e"));return{integer:e.substring(0,e.length-t.length),exponentialNotation:t}},d=(e,t,n,s,o={})=>{var a,c;if(null==t||!Number.isFinite(t))return"";const l=r(t.toString())?"scientific":"standard",d=i(e,n),u={...o,notation:l};d&&(u.numberingSystem="latn");const p=null===(c=null===(a=null==s?void 0:s.getFormatterSync)||void 0===a?void 0:a.call(s,e).cldr)||void 0===c?void 0:c.locale,b=[];if(p){b.push(p);const e=p.split("-");b.push(`${e[0]}-${e[1]}`)}b.push("en-US");const m=e=>new Intl.NumberFormat(e,{...u}).formatToParts(t).map((t=>{switch(t.type){case"decimal":return"٫"!==s.number.getDecimalStringSync(e)&&d||!d?s.number.getDecimalStringSync(e):t.value;case"group":return"٬"!==s.number.getGroupingStringSync(e)&&d||!d?s.number.getGroupingStringSync(e):t.value;default:return t.value}})).join("");let g=b.shift();for(;g;)try{return m(g)}catch(e){g=b.shift()}return t.toString()},u=({value:e,numberFormatOptions:t,displayWesternNumbers:n=!1})=>{const{babelfishFormat:r,locale:i}=Object(o.a)(),[a,c]=s.useState(d(i,e,n,r,t)),[l,u]=s.useState(e);return s.useEffect((()=>{e!==l&&(u(e),c(d(i,e,n,r,t)))}),[e,c,t,u,l,i,n,r]),{displayValue:a,setDisplayValue:c,numericValue:l,setNumericValue:u}}},ERsv:function(e,t,n){"use strict";n.r(t);var s=n("7nmT"),o=n.n(s),r=n("ERkP"),i=n.n(r),a=n("aWzz"),c=n.n(a),l=n("Uhei"),d=n("5XwT"),u=n.n(d),p=n("7O4Y"),b=n("GR+8"),m=n("6yLL"),g=n("OR4U"),h=(n("uPEG"),n("kYzw")),f=n("Z23h"),O=n.n(f),E=n("eEYE"),y=n("9CbH"),I=n("mLgS"),C=n("hvRt");const v=m.a.import("parchment");var S=class extends E.a{constructor(e,t){super(e,t),this.quill.root.addEventListener("cut",this.onCut.bind(this))}convert(e){const t=this.isHTMLManuallyLoaded;if(e?this.isHTMLManuallyLoaded=!0:delete this.isHTMLManuallyLoaded,e&&(e=e.replace("<pre></pre>","<pre>&nbsp;</pre>")),!e&&!t){Array.from(this.container.querySelectorAll("img")).forEach((e=>("string"!=typeof e.src||/^(blob|data|file):.*/.test(e.src)&&void 0===e.attributes["data-mathml"])&&e.remove())),Array.from(this.container.querySelectorAll("span.sr-only")).forEach((e=>"Wirisformula"===e.previousSibling.className&&e.remove())),Array.from(this.container.querySelectorAll('[data-bbtype="image"]')).forEach((e=>("string"!=typeof e.getAttribute("href")||/^(blob|data|file):.*/.test(e.getAttribute("href")))&&e.remove())),this.container.innerHTML=this.container.innerHTML.replace(/<br\s?\/?>\r?\n/g,"<br>");const e=this.container.querySelector("pre");e&&!this.isCodeBlockButtonActive()&&e.appendChild(document.createElement("br")),Array.from(this.container.querySelectorAll('[data-bbtype="attachment"]')).forEach((e=>{e.setAttribute("data-bbtype","reinsertAttachment"),e.getAttribute("href").includes("/sessions/")&&e.remove()})),Array.from(this.container.querySelectorAll("[data-bbfile]")).forEach((e=>{e.parentNode.insertBefore(document.createElement("p").appendChild(document.createElement("br")),e)}))}return this.handleCodeBlockFormatting(t),super.convert(e)}onPaste(e){if(e.defaultPrevented||!this.quill.isEnabled())return;const t=this.quill.getSelection();let n=(new O.a).retain(t.index);const s=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(m.a.sources.SILENT),setTimeout((()=>{n=n.concat(this.convert());let e="";let o=null;if(this.quill.scroll.length()-t.index>1&&(n.ops.forEach((t=>{var n;"#ffffff"===(null===(n=t.attributes)||void 0===n?void 0:n.color)&&(t.insert=" \n",e+=" ")})),e.length>0)){let s=this.quill.getLeaf(t.index)[0];const r="text"===s.statics.blotName;for(;null!=s&&!(s instanceof y.a||s instanceof I.a);)o=s,s=s.parent;if(["TD","TH"].includes(s.domNode.nodeName)){for(;null!=s&&!(s instanceof I.a);)o=s,s=s.parent;t.index=this.quill.getIndex(o.next),n.ops[0].retain=t.index}r&&0!==t.index&&(this.quill.insertText(t.index,"\n","silent"),n.ops[0].retain+=1,t.index+=1),o=o.next,s.insertBefore(v.create("text","\n"),o),n.ops.push({delete:2}),this.quill.insertText(t.index,e,"silent")}if(this.quill.updateContents(n,m.a.sources.USER),o){let e=this.quill.getIndex(o);-1===e&&(e=this.quill.getIndex(o.next)),this.quill.setSelection(e,"silent")}else this.quill.setSelection(n.length()-t.length,m.a.sources.SILENT);this.quill.scrollingContainer.scrollTop=s,this.quill.focus(),this.quill.notifyPluginsOfPropChanges()}),1)}onCut(e){if(e.defaultPrevented||!this.quill.isEnabled())return;const t=this.quill.getSelection();setTimeout((()=>{this.quill.setSelection(t.index,m.a.sources.SILENT)}),1)}dangerouslyPasteHTML(e){let t=e.replace(/\s*[\n]\s*/g,"");return t=t.replace(/<h(\d)\s*><\/h\d\s*>/g,"<h$1><br></h$1>"),t=t.replace(/<h(\d)\s*\/>/g,"<h$1><br></h$1>"),this.quill.setContents(this.convert(t))}handleCodeBlockFormatting(e){if(e&&this.isCodeBlockButtonActive()){const e=this.quill.getLength();this.quill.insertText(e,"\n","silent"),this.quill.setSelection(e,0)}}isCodeBlockButtonActive(){return this.quill.getFormat(this.quill.selection.savedRange.index)[C.a.blotName]}},j=n("EI36"),T=n("gail"),A=class extends j.a{undo(){if(!this.stack)return;this.stack.undo=this.stack.undo.filter((e=>!e.redo.ops.find((e=>{var t;return null===(t=e.attributes)||void 0===t?void 0:t.td}))&&!e.undo.ops.find((e=>{var t;return null===(t=e.attributes)||void 0===t?void 0:t.td}))));const e=this.undoAroundTables(this.stack.undo);e.length>0&&(e[e.length-1].undo.ops=e[e.length-1].undo.ops.filter((e=>0!==e.retain)),this.stack.undo=e),super.undo()}redo(){}getTableIndexes(){const e=[...document.getElementsByClassName("ql-editor")].find((e=>"true"===e.contentEditable)).getElementsByTagName("table");let t=[];for(let n=0;n<e.length;n++){const s=e[n],o=this.quill.getIndex(T.a.find(s))-1,r=this.quill.getIndex(T.a.find(s.nextSibling));t=[...t,{index:o,endIndex:r}]}return t}getLastSetOfOps(e){let t=[];for(let n=e.length-1;n>=0;n--){const s=e.pop();if(t=[s,...t],s.retain)break;0!==n||s.retain||(t=[{retain:0},...t])}return t}getOpsLength(e){let t=0;return e.forEach((e=>{var n,s,o,r;t+=null!==(n=e.retain)&&void 0!==n?n:0,t+=null!==(o=null===(s=e.insert)||void 0===s?void 0:s.length)&&void 0!==o?o:0,t+=null!==(r=e.delete)&&void 0!==r?r:0})),t}addOffsetToTableIndexes(e,t){e.forEach((e=>{e.index+=t,e.endIndex+=t}))}undoAroundTables(e){var t;const n=null===(t=e[e.length-1])||void 0===t?void 0:t.undo.ops,s=this.getTableIndexes();if(0===s.length||!n)return e;for(;s.length>0;){const e=s.shift(),t=this.getLastSetOfOps(n);let o=this.getOpsLength(n);for(;t.length>0;){const r=t.shift();if(void 0!==r.retain)o+r.retain>=e.index&&r.retain<e.endIndex?(r.retain=r.retain+e.endIndex-e.index+1,n.push(r,...t),t.length=0):r.retain<e.index?(o+=r.retain,0!==r.retain&&n.push(r)):(n.push(r,...t),t.length=0);else if(r.delete)if(r.delete+o>e.index){const s=r.delete+o-e.index;r.delete=r.delete-s,n.push(r,{retain:e.endIndex-e.index+1},{delete:s},...t),t.length=0}else o+=r.delete,n.push(r);else r.insert&&(o+=r.insert.length,this.addOffsetToTableIndexes(s,r.insert.length),n.push(r))}}return e}},_=n("Xk0N"),R=n("WV12"),N=n("9AmZ"),w=n("cqI8"),D=n("Ntf5");const L=T.a.import("parchment");class P extends D.c{static create(e=F()){const t=super.create(this.tagName);return t.setAttribute("table_id",e),t}formats(){return{tablebr:this.domNode.getAttribute("table_id")}}}P.blotName="tablebr",P.tagName="p",P.className="tablebr";class k extends y.a{static create(e=F()){const t=super.create(this.tagName);return t.setAttribute("cell_id",e),t}static formats(e){if(e.hasAttribute("cell_id"))return e.getAttribute("cell_id")}formats(){return{...this.domNode.hasAttribute("cell_id")?{[this.statics.tagName.toLowerCase()]:this.domNode.getAttribute("cell_id")}:{}}}getIndexAndOffset(){return this.parent?q(this,this.parent.children):-1}format(e,t){e===this.blotName&&t?this.domNode.setAttribute("cell_id",t):super.format(e,t)}formatAt(e,t,n,s){n===this.domNode.nodeName&&s===this.formats(this.domNode)||super.formatAt(e,t,n,s)}row(){return this.parent}rowOffset(){return this.row()?this.row().rowOffset():-1}table(){return this.row()&&this.row().table()}}k.blotName="table-cell",k.tagName="td";class x extends k{}x.blotName="table-head",x.tagName="th";class B extends y.a{static create(e=F()){const t=super.create(this.tagName);return t.setAttribute("row_id",e),t}formats(){return{...this.domNode.hasAttribute("row_id")?{[this.statics.tagName.toLowerCase()]:this.domNode.getAttribute("row_id")}:{}}}formatAt(e,t,n,s){n===this.blotName&&s===this.domNode.getAttribute("row_id")||super.formatAt(e,t,n,s)}rowOffset(){return this.parent?q(this,this.parent.children):-1}table(){return this.parent&&this.parent.parent}}B.blotName="table-row",B.tagName="tr";class M extends y.a{}M.blotName="table-body",M.tagName="TBODY";class U extends y.a{static create(e){const t=super.create(this.tagName);return t.setAttribute("table_id",e),t}formats(){return{...this.domNode.hasAttribute("table_id")?{[this.statics.tagName.toLowerCase()]:this.domNode.getAttribute("table_id")}:{}}}formatAt(e,t,n,s){n===this.blotName&&s===this.domNode.getAttribute("table_id")||super.formatAt(e,t,n,s)}balanceRows(){const e=this.descendants(B);if(!this.checkRowsMerge(e))return;const t={};e.forEach((e=>{const n=e.domNode.getAttribute("row_id");if(!n)return;const s=!t[n];s&&(t[n]={row:e,columns:{}});const o=t[n].columns;e.children.forEach((e=>{const s=e.domNode.getAttribute("cell_id");if(!o[s]){const r=this.createCell(e.statics.blotName,e.domNode.getAttribute("cell_id"),!1);o[s]={rowCell:r},t[n].row.appendChild(r)}const r=o[s].rowCell;e.children.forEach((e=>{"header"===e.statics.blotName?r.appendChild(e):r.children.head.appendChild(e)})),e.remove()})),s||e.remove()}))}checkRowsMerge(e=this.descendants(B)){const t=[];if(e.length<=1)return!0;for(let n=0;n<e.length;n++){const s=e[n].domNode.getAttribute("row_id");if(t.includes(s))return!0;t.push(s)}return!1}cells(e){return this.rows().map((t=>t.children.at(e)))}deleteColumn(e){if(null==this.children.head||e<0)return;let t=this.children.head;for(;null!==t;){const n=V(t,e);null!=n&&n.remove(),t=t.next}}createCell(e="td",t=F(),n=!0){const s=L.create(e,t),o=L.create("block");return n&&o.appendChild(L.create("text","\n")),s.appendChild(o),s}insertColumn(e,t){const n=0===e&&0===t&&this.hasHeaderCol(),s=n?x.blotName:k.blotName;n&&this.updateHeaderCol(!1),this.children.forEach((n=>{H(this.createCell(s),e,t,n)})),this.hasHeaderRow()&&this.checkHeaderRowConsistency()}insertRow(e,t){const n=L.create(B.blotName,F("row")),s=0===e&&0===t&&this.hasHeaderRow(),o=s?x.blotName:k.blotName;let r=this.children.head.children.length;for(;r>0;){const e=this.createCell(o);n.appendChild(e),r-=1}s&&this.updateHeaderRow(!1),H(n,e,t,this),this.hasHeaderCol()&&this.checkHeaderColConsistency()}rows(){const e=this.children.head;return null==e?[]:e.children.map((e=>e))}updateHeaderRow(e=!0){let t=this.children.head.children.head;for(;null!==t;){const n=t.replaceWith(e?x.blotName:k.blotName,t.domNode.getAttribute("cell_id"));n.scroll&&n.formatAt(0,n.scroll.length(),e?x.tagName:k.tagName,t.domNode.getAttribute("cell_id")),t=n.next}this.checkHeaderIntersection()}updateHeaderCol(e=!0){let t=this.children.head;for(;null!==t;){const n=t.children.head,s=n.replaceWith(e?x.blotName:k.blotName,n.domNode.getAttribute("cell_id"));s.scroll&&s.formatAt(0,s.scroll.length(),e?x.tagName:k.tagName,n.domNode.getAttribute("cell_id")),t=t.next}this.checkHeaderIntersection()}hasHeaderRow(){var e;return this.children.head.children&&(this.children.head.children.tail.statics.blotName===x.blotName||(null===(e=this.children.head.children.head.next)||void 0===e?void 0:e.statics.blotName)===x.blotName)}hasHeaderCol(){var e;return this.children.tail.children&&(this.children.tail.children.head.statics.blotName===x.blotName||(null===(e=this.children.head.next)||void 0===e?void 0:e.children.head.statics.blotName)===x.blotName)}checkHeaderIntersection(){if(this.hasHeaderRow()||this.hasHeaderCol()){const e=this.children.head.children.head;if(e.statics.blotName===x.blotName)return;e.replaceWith(x.blotName,e.domNode.getAttribute("cell_id"))}}checkHeaderRowConsistency(){let e=this.children.head.children.head;for(;null!==e;)e.statics.blotName!==x.blotName&&e.replaceWith(x.blotName,e.domNode.getAttribute("cell_id")),e=e.next}checkHeaderColConsistency(){let e=this.children.head;for(;null!==e;){const t=e.children.head;t.statics.blotName!==x.blotName&&t.replaceWith(x.blotName,t.domNode.getAttribute("cell_id")),e=e.next}}getLastCell(){if(this.children&&this.children.head.children)return this.children.tail.children.tail}}U.blotName="table-container",U.tagName="table";const G=[...y.a.allowedChildren,R.a,w.a,N.a];function F(e="cell"){return`${e}-${Math.random().toString(36).slice(2,6)}`}function q(e,t){let n=0,s=t.head;for(;s!==e&&null!==s;)s=s.next,n+=1;return[n,s.offset(t)]}function H(e,t,n,s){if(s.children&&t+n>s.children.length-1)s.appendChild(e);else{const o=V(s,t+n);s.insertBefore(e,o)}}function V(e,t){let n=0,s=e.children.head;for(;n<e.children.length&&null!=s;){if(n===t)return s;s=s.next,n+=1}return null}U.allowedChildren=[M,B,...G],U.scope=L.Scope.BLOCK_BLOT,M.allowedChildren=[B,...G],M.requiredContainer=U,M.scope=L.Scope.BLOCK_BLOT,B.allowedChildren=[k,x,...G],B.requiredContainer=M,B.scope=L.Scope.BLOCK_BLOT,k.allowedChildren=[...G],k.requiredContainer=B,k.scope=L.Scope.BLOCK_BLOT,x.allowedChildren=[...G],x.requiredContainer=B,x.scope=L.Scope.BLOCK_BLOT;const K=T.a.import("parchment");class $ extends _.a{static register(){T.a.register(k,!0),T.a.register(x,!0),T.a.register(B,!0),T.a.register(M,!0),T.a.register(U,!0),T.a.register(P,!0)}constructor(...e){super(...e),this.listenBalanceTables()}balanceTables(){let e=this.quill.scroll.descendants(U);const t=this.checkTablesMerge(e);if(0===t.length)return;e=e.filter((e=>t.includes(e.formats().table)));for(let t=e.length-1;t>=0;t--){const n=e[t],s=n.children.tail;for(;s.prev;)this.quill.scroll.insertBefore(s.prev,n);const o=s.children.tail;let r=n.prev;for(;r&&!r.formats().tablebr&&!r.prev.formats().table;)o.insertBefore(r,o.children.head),r=n.prev;o.children.tail.remove(),n.next.domNode.remove(),this.quill.scroll.removeChild(n.next)}e[e.length-1].next||this.quill.scroll.appendChild(K.create("text","\n"));let n=null,s=null;e.forEach((e=>{const t=e.children.head,o=t.formats();if(n!==o.tr)n=o.tr,s=t;else{const e=t.children.head;s.appendChild(e)}}));let o=null,r=null;e.forEach((e=>{const t=e.formats();if(o!==t.table)o=t.table,r=e;else{const t=e.children.head;r.appendChild(t)}}))}checkTablesMerge(e=this.quill.scroll.descendants(U)){const t=[],n=[];for(let s=0;s<e.length;s++){const o=e[s].domNode.getAttribute("table_id");t.includes(o)&&!n.includes(o)&&n.push(o),e[s].prev.formats().tablebr||n.includes(o)||n.push(o),t.push(o)}return n}deleteColumn(){const[e,,t]=this.getTable();if(null==t)return;const n=e.children.tail.children.head instanceof x;if(!t.next&&t.prev){const e=t.prev.getIndexAndOffset()[1];this.quill.setSelection(e,T.a.sources.SILENT)}e.deleteColumn(t.getIndexAndOffset()[0]),n&&this.updateHeaderCol(!0),this.quill.update(T.a.sources.USER)}deleteRow(){const[,e,t]=this.getTable();if(null==e)return;const n=e.children.tail instanceof x,s=t.getIndexAndOffset()[0];let o=0,r=null,i=!1;for(!e.next&&e.prev?r=e.prev.children.head:e.next||e.prev?r=e.next.children.head:(r=e.children.head,i=!0);r.next&&o<s&&!i;)r=r.next,o+=1;this.quill.setSelection(r.getIndexAndOffset()[1],T.a.sources.SILENT),e.remove(),n&&this.updateHeaderRow(!0),this.quill.update(T.a.sources.USER)}deleteTable(){var e;const[t]=this.getTable();if(null==t)return;const n=t.offset()-1;(null===(e=t.prev)||void 0===e?void 0:e.statics.blotName)===P.blotName&&t.prev.domNode.getAttribute("table_id")===t.domNode.getAttribute("table_id")&&t.prev.remove(),t.remove(),this.quill.update(T.a.sources.USER),this.quill.setSelection(n,T.a.sources.SILENT)}getTable(e=this.quill.getSelection()){if(null==e)return[null,null,null,-1];const[t,n]=this.quill.getLine(e.index),s=this.getCellOfContent(t);if(null==s)return[null,null,null,-1];const o=s.parent;return[o.parent,o,s,n]}getCells(){const[e]=this.getTable();return e?e.getCells():[]}getCellOfContent(e){if(!e)return null;let t=e.parent;for(;t;){if(t.statics.blotName===k.blotName||t.statics.blotName===x.blotName)return t;t=t.parent}return null}getTableData(e=!1,t=!1,n=this.quill.getSelection()){const s=this.getTable(n)[0],o=this.getTableColumnsCount(s),r=this.getTableRowsCount(s);if(e!==t)return{columnCount:o,rowCount:r,headerRow:e,headerColumn:t};const i=this.getTableHeadersValue(e,t);return{columnCount:o,rowCount:r,headerRow:i.row,headerColumn:i.column}}getTableColumnsCount(e){return this.getTableRowsCount(e)<=0||!e.children.head.children?0:e.children.head.children.length}getTableRowsCount(e){return(null==e?void 0:e.children)?e.children.length:0}getTableHeadersValue(e=!1,t=!1,n=this.quill.getSelection()){const s=this.getTable(n)[0],o={row:!1,column:!1},r=this.getTableColumnsCount(s),i=this.getTableRowsCount(s);return this.getTableRowsCount(s)<=0||!s.children.head.children?o:1===r&&1===i?(this.isHeaderCell(s.children.tail.children.head)&&(o.row=e,o.column=t,e||t||(o.row=!0,t=!1)),o):1===i&&r>1&&!e&&!t?(this.isHeaderCell(s.children.tail.children.head)&&(o.row=!1,o.column=!0),this.isHeaderCell(s.children.head.children.tail)&&(o.row=!0,o.column=!1),o):1===r&&i>1&&!e&&!t?(this.isHeaderCell(s.children.head.children.tail)&&(o.row=!0,o.column=!1),this.isHeaderCell(s.children.tail.children.head)&&(o.row=!1,o.column=!0),o):(this.isHeaderCell(s.children.tail.children.head)&&(o.column=!0),this.isHeaderCell(s.children.head.children.tail)&&(o.row=!0),o)}isHeaderCell(e){return e.domNode.localName.toLowerCase()===x.tagName.toLowerCase()}insertColumn(e){const t=this.quill.getSelection(),[n,s,o]=this.getTable(t);if(null==o)return;const r=o.getIndexAndOffset()[0];n.insertColumn(r,e),this.quill.update(T.a.sources.USER);const i=n.children.head.children.map((e=>e))[r+e];this.quill.setSelection(i.offset(this.quill.scroll),0,T.a.sources.SILENT)}insertColumnLeft(){this.insertColumn(0)}insertColumnRight(){this.insertColumn(1)}insertRow(e){const t=this.quill.getSelection(),[n,s,o]=this.getTable(t);if(null==o)return;const r=s.rowOffset()[0];n.insertRow(r,e),this.quill.update(T.a.sources.USER);const i=n.children.map((e=>e))[r+e].children.head;this.quill.setSelection(i.offset(this.quill.scroll),0,T.a.sources.SILENT)}insertRowAbove(){this.insertRow(0)}insertRowBelow(){this.insertRow(1)}insertColumns(e,t){const n=this.quill.getSelection(),[s,o]=this.getTable(n),r=s.getLastCell();if(null==r)return;const i=r.getIndexAndOffset()[0];for(let n=0;n<e;n++)s.insertColumn(i,t);this.quill.update(T.a.sources.USER);let a=o.rowOffset()[0];0===t&&(a+=1),this.quill.setSelection(n.index+a,n.length,T.a.sources.SILENT)}insertRows(e,t){const n=this.quill.getSelection(),[s]=this.getTable(n),o=s.getLastCell(),r=o.parent;if(null==o||null==r)return;const i=r.rowOffset()[0];for(let n=0;n<e;n++)s.insertRow(i,t);this.quill.update(T.a.sources.USER),1===t?this.quill.setSelection(n,T.a.sources.SILENT):this.quill.setSelection(n.index+r.children.length,n.length,T.a.sources.SILENT)}deleteColumns(e){const t=this.quill.getSelection(),[n,s,o]=this.getTable(t);if(null==o||null==s)return;const r=o.getIndexAndOffset()[0],i=s.children.length-1-e;for(let t=0;t<e;t++){const e=s.children.length-1;n.deleteColumn(e),this.quill.update(T.a.sources.USER)}if(i<r){const e=s.children.tail.getIndexAndOffset()[1];this.quill.setSelection(e,t.length,T.a.sources.SILENT)}this.quill.update(T.a.sources.USER)}deleteRows(e){const t=this.quill.getSelection(),[n,s,o]=this.getTable(t);if(null==o||null==s)return;const r=s.rowOffset()[0],i=o.getIndexAndOffset()[0],a=n.children.length-e-1;for(let t=0;t<e;t++){n.children.tail.remove(),this.quill.update(T.a.sources.USER)}if(a<r){let e=n.children.tail.children.head;for(let t=0;t<i;t++)e=e.next;const s=e.getIndexAndOffset()[1];this.quill.setSelection(s,t.length,T.a.sources.SILENT)}this.quill.update(T.a.sources.USER)}insertTable(e,t,n,s){this.quill.history.cutoff();const o=this.quill.getSelection();if(null==o)return;const r=F("table"),i=K.create(U.blotName,r);for(let n=0;n<e;n++){const e=K.create(B.blotName,F("row"));for(let n=0;n<t;n++){const t=K.create(k.blotName,F("cell")),n=K.create("block");n.appendChild(K.create("text","\n")),t.appendChild(n),e.appendChild(t)}i.appendChild(e)}i.updateHeaderCol(s),i.updateHeaderRow(n),this.insertBlot(o,i),this.quill.update(T.a.sources.USER);const a=this.quill.history.stack.undo.pop();this.quill.history.stack.undo.forEach((e=>{var t,n,s;const o=null!==(t=a.undo.ops[0].retain)&&void 0!==t?t:0,r=null!==(s=null!==(n=a.undo.ops[0].delete)&&void 0!==n?n:a.undo.ops[1].delete)&&void 0!==s?s:0;e.undo.ops.forEach((e=>{e.retain&&e.retain>=o&&(e.retain+=r)}))})),o.index+=1,this.quill.setSelection(o),i.parent.insertBefore(K.create(P.blotName,r),i)}editTable(e,t){const n=this.getTableData();if(null==this.quill.getSelection())return;const s=t-n.columnCount,o=e-n.rowCount;o>0?this.insertRows(o,1):o<0&&this.deleteRows(Math.abs(o)),s>0?this.insertColumns(s,1):s<0&&this.deleteColumns(Math.abs(s)),this.updateNullSelection()}insertBlot(e,t){let n=this.quill.getLeaf(e.index)[0];const s=n.statics.blotName===R.a.blotName;let o=null;for(;null!=n&&!(n instanceof y.a||n instanceof I.a);)o=n,n=n.parent;if(s){const e=K.create("text","\n");o.next?(n.insertBefore(e,o.next),n.insertBefore(t,o.next)):(n.appendChild(t),n.appendChild(e,o))}else n.insertBefore(t,o)}listenBalanceTables(){this.quill.on(T.a.events.SCROLL_OPTIMIZE,(e=>{let t=!0;for(let n=0;n<e.length&&t;n++)["TH","TD","TR","TABLE"].includes(e[n].target.tagName)&&(this.balanceTables(),t=!1)}))}updateHeaderRow(e){const t=this.getTable()[0],n=this.quill.getSelection();null!==t&&(t.updateHeaderRow(e),this.quill.setSelection(n))}updateHeaderCol(e){const t=this.getTable()[0],n=this.quill.getSelection();null!==t&&(t.updateHeaderCol(e),this.quill.setSelection(n))}updateNullSelection(){null===this.quill.getSelection()&&this.quill.setSelection(this.quill.selection.savedRange)}deltaHasTable(e){return e.ops.some((e=>e.attributes&&(e.attributes["table-container"]||e.attributes["table-cell"])))}deltaHasDangerousContent(e){let t=!1;for(let n=0;n<e.ops.length&&!t;n++){const s=e.ops[n];s.attributes&&(t=["header","src","list"].some((e=>Object.keys(s.attributes).includes(e)))),s.insert&&!t&&(t=["inlineImage"].some((e=>Object.keys(s.insert).includes(e))),t||(t=s.insert.includes("\n","cJ","\n","\f","\r")))}return t}}var W=$,z=n("zG0E");z.a.createChange=(e=4)=>({format:{header:e}});var Q=z.a,Y=n("Ia5N");const J="Arial",X="Comic Sans MS",Z="Courier New",ee="Noto",te="Open Sans",ne="Times New Roman",se="Verdana";Y.a.whitelist=[J,X,Z,ee,te,ne,se];const oe=Y.a.value;Y.a.value=function(e){if(e.style)return oe.call(Y.a,e);if(e.getAttribute("style")){const t=e.getAttribute("style"),n=/font-family:([^;]+);?/g.exec(t);if(n&&n[1])return n[1].trim()}return""},Y.a.createChange=(e=te)=>({format:{font:e}});var re=n("/vHv");const ie="0.625rem",ae="0.75rem",ce="0.875rem",le="1.125rem",de="1.5rem",ue="2.25rem",pe="3rem";re.a.whitelist=[ie,ae,ce,le,de,ue,pe,"0.714em","0.857em","1em","1.286em","1.714em","2.571em","3.429em"],re.a.createChange=(e="0.875rem")=>({format:{size:e}});var be=n("QP/V"),me=n("Me3n"),ge=n("tN4z"),he=n("myse");const fe="#000000",Oe="#666666",Ee="#a234b5",ye="#046ef6",Ie="#1c8845",Ce="#e72218";class ve extends i.a.Component{render(){const{editorFormat:e,color:t,cssClass:n}=this.props;return i.a.createElement(ge.AnalyticsListItemIcon,{classes:{root:`picker-color ${n}`}},(t===fe&&!e.color||e.color===t)&&i.a.createElement(me.a,null))}}ve.propTypes={editorFormat:c.a.shape(),color:c.a.string,cssClass:c.a.string},ve.defaultProps={editorFormat:{},color:null,cssClass:null};var Se=Object(he.withAnalytics)(ve);be.b.createChange=(e=fe)=>({format:{color:e}});var je=be.b,Te=n("+Fyx"),Ae=n("oB8T"),_e=n.n(Ae);const Re=new _e.a.Attributor.Style("bullet-size","font-size",{scope:_e.a.Scope.BLOCK});function Ne(e){return`${(.6715*parseFloat(e.match(/[+-]?\d+(\.\d+)?/g))+.7315).toFixed(3)}rem`}class we extends Te.a{optimize(e){var t,n;if(super.optimize(e),this.children.length>0){const e=this.children.head,s=e.attributes;if(s&&s.attributes.size){const t=s.attributes.size.value(e.domNode),n=Ne(t);return super.format("bullet-size",t),void super.format("rtl"===document.dir?"custom-indent-rtl":"custom-indent",n)}if(null===(n=null===(t=this.children.head.domNode)||void 0===t?void 0:t.style)||void 0===n?void 0:n.fontSize){const e=this.children.head.domNode.style.fontSize,t=Ne(e);super.format("bullet-size",e),super.format("rtl"===document.dir?"custom-indent-rtl":"custom-indent",t)}}else Object.prototype.hasOwnProperty.call(this.attributes,"bullet-size")&&super.format("bullet-size",null)}remove(){super.format("bullet-size",null),super.format("rtl"===document.dir?"custom-indent-rtl":"custom-indent",null),super.remove()}}const De=new _e.a.Attributor.Style("custom-indent","padding-left",{scope:_e.a.Scope.BLOCK}),Le=new _e.a.Attributor.Style("custom-indent-rtl","padding-right",{scope:_e.a.Scope.BLOCK}),Pe="ordered",ke="bullet";Te.b.createChange=(e=!0)=>({format:{list:e?ke:Pe}});var xe=n("135b");const Be="left",Me="center",Ue="right",Ge="justify";xe.b.whitelist=[Be,Me,Ue,Ge],xe.b.createChange=(e="left")=>({format:{align:e}});var Fe=n("lMoU");Fe.a.createChange=(e=!0)=>({format:{bold:e}});var qe=Fe.a,He=n("Jid+");He.a.createChange=(e=!0)=>({format:{italic:e}});var Ve=He.a,Ke=n("UbpR");Ke.a.createChange=(e=!0)=>({format:{underline:e}});var $e=Ke.a,We=n("4K2v");We.a.createChange=(e=!0)=>({format:{strike:e}});var ze=We.a;class Qe extends w.a{static create(){return document.createElement(Qe.tagName)}static formats(){return Qe.tagName}}Qe.createChange=(e=!0)=>({format:{subscript:!1,superscript:e}}),Qe.blotName="superscript",Qe.tagName="sup";var Ye=Qe;class Je extends w.a{static create(){return document.createElement(Je.tagName)}static formats(){return Je.tagName}}Je.createChange=(e=!0)=>({format:{superscript:!1,subscript:e}}),Je.blotName="subscript",Je.tagName="sub";var Xe=Je;const Ze="1.15",et="1.5",tt=["1",Ze,et,"2"],nt=m.a.import("parchment"),st=new nt.Attributor.Style("lineheight","line-height",{scope:nt.Scope.BLOCK,whitelist:tt});st.createChange=e=>({format:{lineheight:e}});var ot=n("YL7w");const rt="rtl",it="ltr";ot.a.whitelist=[it,rt],ot.a.createChange=(e="ltr")=>{return{format:{direction:e,align:(t=e,"rtl"===t?Ue:Be)}};var t},C.a.createChange=(e=!0)=>({format:{"code-block":e}});var at=C.a;class ct extends w.a{constructor(e,t){super(e,t),e.style.color=e.color;const n=this.replaceWith(new w.a(w.a.create()));return n.children.forEach((e=>{var t,s;null===(t=e.attributes)||void 0===t||t.copy(n),null===(s=e.unwrap)||void 0===s||s.call(e)})),this.remove(),n}}ct.blotName="customColor",ct.tagName="FONT";var lt=ct;function dt(e,t){var n;for(let s=t;s<e.length;s++)if("\n"===e[s].insert)return!!(null===(n=e[s].attributes)||void 0===n?void 0:n["code-block"]);return!1}var ut=(()=>{const e={};async function t(t,n,s){let o=t?Object.keys(t):Object.keys(e);o=o.filter((t=>e[t]&&e[t].toBbMLAsync));const r=null!=t?t:{};let i=n||"";return i=await o.reduce(((t,n)=>t.then((t=>e[n].toBbMLAsync(t,r[n],s)))),Promise.resolve(i)),i}function n(t,n){let s=n||"";return Object.keys(t).forEach((n=>{e[n]&&e[n].toBbML&&(s=e[n].toBbML(s,t[n]))})),s}function s(e,t,n){let s="";const o=t+1;for(;o>e.length;)s+=`<${n}>`,e.push(n);for(;o<e.length;){s+=`</${e.pop()}>`}return 0!==e.length&&n!==e[e.length-1]&&(s+=`</${e.pop()}>`,s+=`<${n}>`,e.push(n)),s}function o(e,t,n,s){return`<${e}${t&&` dir="${t}"`}${n&&` style="${n}"`}>${s}</${e}>`}function r(e,t,n,r){if(n)return function(e,t,n,r){let i="p",a="",c="",l="";n.header&&(i=`h${Math.max(n.header,4)}`);if(n.list){const e=n.indent||0;i="ordered"===n.list?"ol":"ul",a+=s(t,e,i),i="li";const o=r?"padding-right":"padding-left";n["bullet-size"]&&n["custom-indent"]&&(c+=`font-size: ${n["bullet-size"]};\n          ${o}: ${n["custom-indent"]};`)}return n.align&&(c+=`text-align: ${n.align};`),n.lineheight&&(c+=`line-height: ${n.lineheight};`),n.direction&&(l+=n.direction),n.tag&&(i=n.tag),n["code-block"]&&(i="pre"),!n.list&&t.length>0&&(a+=s(t,-1,"")),"p"!==i||e?(null==n?void 0:n.tag)?a+=`<${i}>`:(""===i&&(i="p"),"pre"===i&&""===e&&(e=" "),a+=o(i,l,c,e)):a+="<br>",a}(e,t,n,r);let i="";return t.length>0&&(i+=s(t,-1,"")),i+=e?o("p","","",e):"<br>",i}function i(e){var t,n,s,o,r;return(null!==(n=null===(t=null==e?void 0:e.attributes)||void 0===t?void 0:t.td)&&void 0!==n?n:null===(s=null==e?void 0:e.attributes)||void 0===s?void 0:s.th)&&(null===(o=null==e?void 0:e.attributes)||void 0===o?void 0:o.tr)&&(null===(r=null==e?void 0:e.attributes)||void 0===r?void 0:r.table)}function a(e,o,i=!1){let a="",c="";const l=[];let d=!1;function u(e,t,n){var s,o,i,u,p,b;"table"===(null===(s=e.attributes)||void 0===s?void 0:s.tag)&&(d=!0,""!==c&&(a+=c,c=""),a.endsWith("<br>")||(a+="<br>")),(!d||d&&e.attributes)&&(a+=r(c,l,e.attributes)),(null==e?void 0:e.simpleTag)||(c=""),"/table"===(null===(o=e.attributes)||void 0===o?void 0:o.tag)&&(d=!1,(null===(p=null===(i=n[t+1])||void 0===i?void 0:(u=i.insert).endsWith)||void 0===p?void 0:p.call(u,"\n"))||"\b\b\b"===(null===(b=n[t+1])||void 0===b?void 0:b.insert)||(a+="<br>"))}function p(e,t,n){var s,i;((null===(s=e.attributes)||void 0===s?void 0:s.align)||(null===(i=e.attributes)||void 0===i?void 0:i.direction))&&(a+=r(c,l,e.attributes,o),c="")}function b(e,s,o){const r=n(e.insert);if(i)return t(e.insert,r,{"code-block":dt(o,s)}).then((t=>{c+=t,p(e)}));c+=r,p(e)}function m(e,s,o){const r=function(e,t){let s=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");return s=s.replace(/^[ ]/,"&nbsp;").replace(/[ ]$/,"&nbsp;"),t?(t.subscript&&(s=`<sub>${s}</sub>`),t.superscript&&(s=`<sup>${s}</sup>`),t.underline&&(s=`<span style="text-decoration:underline;">${s}</span>`),t.strike&&(s=`<del>${s}</del>`),t.italic&&(s=`<em>${s}</em>`),t.bold&&(s=`<strong>${s}</strong>`),t.size&&(s=`<span style="font-size: ${t.size};">${s}</span>`),t.font&&(s=`<span style="font-family: ${t.font};">${s}</span>`),t.color&&(s=`<span style="color: ${t.color}">${s}</span>`),s=n(t,s),s):s}(e.insert||"",e.attributes);if(i)return t(e.attributes,r,{"code-block":dt(o,s)}).then((e=>{c+=e}));c+=r}function g(){a+=s(l,-1,"")}return i?async function(){for(let t=0;t<e.length;++t){const n=e[t];"\n"===n.insert?u(n,t,e):"object"==typeof n.insert?await b(n,t,e):await m(n,t,e)}}().then((()=>(g(),a))):(e.forEach(((e,t,n)=>{"\n"===e.insert?u(e,t,n):"object"==typeof e.insert?b(e,t,n):m(e,t,n)})),g(),a)}return{registerConverter:(t,n)=>{"function"==typeof n&&(e[t]=n)},toBbML:(t,n,s=!1)=>{const o=t[0];if(!(1!==t.length||"\n"!==o.insert||o.attributes&&o.attributes.list))return s?Promise.resolve(""):"";let r=function(e){const t=[];return e.forEach(((e,n,s)=>{var o,r;"string"!=typeof e.insert||!e.insert.includes("\n")||"string"==typeof e.insert&&(null!==(o=e.insert.match(/\s/g))&&void 0!==o?o:[]).length<=1&&n+1<s.length&&i(s[n+1])?((null===(r=e.attributes)||void 0===r?void 0:r.tablebr)||i(e)||0===n||i(s[n-1])||"\n"!==e.insert||n+1>=s.length||!i(s[n+1]))&&("string"==typeof e.insert&&e.insert.trim().length>0&&e.insert.includes("\n")&&(e.insert=e.insert.trim()),t.push(e)):e.insert.includes("\n")&&(e.insert.split("\n").forEach((n=>{""!==n&&t.push({insert:n}),t.push({insert:"\n",attributes:e.attributes})})),t.pop())})),t}(t);return r=function(e){var t,n,s;if(!e.some((e=>{var t,n,s,o;return(null===(t=null==e?void 0:e.attributes)||void 0===t?void 0:t.td)||(null===(n=null==e?void 0:e.attributes)||void 0===n?void 0:n.th)||(null===(s=null==e?void 0:e.attributes)||void 0===s?void 0:s.tr)||(null===(o=null==e?void 0:e.attributes)||void 0===o?void 0:o.table)})))return e;let o,r,a=[],c=[],l="td";for(let d=e.length-1;d>=0;d--){const u=e[d];i(u)&&(c.includes(u.attributes.table)||(a.push({simpleTag:!0,insert:"\n",attributes:{tag:"/table"}}),c.push(u.attributes.table),o=null),o!==u.attributes.tr&&(o&&(a.push({simpleTag:!0,insert:"\n",attributes:{tag:l}}),a.push({simpleTag:!0,insert:"\n",attributes:{tag:"tr"}}),r=null,l="td"),o=u.attributes.tr,a.push({simpleTag:!0,insert:"\n",attributes:{tag:"/tr"}})),r!==(null!==(t=u.attributes.td)&&void 0!==t?t:u.attributes.th)&&(r&&a.push({simpleTag:!0,insert:"\n",attributes:{tag:l}}),r=null!==(n=u.attributes.td)&&void 0!==n?n:u.attributes.th,l=u.attributes.th?"th":"td",a.push({simpleTag:!0,insert:"\n",attributes:{tag:`/${l}`}}))),(null===(s=u.attributes)||void 0===s?void 0:s.tablebr)&&(a.push({simpleTag:!0,insert:"\n",attributes:{tag:l}}),a.push({simpleTag:!0,insert:"\n",attributes:{tag:"tr"}}),a.push({simpleTag:!0,insert:"\n",attributes:{tag:"table"}}),c=[],r=null,o=null,l="td"),a.push(u)}return a=a.reverse().filter((e=>{var t;return!(null===(t=e.attributes)||void 0===t?void 0:t.tablebr)})),a}(r),r=function(t,n){return Object.keys(e).reduce(((t,s)=>"function"==typeof e[s].split?e[s].split(t,n):t),t)}(r,s),r[r.length-1]&&"\n"!==r[r.length-1].insert&&r.push({insert:"\n"}),a(r,n,s)}}})();function pt(e,t,n){let s=e;return Object.keys(t).forEach((e=>{const o=n[e.replace("data-","")],r=t[e];s=function(e,t,n,s){return(n||s)&&e.setAttribute(t,n||s),e}(s,e,o,r)})),s}function bt(e,t,n=!1){const s=n?{domNode:e}:{};return Object.keys(t).reduce(((t,n)=>{const s=t;if(e.hasAttribute(n)){let t=e.getAttribute(n);"string"==typeof t&&t.slice(0,3)===encodeURIComponent("{")&&(t=decodeURIComponent(t)),s[n.replace("data-","")]=t}return s}),s)}class mt extends w.a{static value(e){return bt(e,this.blotAttributes)}static formats(e){return bt(e,this.blotAttributes,!0)}format(e,t){return e===this.statics.blotName&&t?pt(this.domNode,this.statics.blotAttributes,t):super.format(e,t)}}mt.blotName="inline",mt.tagName="span";var gt=mt;class ht extends D.a{static value(e){return bt(e,this.blotAttributes)}static formats(e){return bt(e,this.blotAttributes,!0)}detach(){this.domNode.unmountComponent&&this.domNode.unmountComponent(),super.detach()}format(e,t){return e===this.statics.blotName&&t?pt(this.domNode,this.statics.blotAttributes,t):super.format(e,t)}}ht.blotName="embed",ht.tagName="div";var ft=ht,Ot=n("zKRg");class Et extends Ot.a{static value(e){return bt(e,this.blotAttributes)}static formats(e){return bt(e,this.blotAttributes,!0)}detach(){this.domNode.unmountComponent&&this.domNode.unmountComponent(),super.detach()}format(e,t){return e===this.statics.blotName&&t?pt(this.domNode,this.statics.blotAttributes,t):super.format(e,t)}}Et.blotName="embedInline",Et.tagName="span";var yt=Et,It=n("wHHW");function Ct(e){return!!e&&(function(e){var t,n,s,o;const r=null==e?void 0:e.domNode;return(null===(t=null==r?void 0:r.tagName)||void 0===t?void 0:t.toLowerCase())===(null===(n=k.tagName)||void 0===n?void 0:n.toLowerCase())||(null===(s=null==r?void 0:r.tagName)||void 0===s?void 0:s.toLowerCase())===(null===(o=x.tagName)||void 0===o?void 0:o.toLowerCase())}(e)&&function(e){var t,n,s;const o=null===(t=e.parent)||void 0===t?void 0:t.domNode;return(null===(n=null==o?void 0:o.tagName)||void 0===n?void 0:n.toLowerCase())===(null===(s=B.tagName)||void 0===s?void 0:s.toLowerCase())}(e)&&function(e){var t,n,s;const o=null===(t=e.parent.parent)||void 0===t?void 0:t.domNode;return(null===(n=null==o?void 0:o.tagName)||void 0===n?void 0:n.toLowerCase())===(null===(s=U.tagName)||void 0===s?void 0:s.toLowerCase())}(e))}class vt extends C.a{replaceWith(e){this.domNode.textContent=this.domNode.textContent,this.attach(),super.replaceWith(e)}highlight(e){const t=this.domNode.textContent;this.cachedText!==t&&((t.trim().length>0||null==this.cachedText)&&(this.domNode.innerHTML=e(t),this.domNode.normalize(),this.attach()),this.cachedText=t)}static formats(){return!0}delta(){let e=this.domNode.textContent;if(e.endsWith("\n")&&(e=e.slice(0,-1)),Ct(this.parent)){const t=function(e){var t,n;const s={"code-block":!0};if(Ct(e)){const o=null==e?void 0:e.domNode,r=null===(t=e.parent)||void 0===t?void 0:t.domNode,i=null===(n=e.parent.parent)||void 0===n?void 0:n.domNode;return s[o.tagName.toLowerCase()]=null==o?void 0:o.getAttribute("cell_id"),s[r.tagName.toLowerCase()]=null==r?void 0:r.getAttribute("row_id"),s[i.tagName.toLowerCase()]=null==i?void 0:i.getAttribute("table_id"),s}return s}(this.parent);return e.split("\n").reduce(((e,n)=>e.insert(n).insert("\n",t)),new O.a)}return e.split("\n").reduce(((e,t)=>e.insert(t).insert("\n",this.formats())),new O.a)}format(e,t){if(e===this.statics.blotName&&t)return;const[n]=this.descendant(R.a,this.length()-1);null!=n&&n.deleteAt(n.length()-1,1),this.descendants(R.a).forEach((e=>{e.parent instanceof w.a&&e.parent.moveChildren(e.parent.parent,e.parent)})),super.format(e,t)}}vt.className="ql-syntax";const St=new _e.a.Attributor.Class("token","hljs",{scope:_e.a.Scope.INLINE});var jt=class extends It.a{static register(){T.a.register(St,!0),T.a.register(vt,!0)}highlight(){if(this.quill.selection.composing)return;this.quill.update(T.a.sources.USER);const e=this.quill.getSelection();this.quill.scroll.descendants(C.a).forEach((e=>{e.highlight(this.options.highlight)})),this.quill.update(T.a.sources.SILENT),null!=e&&this.quill.hasFocus()&&this.quill.setSelection(e,T.a.sources.SILENT)}};const Tt={inline:gt,embed:ft,embedInline:yt},At={"formats/header":Q,"formats/font":Y.a,"formats/size":re.a,"formats/color":je,"formats/list":Te.b,"formats/list/item":we,"formats/align":xe.b,"formats/bold":qe,"formats/italic":Ve,"formats/underline":$e,"formats/code-block":at,"formats/strike":ze,"formats/superscript":Ye,"formats/subscript":Xe,"formats/indent":h.a,"formats/lineheight":st,"formats/direction":ot.a,"formats/customcolor":lt,"modules/clipboard":S,"modules/history":A,"modules/table":W,"modules/syntax":jt},_t=(e,t,n)=>{const s={},o={},r={};e.forEach((e=>{if(e.formatter){const r=e.formatter.blotName||e.pluginId;if(o[r]=class extends Tt[e.formatter.type]{constructor(t,n){super(t,n),e.formatter.onBlotInit&&e.formatter.onBlotInit(t,this)}},o[r].create=n=>{const s=document.createElement(e.formatter.tagName);return e.formatter.renderDomNode(s,e.formatter.attributes,n,t)},o[r].blotAttributes=e.formatter.attributes,o[r].blotName=r,o[r].className=e.formatter.className||r,o[r].tagName=e.formatter.tagName,o[r].split=e.split,o[r].toBbML=e.toBbML,o[r].toBbMLAsync=e.toBbMLAsync,s[`formats/${r}`]=o[r],"function"==typeof e.onLoad)try{e.onLoad(n)}catch(e){console.error(e)}}if(e.module){const t=e.pluginId;r[`modules/${t}`]=e.module}}));const i={...At,...s,...r};m.a.register(i,!0),(e=>{const t="formats/";Object.keys(e).forEach((n=>{if(n.startsWith(t)){const s=n.replace(t,"");ut.registerConverter(s,e[n])}}))})(i)},Rt=m.a.import("parchment");Rt.register(Re,De,Le);var Nt=n("SYde"),wt=n.n(Nt),Dt=n("hupH"),Lt=n.n(Dt),Pt=n("ur92"),kt=n.n(Pt),xt=n("aFtG"),Bt=n.n(xt),Mt=n("wx8R"),Ut=n.n(Mt),Gt=n("PduK"),Ft=n.n(Gt),qt=n("6JEi"),Ht=n.n(qt),Vt=n("5xCJ"),Kt=n.n(Vt),$t=n("V8o/"),Wt=n.n($t),zt=n("MOj0"),Qt=n.n(zt),Yt=n("BqbV"),Jt=n.n(Yt),Xt=n("0wwU"),Zt=n.n(Xt),en=n("9Kk6"),tn=n.n(en),nn=n("RAYA"),sn=n.n(nn),on=n("+8uX"),rn=n.n(on);wt.a.registerLanguage("c",Lt.a),wt.a.registerLanguage("csharp",kt.a),wt.a.registerLanguage("cpp",Bt.a),wt.a.registerLanguage("css",Ut.a),wt.a.registerLanguage("go",Ft.a),wt.a.registerLanguage("java",Ht.a),wt.a.registerLanguage("javascript",Kt.a),wt.a.registerLanguage("kotlin",Wt.a),wt.a.registerLanguage("php",Qt.a),wt.a.registerLanguage("python",Jt.a),wt.a.registerLanguage("r",Zt.a),wt.a.registerLanguage("ruby",tn.a),wt.a.registerLanguage("swift",sn.a),wt.a.registerLanguage("xml",rn.a);const an=["td","th","tr","table","tablebr"];var cn={keyboard:{bindings:{tab:{key:9,prefix:/\t$/,handler:()=>{}},"remove tab":{key:9,shiftKey:!0,prefix:/\t$/,handler:()=>{}},"list autofill":{prefix:/^\s*?(\d+\.|-|\*)$/},contextBackspace:{key:"Backspace",shiftKey:null,context:{format:an},handler:(e,t)=>{var n;if(!Array.isArray(t.format.td)&&(t.offset>0||!t.collapsed))return!0;let s=document.getSelection().baseNode;for(;!(null===(n=s.parentNode.classList)||void 0===n?void 0:n.contains("ql-editor"))&&![x.tagName.toLowerCase(),k.tagName.toLowerCase()].includes(s.parentNode.nodeName.toLowerCase());)s=s.parentNode;if(s.previousSibling&&"TABLE"===s.previousSibling.nodeName){document.getSelection().removeAllRanges();const e=document.createRange();return e.setStartBefore(s.previousSibling),e.setEnd(s.firstChild,0),document.getSelection().addRange(e),!1}return!!s.previousSibling||Array.isArray(t.format.td)&&(0===e.index||s.previousSibling.previousSibling)}},contextDelete:{key:"Delete",context:{format:an},handler:(e,t)=>{if(!Array.isArray(t.format.td)&&(t.suffix.length>0||!t.collapsed))return!0;let n=document.getSelection().baseNode;if("#text"===n.nodeName&&(n=n.parentNode),n.nextSibling&&"TABLE"===n.nextSibling.nodeName){document.getSelection().removeAllRanges();const e=document.createRange();return e.setStartAfter(n.lastChild),e.setEnd(n.nextSibling.nextSibling.firstChild,0),document.getSelection().addRange(e),!1}return!!n.nextSibling}},shiftDelete:{key:"Delete",shiftKey:"true",context:{format:an},handler:()=>!1},undoTables:{key:90,shortKey:"true",handler:(e,t)=>!t.format.table}}},history:{delay:1e3,maxStack:50,userOnly:!1},table:!0,syntax:{highlight:e=>wt.a.highlightAuto(e).value}};const ln=["·","o","§","v","Ø","ü"],dn=(e,t)=>e.compose((new O.a).retain(e.length(),t)),un=()=>Math.random().toString(36).slice(2,6),pn=(e,t,n)=>"string"!=typeof t?Object.keys(t).reduce(((e,n)=>pn(e,n,t[n])),e):e.reduce(((e,s)=>{if(s.attributes&&s.attributes[t])return e.push(s);if(s.attributes){const o=n?{[t]:n}:{};return e.insert(s.insert,{...o,...s.attributes})}const o=!n||"table-cell"!==t&&"table-head"!==t?{}:{[t]:n};return e.insert(s.insert,{...o,...s.attributes})}),new O.a),bn={selector:Node.ELEMENT_NODE,func:(e,t)=>{const n=[];return t.ops.forEach((e=>{e.insert&&"string"==typeof e.insert&&n.push({insert:e.insert})})),t.ops=n,t}},mn=e=>(t,n)=>{const s=n&&n.ops&&n.ops[n.ops.length-1],o=s&&"string"==typeof s.insert&&"\n"===s.insert.slice(-1);0!==n.ops.length&&o||n.insert("\n");return pn(n,`table-${e}`,`${e}-${un()}`)},gn=[{selector:"li",func:(e,t)=>t.ops.length?dn(t):new O.a([{insert:"\n"}])},{selector:"h1",func:(e,t)=>dn(t,{header:4})},{selector:"h2",func:(e,t)=>dn(t,{header:4})},{selector:"h3",func:(e,t)=>dn(t,{header:4})},{selector:"del",func:(e,t)=>dn(t,{strike:!0})},{selector:"pre",func:(e,t)=>dn(t,{underline:!1,"code-block":!0})},{selector:"strike",func:(e,t)=>dn(t,{strike:!0})},{selector:'span[style*="line-through"]',func:(e,t)=>dn(t,{strike:!0})},{selector:'span[style*="underline"]',func:(e,t)=>dn(t,{underline:!0})},{selector:"table",func:(e,t)=>{const n=`table-${un()}`,s=pn((e=>{const t=["table-container","tablebr","dummy"];return e.ops=e.ops.filter((e=>!e.attributes||t.reduce(((t,n)=>t&&!(n in e.attributes)),!0))),e})(t),"table-container",n);let o=" ";for(let e=0;e<s.ops.length;e++){const t=s.ops[e];if(t.attributes&&"table-container"in t.attributes){const n="\n"!==t.insert.length?t.insert:" \n";o+=" ",t.insert=o+"\n";const r=["table-container","table-row","table-cell","table-head"],i=Object.keys(t.attributes).filter((e=>!r.includes(e))).reduce(((e,n)=>(e[n]=t.attributes[n],e)),{});s.ops.splice(e,0,{insert:n,attributes:i}),e+=1,t.attributes=Object.keys(t.attributes).filter((e=>r.includes(e))).reduce(((e,n)=>(e[n]=t.attributes[n],e)),{})}}return s.ops.unshift({insert:"\n",attributes:{tablebr:n}}),s.ops=(e=>{var t;let n=null;for(let s=e.length-1;s>=0;s--){const o=e[s];o.attributes&&"table-container"in o.attributes&&(n===o.attributes["table-head"]||n===o.attributes["table-cell"]?e.splice(s,1):(n=null!==(t=o.attributes["table-head"])&&void 0!==t?t:o.attributes["table-cell"],e.splice(s+1,0,{insert:" ",attributes:{color:"#ffffff",dummy:"true"}})))}return e})(s.ops),s}},{selector:"tr",func:(e,t)=>pn(t,"table-row",`row-${un()}`)},{selector:"th",func:mn("head")},{selector:"td",func:mn("cell")},{selector:"p.MsoTitle",func:(e,t)=>dn(t,{header:4})},{selector:"p[class^=MsoListParagraph]",func:e=>{const t=ln.includes(e.textContent.charAt(0));let n=e.textContent.trim();const s=t?n.indexOf("node.textContent.charAt(0)")+2:n.indexOf(".")+1;n=n.substring(s,e.textContent.length).replace(/\n/g,"").replace(/\u00a0/g,"").trim();let o=0;const r=e.getAttribute("style");if(r){const e=r.match(/level(\d+)/);e&&(o=Number(e[1])-1)}return new O.a([{insert:n},{insert:"\n",attributes:{list:t?"bullet":"ordered",indent:o}}])}}],hn=e=>{const t=e.filter((e=>e&&e.formatter&&"embed"===e.formatter.type)).map((e=>e.matchers));return(e,n)=>{const s=n&&n.ops&&n.ops[n.ops.length-1];return!(s&&"string"==typeof s.insert&&"\n"===s.insert.slice(-1))&&e.nextSibling&&(e=>t.length&&e.parentNode&&Array.from(e.parentNode.querySelectorAll(t)).indexOf(e)>-1)(e.nextSibling)&&n.insert("\n"),n}};var fn=n("RPob");const On={EDITOR:"editor",TOOLBAR:"toolbar"},En={CTRL:"ctrlKey",ALT:"altKey",SHIFT:"shiftKey",META:"metaKey"};class yn{static hasModifierKey(e){return Object.keys(En).some((t=>e[En[t]]))}static hasRegularKey(e){return!!e.keyCode}constructor(){this.keyDownEventScope=On.EDITOR,this.keyDownHandlers=[],this.enableEditorScope=this.enableEditorScope.bind(this),this.enableToolbarScope=this.enableToolbarScope.bind(this),this.inToolbarScope=this.inToolbarScope.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this),this.addKeyDownHandler=this.addKeyDownHandler.bind(this)}enableEditorScope(){this.keyDownEventScope=On.EDITOR}enableToolbarScope(){this.keyDownEventScope=On.TOOLBAR}inToolbarScope(){return this.keyDownEventScope===On.TOOLBAR}handleKeyDown(e){let t=!1;const n=this.constructor.hasModifierKey(e);return this.keyDownHandlers.forEach((s=>{s.scope!==this.keyDownEventScope||s.keyCode!==e.keyCode||(s.modifierName||n)&&!e[s.modifierName]||(s.callback(e),t=!0)})),t}addKeyDownHandler(e,t,n,s){return this.keyDownHandlers.push({keyCode:e,modifierName:t,callback:n,scope:s}),()=>{this.keyDownHandlers=this.keyDownHandlers.filter((o=>!(o.keyCode===e&&o.modifierName===t&&o.callback===n&&o.scope===s)))}}}function In(e){e.stopImmediatePropagation(),e.stopPropagation()}function Cn(e){return e.preventDefault(),e.stopImmediatePropagation(),e.stopPropagation(),!1}const vn=["insertLocalFile","math","image","video"];var Sn=(e,t,n)=>{const s=function(e){return e.reduce(((e,t)=>e.some((e=>e.pluginId===t.pluginId))?e:e.concat(t)),[])}([].concat(...e));return function(e){const t=vn.map((t=>e.findIndex((e=>e.pluginId===t))));if(t.length>0)for(let n=0;n<vn.length;n++)if(-1!==t[n]&&vn[n]!==e[n].pluginId){const s=e[n];e[n]=e[t[n]],e[t[n]]=s}}(s),function(e,t){e.forEach((e=>{e.fileDropHandler&&t.registerDropHandler(e.fileDropHandler)}))}(s,n),s.filter((e=>e.buttonConfig&&e.buttonConfig.checkAvailabilityAsPromise)).forEach((e=>{const n=e.buttonConfig;delete e.buttonConfig,n.checkAvailabilityAsPromise().then((s=>{s&&(e.buttonConfig=n,t())}))})),s};var jn=(e,t)=>{const n={...e};return n.attachment&&t.insert&&t.insert["embedded-app"]&&delete n.attachment,e["embedded-app"]&&t.insert&&t.insert.attachment&&delete n["embedded-app"],n};var Tn=(e,t,n)=>{setTimeout((()=>{const s="bb-editor-modal";if(document.querySelector("div.bb-editor-modal"))return;const r=document.createElement("div");var a,c;r.classList.add(s),t.bbEditorId&&(r.id=t.bbEditorId),document.body.appendChild(r),o.a.render(i.a.createElement(ge.AnalyticsJssThemeProvider,{cssReset:"none",isRtl:n.isRtl,zIndex:{modal:1350}},i.a.createElement(l.a,{...n},i.a.createElement(e,{destroy:(a=r,c=t,()=>{o.a.unmountComponentAtNode(a),a.remove(),c.applyChange&&c.applyChange()}),...t}))),r)}),250)};var An=function(e,t,n){const s=[];let o=t;function r(e,t){return n(!0),Tn(e,t,o)}return{setLocaleProps:e=>{o=e},onFileDrop:t=>{if(t.preventDefault(),0===s.length)return;const n=[...t.dataTransfer.files];s.forEach((t=>{t(n,e,r,o.locale)})),function(e){e.dataTransfer.files?e.dataTransfer.files.clear():e.dataTransfer.clearData()}(t)},onFileDragOver:e=>{e.preventDefault()},registerDropHandler:e=>{"function"==typeof e&&s.findIndex((t=>t===e))<0&&s.push(e)},hasDropHandlers:()=>s.length>0}};let _n=!1;var Rn=e=>{if(!_n)return!1;const t=Array.from(document.querySelectorAll(".bb-editor-root")).find((t=>t.contains(e)));return t&&t.shouldEnableDemoMashup};var Nn=n("t3aq");const wn=a.shape({service:Nn.e,indexMap:a.shape({get:a.func,has:a.func,set:a.func})}),Dn={service:null,indexMap:new Map};var Ln=function(e,t,n,s){let o=t.update?t.update.index:t.index,r=t.update?t.update.length:t.length;if(!e)return void n.setSelection(o,r,m.a.sources.USER);const i=Array.isArray(e)?e:[e];if("object"==typeof t.raw&&i.length>0&&!t.update){const e=t.raw.index,s=t.raw.length,a=i.reduce(((e,t)=>(Object.keys("object"==typeof t.format?t.format:t).forEach((t=>e[t]=!0)),e)),{}),c=Object.keys(n.getFormat(e,s)),l=c.length>0&&c.some((e=>e in a));i.length>0&&i.some((e=>!!e.insert))&&!l&&0===s&&(o=e,r=s)}i.forEach((e=>{const t=!!e.insert,i=t&&r>0,a="string"==typeof e.insert?e.insert:"",c=a.length>0,l="object"==typeof e.format?e.format:{},d=Object.keys(l).length>0;if(i&&n.deleteText(o,r,m.a.sources.SILENT),t&&c&&!d)n.insertText(o,a),o+=a.length,r=0,n.setSelection(o,r,m.a.sources.USER);else if(d){const e=Object.keys(l).filter((e=>"object"!=typeof l[e])),i=Object.keys(l).filter((e=>"object"==typeof l[e])),d=i.length>0?i.shift():null,b=d&&l[d];if(t&&c){if(d){if(n.insertText(o,a,d,b,m.a.sources.USER),"latex"===d){const e=n.getFormat(o,a.length),t=Object.keys(e).filter((e=>"latex"!==e)).reduce(((e,t)=>(e[t]=!1,e)),{});n.formatText(o,a.length,t,m.a.sources.SILENT)}}else n.insertText(o,a,m.a.sources.USER);r=a.length,n.setSelection(o,r,m.a.sources.USER)}else t&&!c&&(n.insertEmbed(o,d,b,m.a.sources.USER),o+=1,r=0,n.setSelection(o,r,m.a.sources.USER),d&&n.format(d,!1,m.a.sources.USER),(/firefox/i.test(navigator.userAgent)||/^((?!chrome|android).)*safari/i.test(navigator.userAgent))&&(u=n.container,p=()=>n.focus(),setTimeout((()=>{const e=document.createElement("input");e.style.width=0,e.style.height=0,e.style.opacity=0,e.setAttribute("aria-hidden","true"),e.tabIndex=-1,u.appendChild(e),e.focus(),e.remove(),p()}),0)));e.length&&(r>0||!t)&&e.forEach((e=>{const t=l[e];n.format(e,t,m.a.sources.USER)})),t&&c?(o+=a.length,r=0,n.setSelection(o,r,m.a.sources.USER),d?n.insertText(o," ",d,!1,m.a.sources.USER):n.insertText(o," ",m.a.sources.USER),n.deleteText(o,1,m.a.sources.USER),d&&(n.format(d,!1,m.a.sources.USER),s(m.a.events.TEXT_CHANGE))):s(m.a.events.TEXT_CHANGE)}var u,p}))};const Pn="is-disabled";function kn(e,t){t&&!e.contains(Pn)?e.add(Pn):!t&&e.contains(Pn)&&e.remove(Pn)}const xn="is-read-only";function Bn(e,t){t&&!e.contains(xn)?e.add(xn):!t&&e.contains(xn)&&e.remove(xn)}const Mn="is-active";function Un(e,t){t&&!e.contains(Mn)?e.add(Mn):!t&&e.contains(Mn)&&e.remove(Mn)}const Gn="has-focus";function Fn(e,t){t&&!e.contains(Gn)?e.add(Gn):!t&&e.contains(Gn)&&e.remove(Gn)}const qn="has-error";function Hn(e,t){t&&!e.contains(qn)?e.add(qn):!t&&e.contains(qn)&&e.remove(qn)}const Vn="has-keyboard-focus";function Kn(e,t){t&&!e.contains(Vn)?e.add(Vn):!t&&e.contains(Vn)&&e.remove(Vn)}var $n=n("EGyI");var Wn=function e(t,n,s,o){const r=function(e,t,n){const s=[];return i.a.Children.forEach(e,((e,o)=>{(i.a.Component.isPrototypeOf(e.type)||"function"==typeof e.type&&null!==e.type({...e.props,...t,index:o,parentIndex:n})||!e.props.isHideable||e.props.isActive)&&s.push(e)})),s.length?s:null}(t);return i.a.Children.map(r,((t,r)=>{r+=o;const a={...n};return a.children=e(t.props.children,n,r,0),i.a.cloneElement(t,{...t.props,...a,index:r,parentIndex:s})}))};const zn={id:"editAttachment",type:"attachment"},Qn={id:"editYoutubeVideo",type:"embedded-app"},Yn=[zn,Qn];var Jn={maxFileMB:2500,maxFileSize:262144e4};const Xn={Bold:"bold",Italic:"italic",Underline:"underline",Superscript:"superscript",Strike:"strike",Subscript:"subscript",List:"list"},Zn=["font","bold","italic","size","color","strike","underline","superscript","subscript"],es=["header","list","align","lineheight","direction"],ts="small",ns="medium",ss="large",os="default",rs="minimal";var is="blurred",as="focused",cs="toolbar";var ls={externalLink:"resource/x-bb-externallink",bltiPlacement:"resource/x-bb-bltiplacement"};var ds={outgoing:{initContent:"init_content"},incoming:{pageLoaded:"page_loaded",canceled:"content_canceled",contentReady:"content_ready"}};var us=e=>{let t;const n=e.filter((e=>!(!t&&e.props.isHideable)||(e.props.pluginButtons.some((n=>!!(Yn.some((t=>e.id===t.id&&n.id===t.id))&&n.isActive&&n.isActive(e.props.editorFormat))&&(t=e,!0))),!1)));return t&&n.push(t),n};const ps=-1;class bs{constructor(e,t,n,s,o){this.currentMenuIndex=ps,this.currentSubmenuIndex=ps,this.isSubmenuToolbar=!1,this.isSubToolbarOpen=!1,this.hasAdditionalToolbar=!1,this.isAdditionalToolbarVisible=!1,this.hasDisabledButtons=!1,this.toolbarButtons=e,this.additionalToolbarButtons=[],this.addKeyDownHandler=t,this.onClose=n,this.onChange=s,this.onResetSubmenu=o,this.events=[],this.resetAllMenus=this.resetAllMenus.bind(this),this.selectFirstButton=this.selectFirstButton.bind(this),this.updateToolbarButtons=this.updateToolbarButtons.bind(this),this.getMenuButtonCount=this.getMenuButtonCount.bind(this),this.getSubmenuButtonCount=this.getSubmenuButtonCount.bind(this),this.getIndexes=this.getIndexes.bind(this),this.setIndexes=this.setIndexes.bind(this),this.registerEventListeners=this.registerEventListeners.bind(this),this.destroy=this.destroy.bind(this),this.moveLeft=this.moveLeft.bind(this),this.moveRight=this.moveRight.bind(this),this.moveUp=this.moveUp.bind(this),this.moveDown=this.moveDown.bind(this),this.openSubmenu=this.openSubmenu.bind(this),this.forceOpenSubmenu=this.forceOpenSubmenu.bind(this),this.setSubmenuToolbar=this.setSubmenuToolbar.bind(this),this.setSubToolbarOpen=this.setSubToolbarOpen.bind(this),this.closeAllMenus=this.closeAllMenus.bind(this),this.registerEventListeners()}updateToolbarButtons(e,t){t?this.additionalToolbarButtons=e:(this.toolbarButtons=e,this.hasDisabledButtons=this.toolbarButtons.some((e=>{var t;return null===(t=null==e?void 0:e.props)||void 0===t?void 0:t.isButtonDisabled})))}setOnAdditionalChange(e){this.onAdditionalChange=e}getMenuButtonCount(){return this.toolbarButtons?this.additionalToolbarButtons&&this.isAdditionalToolbarVisible?this.toolbarButtons.length+this.additionalToolbarButtons.length:this.toolbarButtons.length:0}getSubmenuButtonCount(e){var t,n;const s=this.toolbarButtons.length,o=s+this.additionalToolbarButtons.length;if(e>-1){if(e<s&&(null===(t=this.toolbarButtons[e])||void 0===t?void 0:t.props.children))return this.toolbarButtons[e].props.children.length;if(e>=s&&e<o&&(null===(n=this.additionalToolbarButtons[e])||void 0===n?void 0:n.props.children))return this.additionalToolbarButtons[e].props.children.length}return 0}getIndexes(){return{currentMenuIndex:this.currentMenuIndex,currentSubmenuIndex:this.currentSubmenuIndex}}setIndexes(e,t){this.currentMenuIndex=e,this.currentSubmenuIndex=t,this.onChange&&this.onChange(this.getIndexes()),this.onAdditionalChange&&this.onAdditionalChange(this.getIndexes())}resetAllMenus(...e){this.setIndexes(ps,ps),this.onClose&&this.onClose(...e)}selectFirstButton(){var e;this.isAdditionalToolbarVisible&&this.isSubToolbarOpen&&this.onResetSubmenu();let t=0;this.hasDisabledButtons&&(null===(e=this.toolbarButtons[0])||void 0===e?void 0:e.props.isButtonDisabled)&&(t=this.getNextAvailableItem(0,this.getMenuButtonCount())),this.setIndexes(t,ps)}registerEventListeners(){const{addKeyDownHandler:e}=this,{TOOLBAR:t}=On,{SHIFT:n}=En,s=(e,t="any")=>n=>{n.preventDefault(),n.stopPropagation();const{currentMenuIndex:s,currentSubmenuIndex:o}=this,r=this.getSubmenuButtonCount(s);return("any"===t||"main"===t&&o===ps||"main-no-children"===t&&o===ps&&0===r||"sub"===t&&o!==ps)&&e(n),!1};this.events.push(e(u.a.LEFT,null,s(this.moveLeft,"main"),t)),this.events.push(e(u.a.LEFT,null,s(this.moveUp,"sub"),t)),this.events.push(e(u.a.TAB,n,s(this.moveLeft,"main"),t)),this.events.push(e(u.a.TAB,n,s(this.moveUp,"sub"),t)),this.events.push(e(u.a.RIGHT,null,s(this.moveRight,"main"),t)),this.events.push(e(u.a.RIGHT,null,s(this.moveDown,"sub"),t)),this.events.push(e(u.a.TAB,null,s(this.moveRight,"main"),t)),this.events.push(e(u.a.TAB,null,s(this.moveDown,"sub"),t)),this.events.push(e(u.a.UP,null,s(this.moveLeft,"main"),t)),this.events.push(e(u.a.UP,null,s(this.moveUp,"sub"),t)),this.events.push(e(u.a.DOWN,null,s(this.moveDown,"sub"),t)),this.events.push(e(u.a.DOWN,null,s(this.moveDown,"main"),t)),this.events.push(e(u.a.DOWN,null,s(this.moveRight,"main-no-children"),t)),this.events.push(e(u.a.ESC,null,s(this.closeAllMenus),t))}destroy(){this.events.forEach((e=>e()))}getPreviousAvailableItem(e,t){var n,s;for(let t=e-1;t>=0;t--)if(!(null===(n=this.toolbarButtons[t])||void 0===n?void 0:n.props.isButtonDisabled))return t;for(let n=t-1;n>e;n--)if(!(null===(s=this.toolbarButtons[n])||void 0===s?void 0:s.props.isButtonDisabled))return n;return e}moveLeft(){let{currentMenuIndex:e}=this;const t=this.getMenuButtonCount();e=this.hasDisabledButtons?this.getPreviousAvailableItem(e,t):e-1<=-1?t-1:e-1,this.setIndexes(e,ps)}getNextAvailableItem(e,t){var n,s;for(let s=e+1;s<t;s++)if(!(null===(n=this.toolbarButtons[s])||void 0===n?void 0:n.props.isButtonDisabled))return s;for(let t=0;t<e;t++)if(!(null===(s=this.toolbarButtons[t])||void 0===s?void 0:s.props.isButtonDisabled))return t;return e}moveRight(){let{currentMenuIndex:e}=this;const t=this.getMenuButtonCount();e=this.hasDisabledButtons?this.getNextAvailableItem(e,t):e+1===t?0:e+1,this.setIndexes(e,ps)}moveUp(){const{currentMenuIndex:e}=this;let{currentSubmenuIndex:t}=this;const n=this.getSubmenuButtonCount(e);n&&(t=t-1<=-1?n-1:t-1),this.setIndexes(e,t)}moveDown(){const{currentMenuIndex:e}=this;let{currentSubmenuIndex:t}=this;const n=this.getSubmenuButtonCount(e);n&&(t=t+1===n?0:t+1),this.setIndexes(e,t)}openSubmenu(e){const{currentMenuIndex:t,currentSubmenuIndex:n}=this,s=this.getSubmenuButtonCount(e);s&&t!==e&&n!==ps||s&&n===ps?this.setIndexes(e,0):this.resetAllMenus()}forceOpenSubmenu(e,t){this.setIndexes(e,t)}setAdditionalToolbar(e){this.hasAdditionalToolbar=e}setAdditionalToolbarVisible(e){this.isAdditionalToolbarVisible=e}setSubmenuToolbar(e){this.isSubmenuToolbar=e}setSubToolbarOpen(e){this.isSubToolbarOpen=e}closeAllMenus(){const{currentMenuIndex:e,currentSubmenuIndex:t,isSubmenuToolbar:n,isSubToolbarOpen:s,isAdditionalToolbarVisible:o}=this;if(t===ps){if(n)return!this.isSubToolbarOpen&&o?void this.resetAllMenus(!0):void(this.onResetSubmenu&&this.onResetSubmenu());if(!s)return void this.resetAllMenus(!0)}this.setIndexes(e,ps)}}class ms extends i.a.Component{constructor(e){if(super(e),this.onNavigatorChange=this.onNavigatorChange.bind(this),e.sharedNavigator){this.navigator=e.sharedNavigator;const t=e.children.filter((e=>!e.props.isHideable));this.navigator.updateToolbarButtons(t,this.props.useSharedNavigator),this.navigator.setOnAdditionalChange(this.onNavigatorChange)}else this.navigator=new bs(e.children,e.addKeyDownHandler,e.toolbarActionComplete,this.onNavigatorChange,e.resetMenu),e.shareNavigator&&e.shareNavigator(this.navigator);this.state=this.navigator.getIndexes()}componentDidMount(){this.toolbarRoot.addEventListener("mousedown",Cn),this.props.isSubmenuToolbar&&this.props.hasKeyboardFocus&&this.navigator.selectFirstButton()}UNSAFE_componentWillReceiveProps(e){const{currentMenuIndex:t}=this.state,{hasKeyboardFocus:n,editorHasTableSelected:s}=e,{useSharedNavigator:o}=this.props;this.navigator.setSubmenuToolbar(this.props.isSubmenuToolbar),this.navigator.setSubToolbarOpen(this.props.isSubToolbarOpen),this.navigator.setAdditionalToolbar(o),this.navigator.setAdditionalToolbarVisible(s),this.props.hasKeyboardFocus!==n&&n&&!o?this.navigator.selectFirstButton():this.props.hasKeyboardFocus===n||n?!1===this.props.hasKeyboardFocus&&t!==ps&&this.navigator.resetAllMenus():this.navigator.resetAllMenus()}componentWillUnmount(){this.toolbarRoot.removeEventListener("mousedown",Cn),this.props.useSharedNavigator||this.navigator.destroy()}onNavigatorChange(e){this.toolbarRoot&&this.setState(e)}render(){const e={toolbarActionComplete:this.navigator.resetAllMenus,openSubmenu:this.navigator.openSubmenu,forceOpenSubmenu:this.navigator.forceOpenSubmenu,closeAllMenus:this.navigator.closeAllMenus};let t=0,n=[];this.props.useSharedNavigator?(n=this.props.children.filter((e=>!e.props.isHideable)),t=this.navigator.getMenuButtonCount()-n.length):n=this.props.children.filter((e=>!!e));const s=Wn(n,{...{...this.props,...this.state,...e}},null,t);this.navigator.updateToolbarButtons(us(s),this.props.useSharedNavigator);const{toolbarId:o,editorId:r,t:a}=this.props,c=Object(p.a)({"bb-editor-toolbar no-select":!0,"is-disabled":this.props.isDisabled,"is-hidden":this.props.isHidden,"bb-editor-submenu-toolbar":this.props.isSubmenuToolbar});return i.a.createElement("div",{className:c,role:"toolbar","aria-label":o?a(`bbmlEditor.toolbar.${o}.axAriaText`):"Text Formatting","aria-controls":r,ref:e=>{this.toolbarRoot=e}},s)}}ms.propTypes={children:c.a.array,addKeyDownHandler:c.a.func.isRequired,editorId:c.a.string,toolbarId:c.a.string,toolbarActionComplete:c.a.func.isRequired,hasKeyboardFocus:c.a.bool,isDisabled:c.a.bool,isRtl:c.a.bool,isSubmenuToolbar:c.a.bool,isSubToolbarOpen:c.a.bool,useSharedNavigator:c.a.bool},ms.defaultProps={children:null,editorId:null,toolbarId:null,hasKeyboardFocus:!1,isDisabled:!1,isRtl:!1,isSubmenuToolbar:!1,isSubToolbarOpen:!1,useSharedNavigator:!1};var gs=Object($n.a)(Object(he.withAnalytics)(ms));var hs={analyticsEventAugmentor:a.PropTypes.func.isRequired};const fs=()=>i.a.createElement("div",{className:"bb-editor-toolbar-button-separator"});var Os=n("7NIW");class Es extends i.a.Component{static newState(e){const t=e.isActive&&e.isActive(e.editorFormat),n=e.isButtonDisabled;return{isActive:t,isDisabled:n,hasKeyboardFocus:!n&&e.hasKeyboardFocus&&e.currentSubmenuIndex===ps&&e.currentMenuIndex===e.index||e.hasKeyboardFocus&&e.currentSubmenuIndex>ps&&e.currentMenuIndex===e.parentIndex&&e.currentSubmenuIndex===e.index,isSubmenuOpen:e.children&&e.currentMenuIndex===e.index&&e.currentSubmenuIndex>ps}}constructor(e){super(e),this.state=this.constructor.newState(e),this.focusOnCurrentButton=this.focusOnCurrentButton.bind(this),this.triggerAction=this.triggerAction.bind(this),this.containerClasses=this.containerClasses.bind(this),this.buttonClasses=this.buttonClasses.bind(this),this.buttonIconClasses=this.buttonIconClasses.bind(this),this.buttonNode=null,this.state.submenuStyles={}}componentDidMount(){this.focusOnCurrentButton(this.props)}UNSAFE_componentWillReceiveProps(e){const t=this.constructor.newState(e);this.setState(t,(()=>this.focusOnCurrentButton(e)))}componentDidUpdate(){this.adjustSubmenuPosition()}adjustMarginOffset(e){let t=e.substring(0,2);return"px"!==e.substring(2)&&(t=0),t=parseInt(t,10),t}adjustSubmenuPosition(){if(this.containerRef){const e=this.containerRef.getElementsByClassName("bb-editor-toolbar-submenu")[0];if(!e||this.adjustingMenu)return;const t=this.containerRef.getBoundingClientRect(),n=this.props.getEditorRect(),s=e.getBoundingClientRect(),o=t.bottom+s.height,r=window.innerHeight||window.screen.height||document.body.offsetHeight,i=t.top+window.scrollY-s.height>=0,a=o>r;let c={};n&&(s.left<n.left?c={right:s.left-n.left}:s.right>n.right&&(c={left:n.right-s.right}));const l=window.getComputedStyle(e).getPropertyValue("margin-bottom"),d=this.adjustMarginOffset(l);a&&s.top>=0&&i?(this.adjustingMenu=!0,this.setState({submenuStyles:{bottom:`${t.height}px`,top:`-${s.height+d}px`,...c}},(()=>{this.adjustingMenu=!1}))):Object.keys(c).length>0&&(this.adjustingMenu=!0,this.setState({submenuStyles:c},(()=>{this.adjustingMenu=!1})))}}focusOnCurrentButton(e){(e.currentMenuIndex===e.index&&e.currentSubmenuIndex===ps||e.currentMenuIndex===e.parentIndex&&e.currentSubmenuIndex===e.index)&&this.buttonNode&&this.buttonNode.focus()}triggerAction(e){if(e.preventDefault(),e.stopPropagation(),this.props.isDisabled||this.state.isDisabled||!this.props.onClick)this.props.isDisabled||this.state.isDisabled||this.setState({submenuStyles:{display:"relative"}},(()=>{this.props.setEditorFocusStateToolbar(!1),this.props.openSubmenu(this.props.parentIndex||this.props.index)}));else{const{buttonNode:e}=this,{isActive:t}=this.state,{editorFormat:n,editorLastContent:s,editorLastRawSelection:o,currentLocale:r,localize:i,isRtl:a}=this.props,c=(e,t)=>{this.props.applyChange(e,t),this.props.toolbarActionComplete(!e||this.props.hasKeyboardFocus)},l=e=>this.props.quillModuleAction(e),d=()=>this.props.closeAllMenus(),u=()=>{this.props.setEditorFocusStateToolbar(!0)},p=(e,t)=>(this.props.setEditorFocusStateToolbar(!0),Tn(e,t,i.getLocalePropsForClone()));this.props.isSubmenu&&this.props.forceOpenSubmenu(this.props.index,0);const b=this.props.bbEditorId;this.props.onClick({applyChange:c,quillModuleAction:l,closeAllMenus:d,useSharedNavigator:!0,editorFormat:n,editorLastContent:s,editorLastRawSelection:o,isActive:t,locale:r,preventBlur:u,showModal:p,buttonNode:e,isRtl:a,bbEditorId:b})}return!1}containerClasses(){return Object(p.a)({"bb-editor-toolbar-button-container":!0,"bb-editor-toolbar-dropdown-container":this.state.isSubmenuOpen})}buttonClasses(){return Object(p.a)({"bb-editor-toolbar-button":!0,"bb-editor-toolbar-button--left-separator":this.props.leftSeparator,"bb-editor-toolbar-button--double-separator":this.props.doubleSeparator,"bb-editor-toolbar-button--non-separator":!this.props.separator&&!this.props.doubleSeparator&&!this.props.leftSeparator,"bb-editor-toolbar-button--main":null===this.props.parentIndex,"bb-editor-submenu-is-open":this.state.isSubmenuOpen||this.props.isToolbarOpen,"bb-editor-submenu-is-closed":!this.state.isSubmenuOpen||!this.props.isToolbarOpen,"is-disabled":this.props.isDisabled||this.state.isDisabled,"is-focused":this.state.hasKeyboardFocus,"bb-editor-toolbar-text":this.props.textOnly||!(this.props.iconName||this.props.iconComponent),"bb-editor-toolbar-icon-text":!this.props.textOnly&&!this.props.iconOnly&&(this.props.iconName||this.props.iconComponent),"bb-editor-toolbar-dropdown":this.props.children||this.props.isSubmenu&&!this.props.hiddenChevron,"bb-editor-submenu-button":this.props.isSubmenu,"bb-editor-submenu-button-active":this.props.isToolbarOpen,padded:!this.props.iconOnly&&!this.props.children,"text-active":this.state.isActive||this.state.isSubmenuOpen,[`${this.props.cssClass}-active`]:this.state.isActive,[`${this.props.cssClass}-normal`]:!this.state.isActive})}buttonIconClasses(){return Object(p.a)({icon:!!this.props.iconName,[`${this.props.iconName}-active-icon`]:this.props.iconName&&(this.state.isActive||this.state.isSubmenuOpen)||this.props.isToolbarOpen,[`${this.props.iconName}-normal-icon`]:this.props.iconName&&!this.state.isActive,"color-picker":this.props.isColorPicker})}buttonIcon(){if(null!==this.props.iconComponent){const e=this.props.iconComponent;return i.a.createElement(e,null)}return this.props.isColorPicker?i.a.createElement(Se,{color:this.props.color,cssClass:this.props.cssClass,editorFormat:this.props.editorFormat}):i.a.createElement(Os.a,null)}haspopup(){return this.props.isDialog?"dialog":this.props.children?!!this.props.children:null}innerButton(){const{isSubmenuOpen:e,isActive:t}=this.state,{analyticsEventAugmentor:n,children:s,localize:o,isSubmenu:r,isDialog:a,isToolbarOpen:c,isSubToolbarOpen:l,parentIndex:d,toggleButton:u}=this.props,p=this.buttonClasses(),b=this.buttonIconClasses(),m=this.haspopup(),g=n(he.AnalyticsEventTypes.CLICK_EVENT,this.triggerAction,`editor.toolbar.${this.props.id}.button`);return i.a.createElement("button",{tabIndex:0===this.props.index?"0":"-1","data-analytics-id":`editor.toolbar.${this.props.id}.button`,className:p,"aria-checked":d?t:null,"aria-expanded":r||s?e||c:null,"aria-controls":r&&(e||l)?this.props.id:null,"aria-haspopup":m,"aria-pressed":d||r||e||s||a||!u?null:!!t,"aria-label":o.translate(`bbmlEditor.toolbar.${this.props.id}.axAriaText`),onClick:g,ref:e=>{this.buttonNode=e}},i.a.createElement("span",{"aria-hidden":"true"},this.props.textOnly||i.a.createElement("span",{className:b},this.buttonIcon()),this.props.iconOnly||o.translate(`bbmlEditor.toolbar.${this.props.id}.label`)))}render(){const{isSubmenuOpen:e,isActive:t,isToolbarOpen:n}=this.state,{localize:s,isHideable:o,separator:r}=this.props,a=this.containerClasses(),c=this.innerButton();return o&&!t?null:i.a.createElement("div",{role:"presentation",className:a,ref:e=>{this.containerRef=e}},(this.props.iconOnly||this.children)&&i.a.createElement(ge.AnalyticsTooltip,{placement:"top",title:s.translate(`bbmlEditor.toolbar.${this.props.id}.label`)},c),!(this.props.iconOnly||this.children)&&c,e&&!n&&this.props.children&&i.a.createElement("ul",{id:this.props.id,role:"menu",className:"bb-editor-toolbar bb-editor-toolbar-submenu","aria-orientation":"horizontal",tabIndex:"-1",style:this.state.submenuStyles},this.props.children.map((e=>i.a.createElement("li",{key:e.key,role:"menuitemradio","aria-checked":e.props.isActive,tabIndex:"-1"},e)))),r?i.a.createElement(fs,null):null)}}Es.propTypes={children:c.a.array,cssClass:c.a.string,iconName:c.a.string,iconComponent:c.a.object,iconOnly:c.a.bool,toggleButton:c.a.bool,isDisabled:c.a.bool,isHideable:c.a.bool,isRtl:c.a.bool,isSubmenu:c.a.bool,isToolbarOpen:c.a.bool,textOnly:c.a.bool,index:c.a.number,parentIndex:c.a.number,onClick:c.a.func,applyChange:c.a.func,quillModuleAction:c.a.func,toolbarActionComplete:c.a.func,openSubmenu:c.a.func,editorFormat:c.a.shape(),editorLastContent:c.a.arrayOf(c.a.shape({insert:c.a.oneOfType([c.a.string,c.a.object]),attributes:c.a.instanceOf(Object)})),editorLastRawSelection:c.a.shape(),id:c.a.string.isRequired,hasKeyboardFocus:c.a.bool,setEditorFocusStateToolbar:c.a.func,getEditorRect:c.a.func,isColorPicker:c.a.bool,color:c.a.string,...hs},Es.defaultProps={children:null,cssClass:"no-format",iconName:null,iconComponent:null,iconOnly:!1,toggleButton:!0,isDisabled:!1,isHideable:!1,isRtl:!1,isSubmenu:!1,isToolbarOpen:!1,textOnly:!1,index:-1,parentIndex:null,onClick:null,applyChange:null,quillModuleAction:null,toolbarActionComplete:null,openSubmenu:null,editorFormat:{},editorLastContent:[],editorLastRawSelection:new g.a(0,0),hasKeyboardFocus:!1,setEditorFocusStateToolbar:null,getEditorRect:()=>null,isColorPicker:!1,color:null};var ys=Object(b.a)(Object(he.withAnalytics)(Es)),Is=n("dCsl"),Cs=n("IDjD"),vs=n("Erss"),Ss=n("OlM5"),js=n("Gcgj"),Ts=n("2KZS"),As=n("+oSd"),_s=n("rCvS"),Rs=n("qARj"),Ns=n("SU3S"),ws=n("oaIO"),Ds=n("9kWU"),Ls=n("VWNt"),Ps=n("v8lE"),ks=n("4LQ0"),xs=n("50lD"),Bs=n("ClUo"),Ms=n("ekC5"),Us=n("S2uY"),Gs=n("zDWs"),Fs=n("w7NB"),qs=n("CTKo"),Hs=n("pVlL"),Vs=n("FIeR"),Ks=n("g0Xa"),$s=n("QHAa"),Ws=n("0y+d"),zs=n("HbHr"),Qs=n("Sc8a"),Ys=n("Gj4o"),Js=n("ApVX"),Xs=n("uIiL"),Zs=n("1EAZ"),eo=n("zNOU"),to=n("VQ4P"),no=n("0x+l");function so(e){const{onChange:t,onEnterKey:n,type:s,value:o,minValue:a,maxValue:c}=e,l=Object(to.a)(),[d,u]=Object(r.useState)(o),p=e=>!(e>c||e<a),b=()=>{const e=d+1;p(e)&&(u(e),t(e))},m=()=>{const e=d-1;p(e)&&(u(e),t(e))};return i.a.createElement("span",{className:"table-dialog-input-spinner"},i.a.createElement(ge.AnalyticsIconButton,{"aria-label":(()=>{let e="";return e="column"===s?"bbmlEditor.toolbar.table-dialog-columns-spinner-minus-button.label":"bbmlEditor.toolbar.table-dialog-rows-spinner-minus-button.label",l(e)})(),onClick:m},i.a.createElement(no.Minus,null)),i.a.createElement(ge.AnalyticsTextField,{id:`analyticTextField-${s}`,className:"table-dialog-input-spinner-text-field",placeholder:String(d),value:d,onChange:e=>{const n=Number(e.target.value);if(!Number.isNaN(n))if(p(n))u(n),t(n);else if(n>c){const e=c.toString().length;let s=Number(n.toString().substr(0,e-1));e<n.toString().length&&(s=c),u(s),t(s)}},onKeyDown:e=>{switch(e.key){case"Enter":e.preventDefault(),e.stopPropagation(),n();break;case"ArrowUp":b();break;case"ArrowDown":m()}}}),i.a.createElement(ge.AnalyticsIconButton,{"aria-label":(()=>{let e="";return e="column"===s?"bbmlEditor.toolbar.table-dialog-columns-spinner-add-button.label":"bbmlEditor.toolbar.table-dialog-rows-spinner-add-button.label",l(e)})(),onClick:b},i.a.createElement(no.Add,null)))}so.propTypes={onChange:c.a.func,onEnterKey:c.a.func,type:c.a.string,value:c.a.number,minValue:c.a.number,maxValue:c.a.number},so.defaultProps={onChange:null,onEnterKey:null,type:"",value:1,minValue:1,maxValue:10};var oo=Object(he.withAnalytics)(so);function ro(e){const t="table-dialog",{isEditingTable:n,quillModuleAction:s,editProps:o,closeAllMenus:a}=e,c=Object(to.a)(),[l,d]=Object(r.useState)({checkboxColumn:o.headerColumn,checkboxRow:o.headerRow,numberColumns:o.columns,numberRows:o.rows}),u=()=>{a(),e.destroy()},p=()=>{s({module:"quill.table",action:"saved-selection"}),n?(s({module:"quill.table",action:"edit-table",rowCount:l.numberRows,columnCount:l.numberColumns}),e.editProps.headerColumn!==l.checkboxColumn&&(s({module:"quill.table",action:"set-header-col",setHeader:l.checkboxColumn}),l.checkboxRow||s({module:"quill.table",action:"set-header-column",setHeader:l.checkboxColumn})),e.editProps.headerRow!==l.checkboxRow&&(s({module:"quill.table",action:"set-header-row",setHeader:l.checkboxRow}),l.checkboxColumn||s({module:"quill.table",action:"set-header-row",setHeader:l.checkboxRow})),s({module:"quill.table",action:"reset-table-subtoolbar"})):(s({module:"quill.table",action:"insert-table",rowCount:l.numberRows,columnCount:l.numberColumns,headerRow:l.checkboxRow,headerColumn:l.checkboxColumn}),a()),u()};return i.a.createElement(ge.AnalyticsDialog,{open:!0,maxWidth:"sm",onClose:u,"aria-labelledby":`${t}-dialog-title`},i.a.createElement(ge.AnalyticsDialogTitle,{onClose:u,id:`${t}-dialog-title`},c(n?"bbmlEditor.toolbar.table-dialog-title-edit.label":"bbmlEditor.toolbar.table-dialog-title-insert.label")),i.a.createElement(ge.AnalyticsDialogContent,null,i.a.createElement("label",{htmlFor:"analyticTextField-column",className:`${t}-columns-content`},i.a.createElement("span",null,c("bbmlEditor.toolbar.table-dialog-columns.label")),i.a.createElement(oo,{onChange:e=>{d({...l,numberColumns:e})},type:"column",value:l.numberColumns,maxValue:n?Math.max(10,o.columns):10,onEnterKey:p})),i.a.createElement("label",{htmlFor:"analyticTextField-row",className:`${t}-rows-content`},c("bbmlEditor.toolbar.table-dialog-rows.label"),i.a.createElement(oo,{onChange:e=>{d({...l,numberRows:e})},type:"row",value:l.numberRows,maxValue:n?Math.max(10,o.rows):10,onEnterKey:p})),i.a.createElement("span",{className:`${t}-header-selector`},i.a.createElement(ge.AnalyticsFormControlLabel,{label:c("bbmlEditor.toolbar.table-dialog-headers-row.label"),control:i.a.createElement(ge.AnalyticsCheckbox,{checked:l.checkboxRow,id:"dialogCheckboxRow"}),htmlFor:"dialogCheckboxRow",onChange:e=>{(e=>{d({...l,checkboxRow:e.target.checked})})(e)}}),i.a.createElement(ge.AnalyticsFormControlLabel,{label:c("bbmlEditor.toolbar.table-dialog-headers-column.label"),control:i.a.createElement(ge.AnalyticsCheckbox,{checked:l.checkboxColumn,id:"dialogCheckboxColumn"}),htmlFor:"dialogCheckboxColumn",onChange:e=>{(e=>{d({...l,checkboxColumn:e.target.checked})})(e)}}),i.a.createElement(ge.AnalyticsTooltip,{className:"info-tooltip",title:c("bbmlEditor.toolbar.table-dialog-tooltip.label"),placement:"top"},i.a.createElement(ge.AnalyticsIconButton,{className:"info-tooltip","aria-label":c("bbmlEditor.toolbar.table-dialog-tooltip.axAriaText")},i.a.createElement(no.Information,null))))),i.a.createElement(ge.AnalyticsDialogActions,null,i.a.createElement(ge.AnalyticsDefaultButton,{onClick:u},c("bbmlEditor.buttons.cancel")),i.a.createElement(ge.AnalyticsPrimaryButton,{onClick:p,id:"create-edit-table-primary-btn"},c(n?"bbmlEditor.buttons.save":"bbmlEditor.buttons.insert"))))}ro.propTypes={quillModuleAction:c.a.func.isRequired,closeAllMenus:c.a.func.isRequired,isEditingTable:c.a.bool,editProps:c.a.shape({columns:c.a.number,rows:c.a.number,headerColumn:c.a.bool,headerRow:c.a.bool})},ro.defaultProps={isEditingTable:!1,editProps:{columns:1,rows:1,headerColumn:!1,headerRow:!1}};var io=Object(he.withAnalytics)(ro),ao=n("+Koh");const co={format:{header:!1,list:!1}},lo={toolbarId:"tableFormattingToolbar"},uo={toolbarId:"textStylingToolbar"},po={toolbarId:"textOptionsToolbar"},bo={toolbarId:"listFormattingToolbar"},mo={cssClass:"alignment",iconName:"alignment",iconComponent:Ks.a,id:"alignment",key:"alignment"},go={cssClass:"alignLeft",iconName:"alignLeft",iconComponent:Ks.a,id:"align-left",key:"alignLeft",onClick:({applyChange:e})=>e(xe.b.createChange(Be)),isActive:e=>e.align===Be||!e.align},ho={cssClass:"alignCenter",iconName:"alignCenter",iconComponent:$s.a,id:"align-center",key:"alignCenter",onClick:({applyChange:e})=>e(xe.b.createChange(Me)),isActive:e=>e.align===Me},fo={cssClass:"alignRight",iconName:"alignRight",iconComponent:Ws.a,id:"align-right",key:"alignRight",onClick:({applyChange:e})=>e(xe.b.createChange(Ue)),isActive:e=>e.align===Ue},Oo={cssClass:"alignJustify",iconName:"alignJustify",iconComponent:zs.a,id:"align-justify",key:"alignJustify",onClick:({applyChange:e})=>e(xe.b.createChange(Ge)),isActive:e=>e.align===Ge},Eo={cssClass:"text-styling",iconName:"Type",iconComponent:qs.a,id:"textStyling",key:"textStyling"},yo={cssClass:"text-style",iconName:"type-size",iconComponent:Ss.a,id:"textStyle",key:"textStyle"},Io={cssClass:"text-font",iconName:"text",iconComponent:Fs.a,id:"textFont",key:"textFont"},Co={cssClass:"arial text-font",id:"font-arial",key:"fontArial",onClick:({applyChange:e})=>e(Y.a.createChange(J)),isActive:e=>e.font===J},vo={cssClass:"comic-sans text-font",id:"font-comic-sans",key:"fontComicSans",onClick:({applyChange:e})=>e(Y.a.createChange(X)),isActive:e=>e.font===X},So={cssClass:"courier-new text-font",id:"font-courier-new",key:"fontCourierNew",onClick:({applyChange:e})=>e(Y.a.createChange(Z)),isActive:e=>e.font===Z},jo={cssClass:"noto text-font",id:"font-noto",key:"fontNoto",onClick:({applyChange:e})=>e(Y.a.createChange(ee)),isActive:e=>e.font===ee},To={cssClass:"open-sans text-font",id:"font-open-sans",key:"fontOpenSans",onClick:({applyChange:e})=>e(Y.a.createChange(te)),isActive:e=>e.font===te||!e.font},Ao={cssClass:"times-new-roman text-font",id:"font-TNR",key:"fontTNR",onClick:({applyChange:e})=>e(Y.a.createChange(ne)),isActive:e=>e.font===ne},_o={cssClass:"verdana text-font",id:"font-verdana",key:"fontVerdana",onClick:({applyChange:e})=>e(Y.a.createChange(se)),isActive:e=>e.font===se},Ro={cssClass:"lineHeight",iconName:"lineHeight",iconComponent:Qs.a,id:"lineHeight",key:"lineHeight"},No={cssClass:"lineHeight1",id:"lineHeight-1",key:"lineHeight1",onClick:({applyChange:e})=>e(st.createChange("1")),isActive:e=>"1"===e.lineheight},wo={cssClass:"lineHeight115",id:"lineHeight-115",key:"lineHeight115",onClick:({applyChange:e})=>e(st.createChange(Ze)),isActive:e=>e.lineheight===Ze},Do={cssClass:"lineHeight150",id:"lineHeight-150",key:"lineHeight150",onClick:({applyChange:e})=>e(st.createChange(et)),isActive:e=>e.lineheight===et||!e.lineheight},Lo={cssClass:"lineHeight2",id:"lineHeight-2",key:"lineHeight2",onClick:({applyChange:e})=>e(st.createChange("2")),isActive:e=>"2"===e.lineheight},Po={cssClass:"text-size",iconName:"type-size",iconComponent:Hs.a,id:"textSize",key:"textSize"},ko={cssClass:"text-size-num",id:"size-10px",key:"size10px",onClick:({applyChange:e})=>e(re.a.createChange(ie)),isActive:e=>e.size===ie},xo={cssClass:"text-size-num",id:"size-12px",key:"size12px",onClick:({applyChange:e})=>e(re.a.createChange(ae)),isActive:e=>e.size===ae},Bo={cssClass:"text-size-num",id:"size-14px",key:"size14px",onClick:({applyChange:e})=>e(re.a.createChange(ce))},Mo={cssClass:"text-size-num",id:"size-18px",key:"size18px",onClick:({applyChange:e})=>e(re.a.createChange(le))},Uo={cssClass:"text-size-num",id:"size-24px",key:"size24px",onClick:({applyChange:e})=>e(re.a.createChange(de)),isActive:e=>e.size===de},Go={cssClass:"text-size-num",id:"size-36px",key:"size36px",onClick:({applyChange:e})=>e(re.a.createChange(ue)),isActive:e=>e.size===ue},Fo={cssClass:"text-size-num",id:"size-48px",key:"size48px",onClick:({applyChange:e})=>e(re.a.createChange(pe)),isActive:e=>e.size===pe},qo={cssClass:"color-picker",iconName:"paint-bucket",iconComponent:As.a,id:"color-picker",key:"colorPicker"},Ho={cssClass:"color-black",iconName:"color-black",id:"color-picker-black",key:"color-black",isColorPicker:!0,color:fe,onClick:({applyChange:e})=>e(je.createChange(fe))},Vo={cssClass:"color-grey",iconName:"color-grey",id:"color-picker-grey",key:"color-grey",isColorPicker:!0,color:Oe,onClick:({applyChange:e})=>e(je.createChange(Oe))},Ko={cssClass:"color-purple",iconName:"color-purple",id:"color-picker-purple",key:"color-purple",isColorPicker:!0,color:Ee,onClick:({applyChange:e})=>e(je.createChange(Ee))},$o={cssClass:"color-blue",iconName:"color-blue",id:"color-picker-blue",key:"color-blue",isColorPicker:!0,color:ye,onClick:({applyChange:e})=>e(je.createChange(ye))},Wo={cssClass:"color-green",iconName:"color-green",id:"color-picker-green",key:"color-green",isColorPicker:!0,color:Ie,onClick:({applyChange:e})=>e(je.createChange(Ie))},zo={cssClass:"color-red",iconName:"color-red",id:"color-picker-red",key:"color-red",isColorPicker:!0,color:Ce,onClick:({applyChange:e})=>e(je.createChange(Ce))},Qo={cssClass:"direction-LTR",id:"direction-LTR",key:"direction-LTR",iconName:"left-to-right",iconComponent:Zs.a,onClick:({applyChange:e})=>e(ot.a.createChange(it))},Yo={cssClass:"direction-RTL",id:"direction-RTL",key:"direction-RTL",iconName:"right-to-left",iconComponent:eo.a,onClick:({applyChange:e})=>e(ot.a.createChange(rt))},Jo={cssClass:"list-style",iconName:"bulleted-list",iconComponent:_s.a,id:"listStyleMenu",key:"listStyleMenu"},Xo={cssClass:"undo-action",iconName:"undo",iconComponent:Ys.a,id:"undo",key:"undo",toggleButton:!1,onClick:({quillModuleAction:e})=>e({module:"quill.history",action:"undo"})},Zo={cssClass:"clear-format",iconName:"erase",iconComponent:Js.a,id:"clearFormat",key:"clearFormat",toggleButton:!1,onClick:({quillModuleAction:e})=>e({action:"clearFormat"})},er={cssClass:"syntax-action",iconName:"syntax",iconComponent:Xs.a,id:"syntax",key:"syntax",toggleButton:!0,onClick:({isActive:e,applyChange:t})=>t(at.createChange(!e)),isActive:e=>e["code-block"]},tr={cssClass:"format-style",iconName:"format-text",iconComponent:ao.Menu,id:"formatStyleMenu",key:"formatStyleMenu"},nr={cssClass:"insert-content",iconName:"add",iconComponent:Is.a,id:"insertContent",key:"insertContent"},sr=[{cssClass:"header-four",id:"title",key:"title",tag:"h4",onClick:({isActive:e,applyChange:t})=>t(e?co:Q.createChange(4)),isActive:e=>4===e.header},{cssClass:"header-five",id:"header",key:"header",tag:"h5",onClick:({isActive:e,applyChange:t})=>t(e?co:Q.createChange(5)),isActive:e=>5===e.header},{cssClass:"header-six",id:"subheader",key:"subheader",tag:"h6",onClick:({isActive:e,applyChange:t})=>t(e?co:Q.createChange(6)),isActive:e=>6===e.header},{cssClass:"unstyled",id:"paragraph",key:"paragraph",tag:"p",onClick:({applyChange:e})=>e(co),isActive:e=>!e.header&&!e.list}],or=sr.map((({cssClass:e,id:t,tag:n,key:s})=>({cssClass:e,id:t,tag:n,key:s}))),rr={cssClass:"bold",iconName:"bold",iconComponent:Cs.a,id:"bold",key:"bold",onClick:({isActive:e,applyChange:t})=>t(qe.createChange(!e)),isActive:e=>e.bold},ir={cssClass:"italic",iconName:"italicize",iconComponent:js.a,id:"italic",key:"italic",onClick:({isActive:e,applyChange:t})=>t(Ve.createChange(!e)),isActive:e=>e.italic},ar={cssClass:"underline",iconName:"underline",iconComponent:Vs.a,id:"underline",key:"underline",onClick:({isActive:e,applyChange:t})=>t($e.createChange(!e)),isActive:e=>e.underline},cr={cssClass:"superscript",iconName:"superscript",iconComponent:ws.a,id:"superscript",key:"superscript",onClick:({isActive:e,applyChange:t})=>t(Ye.createChange(!e)),isActive:e=>e.superscript},lr={cssClass:"subscript",iconName:"subscript",iconComponent:Ns.a,id:"subscript",key:"subscript",onClick:({isActive:e,applyChange:t})=>t(Xe.createChange(!e)),isActive:e=>e.subscript},dr={cssClass:"strike",iconName:"strikethrough",iconComponent:Rs.a,id:"strike",key:"strike",onClick:({isActive:e,applyChange:t})=>t(ze.createChange(!e)),isActive:e=>e.strike},ur={cssClass:"ordered-list-item",iconName:"numbered-list",iconComponent:Ts.a,id:"orderedList",key:"orderedList",onClick:({isActive:e,applyChange:t})=>t(e?co:Te.b.createChange(!1)),isActive:e=>"ordered"===e.list},pr={cssClass:"unordered-list-item",iconName:"bulleted-list",iconComponent:vs.a,id:"unorderedList",key:"unorderedList",onClick:({isActive:e,applyChange:t})=>t(e?co:Te.b.createChange(!0)),isActive:e=>"bullet"===e.list},br={cssClass:"table-creator-style",iconName:"table-creator",iconComponent:Ds.a,id:"tableCreator",key:"tableCreator"},mr={cssClass:"insert-table-style",iconName:"insert-table",iconComponent:Ls.a,id:"insertTable",key:"insertTable",isDialog:!0,onClick:({showModal:e,translate:t,quillModuleAction:n,closeAllMenus:s,bbEditorId:o})=>{e(io,{translate:t,quillModuleAction:n,closeAllMenus:s,bbEditorId:o})}},gr={cssClass:"edit-table-style",iconName:"edit-table",iconComponent:Ds.a,id:"editTable",key:"editTable",isDialog:!0,onClick:({showModal:e,translate:t,quillModuleAction:n,closeAllMenus:s,bbEditorId:o})=>{const r=n({module:"quill.table",action:"get-table-info"}),i={columns:r.columnCount,rows:r.rowCount,headerRow:r.headerRow,headerColumn:r.headerColumn};e(io,{translate:t,quillModuleAction:n,isEditingTable:!0,editProps:i,closeAllMenus:s,bbEditorId:o})}},hr={cssClass:"insert-row-above-style",iconName:"insert-row-above",iconComponent:xs.a,id:"insertRowAbove",key:"insertRowAbove",toggleButton:!1,onClick:({quillModuleAction:e})=>{const t=e({module:"quill.table",action:"get-table-info"});e({module:"quill.table",action:"insert-row-above"}),t.headerColumn&&1===t.rowCount&&(e({module:"quill.table",action:"set-header-col",setHeader:t.headerColumn}),e({module:"quill.table",action:"set-header-row",setHeader:t.headerRow}))}},fr={cssClass:"insert-row-below-style",iconName:"insert-row-below",iconComponent:Bs.a,id:"insertRowBelow",key:"insertRowBelow",toggleButton:!1,onClick:({quillModuleAction:e})=>{const t=e({module:"quill.table",action:"get-table-info"});e({module:"quill.table",action:"insert-row-below"}),t.headerColumn&&1===t.rowCount&&(e({module:"quill.table",action:"set-header-col",setHeader:t.headerColumn}),e({module:"quill.table",action:"set-header-row",setHeader:t.headerRow}))}},Or={cssClass:"insert-column-left-style",iconName:"insert-column-left",iconComponent:Ps.a,id:"insertColumnLeft",key:"insertColumnLeft",toggleButton:!1,onClick:({quillModuleAction:e})=>{const t=e({module:"quill.table",action:"get-table-info"});e({module:"quill.table",action:"insert-col-left"}),t.headerRow&&1===t.columnCount&&(e({module:"quill.table",action:"set-header-row",setHeader:t.headerRow}),e({module:"quill.table",action:"set-header-col",setHeader:t.headerColumn}))}},Er={cssClass:"insert-column-right-style",iconName:"insert-column-right",iconComponent:ks.a,id:"insertColumnRight",key:"insertColumnRight",toggleButton:!1,onClick:({quillModuleAction:e,setHeader:t})=>{const n=e({module:"quill.table",action:"get-table-info"});e({module:"quill.table",action:"insert-col-right"}),n.headerRow&&1===n.columnCount&&(e({module:"quill.table",action:"set-header-row",setHeader:n.headerRow}),e({module:"quill.table",action:"set-header-col",setHeader:n.headerColumn}))}},yr={cssClass:"delete-table-style",iconName:"delete-table",iconComponent:Gs.a,id:"deleteTable",key:"deleteTable",toggleButton:!1,onClick:({quillModuleAction:e})=>e({module:"quill.table",action:"delete-table"})},Ir={cssClass:"delete-column-style",iconName:"delete-column",iconComponent:Ms.a,id:"deleteColumn",key:"deleteColumn",toggleButton:!1,onClick:({quillModuleAction:e})=>e({module:"quill.table",action:"delete-column"})},Cr={cssClass:"delete-row-style",iconName:"delete-row",iconComponent:Us.a,id:"deleteRow",key:"deleteRow",toggleButton:!1,onClick:({quillModuleAction:e})=>e({module:"quill.table",action:"delete-row"})};function vr(e){const t=Object(p.a)({"table-creator-cell":!0,selected:e.isSelected});return i.a.createElement("div",{className:"table-cell",role:"cell"},i.a.createElement("button",{index:e.index,tabIndex:"-1",className:t,"aria-labelledby":"tableGridCreator",onClick:()=>e.handleClick(e.rowIndex,e.columnIndex),onMouseEnter:()=>e.handleHover(e.rowIndex,e.columnIndex)}))}vr.propTypes={isSelected:c.a.bool.isRequired,rowIndex:c.a.number.isRequired,columnIndex:c.a.number.isRequired,index:c.a.number.isRequired,handleHover:c.a.func.isRequired,handleClick:c.a.func.isRequired};var Sr=vr;function jr(e){const[t,n]=Object(r.useState)({rowCount:0,columnCount:0}),s=Object(to.a)(),o=(s,o)=>{e.quillModuleAction({module:"quill.table",action:"saved-selection"}),n({rowCount:s,columnCount:o}),e.quillModuleAction({module:"quill.table",action:"insert-table",rowCount:parseInt(t.rowCount,10)+1,columnCount:parseInt(t.columnCount,10)+1,headerRow:!1,headerColumn:!1})},a=(e,t)=>{n({rowCount:e,columnCount:t})};return i.a.createElement("div",{className:"table-creator"},i.a.createElement("span",{id:"tableGridCreator",className:"table-info"},s("bbmlEditor.toolbar.tableCreator.info",{rowCount:parseInt(t.rowCount,10)+1,columnCount:parseInt(t.columnCount,10)+1})),i.a.createElement("div",{"aria-labelledby":"tableGridCreator",role:"grid"},i.a.createElement("div",{className:"table-creator-grid",role:"row"},(()=>{const n=[];for(let s=0;s<10;s++)for(let r=0;r<10;r++)n.push(i.a.createElement(Sr,{...e,index:10*s+r,key:`${s}_${r}`,rowIndex:s,columnIndex:r,isSelected:s<=t.rowCount&&r<=t.columnCount,handleHover:a,handleClick:o}));return n})())))}jr.propTypes={quillModuleAction:c.a.func.isRequired};var Tr=Object(he.withAnalytics)(jr);const Ar=e=>{const{analyticsId:t,id:n,label:s,value:o}=e,a=Object(r.useRef)(null),c=Object(to.a)();Object(r.useEffect)((()=>{e.hasKeyboardFocus&&e.currentSubmenuIndex===ps&&e.currentMenuIndex===e.index&&a.current&&a.current.focus()}));return i.a.createElement(ge.AnalyticsFormControlLabel,{analyticsId:t,className:Object(p.a)({"bb-editor-toolbar-checkbox":!0,"is-focused":e.hasKeyboardFocus&&e.currentSubmenuIndex===ps&&e.currentMenuIndex===e.index}),label:c(`bbmlEditor.toolbar.${s}.label`),control:i.a.createElement(ge.AnalyticsCheckbox,{analyticsId:t,id:n,className:"inner-checkbox",value:o,checked:o}),htmlFor:n,onChange:t=>{e.onChange(t,e)},ref:a})};Ar.propTypes={id:c.a.string.isRequired,label:c.a.string.isRequired,hasKeyboardFocus:c.a.bool,index:c.a.number,value:c.a.bool,currentMenuIndex:c.a.number.isRequired,currentSubmenuIndex:c.a.number.isRequired,onChange:c.a.func.isRequired},Ar.defaultProps={hasKeyboardFocus:!1,index:-1,currentSubmenuIndex:-1,value:!1};var _r=Object(he.withAnalytics)(Ar),Rr=n("np6O");function Nr(e){const{title:t,placement:n,ariaLabel:s}=e;let o;Object(r.useEffect)((()=>{e.hasKeyboardFocus&&e.currentSubmenuIndex===ps&&e.currentMenuIndex===e.index&&o&&o.focus()}));return i.a.createElement(ge.AnalyticsTooltip,{className:Object(p.a)({"is-focused":e.hasKeyboardFocus&&e.currentSubmenuIndex===ps&&e.currentMenuIndex===e.index}),title:t,placement:n},i.a.createElement(Rr.AnalyticsIconButton,{className:"bb-editor-toolbar-tooltip-icon-button","aria-label":s,ref:e=>{o=e},analyticsId:"bbml-editor.toolbar.tooltip"},i.a.createElement(no.Information,null)))}Nr.propTypes={ariaLabel:c.a.string.isRequired,hasKeyboardFocus:c.a.bool,index:c.a.number,placement:c.a.string,title:c.a.string.isRequired},Nr.defaultProps={hasKeyboardFocus:!1,index:-1,placement:"top"};var wr=Object(he.withAnalytics)(Nr);function Dr(e){const{isSmallToolbar:t,tableHasHeaderColumn:n,tableHasHeaderRow:s}=e,o=Object(to.a)();Object(r.useEffect)((()=>{const t=e.quillModuleAction({module:"quill.table",action:"get-headers"});e.setHeaders(t.row,t.column)}),[]);return i.a.createElement(gs,{...lo,...e,isSubmenuToolbar:!0},i.a.createElement(ys,{...Or,iconOnly:!0}),i.a.createElement(ys,{...Er,iconOnly:!0}),i.a.createElement(ys,{...Ir,iconOnly:!0}),i.a.createElement(ys,{...hr,iconOnly:!0}),i.a.createElement(ys,{...fr,iconOnly:!0}),i.a.createElement(ys,{...Cr,iconOnly:!0}),i.a.createElement(ys,{...yr,iconOnly:!0}),i.a.createElement(_r,{id:"checkboxRow",label:"table-dialog-headers-row",value:s,onChange:(e,t)=>{t.quillModuleAction({module:"quill.table",action:"set-header-row",setHeader:e.target.checked}),e.target.checked||t.quillModuleAction({module:"quill.table",action:"set-header-col",setHeader:n}),t.setHeaders(e.target.checked,n)},isHideable:t}),i.a.createElement(_r,{id:"checkboxColumn",label:"table-dialog-headers-column",value:n,onChange:(e,t)=>{t.quillModuleAction({module:"quill.table",action:"set-header-col",setHeader:e.target.checked}),e.target.checked||t.quillModuleAction({module:"quill.table",action:"set-header-row",setHeader:s}),t.setHeaders(s,e.target.checked)},isHideable:t}),i.a.createElement(wr,{title:o("bbmlEditor.toolbar.table-dialog-tooltip.label"),placement:"top",ariaLabel:o("bbmlEditor.toolbar.table-dialog-tooltip.axAriaText"),isHideable:t}))}Dr.propTypes={children:c.a.array,addKeyDownHandler:c.a.func.isRequired,editorId:c.a.string,toolbarActionComplete:c.a.func.isRequired,hasKeyboardFocus:c.a.bool,isDisabled:c.a.bool,isRtl:c.a.bool,isSubmenuToolbar:c.a.bool,isSubToolbarOpen:c.a.bool,isSmallToolbar:c.a.bool},Dr.defaultProps={children:null,editorId:null,hasKeyboardFocus:!1,isDisabled:!1,isRtl:!1,isSubmenuToolbar:!1,isSubToolbarOpen:!1,isSmallToolbar:!1};var Lr=Object(he.withAnalytics)(Dr);const Pr={[os]:{[ts]:["link","editAttachment","editYoutubeVideo"],[ns]:["link","insertLocalFile","editAttachment","editYoutubeVideo"],[ss]:["link","insertLocalFile","editAttachment","editYoutubeVideo"]},[rs]:{[ts]:["math","link","image","editAttachment","editYoutubeVideo"],[ns]:["math","link","image","editAttachment","editYoutubeVideo"],[ss]:["math","link","image","editAttachment","editYoutubeVideo"]}},kr=(e,t,n)=>e.filter((e=>!Pr[t][n].some((t=>e.id===t)))).length>0;var xr=(e,t,n)=>e.pluginButtons.filter((e=>!Pr[t][n].some((t=>e.id===t))&&!e.isHidden)).map((e=>i.a.createElement(ys,{...e})));function Br(e){const t=e.pluginButtons.find((e=>"link"===e.id));return t?i.a.createElement(ys,{...t,...e}):null}function Mr(e){const t=e.pluginButtons.find((e=>"editAttachment"===e.id));return t?i.a.createElement(ys,{...t,...e}):null}function Ur(e){const t=e.pluginButtons.find((e=>"editYoutubeVideo"===e.id));return t?i.a.createElement(ys,{...t,...e}):null}function Gr(e){const t=e.pluginButtons.find((e=>"insertLocalFile"===e.id));return t?i.a.createElement(ys,{...t,...e}):null}Br.propTypes={pluginButtons:c.a.arrayOf(c.a.shape({id:c.a.string.isRequired,cssClass:c.a.string.isRequired,iconName:c.a.string.isRequired,isActive:c.a.func.isRequired,onClick:c.a.func.isRequired})).isRequired},Mr.propTypes={pluginButtons:c.a.arrayOf(c.a.shape({id:c.a.string.isRequired,cssClass:c.a.string.isRequired,iconName:c.a.string.isRequired,isActive:c.a.func.isRequired,onClick:c.a.func.isRequired})).isRequired},Ur.propTypes={pluginButtons:c.a.arrayOf(c.a.shape({id:c.a.string.isRequired,cssClass:c.a.string.isRequired,iconName:c.a.string.isRequired,isActive:c.a.func.isRequired,onClick:c.a.func.isRequired})).isRequired},Gr.propTypes={pluginButtons:c.a.arrayOf(c.a.shape({id:c.a.string.isRequired,cssClass:c.a.string.isRequired,iconName:c.a.string.isRequired,isActive:c.a.func.isRequired,onClick:c.a.func.isRequired})).isRequired};const Fr="",qr="textOptionsMenu",Hr="listMenu";function Vr(e){const[t,n]=Object(r.useState)(Fr),[s,o]=Object(r.useState)(),a=e=>{n((t=>t===e?Fr:e))},c=()=>{a(Fr)};return i.a.createElement("div",null,i.a.createElement(gs,{...e,isSubToolbarOpen:t!==Fr,resetMenu:c,shareNavigator:e=>{o(e)}},i.a.createElement(ys,{...yo,iconOnly:!0},sr.map((e=>i.a.createElement(ys,{key:e.key,...e,textOnly:!0})))),i.a.createElement(ys,{...Io,iconOnly:!0},i.a.createElement(ys,{...Co,textOnly:!0}),i.a.createElement(ys,{...vo,textOnly:!0}),i.a.createElement(ys,{...So,textOnly:!0}),i.a.createElement(ys,{...jo,textOnly:!0}),i.a.createElement(ys,{...To,textOnly:!0}),i.a.createElement(ys,{...Ao,textOnly:!0}),i.a.createElement(ys,{..._o,textOnly:!0})),i.a.createElement(ys,{...Po,iconOnly:!0},i.a.createElement(ys,{...ko,textOnly:!0}),i.a.createElement(ys,{...xo,textOnly:!0}),i.a.createElement(ys,{...Bo,textOnly:!0,isActive:t=>t.size===ce||!e.isRtl&&!t.size}),i.a.createElement(ys,{...Mo,textOnly:!0,isActive:t=>t.size===le||e.isRtl&&!t.size}),i.a.createElement(ys,{...Uo,textOnly:!0}),i.a.createElement(ys,{...Go,textOnly:!0}),i.a.createElement(ys,{...Fo,textOnly:!0})),i.a.createElement(ys,{...qo,iconOnly:!0,separator:!0},i.a.createElement(ys,{...Ho}),i.a.createElement(ys,{...Vo}),i.a.createElement(ys,{...Ko}),i.a.createElement(ys,{...$o}),i.a.createElement(ys,{...Wo}),i.a.createElement(ys,{...zo})),i.a.createElement(ys,{...rr,iconOnly:!0}),i.a.createElement(ys,{...ir,iconOnly:!0}),i.a.createElement(ys,{...ar,iconOnly:!0}),i.a.createElement(ys,{...tr,onClick:()=>a(qr),iconOnly:!0,isSubmenu:!0,hiddenChevron:!0,isToolbarOpen:t===qr,separator:!0}),e.editorHasTableSelected?i.a.createElement(ys,{...gr,iconOnly:!0}):i.a.createElement(ys,{...br,iconOnly:!0},i.a.createElement(Tr,{...e.quillModuleAction}),i.a.createElement(ys,{...mr,...e.closeAllMenus})),i.a.createElement(ys,{...mo,iconOnly:!0},i.a.createElement(ys,{...go}),i.a.createElement(ys,{...ho}),i.a.createElement(ys,{...fo}),i.a.createElement(ys,{...Oo})),i.a.createElement(ys,{...Jo,onClick:()=>a(Hr),iconOnly:!0,isSubmenu:!0,isToolbarOpen:t===Hr,separator:!0}),i.a.createElement(ys,{...Xo,iconOnly:!0,isButtonDisabled:e.editorHasTableSelected}),i.a.createElement(ys,{...Zo,iconOnly:!0,separator:!0}),i.a.createElement(Br,{pluginButtons:e.pluginButtons,iconOnly:!0}),i.a.createElement(Gr,{pluginButtons:e.pluginButtons,iconOnly:!0}),kr(e.pluginButtons,os,ss)&&i.a.createElement(ys,{...nr,iconOnly:!0},xr(e,os,ss)),i.a.createElement(Mr,{id:zn.id,pluginButtons:e.pluginButtons,iconOnly:!0,isHideable:!0}),i.a.createElement(Ur,{id:Qn.id,pluginButtons:e.pluginButtons,iconOnly:!0,isHideable:!0})),t===qr&&i.a.createElement(gs,{...e,...po,isSubmenuToolbar:!0,isSubToolbarOpen:t!==Fr,resetMenu:c},i.a.createElement(ys,{...dr,iconOnly:!0}),i.a.createElement(ys,{...cr,iconOnly:!0}),i.a.createElement(ys,{...lr,iconOnly:!0}),i.a.createElement(ys,{...er,iconOnly:!0})),t===Hr&&i.a.createElement(gs,{...e,...bo,isSubmenuToolbar:!0,isSubToolbarOpen:t!==Fr,resetMenu:c},i.a.createElement(ys,{...pr,iconOnly:!0}),i.a.createElement(ys,{...ur,iconOnly:!0}),i.a.createElement(ys,{...Ro,iconOnly:!0},i.a.createElement(ys,{...No,textOnly:!0}),i.a.createElement(ys,{...wo,textOnly:!0}),i.a.createElement(ys,{...Do,textOnly:!0}),i.a.createElement(ys,{...Lo,textOnly:!0})),e.isRtl&&i.a.createElement(ys,{...Yo,iconOnly:!0,isActive:t=>t.direction===rt||!t.direction&&e.isRtl}),i.a.createElement(ys,{...Qo,iconOnly:!0,isActive:t=>t.direction===it||!t.direction&&!e.isRtl}),!e.isRtl&&i.a.createElement(ys,{...Yo,iconOnly:!0,isActive:t=>t.direction===rt||!t.direction&&e.isRtl})),e.editorHasTableSelected&&i.a.createElement(Lr,{...e,useSharedNavigator:!0,sharedNavigator:s,isAdditionalToolbarVisible:e.editorHasTableSelected}))}Vr.propTypes={pluginButtons:c.a.arrayOf(c.a.shape({id:c.a.string.isRequired,cssClass:c.a.string.isRequired,iconName:c.a.string.isRequired,isActive:c.a.func.isRequired,onClick:c.a.func.isRequired})).isRequired,editorHasTableSelected:c.a.bool},Vr.defaultProps={editorHasTableSelected:!1};var Kr=Vr;const $r="",Wr="textStylingMenu",zr="textOptionsMenu",Qr="listMenu";function Yr(e){const[t,n]=Object(r.useState)($r),[s,o]=Object(r.useState)(),a=e=>{n((t=>t===e?$r:e))},c=()=>{a($r)};return i.a.createElement("div",null,i.a.createElement(gs,{...e,isSubToolbarOpen:t!==$r,resetMenu:c,shareNavigator:e=>{o(e)}},i.a.createElement(ys,{...Eo,onClick:()=>a(Wr),iconOnly:!0,isSubmenu:!0,isToolbarOpen:t===Wr,separator:!0}),i.a.createElement(ys,{...rr,iconOnly:!0}),i.a.createElement(ys,{...ir,iconOnly:!0}),i.a.createElement(ys,{...ar,iconOnly:!0}),i.a.createElement(ys,{...tr,onClick:()=>a(zr),iconOnly:!0,isSubmenu:!0,hiddenChevron:!0,isToolbarOpen:t===zr,separator:!0}),i.a.createElement(ys,{...mo,iconOnly:!0},i.a.createElement(ys,{...go}),i.a.createElement(ys,{...ho}),i.a.createElement(ys,{...fo}),i.a.createElement(ys,{...Oo})),i.a.createElement(ys,{...Jo,onClick:()=>a(Qr),iconOnly:!0,isSubmenu:!0,isToolbarOpen:t===Qr,separator:!0}),i.a.createElement(ys,{...Xo,isButtonDisabled:e.editorHasTableSelected,iconOnly:!0}),i.a.createElement(ys,{...Zo,iconOnly:!0,separator:!0}),i.a.createElement(Br,{pluginButtons:e.pluginButtons,iconOnly:!0}),i.a.createElement(Gr,{pluginButtons:e.pluginButtons,iconOnly:!0}),kr(e.pluginButtons,os,ns)&&i.a.createElement(ys,{...nr,iconOnly:!0},xr(e,os,ns)),i.a.createElement(Mr,{id:zn.id,pluginButtons:e.pluginButtons,iconOnly:!0,isHideable:!0}),i.a.createElement(Ur,{id:Qn.id,pluginButtons:e.pluginButtons,iconOnly:!0,isHideable:!0})),t===Wr&&i.a.createElement(gs,{...uo,...e,isSubmenuToolbar:!0,resetMenu:c},i.a.createElement(ys,{...yo,iconOnly:!0},sr.map((e=>i.a.createElement(ys,{key:e.key,...e,textOnly:!0})))),i.a.createElement(ys,{...Io,iconOnly:!0},i.a.createElement(ys,{...Co,textOnly:!0}),i.a.createElement(ys,{...vo,textOnly:!0}),i.a.createElement(ys,{...So,textOnly:!0}),i.a.createElement(ys,{...jo,textOnly:!0}),i.a.createElement(ys,{...To,textOnly:!0}),i.a.createElement(ys,{...Ao,textOnly:!0}),i.a.createElement(ys,{..._o,textOnly:!0})),i.a.createElement(ys,{...Po,iconOnly:!0},i.a.createElement(ys,{...ko,textOnly:!0}),i.a.createElement(ys,{...xo,textOnly:!0}),i.a.createElement(ys,{...Bo,textOnly:!0,isActive:t=>t.size===ce||!e.isRtl&&!t.size}),i.a.createElement(ys,{...Mo,textOnly:!0,isActive:t=>t.size===le||e.isRtl&&!t.size}),i.a.createElement(ys,{...Uo,textOnly:!0}),i.a.createElement(ys,{...Go,textOnly:!0}),i.a.createElement(ys,{...Fo,textOnly:!0})),i.a.createElement(ys,{...qo,iconOnly:!0},i.a.createElement(ys,{...Ho}),i.a.createElement(ys,{...Vo}),i.a.createElement(ys,{...Ko}),i.a.createElement(ys,{...$o}),i.a.createElement(ys,{...Wo}),i.a.createElement(ys,{...zo}))),t===zr&&i.a.createElement(gs,{...po,...e,isSubmenuToolbar:!0,isSubToolbarOpen:t!==$r,resetMenu:c},i.a.createElement(ys,{...dr,iconOnly:!0}),i.a.createElement(ys,{...cr,iconOnly:!0}),i.a.createElement(ys,{...lr,iconOnly:!0}),i.a.createElement(ys,{...er,iconOnly:!0})),t===Qr&&i.a.createElement(gs,{...bo,...e,isSubmenuToolbar:!0,isSubToolbarOpen:t!==$r,resetMenu:c},i.a.createElement(ys,{...pr,iconOnly:!0}),i.a.createElement(ys,{...ur,iconOnly:!0}),i.a.createElement(ys,{...Ro,iconOnly:!0},i.a.createElement(ys,{...No,textOnly:!0}),i.a.createElement(ys,{...wo,textOnly:!0}),i.a.createElement(ys,{...Do,textOnly:!0}),i.a.createElement(ys,{...Lo,textOnly:!0})),e.editorHasTableSelected?i.a.createElement(ys,{...gr,iconOnly:!0}):i.a.createElement(ys,{...br,iconOnly:!0},i.a.createElement(Tr,{...e.quillModuleAction}),i.a.createElement(ys,{...mr,...e.closeAllMenus})),e.isRtl&&i.a.createElement(ys,{...Yo,iconOnly:!0,isActive:t=>t.direction===rt||!t.direction&&e.isRtl}),i.a.createElement(ys,{...Qo,iconOnly:!0,isActive:t=>t.direction===it||!t.direction&&!e.isRtl}),!e.isRtl&&i.a.createElement(ys,{...Yo,iconOnly:!0,isActive:t=>t.direction===rt||!t.direction&&e.isRtl})),e.editorHasTableSelected&&i.a.createElement(Lr,{...e,useSharedNavigator:!0,sharedNavigator:s,isAdditionalToolbarVisible:e.editorHasTableSelected}))}Yr.propTypes={pluginButtons:c.a.arrayOf(c.a.shape({id:c.a.string.isRequired,cssClass:c.a.string.isRequired,iconName:c.a.string.isRequired,isActive:c.a.func.isRequired,onClick:c.a.func.isRequired})).isRequired,editorHasTableSelected:c.a.bool},Yr.defaultProps={editorHasTableSelected:!1};var Jr=Yr;const Xr="",Zr="textStylingMenu",ei="textOptionsMenu",ti="listMenu";function ni(e){const[t,n]=Object(r.useState)(Xr),[s,o]=Object(r.useState)(),a=e=>{n((t=>t===e?Xr:e))},c=()=>{a(Xr)};return i.a.createElement("div",null,i.a.createElement(gs,{...e,isSubToolbarOpen:t!==Xr,resetMenu:c,shareNavigator:e=>{o(e)}},i.a.createElement(ys,{...Eo,onClick:()=>a(Zr),iconOnly:!0,isSubmenu:!0,isToolbarOpen:t===Zr,separator:!0}),i.a.createElement(ys,{...tr,onClick:()=>a(ei),iconOnly:!0,isSubmenu:!0,hiddenChevron:!0,isToolbarOpen:t===ei,separator:!0}),i.a.createElement(ys,{...Jo,onClick:()=>a(ti),iconOnly:!0,isSubmenu:!0,isToolbarOpen:t===ti,separator:!0}),i.a.createElement(ys,{...Xo,isButtonDisabled:e.editorHasTableSelected,iconOnly:!0}),i.a.createElement(Br,{pluginButtons:e.pluginButtons,iconOnly:!0}),e.pluginButtons.length>0&&i.a.createElement(ys,{...nr,iconOnly:!0},xr(e,os,ts)),i.a.createElement(Mr,{id:zn.id,pluginButtons:e.pluginButtons,iconOnly:!0,isHideable:!0}),i.a.createElement(Ur,{id:Qn.id,pluginButtons:e.pluginButtons,iconOnly:!0,isHideable:!0})),t===Zr&&i.a.createElement(gs,{...uo,...e,isSubmenuToolbar:!0,resetMenu:c},i.a.createElement(ys,{...yo,iconOnly:!0},sr.map((e=>i.a.createElement(ys,{key:e.key,...e,textOnly:!0})))),i.a.createElement(ys,{...Io,iconOnly:!0},i.a.createElement(ys,{...Co,textOnly:!0}),i.a.createElement(ys,{...vo,textOnly:!0}),i.a.createElement(ys,{...So,textOnly:!0}),i.a.createElement(ys,{...jo,textOnly:!0}),i.a.createElement(ys,{...To,textOnly:!0}),i.a.createElement(ys,{...Ao,textOnly:!0}),i.a.createElement(ys,{..._o,textOnly:!0})),i.a.createElement(ys,{...Po,iconOnly:!0},i.a.createElement(ys,{...ko,textOnly:!0}),i.a.createElement(ys,{...xo,textOnly:!0}),i.a.createElement(ys,{...Bo,textOnly:!0,isActive:t=>t.size===ce||!e.isRtl&&!t.size}),i.a.createElement(ys,{...Mo,textOnly:!0,isActive:t=>t.size===le||e.isRtl&&!t.size}),i.a.createElement(ys,{...Uo,textOnly:!0}),i.a.createElement(ys,{...Go,textOnly:!0}),i.a.createElement(ys,{...Fo,textOnly:!0})),i.a.createElement(ys,{...qo,iconOnly:!0},i.a.createElement(ys,{...Ho}),i.a.createElement(ys,{...Vo}),i.a.createElement(ys,{...Ko}),i.a.createElement(ys,{...$o}),i.a.createElement(ys,{...Wo}),i.a.createElement(ys,{...zo}))),t===ei&&i.a.createElement(gs,{...po,...e,isSubmenuToolbar:!0,isSubToolbarOpen:t!==Xr,resetMenu:c},i.a.createElement(ys,{...rr,iconOnly:!0}),i.a.createElement(ys,{...ir,iconOnly:!0}),i.a.createElement(ys,{...ar,iconOnly:!0}),i.a.createElement(ys,{...dr,iconOnly:!0}),i.a.createElement(ys,{...cr,iconOnly:!0}),i.a.createElement(ys,{...lr,iconOnly:!0}),i.a.createElement(ys,{...Zo,iconOnly:!0}),i.a.createElement(ys,{...er,iconOnly:!0})),t===ti&&i.a.createElement(gs,{...bo,...e,isSubmenuToolbar:!0,isSubToolbarOpen:t!==Xr,resetMenu:c},i.a.createElement(ys,{...mo,iconOnly:!0},i.a.createElement(ys,{...go}),i.a.createElement(ys,{...ho}),i.a.createElement(ys,{...fo}),i.a.createElement(ys,{...Oo})),i.a.createElement(ys,{...pr,iconOnly:!0}),i.a.createElement(ys,{...ur,iconOnly:!0}),i.a.createElement(ys,{...Ro,iconOnly:!0},i.a.createElement(ys,{...No,textOnly:!0}),i.a.createElement(ys,{...wo,textOnly:!0}),i.a.createElement(ys,{...Do,textOnly:!0}),i.a.createElement(ys,{...Lo,textOnly:!0})),e.editorHasTableSelected?i.a.createElement(ys,{...gr,iconOnly:!0}):i.a.createElement(ys,{...mr,iconOnly:!0}),e.isRtl&&i.a.createElement(ys,{...Yo,iconOnly:!0,isActive:t=>t.direction===rt||!t.direction&&e.isRtl}),i.a.createElement(ys,{...Qo,iconOnly:!0,isActive:t=>t.direction===it||!t.direction&&!e.isRtl}),!e.isRtl&&i.a.createElement(ys,{...Yo,iconOnly:!0,isActive:t=>t.direction===rt||!t.direction&&e.isRtl})),e.editorHasTableSelected&&i.a.createElement(Lr,{...e,isSmallToolbar:!0,useSharedNavigator:!0,sharedNavigator:s,isAdditionalToolbarVisible:e.editorHasTableSelected}))}ni.propTypes={pluginButtons:c.a.arrayOf(c.a.shape({id:c.a.string.isRequired,cssClass:c.a.string.isRequired,iconName:c.a.string.isRequired,isActive:c.a.func.isRequired,onClick:c.a.func.isRequired})).isRequired,editorHasTableSelected:c.a.bool},ni.defaultProps={editorHasTableSelected:!1};var si=ni;function oi(e){const t=e.pluginButtons.find((e=>"image"===e.id));return t?i.a.createElement(ys,{...t,...e}):null}function ri(e){const t=e.pluginButtons.find((e=>"math"===e.id));return t?i.a.createElement(ys,{...t,...e}):null}function ii(e){const t=e.pluginButtons.find((e=>"collab_video"===e.id));return t?i.a.createElement(ys,{...t,...e}):null}oi.propTypes={pluginButtons:c.a.arrayOf(c.a.shape({id:c.a.string.isRequired,cssClass:c.a.string.isRequired,iconName:c.a.string.isRequired,isActive:c.a.func.isRequired,onClick:c.a.func.isRequired})).isRequired},ri.propTypes={pluginButtons:c.a.arrayOf(c.a.shape({id:c.a.string.isRequired,cssClass:c.a.string.isRequired,iconName:c.a.string.isRequired,isActive:c.a.func.isRequired,onClick:c.a.func.isRequired})).isRequired},ii.propTypes={pluginButtons:c.a.arrayOf(c.a.shape({id:c.a.string.isRequired,cssClass:c.a.string.isRequired,iconName:c.a.string.isRequired,isActive:c.a.func.isRequired,onClick:c.a.func.isRequired})).isRequired};const ai=e=>i.a.createElement(gs,{...e},i.a.createElement(ys,{...rr,iconOnly:!0}),i.a.createElement(ys,{...ir,iconOnly:!0}),i.a.createElement(ys,{...ar,iconOnly:!0}),i.a.createElement(ri,{pluginButtons:e.pluginButtons,iconOnly:!0}),e.pluginButtons.length>0&&i.a.createElement(ys,{...nr,iconOnly:!0,separator:!0},i.a.createElement(Br,{pluginButtons:e.pluginButtons}),i.a.createElement(oi,{pluginButtons:e.pluginButtons}),i.a.createElement(ii,{pluginButtons:e.pluginButtons}),xr(e,rs,ts)),i.a.createElement(Mr,{id:zn.id,pluginButtons:e.pluginButtons,iconOnly:!0,isHideable:!0}),i.a.createElement(Ur,{id:Qn.id,pluginButtons:e.pluginButtons,iconOnly:!0,isHideable:!0}));ai.propTypes={pluginButtons:c.a.arrayOf(c.a.shape({id:c.a.string.isRequired,cssClass:c.a.string.isRequired,iconName:c.a.string.isRequired,isActive:c.a.func.isRequired,onClick:c.a.func.isRequired})).isRequired};var ci=ai;const li=e=>i.a.createElement(gs,{...e},i.a.createElement(ys,{...tr,iconOnly:!0},i.a.createElement(ys,{...rr}),i.a.createElement(ys,{...ir}),i.a.createElement(ys,{...ar})),i.a.createElement(ri,{pluginButtons:e.pluginButtons,iconOnly:!0}),e.pluginButtons.length>0&&i.a.createElement(ys,{...nr,iconOnly:!0,separator:!0},i.a.createElement(Br,{pluginButtons:e.pluginButtons}),i.a.createElement(oi,{pluginButtons:e.pluginButtons}),i.a.createElement(ii,{pluginButtons:e.pluginButtons}),xr(e,rs,ts)),i.a.createElement(Mr,{id:zn.id,pluginButtons:e.pluginButtons,iconOnly:!0,isHideable:!0}),i.a.createElement(Ur,{id:Qn.id,pluginButtons:e.pluginButtons,iconOnly:!0,isHideable:!0}));li.propTypes={pluginButtons:c.a.arrayOf(c.a.shape({id:c.a.string.isRequired,cssClass:c.a.string.isRequired,iconName:c.a.string.isRequired,isActive:c.a.func.isRequired,onClick:c.a.func.isRequired})).isRequired};var di=li;var ui=n("fN3Q");class pi extends i.a.Component{constructor(e){super(e);const t=new g.a(0,0);this.editorInitialContent=null,this.isBbmlDirty=!1,this.bbEditorId="BB_Editor_ID_"+Object(ui.v4)(),this.state={isApplyingChanges:!1,editorFormat:{text:"",selection:t},editorLastFormat:{},editorLastContent:[],editorLastSelection:t,editorLastRawSelection:t,toolbarHasKeyboardFocus:!1,editorHasKeyboardFocus:!1,editorHasTableSelected:!1,tableHasHeaderRow:!1,tableHasHeaderColumn:!1,toolbar:si},this.quill=null,this.storedStack=null,this.editorContainer=null,this.editorRoot=null,this.keyDownHandler=new yn,this.onKeyDown=this.onKeyDown.bind(this),this.onKeyDownOutsideEditor=this.onKeyDownOutsideEditor.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.extendSelection=null,this.registerAccessibilityHandlers=this.registerAccessibilityHandlers.bind(this),this.unregisterAccessibilityHandlers=this.unregisterAccessibilityHandlers.bind(this),this.setToolbarKeyboardFocused=this.setToolbarKeyboardFocused.bind(this),this.setEditorKeyboardFocused=this.setEditorKeyboardFocused.bind(this),this.setEditorMouseFocused=this.setEditorMouseFocused.bind(this),this.updateAriaAttributes=this.updateAriaAttributes.bind(this),this.addAxLabels=this.addAxLabels.bind(this),this.editorContainsElement=this.editorContainsElement.bind(this),this.editorHasFocus=this.editorHasFocus.bind(this),this.editorHasKeyboardFocus=this.editorHasKeyboardFocus.bind(this),this.setEditorFocusState=this.setEditorFocusState.bind(this),this.setEditorFocusStateToolbar=this.setEditorFocusStateToolbar.bind(this),this.isEditorFocusState=this.isEditorFocusState.bind(this),this.editorFocusState=is,this.onFocusHandler=this.onFocusHandler.bind(this),this.onFocusDebounce=null,this.onBlurHandler=this.onBlurHandler.bind(this),this.onBlurDebounce=null,this.initializeQuill=this.initializeQuill.bind(this),this.updateQuillEnable=this.updateQuillEnable.bind(this),this.updateQuillPlaceholder=this.updateQuillPlaceholder.bind(this),this.restoreQuillPlaceholder=this.restoreQuillPlaceholder.bind(this),this.unloadPlugins=this.unloadPlugins.bind(this),this.notifyPluginsOfPropChanges=this.notifyPluginsOfPropChanges.bind(this),this.onToolbarActionComplete=this.onToolbarActionComplete.bind(this),this.onEditorChange=this.onEditorChange.bind(this),this.getEditorSelection=this.getEditorSelection.bind(this),this.getEditorFormat=this.getEditorFormat.bind(this),this.updateFormatWithBlotSelection=this.updateFormatWithBlotSelection.bind(this),this.selectEmbeddedBlot=this.selectEmbeddedBlot.bind(this),this.unselectEmbeddedBlots=this.unselectEmbeddedBlots.bind(this),this.applyEditorChange=this.applyEditorChange.bind(this),this.applyChangeAndSetEditorFocused=this.applyChangeAndSetEditorFocused.bind(this),this.quillModuleAction=this.quillModuleAction.bind(this),this.setHeaders=this.setHeaders.bind(this),this.onBbMLInputChange=this.onBbMLInputChange.bind(this),this.onBbMLOutputChange=this.onBbMLOutputChange.bind(this),this.makeEmbedsEasierToEditAfter=this.makeEmbedsEasierToEditAfter.bind(this),this.updateToolbar=this.updateToolbar.bind(this),this.setToolbarState=this.setToolbarState.bind(this),this.getPluginButtons=this.getPluginButtons.bind(this),this.getEditorRect=this.getEditorRect.bind(this),this.onDragEnter=this.onDragEnter.bind(this),this.onDragLeave=this.onDragLeave.bind(this),this.onDrop=this.onDrop.bind(this),this.dragCount=0,this.fileDragDropUtil=An(this.applyChangeAndSetEditorFocused,this.props.localize.getLocalePropsForClone(),this.setEditorFocusStateToolbar),this.plugins=Sn(e.plugins,(()=>this.forceUpdate()),this.fileDragDropUtil)}componentDidMount(){this.initializeQuill(),this.registerAccessibilityHandlers(),this.updateToolbar(),window.addEventListener("resize",this.updateToolbar)}componentDidUpdate(e){if(this.props.isDisabled!==e.isDisabled||this.props.isReadOnly!==e.isReadOnly){const e=!this.props.isDisabled&&!this.props.isReadOnly;this.updateQuillEnable(e),Un(this.editorRoot.classList,e),e||(Fn(this.editorRoot.classList,!1),Kn(this.editorRoot.classList,!1))}this.props.placeholder!==e.placeholder&&this.updateQuillPlaceholder(this.props.placeholder),this.props.isDisabled!==e.isDisabled&&kn(this.editorRoot.classList,this.props.isDisabled),this.props.isReadOnly!==e.isReadOnly&&(Bn(this.editorRoot.classList,this.props.isReadOnly),this.updateQuillPlaceholder(this.props.placeholder),this.quillModuleAction({module:"plugins",action:"read-only-change",value:this.props.isReadOnly})),this.props.errorMessage!==e.errorMessage&&Hn(this.editorRoot.classList,!!this.props.errorMessage),this.updateAriaAttributes(e),this.props.isReadOnly===e.isReadOnly&&this.props.isToolbarHidden===e.isToolbarHidden&&this.props.toolbarSet===e.toolbarSet||this.updateToolbar(),this.props.isReadOnly===e.isReadOnly&&this.props.isDisabled===e.isDisabled&&this.props.isToolbarHidden===e.isToolbarHidden||this.quill.history.clear(),this.props!==e&&((this.props.bbml!==e.bbml||this.isBbmlDirty)&&this.onBbMLInputChange(this.props.bbml),this.notifyPluginsOfPropChanges()),this.props.currentLocale===e.currentLocale&&this.props.isRtl===e.isRtl||this.fileDragDropUtil.setLocaleProps(this.props.localize.getLocalePropsForClone())}componentWillUnmount(){this.quill.history.clear(),this.unloadPlugins(),this.unregisterAccessibilityHandlers(),this.removeTimers(),window.removeEventListener("resize",this.updateToolbar),this.quill.off(m.a.events.EDITOR_CHANGE,this.onEditorChange),this.editorRoot.remove(),delete this.editorContainer,delete this.editorRoot,delete this.quill}removeTimers(){this.requestAnimationFrameID&&(window.cancelAnimationFrame(this.requestAnimationFrameID),this.requestAnimationFrameID=null),clearTimeout(this.extendSelection),clearTimeout(this.debounceWindowResizeToolbar),clearTimeout(this.onBlurDebounce),clearTimeout(this.onFocusDebounce),clearTimeout(this.axTooltipTimeout),clearTimeout(this.keyFocusTimeout),clearTimeout(this.autoSaveTimeout)}registerAccessibilityHandlers(){document.addEventListener("keydown",this.onKeyDownOutsideEditor),this.editorContainer.addEventListener("focusin",this.onFocusHandler),this.editorContainer.addEventListener("focusout",this.onBlurHandler),this.editorRoot.addEventListener("mousedown",this.onMouseDown),this.editorContainer.addEventListener("mousedown",In),this.editorContainer.addEventListener("focusout",In),this.updateAriaAttributes(),this.keyDownHandler.addKeyDownHandler(u.a.F10,En.ALT,this.setToolbarKeyboardFocused,On.EDITOR)}unregisterAccessibilityHandlers(){document.removeEventListener("keydown",this.onKeyDownOutsideEditor),this.editorContainer.removeEventListener("focusin",this.onFocusHandler),this.editorContainer.removeEventListener("focusout",this.onBlurHandler),this.editorRoot.removeEventListener("mousedown",this.onMouseDown),this.editorContainer.removeEventListener("mousedown",In),this.editorContainer.removeEventListener("focusout",In)}addAxLabels(){const{editorId:e,ariaLabelledBy:t,ariaDescribedBy:n}=this.props,s=this.editorRoot.firstChild;this.editorRoot.querySelector(".ql-clipboard").setAttribute("aria-hidden","true"),e&&s.setAttribute("id",e),t&&s.setAttribute("aria-labelledby",t),n&&s.setAttribute("aria-describedby",n)}updateAriaAttributes(e){let t=!1;!e||e.isReadOnly||e.isDisabled||(t=!0);const n=!this.props.isReadOnly&&!this.props.isDisabled;t!==n&&(n?(this.editorRoot.firstChild.setAttribute("role","textbox"),this.editorRoot.firstChild.setAttribute("aria-multiline","true"),this.editorRoot.firstChild.setAttribute("aria-required",this.props.ariaRequired?"true":"false")):(this.editorRoot.firstChild.removeAttribute("role"),this.editorRoot.firstChild.removeAttribute("aria-multiline"),this.editorRoot.firstChild.removeAttribute("aria-required")))}setToolbarKeyboardFocused(){this.keyDownHandler.enableToolbarScope(),this.setState({toolbarHasKeyboardFocus:!0,editorHasKeyboardFocus:!1}),Fn(this.editorRoot.classList,!1),Kn(this.editorRoot.classList,!1)}setEditorKeyboardFocused(e){this.keyDownHandler.enableEditorScope(),this.setState({toolbarHasKeyboardFocus:!1,editorHasKeyboardFocus:!0},"function"==typeof e?e:null),Fn(this.editorRoot.classList,!0),Kn(this.editorRoot.classList,!0)}setEditorMouseFocused(e){this.keyDownHandler.enableEditorScope(),this.setState({toolbarHasKeyboardFocus:!1},"function"==typeof e?e:null),Fn(this.editorRoot.classList,!0)}onMouseDown(e){this.editorHasFocus()&&!this.quill.hasFocus()&&this.onToolbarActionComplete(!this.toolbarHasFocus()),2===e.button&&(clearTimeout(this.extendSelection),this.extendTableSelection()),this.props.isDisabled||this.props.isReadOnly||setTimeout((()=>this.selectEmbeddedBlot(e.target)))}onKeyDown(e){if(!this.props.isDisabled&&!this.props.isReadOnly){const t=this.keyDownHandler.handleKeyDown(e),n=yn.hasModifierKey(e),s=yn.hasRegularKey(e);clearTimeout(this.extendSelection),this.extendTableSelection(),e.keyCode===u.a.ENTER&&this.quill.history.cutoff(),(t||n&&s)&&this.onEditorChange(m.a.events.TEXT_CHANGE)}}onKeyDownOutsideEditor(e){e.keyCode!==u.a.TAB||this.props.isDisabled||this.props.isReadOnly||this.editorHasFocus()||(this.keyFocusTimeout=setTimeout((()=>{this.editorHasFocus()&&this.setEditorKeyboardFocused()})))}editorContainsElement(e,t){let n=this.editorContainer;return t&&(n=n.querySelector(t)),n&&n.contains(e)}toolbarHasFocus(){return(this.editorContainsElement(document.activeElement,".bb-editor-toolbar")||this.editorContainsElement(document.activeElement,".bb-editor-submenu-toolbar"))&&!this.props.isDisabled&&!this.props.isReadOnly}editorHasFocus(){return(this.editorContainsElement(document.activeElement)||this.quill.hasFocus())&&!this.props.isDisabled&&!this.props.isReadOnly}editorHasKeyboardFocus(){return this.editorHasFocus()&&(this.state.editorHasKeyboardFocus||this.editorRoot.classList.contains("has-keyboard-focus"))}onToolbarActionComplete(e=!1){const t=!0===e?()=>this.quill.focus():()=>{};this.setEditorFocusState(as),this.state.toolbarHasKeyboardFocus?this.setEditorKeyboardFocused(t):this.setEditorMouseFocused(t)}setEditorFocusState(e){this.editorFocusState=e}setEditorFocusStateToolbar(e=!1){Fn(this.editorRoot.classList,!1),e&&this.setEditorFocusState(cs)}isEditorFocusState(e){return this.editorFocusState===e}onBlurHandler(){clearTimeout(this.onBlurDebounce),clearTimeout(this.onFocusDebounce),this.onBlurDebounce=setTimeout((()=>{!this.editorHasFocus()&&this.isEditorFocusState(as)&&this.setState({toolbarHasKeyboardFocus:!1,editorHasKeyboardFocus:!1},(()=>{this.setEditorFocusState(is),this.restoreQuillPlaceholder(),Fn(this.editorRoot.classList,!1),Kn(this.editorRoot.classList,!1),this.props.onBlur&&this.props.onBlur()}))}),100)}onFocusHandler(e){clearTimeout(this.onBlurDebounce),clearTimeout(this.onFocusDebounce),e&&e.target&&!this.props.isDisabled&&!this.props.isReadOnly&&(this.selectEmbeddedBlot(e.target),this.editorContainer.removeEventListener("focusin",this.onFocusHandler),e.target.focus(),this.editorContainer.addEventListener("focusin",this.onFocusHandler)),this.onFocusDebounce=setTimeout((()=>{this.editorHasFocus()&&this.isEditorFocusState(is)&&(window.getSelection().focusNode===this.editorRoot.firstChild&&this.quill.setSelection(0,0),this.setEditorFocusState(as),this.toolbarHasFocus()||Fn(this.editorRoot.classList,!0),this.editorHasKeyboardFocus()&&Kn(this.editorRoot.classList,!0),this.toolbarHasFocus()||this.quill.hasFocus()||this.quill.focus(),this.props.onFocus&&this.props.onFocus())}),100)}initializeQuill(){var e,t;_t([...this.plugins],this.props,this.editorRoot),this.editorRoot.classList.add("bb-editor-container"),this.quill=new m.a(this.editorRoot,{placeholder:!this.props.isReadOnly&&this.props.placeholder,readOnly:this.props.isDisabled||this.props.isReadOnly,modules:{...cn,...this.getPluginModulesConfig()}}),this.quill.notifyPluginsOfPropChanges=this.notifyPluginsOfPropChanges.bind(this),this.editorRoot.firstChild.classList.add("bb-editor"),this.editorContainer.shouldEnableDemoMashup=!!this.props.plugins.reduce(((e,t)=>t.length?[...e,...t]:[...e,t]),[]).find((e=>e&&"demoMashup"===e.pluginId)),this.editorContainer.shouldEnableDemoMashup&&(_n=!0),this.addAxLabels(),this.props.disablePasteFormat?this.quill.clipboard.addMatcher(bn.selector,bn.func):gn.forEach((e=>{this.quill.clipboard.addMatcher(e.selector,e.func)})),e=this.quill,(t=this.plugins).forEach((n=>{if(n.matchers){let t;n.matchers.forEach((s=>{t="function"==typeof n.deltaModifier?n.deltaModifier:(e,t)=>{const s=n.formatter&&n.formatter.blotName,o=s||n.pluginId;let r;return["embed","embedInline"].includes(n.formatter.type)?r={insert:{[o]:bt(e,n.formatter.attributes)},attributes:bt(e,n.formatter.attributes)}:"inline"===n.formatter.type&&(r={insert:e.textContent,attributes:bt(e,n.formatter.attributes)},r.attributes[o]=bt(e,n.formatter.attributes)),"link"===s&&e.textContent&&e.textContent.trim().length?dn(t,r.attributes):new O.a([r])},e.clipboard.addMatcher(s,t)}))}e.clipboard.addMatcher(Node.TEXT_NODE,hn(t))})),Un(this.editorRoot.classList,!this.props.isDisabled&&!this.props.isReadOnly),kn(this.editorRoot.classList,this.props.isDisabled),Bn(this.editorRoot.classList,this.props.isReadOnly),Hn(this.editorRoot.classList,!!this.props.errorMessage),this.onBbMLInputChange(this.props.bbml),this.notifyPluginsOfPropChanges(),this.quill.on(m.a.events.EDITOR_CHANGE,this.onEditorChange),this.quill.history.clear()}updateQuillEnable(e=!1){e&&!this.quill.isEnabled()?this.quill.enable(!0):!e&&this.quill.isEnabled()&&this.quill.enable(!1)}updateQuillPlaceholder(e){"string"==typeof e&&this.quill.root.setAttribute("data-placeholder",e)}restoreQuillPlaceholder(){1===this.quill.getContents().ops.length&&"string"==typeof this.quill.getContents().ops[0].insert&&"\n"===this.quill.getContents().ops[0].insert&&this.quill.setText("")}unloadPlugins(){this.plugins.forEach((e=>{if("function"==typeof e.onUnload)try{e.onUnload()}catch(e){console.error(e)}})),function(e){const t=document.querySelector(`#${e}`);null!=t&&(o.a.unmountComponentAtNode(t),t.remove())}(this.bbEditorId)}notifyPluginsOfPropChanges(){Array.from(this.editorRoot.querySelectorAll(".wants-props-update")).forEach((e=>{e.formatComponent&&e.formatComponent(this.props)}))}onEditorChange(e,t,n,s){e!==m.a.events.SELECTION_CHANGE&&this.state.isApplyingChanges||e===m.a.events.SELECTION_CHANGE&&"silent"===s||e===m.a.events.TEXT_CHANGE&&"silent"===s||o.a.unstable_batchedUpdates((()=>{if(this.editorInitialContent||(this.editorInitialContent=this.quill.getContents().ops),e===m.a.events.SELECTION_CHANGE&&"user"===s&&(clearTimeout(this.extendSelection),this.extendSelection=setTimeout((()=>{this.extendTableSelection()}),400)),e!==m.a.events.SELECTION_CHANGE||"user"!==s||this.state.isApplyingChanges||this.setState({editorLastContent:this.quill.getContents().ops}),e===m.a.events.TEXT_CHANGE){const e=this.quill.getContents().ops;this.onBbMLOutputChange(e),this.setState({editorLastContent:e})}if(this.editorContainsElement(document.activeElement)&&!this.props.isDisabled&&!this.props.isReadOnly&&e&&!this.state.isApplyingChanges){const e=t&&t.ops&&t.ops[t.ops.length-1].insert,s="string"==typeof e&&e.includes("\n"),o=this.getEditorFormat(),r={};if(s){Object.values(Xn).forEach((e=>{o[e]&&(r[e]=o[e])})),r.selection=new g.a(o.selection.index+1,0)}const i=this.getEditorHasTableSelected();let a=!1;if(i)this.storedStack||(this.storedStack=this.quill.history.stack,this.quill.history.clear()),a=this.isDifferentTableSelected(n);else if(this.storedStack){const e=this.quill.history.stack,t=this.getDeltaChangeLength(e);this.storedStack.undo.forEach((e=>{e.undo.ops.forEach((e=>{e.retain&&e.retain>t.lowestRetain&&(e.retain+=t.offset)}))})),this.quill.history.stack=this.storedStack,this.storedStack=void 0}a?this.resetTableSubtoolbar():this.setState({editorHasTableSelected:i}),this.setState({editorFormat:o,editorLastFormat:r,editorLastSelection:o.selection,editorLastRawSelection:o.rawSelection,toolbarHasKeyboardFocus:this.keyDownHandler.inToolbarScope()})}}))}getEditorSelection(){return this.quill.getSelection()||this.state.editorLastSelection}getEditorFormat(){const e=this.getEditorSelection(),t=this.quill.getText(e),n=this.quill.getContents(e),s=this.quill.getFormat(e);let o={};return Object.keys(this.state.editorLastFormat).length?(o=this.state.editorLastFormat,o.selection=e,o.rawSelection=e):(0===e.length?o=s:e.length>0&&(o=n.ops.reduce(((e,t)=>({...jn(e,t),...t.attributes,..."object"==typeof t.insert?t.insert:{}})),s)),o=this.updateFormatWithBlotSelection(o,t,e),o.rawSelection=e),o}updateFormatWithBlotSelection(e,t,n){let s=0;const o=e;return Object.keys(o).forEach((e=>{const t=o[e].domNode;if(t){const e=m.a.find(t);o.text=t.innerText,o.selection=new g.a(e.offset(this.quill.scroll),e.length()),s+=1}})),(1!==s||n.index<o.selection.index||n.index+n.length>o.selection.index+o.selection.length)&&(o.text=t,o.selection=n),o}selectEmbeddedBlot(e){const t=Rt.find(e,!0),n=t&&t.constructor&&Object.getPrototypeOf(t.constructor).blotName;let s;"embed"===n?(this.quill.setSelection(t.offset(this.quill.scroll)-1,2,m.a.sources.USER),this.onEditorChange(m.a.events.SELECTION_CHANGE),s=t.domNode.querySelector("span > div:first-child")||t.domNode,s.classList.add("ql-embed-selected","no-select")):"embedInline"===n&&(this.quill.setSelection(t.offset(this.quill.scroll),1,m.a.sources.USER),this.onEditorChange(m.a.events.SELECTION_CHANGE),s=t.domNode,s.classList.add("ql-embed-selected","no-select")),this.unselectEmbeddedBlots(s)}unselectEmbeddedBlots(e){const t=Array.from(this.editorRoot.querySelectorAll(".ql-embed-selected"));t.length&&t.forEach((t=>{t!==e&&t.classList.remove("ql-embed-selected","no-select")}))}makeEmbedsEasierToEditAfter(){var e;const t=this.quill.getContents().ops,n=t.length-1;(t[n]&&"object"==typeof t[n].insert||t[n]&&"string"==typeof t[n].insert&&"\n"!==t[n].insert.substr(-1,1)||t[n]&&"string"==typeof t[n].insert&&"\n"===t[n].insert&&(null===(e=t[n].attributes)||void 0===e?void 0:e.table))&&this.quill.insertText(this.quill.scroll.length,"\n",m.a.events.SILENT)}applyEditorChange(e,t){this.setState({isApplyingChanges:!0},(()=>{Ln(e,{...this.state.editorLastSelection,raw:this.state.editorLastRawSelection,update:t},this.quill,this.onEditorChange),this.notifyPluginsOfPropChanges(),this.setState({isApplyingChanges:!1},(()=>{this.onEditorChange(m.a.events.TEXT_CHANGE)}))}))}applyChangeAndSetEditorFocused(e){this.applyEditorChange(e),this.onToolbarActionComplete(!0)}quillModuleAction(e){let t;if("quill.history"===e.module&&(t=this.quill.history,"undo"===e.action))return void t.undo();if("quill.table"===e.module)switch(t=this.quill.getModule("table"),e.action){case"insert-table":e.rowCount&&e.columnCount&&(t.insertTable(e.rowCount,e.columnCount,e.headerRow,e.headerColumn),this.setState({editorHasTableSelected:this.getEditorHasTableSelected()}));break;case"edit-table":e.rowCount&&e.columnCount&&t.editTable(e.rowCount,e.columnCount);break;case"get-table-info":return t.getTableData(this.state.tableHasHeaderRow,this.state.tableHasHeaderColumn);case"insert-row-above":t.insertRowAbove();break;case"insert-row-below":t.insertRowBelow();break;case"insert-col-left":t.insertColumnLeft();break;case"insert-col-right":t.insertColumnRight();break;case"delete-table":t.deleteTable();break;case"delete-row":t.deleteRow();break;case"delete-column":t.deleteColumn();break;case"set-header-row":t.updateHeaderRow(e.setHeader);break;case"set-header-col":t.updateHeaderCol(e.setHeader);break;case"saved-selection":t.updateNullSelection();break;case"get-headers":return this.setState({editorHasTableSelected:this.getEditorHasTableSelected()}),t.getTableHeadersValue();case"reset-table-subtoolbar":this.resetTableSubtoolbar()}if("plugins"===e.module){const t=this.getPluginModules();"read-only-change"===e.action&&t.forEach((t=>{t.onReadOnlyChange&&(t.onReadOnlyChange(e.value,this.props.currentLocale),t.quill.blur())}))}if(e.module||"clearFormat"!==e.action)return;const n=this.quill.getSelection();!(null==n?void 0:n.length)>0||(Zn.forEach((e=>{this.quill.formatText(n.index,n.length,e,!1)})),es.forEach((e=>{this.quill.format(e,!1)})))}onBbMLInputChange(e){"string"==typeof e&&(this.quill.clipboard.dangerouslyPasteHTML(e),this.quillModuleAction({module:"plugins",action:"read-only-change",value:this.props.isReadOnly}),this.makeEmbedsEasierToEditAfter(),""!==e||this.editorInitialContent||(this.editorInitialContent=this.quill.getContents().ops))}onBbMLOutputChange(e){const{editorLastContent:t}=this.state,{autoSaveCallback:n,autoSaveMilliseconds:s,onChange:o}=this.props,r=!Object(fn.g)(e,t);this.isBbmlDirty=!Object(fn.g)(e,this.editorInitialContent)&&("\n"!==e[0].insert||"\n"!==this.editorInitialContent[0].insert||e.length>1||this.editorInitialContent.length>1);const i=n&&"number"==typeof s;if((o||i)&&r){const t={toBbML:ut.toBbML.bind(null,e,this.props.isRtl),isDirty:this.isBbmlDirty,setPristine:e=>{this.setState({editorFormat:{text:"",selection:new g.a(0,0)}}),this.onBbMLInputChange(e),this.editorInitialContent=this.quill.getContents().ops,this.onEditorChange(m.a.events.TEXT_CHANGE)}};o&&o(t),i&&(clearTimeout(this.autoSaveTimeout),this.autoSaveTimeout=setTimeout((()=>{n(t)}),s))}}setToolbarState(e){const t=function(e,t){let n=si;switch(t){case os:n=e>=676?Kr:e>=554?Jr:si;break;case rs:n=e>=268?ci:di;break;default:n=si}return n}(e.getBoundingClientRect().width,this.props.toolbarSet);t!==this.state.toolbar&&this.setState({toolbar:t})}updateToolbar(e){if(this.editorContainer){const t=this.editorContainer;t.getBoundingClientRect().width<=0&&window.requestAnimationFrame?this.requestAnimationFrameID=window.requestAnimationFrame(this.updateToolbar):e&&"resize"===e.type?(clearTimeout(this.debounceWindowResizeToolbar),this.debounceWindowResizeToolbar=setTimeout((()=>this.setToolbarState(t)),100)):this.setToolbarState(t)}}getPluginButtons(){return this.plugins.filter((e=>e.buttonConfig)).map((e=>e.buttonConfig)).map((e=>{const t=e;return t.key=e.id,t}))}getPluginModules(){return this.plugins.map((e=>this.quill.getModule(e.pluginId))).filter((e=>!!e))}getPluginModulesConfig(){return this.plugins.reduce(((e,t)=>(t.module&&(e[t.pluginId]=t.moduleParams||!0),e)),{})}getEditorRect(){return this.editorContainer?this.editorContainer.getBoundingClientRect():null}isFileDropEnabled(){return!this.props.isDisabled&&!this.props.isReadOnly&&this.fileDragDropUtil.hasDropHandlers()}isFileOnEvent(e){return void 0!==e.dataTransfer.files&&e.dataTransfer.files.length>0}onDragEnter(){this.isFileDropEnabled()&&(this.dragCount+=1,Kn(this.editorRoot.classList,!0))}onDragLeave(){this.isFileDropEnabled()&&(this.dragCount-=1,0===this.dragCount&&Kn(this.editorRoot.classList,!1))}onDrop(e){this.isFileDropEnabled()&&this.isFileOnEvent(e)&&(this.dragCount=0,Kn(this.editorRoot.classList,!1),this.fileDragDropUtil.onFileDrop(e))}getWordCount(){if(!this.quill)return 0;const e=this.quill.getText().trim();return 0===e.length?0:e.split(/\s+/).length}getDeltaChangeLength(e){let t=0,n=Number.MAX_SAFE_INTEGER;return e.undo.forEach((e=>{e.undo.ops.forEach((e=>{var s,o,r;e.retain&&(n=Math.min(n,e.retain)),t+=null!==(s=e.delete)&&void 0!==s?s:0,t-=null!==(r=null===(o=e.insert)||void 0===o?void 0:o.length)&&void 0!==r?r:0}))})),n===Number.MAX_SAFE_INTEGER&&(n=0),{lowestRetain:n,offset:t}}getEditorHasTableSelected(){const e=this.getEditorSelection();return"table"in this.quill.getFormat(e)}isDifferentTableSelected(e){if(e){const t=this.quill.getFormat(e);if("table"in t){const e=this.getEditorSelection();return this.quill.getFormat(e).table!==t.table}}return!1}extendTableSelection(){var e,t;const n=document.getSelection();if("Range"!==n.type)return;let s=n.anchorNode;s.nodeType!==Node.ELEMENT_NODE&&(s=s.parentElement),s=null!==(e=s.closest("TD"))&&void 0!==e?e:s.closest("TH");let o=n.focusNode;if(o.nodeType!==Node.ELEMENT_NODE&&(o=o.parentElement),o=null!==(t=o.closest("TD"))&&void 0!==t?t:o.closest("TH"),!s&&!o)return;const r=n.anchorNode.compareDocumentPosition(n.focusNode)===Node.DOCUMENT_POSITION_FOLLOWING;if(s===o)return;let i=n.anchorNode,a=n.anchorOffset,c=n.focusNode,l=n.focusOffset;s&&(i=r?s.closest("TABLE"):s.closest("TABLE").nextSibling,a=0),o&&(c=r?o.closest("TABLE").nextSibling:o.closest("TABLE"),l=0),n.setBaseAndExtent(i,a,c,l)}resetTableSubtoolbar(){this.setState({editorHasTableSelected:!1,tableHasHeaderRow:void 0,tableHasHeaderColumn:void 0}),setTimeout((()=>this.setState({editorHasTableSelected:!0})))}setHeaders(e,t){this.setState({tableHasHeaderRow:e,tableHasHeaderColumn:t})}render(){const{localize:e}=this.props,t=this.state.toolbar,n=this.getPluginButtons(),s=!this.props.isToolbarHidden&&!this.props.isReadOnly,o=s&&this.state.editorHasKeyboardFocus,r=Object(p.a)({"keyboard-tooltip-container":!0,"no-toolbar":!s,"is-rtl":this.props.isRtl});return i.a.createElement("div",{ref:e=>{this.editorContainer=e},className:"bb-editor-root",role:"presentation",onKeyDown:this.onKeyDown,onDragEnter:this.onDragEnter,onDragLeave:this.onDragLeave,onDrop:this.onDrop,onDragOver:this.fileDragDropUtil.onFileDragOver},s&&i.a.createElement(t,{isDisabled:this.props.isDisabled||this.props.isReadOnly,isRtl:this.props.isRtl,bbEditorId:this.bbEditorId,editorFormat:this.state.editorFormat,editorLastContent:this.state.editorLastContent,editorLastRawSelection:this.state.editorLastRawSelection,editorId:this.props.editorId,addKeyDownHandler:this.keyDownHandler.addKeyDownHandler,applyChange:this.applyEditorChange,quillModuleAction:this.quillModuleAction,toolbarActionComplete:this.onToolbarActionComplete,hasKeyboardFocus:this.state.toolbarHasKeyboardFocus,setEditorFocusStateToolbar:this.setEditorFocusStateToolbar,pluginButtons:n,getEditorRect:this.getEditorRect,editorHasTableSelected:this.state.editorHasTableSelected,setHeaders:this.setHeaders,tableHasHeaderRow:this.state.tableHasHeaderRow,tableHasHeaderColumn:this.state.tableHasHeaderColumn}),i.a.createElement("div",{className:r},o&&i.a.createElement("span",{role:"status","aria-live":"polite",className:"sr-only"},e.translate("bbmlEditor.editor.accessibilityAriaMessage")),o&&i.a.createElement("div",{className:"keyboard-tooltip"},e.translate("bbmlEditor.editor.accessibilityMessage")),i.a.createElement("div",{ref:e=>{this.editorRoot=e},role:"presentation"})),this.props.errorMessage&&i.a.createElement("span",{className:"error-message"},this.props.errorMessage),this.props.showWordCount&&!this.props.isReadOnly&&s&&i.a.createElement("span",{className:"word-count"},e.translate("bbmlEditor.editor.wordCount",{count:this.getWordCount()})))}}const bi=c.a.shape({buttonConfig:c.a.shape({id:c.a.string.isRequired,cssClass:c.a.string.isRequired,isActive:c.a.func.isRequired,onClick:c.a.func.isRequired}),formatter:c.a.shape({type:c.a.oneOf(["inline","embed","embedInline"]),tagName:c.a.string,attributes:c.a.shape(),renderDomNode:c.a.func}),matchers:c.a.arrayOf(c.a.string),onLoad:c.a.func,onUnload:c.a.func,pluginId:c.a.string,toBbML:c.a.func,toBbMLAsync:c.a.func});pi.propTypes={ally:wn,ariaLabelledBy:c.a.string,ariaDescribedBy:c.a.string,ariaRequired:c.a.bool,autoSaveCallback:c.a.func,autoSaveMilliseconds:c.a.number,bbml:c.a.string,disablePasteFormat:c.a.bool,editorId:c.a.string,errorMessage:c.a.string,expandInlineFilesOnLoad:c.a.bool,isDisabled:c.a.bool,isReadOnly:c.a.bool,isRtl:c.a.bool,isToolbarHidden:c.a.bool,onChange:c.a.func,onBlur:c.a.func,onFocus:c.a.func,placeholder:c.a.string,plugins:c.a.arrayOf(c.a.oneOfType([bi,c.a.arrayOf(bi)])),showWordCount:c.a.bool,toolbarSet:c.a.oneOf(["default","minimal"])},pi.defaultProps={ally:Dn,ariaLabelledBy:null,ariaDescribedBy:null,ariaRequired:!1,autoSaveCallback:null,autoSaveMilliseconds:null,bbml:null,disablePasteFormat:!1,editorId:"bb-editor-textbox",errorMessage:null,isDisabled:!1,isReadOnly:!1,isRtl:!1,isToolbarHidden:!1,onChange:null,onFocus:null,onBlur:null,placeholder:null,plugins:[],showWordCount:!1,toolbarSet:"default",expandInlineFilesOnLoad:!1};var mi=Object(b.a)(pi),gi=n("IbyE"),hi=n("AuQm"),fi=n("WBPx"),Oi=n("3/0u"),Ei=n.n(Oi),yi=n("ggb3"),Ii=n.n(yi),Ci=n("pRTq"),vi=n.n(Ci);function Si(e){return e.replace(/&/g,"&amp;").replace(/"/g,"&quot;")}function ji(e){return e.replace(/&quot;/g,'"').replace(/&amp;/g,"&")}function Ti(e){return(new DOMParser).parseFromString(e,"text/html")}async function Ai(e){let t;return e.includes("soundcloud.com")?vi.a.get(`https://soundcloud.com/oembed?format=json&url=${e}`).then((e=>(t=Ti(e.data.html).getElementsByTagName("iframe")[0].src,t))):e.includes("slideshare.net")?vi.a.jsonp(`https://www.slideshare.net/api/oembed/2?url=${e}&format=jsonp`).then((e=>(t=Ti(e.html).getElementsByTagName("iframe")[0].src,t))):void 0}function _i(e,t){let n=e;return e&&e.indexOf("//")<0&&("/"!==e[0]&&(n=`/${e}`),n=t?t+e:window.location.origin+e),n}function Ri(e,t,n){return Ii()({url:n,method:"GET",headers:{"X-Blackboard-XSRF":t},cancelToken:new Ii.a.CancelToken((t=>{e.cancelInternal=t}))})}class Ni{constructor(e,t){if(e.cloudStorageIntegrationAccessToken){this.progressTick=0,this.file=e;const n=_i(`${t.apiBasePath}/v1/cloudstorages`),s=_i(`${n}/cloudstorageintegration/contents/${encodeURIComponent(e.id)}/download?accessToken=${e.cloudStorageIntegrationAccessToken}&expand=mimeType,isMedia`);Ri(this,t.xsrfToken,s).then((e=>this.queryDownload(e,n,t.xsrfToken))).catch((e=>this.onError(e)))}else{this.progressTick=0,this.file=e;let n=_i(`${t.apiBasePath}/v1/files?expand=mimeType,isMedia`);t.courseId&&(n=`${n}&courseId=${t.courseId}`),Number.isFinite(t.resizeImageWidth)&&(n=`${n}&resizeImageWidth=${t.resizeImageWidth}`);const s=new FormData;s.append("file",e,encodeURIComponent(e.name)),s.append("webLocation",t.webLocation||""),s.append("fileLocation",t.fileLocation||""),Ii()({url:n,method:"POST",headers:{"Content-Type":"image/jpeg","X-Blackboard-XSRF":t.xsrfToken},data:s,cancelToken:new Ii.a.CancelToken((e=>{this.cancelInternal=e})),onUploadProgress:e=>this.onProgress(e)}).then((e=>this.onSuccess(e))).catch((e=>this.onError(e)))}}onSuccess(e){this.cachedResponse=e,this.successCallback&&this.successCallback(this.file,e.data)}onProgress(e,t){if(this.cachedProgress=e,this.progressCallback){if(t)return void this.progressCallback(this.file.name,Math.floor(e));e.lengthComputable&&this.progressCallback(this.file.name,Math.floor(100*e.loaded/e.total))}}onError(e){this.cachedError=e,this.errorCallback&&this.errorCallback(this.file,e)}queryDownload(e,t,n){return new Promise((s=>{"COMPLETE"===e.data.status?(this.cloudStorageIntegrationTimer&&clearTimeout(this.cloudStorageIntegrationTimer),s(this.onSuccess(e))):this.cloudStorageIntegrationTimer=setTimeout((()=>{this.onProgress(+e.data.completePercentage,!0);const o=`${t}/tasks/${e.data.taskId}?accessToken=${this.file.cloudStorageIntegrationAccessToken}&expand=mimeType,isMedia`;s(Ri(this,n,o).then((e=>this.queryDownload(e,t,n))).catch((e=>this.onError(e))))}),500)}))}cancel(){delete this.errorCallback,delete this.progressCallback,delete this.successCallback,this.cachedResponse||this.cachedError||this.cancelInternal()}progress(e){return this.progressCallback=e,this.cachedProgress&&this.onProgress(this.cachedProgress),this}success(e){return this.successCallback=e,this.cachedResponse&&this.onSuccess(this.cachedResponse),this}error(e){return this.errorCallback=e,this.cachedError&&this.onError(this.cachedError),this}}class wi extends i.a.Component{constructor(e){super(e),this.state={files:[],fileGroup:{}},this.uploadServices={},this.progressTimers={},this.failedUploads=[],this.successfulUploads=[],this.updateProgress=this.updateProgress.bind(this),this.onCancel=this.onCancel.bind(this),this.onCancelAll=this.onCancelAll.bind(this),this.onDismiss=this.onDismiss.bind(this),this.onUploadSuccess=this.onUploadSuccess.bind(this),this.onUploadError=this.onUploadError.bind(this),this.finishUploading=this.finishUploading.bind(this)}UNSAFE_componentWillMount(){const{files:e}=this.props;this.setState({files:e}),e.forEach((e=>{let t=!1;this.uploadServices[e.name]=function(e,t){return new Ni(e,t)}(e,{apiBasePath:this.props.apiBasePath,xsrfToken:this.props.xsrfToken,webLocation:this.props.webLocation,fileLocation:this.props.fileLocation,resizeImageWidth:this.props.resizeImageWidth,courseId:this.props.courseId}).progress(((n,s)=>{s>=100?(clearTimeout(this.progressTimers[e.name]),this.updateProgress(n,100)):t||(t=!0,this.progressTimers[e.name]=setTimeout((()=>{const e=!!this.state.fileGroup[n]&&this.state.fileGroup[n].uploadComplete?100:s;t=!1,this.updateProgress(n,e)}),5))})).success(this.onUploadSuccess).error(this.onUploadError)}))}onCancel(e){let t=this.state.files;this.uploadServices[e].cancel(),t=t.filter((t=>t.name!==e)),this.failedUploads=this.failedUploads.filter((t=>t.name!==e)),this.successfulUploads=this.successfulUploads.filter((t=>t.name!==e)),t.length>0?this.setState({files:t},(()=>{this.finishUploading()})):this.onDismiss()}onCancelAll(){this.props.files.forEach((e=>{this.uploadServices[e.name].cancel()})),this.onDismiss()}onDismiss(){this.props.destroy()}onUploadSuccess(e,t){this.successfulUploads.push(e),this.props.onUploadSuccess&&this.props.onUploadSuccess(t),this.setState((n=>({fileGroup:{...n.fileGroup,[e.name]:{...n.fileGroup[e.name]||{},uploadComplete:!0,successResponse:t}}})),(()=>{this.finishUploading()}))}onUploadError(e,t){var n;const{localize:s,onUploadError:o}=this.props;this.uploadServices[e.name].cancel(),this.failedUploads.push(e),clearTimeout(this.progressTimers[e.name]);const r=422===(null===(n=null==t?void 0:t.response)||void 0===n?void 0:n.status);o&&o(t),this.setState((t=>({fileGroup:{...t.fileGroup,[e.name]:{...t.fileGroup[e.name]||{},errorResponse:s.translate("bbmlEditor.dialogs.insertLocalFile."+(r?"securityThreat":"networkError")),progress:0,uploadComplete:!1}}})),(()=>{this.finishUploading()}))}updateProgress(e,t){const n=this.state.fileGroup;(!this.state.fileGroup[e]||void 0===this.state.fileGroup[e].progress||t>this.state.fileGroup[e].progress)&&(n[e]={...this.state.fileGroup[e]||{},progress:t},this.setState({fileGroup:n}))}finishUploading(){if(this.state.files.length-this.failedUploads.length===this.successfulUploads.length){const{fileGroup:e}=this.state,t=[];if(Object.keys(e).forEach((n=>{e[n].successResponse&&t.push(e[n].successResponse)})),0===t.length)return;setTimeout((()=>{this.props.destroy(),this.props.createChange(t)}),350)}}render(){const{fileGroup:e}=this.state,{localize:t,analyticsEventAugmentor:n}=this.props,s=t.translate("bbmlEditor.buttons.cancel"),o="cloudStorageIntegration"===this.props.fileSource?t.translate("bbmlEditor.dialogs.insertCloudStorageIntegrationFile.titleInsert"):t.translate("bbmlEditor.dialogs.insertLocalFile.titleInsert");return i.a.createElement(Ei.a,{hidden:!1,onDismiss:this.onDismiss,dialogContentProps:{title:o,showCloseButton:!1,type:Oi.DialogType.fullHeaderFooter},modalProps:{containerClassName:"modal-insert-file"},firstFocusableSelector:"ms-Dialog-title",analyticsId:"cloudStorageIntegration"===this.props.fileSource?"editor.dialogs.insertCloudStorageIntegrationFile.titleInsert":"editor.dialogs.insertLocalFile.titleInsert"},this.state.files.map((s=>{const o=e[s.name]?e[s.name].progress:0,r=!!e[s.name]&&e[s.name].uploadComplete,a=o>=100&&!r,c=21.5,l=43*Math.PI,d=o>0?l-l/100*o:l,u=Object(p.a)({"loading-circle-svg":!0,processing:a});let b="";return this.state.fileGroup[s.name]&&(b=this.state.fileGroup[s.name].errorResponse||""),i.a.createElement("div",{key:s.name,className:"file-group"},i.a.createElement("div",{className:"file-progress-container"},r?i.a.createElement("div",{className:"indicator complete"}):i.a.createElement("div",{className:"indicator"},i.a.createElement("svg",{className:u,height:49,width:49,viewBox:"0 0 46 46"},i.a.createElement("circle",{className:"back",cx:23,cy:23,r:c,fill:"none",strokeWidth:3,strokeDasharray:l,strokeDashoffset:d}),i.a.createElement("circle",{className:"bar",cx:23,cy:23,r:c,fill:"none",strokeWidth:3,strokeDasharray:a?6:l,strokeDashoffset:d})),o.toString(),"%"),i.a.createElement("div",{className:"file-name no-longtext no-select"},s.name),i.a.createElement("button",{type:"button","aria-label":t.translate("bbmlEditor.dialogs.insertLocalFile.cancelUploadButton"),className:"cancel-upload",onClick:n(he.AnalyticsEventTypes.CLICK_EVENT,(()=>this.onCancel(s.name)),"editor.dialogs.insertLocalFile.cancelUploadButton"),"data-analytics-id":"editor.dialogs.insertLocalFile.cancelUploadButton"},"X")),i.a.createElement("div",{className:"upload-error-message"},b))})),i.a.createElement("br",null),i.a.createElement(Oi.DialogFooter,null,i.a.createElement(fi.AnalyticsDefaultButton,{onClick:this.onCancelAll,analyticsId:"editor.modalInsertFile.cancel"},s)))}}wi.propTypes={apiBasePath:c.a.string.isRequired,createChange:c.a.func.isRequired,destroy:c.a.func.isRequired,files:c.a.arrayOf(c.a.shape({lastModified:c.a.number,name:c.a.string,size:c.a.number,type:c.a.string}).isRequired).isRequired,fileLocation:c.a.string,fileSource:c.a.oneOf(["local","cloudStorageIntegration"]),onUploadError:c.a.func,onUploadSuccess:c.a.func,webLocation:c.a.string,xsrfToken:c.a.string.isRequired,...hs},wi.defaultProps={fileLocation:"",fileSource:"local",onUploadError:null,onUploadSuccess:null,webLocation:""};var Di=Object(b.a)(Object(he.withAnalytics)(wi)),Li=n("dJc8"),Pi=n("jZnR");class ki extends i.a.Component{constructor(e){super(e),this.onDismiss=this.onDismiss.bind(this)}onDismiss(){var e;this.props.destroy(),null===(e=this.props)||void 0===e||e.executeCallback()}convertToMiB(e){return e/1048576}render(){const{t:e,files:t,maxFileSize:n,fileUploadSettings:s,classes:o}=this.props,{displayRecommendedAlternatives:r,displaySupportLink:a,supportLink:c,recommendedAlternatives:l}=s,d=i.a.createElement(ge.AnalyticsLink,{analyticsId:"bbmlEditor.dialogs.fileUpload.linkAnalytics",href:c,target:"_blank",rel:"noreferrer"},e("bbmlEditor.dialogs.fileUpload.maxSizeWarning.supportLink"));return i.a.createElement(ge.AnalyticsDialog,{open:!0,maxWidth:"md",onClose:this.onDismiss,analyticsId:"editor.dialogs.fileUpload.maxSizeWarning.title",className:"max-size-warning-modal",PaperProps:{role:"alertdialog"},"aria-labelledby":"alert-upload-error"},i.a.createElement(ge.AnalyticsDialogTitle,{id:"alert-upload-error",onClose:this.onDismiss},e("bbmlEditor.dialogs.fileUpload.maxSizeWarning.title")),i.a.createElement(ge.AnalyticsDialogContent,null,i.a.createElement("div",{className:"warning-message"},e("bbmlEditor.dialogs.fileUpload.maxSizeWarning.message",{maxFileSize:this.convertToMiB(n)})),i.a.createElement("ul",{className:o.filesUL},t.map((t=>i.a.createElement("li",{className:"file-info",key:t.name},e("bbmlEditor.dialogs.fileUpload.maxSizeWarning.files",{fileName:t.name,fileSize:this.convertToMiB(t.size)}))))),i.a.createElement("p",{className:"alternate-storage-info"},r||""!==l?e("bbmlEditor.dialogs.fileUpload.maxSizeWarning.alternateStorage",{alternateStorage:l}):e("bbmlEditor.dialogs.fileUpload.maxSizeWarning.noAlternateStorage"),(a||""!==c)&&i.a.createElement("span",null," ",e("bbmlEditor.dialogs.fileUpload.maxSizeWarning.supportLinkText",{supportLinkAnchor:d})))),i.a.createElement(ge.AnalyticsDialogActions,null,i.a.createElement(ge.AnalyticsPrimaryButton,{onClick:this.onDismiss,analyticsId:"editor.modalMaxFileSizeError.cancel"},e("bbmlEditor.dialogs.fileUpload.maxSizeWarning.primary"))))}}ki.propTypes={destroy:c.a.func.isRequired,files:c.a.arrayOf([{name:c.a.string,size:c.a.number}]),maxFileSize:c.a.number.isRequired,executeCallback:c.a.func},ki.defaultProps={fileUploadSettings:{displayRecommendedAlternatives:!1,displaySupportLink:!1,supportLink:"",recommendedAlternatives:""}};var xi=Object($n.a)(Object(Li.a)((()=>Object(Pi.a)({filesUL:{overflowY:"auto",maxHeight:"8.25rem",paddingLeft:"1rem",marginLeft:0}})))(ki));var Bi=(e,t)=>new Promise(((n,s)=>{const o=document.getElementById("browseForFiles");o&&o.remove();const r=document.createElement("input");r.id="browseForFiles",r.classList.add("sr-only"),r.tabIndex="-1",r.role="presentation",r.type="file",(null==t?void 0:t.length)>0&&(r.accept=t.join(",")),r.multiple=!!e,r.onchange=e=>{const t=e.target.files;r.remove(),n(t)},document.body.appendChild(r);document.querySelector(".data-e2e-simulate-file-input")||r.click()}));function Mi(e){return encodeURIComponent(e).replace(/[!'()*]/g,(e=>`%${e.charCodeAt(0).toString(16)}`))}class Ui extends Error{constructor(e,t){super(t),this.errorData=e}getErrorFiles(){return this.errorData.errorFiles}getAllowedFiles(){return this.errorData.allowedFiles}}class Gi{constructor(e){this.sizeLimitInBytes=e}validate(e){const t=this.findBiggerThanLimit(e),n={errorFiles:t,allowedFiles:this.findSmallerThanLimit(e)};if(t.length>0)throw new Ui(n,"File is larger than the maximum file size")}findBiggerThanLimit(e){return e.filter((e=>e.size>this.sizeLimitInBytes))}findSmallerThanLimit(e){return e.filter((e=>e.size<=this.sizeLimitInBytes))}}class Fi extends Error{constructor(e){super("InvalidFileError"),Object.setPrototypeOf(this,new.target.prototype),this.invalidFile=e}}function qi(e,t,n,s){return new Promise((o=>{e(Di,{createChange:e=>o(e),files:n,fileSource:s,...t},t.localeProps)}))}function Hi(e,t,n,s){e(t.map(((e,t)=>{const o=decodeURIComponent(e.fileName),r=Mi(e.fileName),i=`${e.webLocation}${r}`,a={alternativeText:o,linkName:o,mimeType:e.mimeType,render:gi.t.Attachment,fileSize:n[t].size};return(Object(hi.Z)(a,s)||Object(hi.ab)(a,s))&&(a.render=gi.t.Inline),{href:i,bbfile:a,originalFile:e}})))}function Vi(e,t){return e.allowedFileTypes.some((e=>t.name.toLowerCase().endsWith(e)))}function Ki(e,t=null,n="local"){const s=t||(()=>Bi(e.multiple,e.allowedFileTypes)),o=e.showModal||Tn,r=e.fileUploadSettings?e.fileUploadSettings.maxUploadSizeInBytes:Jn.maxFileSize,i=new Gi(r),a=e.supportsInlineDocumentRender;return new Promise((t=>{s().then((s=>{const r=[];for(let t=0;t<s.length;t+=1){if(e.allowedFileTypes&&!Vi(e,s[t]))throw new Fi(s[t].name);r.push(s[t])}i.validate(Array.from(s)),qi(o,e,r,n).then((e=>{Hi(t,e,r,a)}))})).catch((s=>{s instanceof Ui?function(e,t,n,s){return new Promise((o=>{e(xi,{executeCallback:()=>o(),...t,files:n,maxFileSize:s},t.localeProps)}))}(o,e,s.getErrorFiles(),r).then((()=>{s.getAllowedFiles().length>0&&qi(o,e,s.getAllowedFiles(),n).then((e=>{Hi(t,e,[...s.getAllowedFiles()],a)}))})):e.applyChange?e.applyChange(s):s instanceof Fi&&e.onWrongFileType(s)}))}))}const $i={"application/msword":["doc","dot"],"application/pdf":["pdf"],"application/excel":["xls"],"application/mspowerpoint":["ppt"],"application/powerpoint":["ppt"],"application/x-mspowerpoint":["ppt"],"application/vnd.ms-excel":["xls","xlt","xla"],"application/vnd.ms-excel.addin.macroEnabled.12":["xlam"],"application/vnd.ms-excel.sheet.binary.macroEnabled.12":["xlsb"],"application/vnd.ms-excel.sheet.macroEnabled.12":["xlsm"],"application/vnd.ms-excel.template.macroEnabled.12":["xltm"],"application/vnd.ms-powerpoint":["ppt","pot","pps","ppa"],"application/vnd.ms-powerpoint.addin.macroEnabled.12":["ppam"],"application/vnd.ms-powerpoint.presentation.macroEnabled.12":["pptm","potm"],"application/vnd.ms-powerpoint.slideshow.macroEnabled.12":["ppsm"],"application/vnd.ms-word.document.macroEnabled.12":["docm"],"application/vnd.ms-word.template.macroEnabled.12":["dotm"],"application/vnd.openxmlformats-officedocument.presentationml.presentation":["pptx"],"application/vnd.openxmlformats-officedocument.presentationml.slideshow":["ppsx"],"application/vnd.openxmlformats-officedocument.presentationml.template":["potx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":["xlsx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.template":["xltx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":["docx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.template":["dotx"],"application/x-excel":["xls","xll"],"application/x-compressed":["zip"],"application/x-zip-compressed":["zip"],"application/zip":["zip"],"audio/midi":["mid"],"audio/mpeg":["mp3"],"audio/mpeg3":["mp3"],"audio/x-mpeg":["mp3"],"audio/x-mpeg3":["mp3"],"audio/x-midi":["mid"],"audio/aiff":["aiff","aif","aifc"],"audio/x-aiff":["aiff","aif","aifc"],"audio/wav":["wav"],"audio/x-wav":["wav"],"image/bmp":["bmp","bm"],"image/x-windows-bmp":["bmp"],"image/gif":["gif"],"image/x-icon":["ico"],"image/jpeg":["jpg","jpeg"],"image/png":["png"],"image/tiff":["tif","tiff"],"image/x-tiff":["tif","tiff"],"multipart/x-zip":["zip"],"text/plain":["txt"],"video/avi":["avi"],"video/mpeg":["mpeg","mp4"],"video/msvideo":["avi"],"video/quicktime":["mov","moov"]};function Wi(e,t){return $i[t]?$i[t].some((t=>e.endsWith(`.${t}`)))?e:`${e}.${$i[t][0]}`:e}var zi=n("OIxA");function Qi(e){try{JSON.parse(e)}catch(t){return function(e){const t=['{"','["',':"',',"'],n=['"}','"]','":','",'];for(let s=0;s<e.length;s++){const o=e[s];'"'===o&&"\\"!==e[s-1]&&t.indexOf(e[s-1]+o)<0&&n.indexOf(o+e[s+1])<0&&(e=e.substr(0,s)+'\\"'+e.substr(s+1),s+=1)}return e}(e)}return e}function Yi(e){return function(t){const n="function"==typeof e?e():e;return t?Promise.resolve(n):n}}var Ji=function(e,t,n){let s=e;return Object.keys(t).forEach((e=>{const o=n[e.replace("data-","")],r=t[e];s=function(e,t,n,s){return(n||s)&&e.setAttribute(t,n||s),e}(s,e,o,r)})),s};const Xi="customClass",Zi=['a[data-bbtype="customClass"][data-bbfile]'],ea={type:"inline",blotName:Xi,tagName:"span",attributes:{"data-bbfile":null,"data-bbtype":null},renderDomNode:(e,t,n)=>{const s=Ji(e,t,n),o=JSON.parse(n.bbfile);return s.className=o.className,s}};function ta(e,t){return`<a href="#" data-bbtype="customClass" data-bbfile="${Si(t.bbfile)}">${e}</a>`}var na=()=>({pluginId:Xi,matchers:Zi,formatter:ea,toBbML:ta}),sa=n("8h7I");var oa=e=>new Promise((t=>{setTimeout((()=>{t(e)}),200)}));const ra=/^\w+:\/\/|^mailto:/;function ia(e,t){return t?{[e]:t}:null}var aa=function(e,t,n,s){if(e.length<1)return{insert:t};let o=e;return ra.test(o)||(o=`http://${o}`),{insert:t||o,format:{link:{href:o,...ia("bbfile",n),...ia("bbtype",s)}}}};class ca extends i.a.Component{constructor(e){super(e);const t=e.editorFormat.text,n=e.editorFormat.link&&e.editorFormat.link.href;this.state={displayText:t||"",href:n||"",isOpen:!1,isEditing:e.editorFormat.link},this.isValid=this.isValid.bind(this),this.onHrefChange=this.onHrefChange.bind(this),this.onDisplayTextChange=this.onDisplayTextChange.bind(this),this.onCancel=this.onCancel.bind(this),this.onAnimationComplete=this.onAnimationComplete.bind(this),this.onSave=this.onSave.bind(this),this.getErrorMessage=this.getErrorMessage.bind(this),this.getHrefLabel=this.getHrefLabel.bind(this),this.getDisplayTextLabel=this.getDisplayTextLabel.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.onClick=this.onClick.bind(this)}UNSAFE_componentWillMount(){setTimeout((()=>this.setState({isOpen:!0})))}onCancel(){this.setState({isOpen:!1})}onAnimationComplete(){if(this.saveInitiated){const e=this.props.editorFormat.link&&this.props.editorFormat.link.bbfile,t=this.props.editorFormat.link&&this.props.editorFormat.link.bbtype;this.props.applyChange(aa(this.state.href,this.state.displayText,e,t))}this.props.destroy()}onKeyDown(e){e.keyCode===u.a.ENTER&&(e.preventDefault(),e.stopPropagation(),this.onSave())}onClick(e){e.preventDefault(),e.stopPropagation(),this.onSave()}onSave(){return this.isValid()&&!this.saveInitiated&&(this.saveInitiated=!0,this.setState({isOpen:!1})),!1}onHrefChange(e){this.setState({href:e})}onDisplayTextChange(e){this.setState({displayText:e})}getErrorMessage(e){const t=e||this.state.isEditing?"":this.props.localize.translate("bbmlEditor.dialogs.link.errorMessage");return oa(t)}getHrefLabel(){return this.props.localize.translate("bbmlEditor.dialogs.link.hrefLabel")}getDisplayTextLabel(){return this.props.localize.translate("bbmlEditor.dialogs.link.displayTextLabel")}isValid(){return(this.state.isEditing||""!==this.state.href.trim())&&!(""===this.state.href.trim()&&""===this.state.displayText.trim())}render(){const{editorFormat:e,localize:t}=this.props,n=t.translate("bbmlEditor.buttons.cancel"),s=e.link?t.translate("bbmlEditor.buttons.save"):t.translate("bbmlEditor.buttons.insert"),o=e.link&&"lti"===e.link.bbtype;return i.a.createElement(Oi.Dialog,{hidden:!this.state.isOpen,onDismiss:this.onDismiss,dialogContentProps:{title:e.link?t.translate("bbmlEditor.dialogs.link.titleEdit"):t.translate("bbmlEditor.dialogs.link.titleInsert"),showCloseButton:!1,type:Oi.DialogType.fullHeaderFooter},modalProps:{onDismiss:this.onCancel,onDismissed:this.onAnimationComplete},firstFocusableSelector:"ms-Dialog-title",analyticsId:`${e.link?t.translate("bbmlEditor.editor.dialogs.link.titleEdit"):t.translate("bbmlEditor.editor.dialogs.link.titleInsert")}`},i.a.createElement(sa.TextField,{className:o?"":"required",onKeyDown:this.onKeyDown,label:this.getHrefLabel(),value:this.state.href,onChanged:this.onHrefChange,onGetErrorMessage:this.getErrorMessage,validateOnLoad:!1,validateOnFocusOut:!0,disabled:o,analyticsId:`editor.modal.link.Lti.${o?"":"required"}.textField`,required:!0}),i.a.createElement(sa.TextField,{onKeyDown:this.onKeyDown,label:this.getDisplayTextLabel(),value:this.state.displayText,onChanged:this.onDisplayTextChange,analyticsId:"editor.modalLink.dialogs.textField"}),i.a.createElement("br",null),i.a.createElement(Oi.DialogFooter,null,i.a.createElement(fi.AnalyticsDefaultButton,{onClick:this.onCancel,analyticsId:(e.link?"editor.dialogs.link.titleEdit":"editor.dialogs.link.titleInsert")+".cancel"},n),i.a.createElement(fi.AnalyticsPrimaryButton,{onClick:this.onClick,disabled:!this.isValid(),analyticsId:"editor.modalLink.save.button"},s)))}}ca.propTypes={destroy:c.a.func.isRequired,applyChange:c.a.func.isRequired,editorFormat:c.a.shape()},ca.defaultProps={editorFormat:{}};var la=Object(b.a)(ca),da=n("qD3J");const ua="link";function pa(e){return{id:ua,cssClass:ua,iconName:"link",iconComponent:da.a,isDialog:!0,isActive:e=>!!e.link,onClick:({showModal:t,...n})=>{t(la,{...e,...n})}}}const ba=["a[href]:not([data-bbtype]):not([data-bbfile])",'a[href][data-bbtype="lti"]'],ma={type:"inline",blotName:ua,tagName:"a",attributes:{href:"#",target:"_blank","data-bbid":null,"data-bbtype":null,"data-bbfile":null,"data-mce-href":null},renderDomNode:(e,t,n,s)=>{const o={};Object.keys(n).forEach((e=>{(Object.prototype.hasOwnProperty.call(t,e)||Object.prototype.hasOwnProperty.call(t,`data-${e}`))&&(o[e]=ji(n[e]))}));const r=Ji(e,t,o);return r.classList.add("wants-props-update"),r.tabIndex=!s.isReadOnly||s.isDisabled?"-1":"0",r.formatComponent=e=>{r.tabIndex=!e.isReadOnly||e.isDisabled?"-1":"0"},r}};function ga(e,t){return`<a ${[`href="${t.href}"`].concat(["bbid","mce-href","bbtype","bbfile"].filter((e=>t[e])).map((e=>`data-${e}="${Si(t[e])}"`))).join(" ")}>${e}</a>`}var ha=e=>({pluginId:ua,buttonConfig:pa(e),matchers:ba,formatter:ma,toBbML:ga});const fa="<",Oa=">",Ea='"',ya="&",Ia="'",Ca="«",va="»",Sa="¨",ja="§",Ta="`",Aa="¨",_a="&laquo;",Ra="&raquo;",Na="&uml;",wa="&quot;",Da="«mo»<«/mo»",La="«mo»>«/mo»",Pa="«mo»&«/mo»",ka="«mo»§lt;«/mo»",xa="«mo»§gt;«/mo»",Ba="«mo»§amp;«/mo»";function Ma(e){if(!e)return e;let t=e;t=t.split(_a).join(Ca),t=t.split(Ra).join(va),t=t.split(Na).join(Sa),t=t.split(wa).join(Aa),"_wrs_blackboard"in window&&window._wrs_blackboard&&(t=t.split(Da).join(ka),t=t.split(La).join(xa),t=t.split(Pa).join(Ba)),t=t.split(Ca).join(fa),t=t.split(va).join(Oa),t=t.split(Sa).join(Ea),t=t.split(ja).join(ya),t=t.split(Ta).join(Ia);let n="",s=null;for(let e=0;e<t.length;e+=1){const o=t.charAt(e);null===s?"$"===o?s="":n+=o:";"===o?(n+=`&${s};`,s=null):o.match(/([a-zA-Z0-9#._-] | '-')/)?s+=o:(n+=`$${s}`,s=null,e-=1)}return n}var Ua=n("a6r6");class Ga extends Error{}function Fa(e){let t={},n=null,s=[];const o=e.map((e=>({...e,...e.attributes?{attributes:{...e.attributes}}:{}})));o.reduce(((e,t,n)=>("string"==typeof e.insert&&"string"==typeof t.insert&&e.insert.endsWith("$")&&!e.insert.endsWith("$$")&&t.insert.startsWith("$")&&(e.insert+="$",e.from=n,t.insert=t.insert.substring(1)),t)),{});let r=o.reduce(((e,o)=>{if("string"==typeof t.insert&&"string"==typeof o.insert&&"\n"!==o.insert){null===n&&(n=t);const r=n.insert.split("$$").length-1;if(r%2==1){const t=o.insert.indexOf("$$");t>-1?(n.from=void 0,n.insert+=s.reduce(((e,t)=>e+t.insert),""),s=[],n.insert+=o.insert.substring(0,t+"$$".length),o.insert=o.insert.substring(t+"$$".length),n=null,e.push(o)):s.push(o)}else n=null,r>2&&(o.from=void 0),e.push(o)}else if(s.length>0)n=null,e.push(...s),s=[],e.push(o);else if("string"==typeof o.insert){n=null;o.insert.split("$$").length-1>=2&&(o.from=void 0),e.push(o)}else n=null,e.push(o);return t=o,e}),[]);s.length>0&&r.push(...s),r.reduce(((e,t)=>("string"==typeof e.insert&&"string"==typeof t.insert&&e.insert.endsWith("$$")&&"number"==typeof e.from&&(e.from=void 0,e.insert=e.insert.substring(0,e.insert.length-1),t.insert="$".concat(t.insert)),t)),{}),r=r.filter((e=>"string"!=typeof e.insert||e.insert.length>0));const i=[];return r.forEach(((e,t)=>{var n,s;let o=-1,a=-1;if("string"!=typeof e.insert||dt(r,t)||"\n"===e.insert||(o=e.insert.indexOf("$$"),a=o>-1?e.insert.indexOf("$$",o+"$$".length):-1,a=a>-1?a+"$$".length:-1),-1===o||-1===a)return void i.push(e);const c=e.insert;let l=0;for(;o>-1&&a>-1;){const t=c.substring(l,o);t.length>0&&i.push({...e,insert:t}),i.push({attributes:{latex:null!==(s=null===(n=e.attributes)||void 0===n?void 0:n.latex)&&void 0!==s?s:null},insert:c.substring(o,a)}),l=a,o=c.indexOf("$$",a),a=o>-1?c.indexOf("$$",o+"$$".length):-1,a=a>-1?a+"$$".length:-1}if(l>0&&l<c.length){const t=c.substring(l);t.length>0&&i.push({...e,insert:t})}})),i}class qa extends _.a{constructor(e,t){super(e,t),this.quill=e,this.options=t,this.deltaPromise=null}onReadOnlyChange(e,t){const n=this.quill.getContents(),s=new Ua.c({...gi.kb,locale:t});this.deltaPromise&&this.deltaPromise.cancel(),this.deltaPromise=function(e){const t=new AbortController,n=new Ga("Promise has been cancelled"),s=new Promise(((s,o)=>{e.then(((...e)=>{t.signal.aborted?o(n):s(...e)})).catch(o),t.signal.addEventListener("abort",(()=>o(n)))}));return s.cancel=()=>{"function"==typeof e.cancel&&e.cancel(),t.abort(n)},s.signal=t.signal,s.abortController=t,s}(this.convertDelta(e,n,s)),this.deltaPromise.then((e=>this.quill.updateContents(e,m.a.sources.SILENT))).catch((e=>{e instanceof Ga||console.error(e)}))}async convertDelta(e,t,n){const s=new O.a,o=Fa(t.ops);for(let t=0;t<o.length;++t){const r=o[t];if(e){if(r.attributes&&r.attributes.latex){this.convertLaTeXToMathML(r.insert,r.attributes.latex.mathml,s);continue}if("string"==typeof r.insert&&!dt(o,t)&&n.hasLatex(r.insert)){await this.convertMobileLaTeXToMathML(r.insert,s,n);continue}}e||"object"!=typeof r.insert||!r.insert.math?"string"!=typeof r.insert?"object"==typeof r.insert&&s.retain(1):s.retain(r.insert.length):this.convertLaTeXMathMLToPlain(r,s)}return s}async convertMobileLaTeXToMathML(e,t,n){const s=[],o=[],r=e;let i=0,a=n.getNextLatexPos(0,r);for(;null!=a;){const e=r.substring(a.start+"$$".length,a.end);o.push(a),s.push(new Promise((t=>{n.latexToMathml(e).then(t).catch((()=>t(null)))}))),a=n.getNextLatexPos(a.end+"$$".length,r)}if((await Promise.all(s)).forEach(((e,n)=>{const s=r.substring(i,o[n].start);i=o[n].end+"$$".length,s.length>0&&t.push({insert:s,attributes:r.attributes}),null===e?t.push({insert:r,attributes:r.attributes}):t.push({insert:{math:{mathml:e}},attributes:{mathml:e}})})),i<r.length){const e=r.substring(i);t.push({insert:e,attributes:r.attributes})}t.delete(r.length)}convertLaTeXToMathML(e,t,n){let s=e.indexOf("$$"),o=e.indexOf("$$",s+"$$".length)+"$$".length,r=0;for(;s>-1&&o>-1;){if(s>r){const t=e.substring(0,s);n.delete(t.length).insert(t)}n.delete(o-s).insert({math:{mathml:t}},{mathml:t}),r=o,s=e.indexOf("$$",o),o=e.indexOf("$$",s+"$$".length)+"$$".length}if(r>0&&r<e.length){const t=e.substring(r);n.delete(t.length).insert(t)}}convertLaTeXMathMLToPlain(e,t){const n=e.insert.math.mathml;if(n.indexOf("semantics")>-1&&n.indexOf("annotation")>-1){const e='<annotation encoding="LaTeX">',s="</annotation>",o=n.substring(n.indexOf(e)+e.length,n.indexOf(s)).replace(/&nbsp;/g," ").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&");t.delete(1).insert(`$$${o}$$`,{latex:{mathml:n}})}else t.retain(1)}}var Ha=qa;const Va="latex",Ka=["math"];function $a(e){return e.replace(/\s*[\n]\s*/g,"")}function Wa(e,t){if(e){const n=t.toLowerCase();return Array.prototype.find.call(e.childNodes,(e=>e.tagName.toLowerCase()===n))}}const za=(e,t)=>{const n=Wa(e,"semantics"),s=Wa(n,"annotation");if(n&&s){const t={insert:`$$${s.textContent}$$`,attributes:{latex:{mathml:$a(e.outerHTML)}}};return new O.a([t])}return t},Qa={type:"inline",blotName:Va,tagName:"span",attributes:{"data-mathml":null},renderDomNode:(e,t,n)=>{let s=null;return n.mathml&&(s=Ma(n.mathml)),pt(e,t,{...n,...s?{mathml:$a(s)}:null}),e}};function Ya(e){return function(){e.load()}}function Ja(e,t,n){var s,o,r;if(null===(o=null===(s=t.attributes)||void 0===s?void 0:s.latex)||void 0===o?void 0:o.mathml){const e=null===(r=t.attributes)||void 0===r?void 0:r.latex.mathml,s='<annotation encoding="LaTeX">',o="</annotation>";if(e.substring(e.indexOf(s)+s.length,e.indexOf(o))===n)return e}return e.latexToMathml(n)}function Xa(e,t){return t?Fa(e):e}function Za(e,t){var n,s;const o=e.indexOf("$$"),r=e.indexOf("$$",o+"$$".length);if(-1===o||-1===r)return e;const i=e.substring(o+"$$".length,r),a=$a((null==t?void 0:t.mathml)||(null===(n=null==t?void 0:t.latex)||void 0===n?void 0:n.mathml)||(null===(s=null==t?void 0:t.math)||void 0===s?void 0:s.mathml)||"");return-1===a.indexOf(`>${i}</annotation>`)?e:e.substring(0,o)+a+e.substring(r+"$$".length)}async function ec(e,t,n){if(!e.hasLatex(t))return t;const s=await async function(e,t,n){var s,o;const r=[],i=[],a=$a((null==n?void 0:n.mathml)||(null===(s=null==n?void 0:n.latex)||void 0===s?void 0:s.mathml)||(null===(o=null==n?void 0:n.math)||void 0===o?void 0:o.mathml)||"");let c=e.getNextLatexPos(0,t);for(;null!==c&&"number"==typeof c.start&&"number"==typeof c.end;){const n=t.substring(c.start+"$$".length,c.end).replace(/&amp;/g,"&").replace(/&nbsp;/g," ");r.push(c),a.indexOf(`>${n}</annotation>`)>-1?i.push(a):i.push(new Promise((t=>{e.latexToMathml(n).then(t).catch((()=>t(null)))}))),c=e.getNextLatexPos(c.end+"$$".length,t)}return(await Promise.all(i)).map(((e,n)=>null===e?{...r[n],latex:t}:{...r[n],mathml:$a(e)}))}(e,t,n);let o=0;const r=[];if(s.forEach((e=>{var n;const s=t.substring(o,e.start);o=e.end+"$$".length,s.length>0&&r.push(s),r.push(null!==(n=e.mathml)&&void 0!==n?n:e.latex)})),o<t.length){const e=t.substring(o);r.push(e)}return r.join("")}function tc(e){return async function(t,n,s={}){return s["code-block"]?t:ec(e,t,n)}}const nc=c.a.shape({apiBasePath:c.a.string,xsrfToken:c.a.string,courseId:c.a.string,locale:c.a.string});var sc=e=>{const t=new Ua.c(e);return{pluginId:Va,matchers:Ka,deltaModifier:za,formatter:Qa,module:Ha,onLoad:Ya(t),split:Xa,toBbML:Za,toBbMLAsync:tc(t),findLatexInSelection:(e,n)=>async function(e,t,n){const s="$$".length;let o=0;const r=Fa(t);for(const t of r)if("object"==typeof t.insert)o+=1;else{const r=t.insert;let i=e.getNextLatexPos(0,r);for(;null!=i;){const a=i.start+o,c=i.end+o+s;if(n>a&&n<c){const n=r.substring(i.start+s,i.end);return{start:a,end:c-a,mathml:await Ja(e,t,n)}}i=e.getNextLatexPos(i.end+s,r)}o+=r.length}return null}(t,e,n)}},oc=n("prCu"),rc=n.n(oc),ic=n("h9IM"),ac=n.n(ic);let cc=null,lc=!1;function dc(e,t){const n={language:t,fontFamily:"stix"};return e&&(n.mml=e),com.wiris.jsEditor.JsEditor.newInstance(n)}var uc=({courseId:e,apiBasePath:t,xsrfToken:n,locale:s})=>{const o=e?`/courses/${e}`:"",r=_i(`${t}/v1${o}/editor/v4/configurations`),i=_i(`${t}/v1${o}/mathEditor/v3/mathMLToImage`);function a(e){return{wirisEditorUrl:_i(e.editorUrl)}}return{getAltText:function(e){if(!cc)return Promise.reject();const t=rc.a.stringify({service:"mathml2accessible",mml:e,lang:s});return Ii()({url:cc,method:"POST",headers:{"X-Blackboard-XSRF":n,"Content-type":"application/x-www-form-urlencoded"},data:t})},getMathMLToImageURL:function(e){return new Promise(((t,s)=>{Ii()({url:i,method:"POST",headers:{"X-Blackboard-XSRF":n},data:{mathML:e}}).then((e=>t(e.data.mathMLImageURL))).catch(s)}))},newInstance:function(e){return new Promise(((t,n)=>{lc?t(dc(e,s)):Ii()({url:r,method:"GET"}).then((o=>{var r;(r=o.data.contextPath,Ii()({url:`${r}app/configurationjs`,method:"GET"})).then((o=>{const{wirisEditorUrl:r}=a(o.data);cc=_i("/webapps/vtbe-tinymce/app/service"),function(e,t,n){return new Promise(((s,o)=>ac()(e,(()=>{try{lc=!0,s(dc(t,n))}catch(e){lc=!1,o()}}))))}(r,e,s).then((e=>t(e))).catch(n)})).catch(n)})).catch(n)}))},parseConfiguration:a,getLaTeXFromMathML:function(e){const t=rc.a.stringify({service:"mathml2latex",mml:e,lang:s});return new Promise(((e,s)=>{Ii()({url:cc,method:"POST",headers:{"X-Blackboard-XSRF":n,"Content-type":"application/x-www-form-urlencoded"},data:t}).then((t=>e(t))).catch(s)}))}}};class pc extends i.a.Component{constructor(e){super(e),this.state={primaryButtonDisabled:!0,isOpen:!1,isLatexFormula:!1,selectionUpdate:void 0,error:""},this.onAnimationComplete=this.onAnimationComplete.bind(this),this.onCancel=this.onCancel.bind(this),this.onSave=this.onSave.bind(this),this.onClick=this.onClick.bind(this),this.loadWiris=this.loadWiris.bind(this),this.openWiris=this.openWiris.bind(this),this.close=this.close.bind(this),this.getMathMLAndCreateChange=this.getMathMLAndCreateChange.bind(this)}UNSAFE_componentWillMount(){setTimeout((()=>this.setState({isOpen:!0},this.loadWiris)))}loadWiris(){var e;const{t,courseId:n,currentLocale:s,apiBasePath:o,xsrfToken:r}=this.props;(null===(e=this.props.editorFormat.math)||void 0===e?void 0:e.mathml)?this.openWiris({mathml:this.props.editorFormat.math.mathml,isLatexFormula:!1}):(this.latex=sc({courseId:n,locale:s,apiBasePath:o,xsrfToken:r}),this.latex.findLatexInSelection(this.props.editorLastContent,this.props.editorLastRawSelection.index).then((e=>{e?this.openWiris({mathml:e.mathml,isLatexFormula:!0,selectionUpdate:{index:e.start,length:e.end}}):this.openWiris({mathml:null,isLatexFormula:!1})}),(()=>{this.setState({error:t("bbmlEditor.dialogs.math.latexToMathMLError")})})))}openWiris(e){const{t,courseId:n,currentLocale:s,apiBasePath:o,xsrfToken:r}=this.props;this.wirisService=uc({courseId:n,locale:s,apiBasePath:o,xsrfToken:r}),this.wirisService.newInstance(e.mathml).then((t=>{this.wirisEditor=t,t.insertInto(this.wirisDiv),t.focus(),this.setState({primaryButtonDisabled:!1,isLatexFormula:e.isLatexFormula,selectionUpdate:e.selectionUpdate})}),(()=>{this.setState({error:t("bbmlEditor.dialogs.math.connectionError")})}))}onCancel(){this.setState({isOpen:!1})}onAnimationComplete(){this.change&&this.props.applyChange(this.change,this.state.selectionUpdate),this.props.destroy()}onClick(e){e.preventDefault(),e.stopPropagation(),this.onSave()}onSave(){this.saveInitiated||(this.saveInitiated=!0,this.setState({primaryButtonDisabled:!0},this.getMathMLAndCreateChange))}getMathMLAndCreateChange(){if(this.wirisEditor.isFormulaEmpty())return this.change=this.props.createChange("",!0),void this.close();this.state.isLatexFormula?this.wirisService.getLaTeXFromMathML(this.wirisEditor.getMathML()).then((e=>{const t=e&&200===e.status?e.data.result.text:"";this.change=this.props.createChange(this.wirisEditor.getMathML(),!1,t),this.close()})).catch(this.close):(this.change=this.props.createChange(this.wirisEditor.getMathML()),this.close())}close(){this.setState({isOpen:!1})}render(){const{t:e,isActive:t}=this.props,{error:n}=this.state;return i.a.createElement(Oi.Dialog,{hidden:!this.state.isOpen,dialogContentProps:{title:e(t?"bbmlEditor.dialogs.math.titleEdit":"bbmlEditor.dialogs.math.titleInsert"),showCloseButton:!1,type:Oi.DialogType.normal},modalProps:{onDismiss:this.onCancel,onDismissed:this.onAnimationComplete,containerClassName:n?"":"modal-math-wiris-editor"},firstFocusableSelector:"ms-Dialog-title",analyticsId:""+(t?"editor.modalMath.titleEdit":"editor.modalMath.titleInsert")},n?i.a.createElement("div",{className:"wiris-container"},n):i.a.createElement("div",{ref:e=>{this.wirisDiv=e},className:"wiris-container"}),i.a.createElement(Oi.DialogFooter,null,i.a.createElement(fi.AnalyticsDefaultButton,{onClick:this.onCancel,analyticsId:(t?"editor.modal.math.titleEdit":"editor.modal.math.titleInsert")+".cancel"},e("bbmlEditor.dialogs.math.cancel")),i.a.createElement(fi.AnalyticsPrimaryButton,{onClick:this.onClick,disabled:this.state.primaryButtonDisabled,analyticsId:t?"editor.modalMath.save":"editor.modalMath.insert"},e(t?"bbmlEditor.dialogs.math.save":"bbmlEditor.dialogs.math.insert"))))}}pc.propTypes={destroy:c.a.func.isRequired,applyChange:c.a.func.isRequired,editorFormat:c.a.shape(),isActive:c.a.bool.isRequired,apiBasePath:c.a.string.isRequired,courseId:c.a.string,xsrfToken:c.a.string.isRequired,createChange:c.a.func.isRequired},pc.defaultProps={editorFormat:null,courseId:null};var bc=Object($n.a)(pc);const mc={math:{xmlns:null,style:null,mathcolor:null,mathbackground:null,mathvariant:null,mathsize:null,dir:null,display:null,maxwidth:null,overflow:null,altimg:null,"altimg-width":null,"altimg-height":null,"altimg-valign":null,alttext:null,cdgroup:null},maction:{mathcolor:null,mathbackground:null,actiontype:null,selection:null},maligngroup:{mathcolor:null,mathbackground:null,groupalign:null},malignmark:{mathcolor:null,mathbackground:null,edge:null},menclose:{mathcolor:null,mathbackground:null,notation:null},merror:{mathcolor:null,mathbackground:null},mfenced:{mathcolor:null,mathbackground:null,open:null,close:null,separators:null},mfrac:{mathcolor:null,mathbackground:null,linethickness:null,numalign:null,denomalign:null,bevelled:null},mi:{mathcolor:null,mathbackground:null,mathvariant:null,mathsize:null,dir:null},mlongdiv:{mathcolor:null,mathbackground:null,longdivstyle:null},mmultiscripts:{mathcolor:null,mathbackground:null,subscriptshift:null,superscriptshift:null},mn:{mathcolor:null,mathbackground:null,mathvariant:null,mathsize:null,dir:null},mo:{mathcolor:null,mathbackground:null,mathvariant:null,mathsize:null,dir:null,form:null,fence:null,separator:null,lspace:null,rspace:null,"stretc hy":null,symmetric:null,maxsize:null,minsize:null,largeop:null,movablelimits:null,accent:null,linebreak:null,lineleading:null,linebreakstyle:null,linebreakmultchar:null,indentalign:null,indentshift:null,indenttarget:null,indentalignfirst:null,indentshiftfirst:null,indentalignlast:null,indentshiftlast:null},mover:{mathcolor:null,mathbackground:null,accent:null,align:null},mpadded:{mathcolor:null,mathbackground:null,height:null,depth:null,width:null,lspace:null,voffset:null},mphantom:{mathcolor:null,mathbackground:null},mprescripts:{},mroot:{mathcolor:null,mathbackground:null,mathvariant:null,mathsize:null,dir:null},mrow:{mathcolor:null,mathbackground:null,dir:null},ms:{mathcolor:null,mathbackground:null,mathvariant:null,mathsize:null,dir:null,lquote:null,rquote:null},mscarries:{mathcolor:null,mathbackground:null,position:null,location:null,crossout:null,scriptsizemultiplier:null},mscarry:{mathcolor:null,mathbackground:null,location:null,crossout:null},msgroup:{mathcolor:null,mathbackground:null,position:null,shift:null},msline:{mathcolor:null,mathbackground:null,position:null,length:null,leftoverhang:null,rightoverhang:null,mslinethickness:null},mspace:{mathcolor:null,mathbackground:null,mathvariant:null,mathsize:null,dir:null,indentalign:null,indentshift:null,indenttarget:null,indentalignfirst:null,indentshiftfirst:null,indentalignlast:null,indentshiftlast:null,width:null,height:null,depth:null,linebreak:null},msqrt:{mathcolor:null,mathbackground:null,mathvariant:null,mathsize:null,dir:null},msrow:{mathcolor:null,mathbackground:null,position:null},mstack:{mathcolor:null,mathbackground:null,align:null,stackalign:null,charalign:null,charspacing:null},mstyle:{mathcolor:null,mathbackground:null,mathvariant:null,mathsize:null,dir:null,scriptlevel:null,displaystyle:null,scriptsizemultiplier:null,scriptminsize:null,infixlinebreakstyle:null,decimalpoint:null},msub:{mathcolor:null,mathbackground:null,subscriptshift:null},msubsup:{mathcolor:null,mathbackground:null,subscriptshift:null,superscriptshift:null},msup:{mathcolor:null,mathbackground:null,superscriptshift:null},mtable:{mathcolor:null,mathbackground:null,align:null,rowalign:null,columnalign:null,groupalign:null,alignmentscope:null,columnwidth:null,width:null,rowspacing:null,columnspacing:null,rowlines:null,columnlines:null,frame:null,framespacing:null,equalrows:null,equalcolumns:null,displaystyle:null,side:null,minlabelspacing:null},mtd:{mathcolor:null,mathbackground:null,rowspan:null,columnspan:null,rowalign:null,columnalign:null,groupalign:null},mtext:{mathcolor:null,mathbackground:null,mathvariant:null,mathsize:null,dir:null},mtr:{mathcolor:null,mathbackground:null,rowalign:null,columnalign:null,groupalign:null},munder:{mathcolor:null,mathbackground:null,accentunder:null,align:null},munderover:{mathcolor:null,mathbackground:null,accent:null,accentunder:null,align:null},none:{},semantics:{definitionURL:null,encoding:null},annotation:{definitionURL:null,encoding:null,cd:null,name:null,src:null},"annotation-xml":{definitionURL:null,encoding:null,cd:null,name:null,src:null}};function gc(e){return{...mc[e]}}function hc(e,t){if("string"==typeof t.insert){const n=document.createTextNode(t.insert);e.appendChild(n)}else if("object"==typeof t.insert){const n=Object.keys(t.insert).find((e=>void 0!==mc[e]));if(n){let s=document.createElement(n);const o=gc(n);s="mfenced"===n?function(e,t,n){const s=e;return Object.keys(t).forEach((e=>{const o=n[e.replace("data-","")],r=t[e];o||r?s.setAttribute(e,o||r):void 0===o||"close"!==e&&"open"!==e||s.setAttribute(e,o)})),s}(s,o,t.attributes||{}):pt(s,o,t.attributes||{});const r=t.insert[n].children;r&&Array.isArray(r)&&r.forEach((e=>hc(s,e))),e.appendChild(s)}}}var fc=n("AQW7");const Oc="math",Ec={"data-mathml":null};let yc=!1;function Ic(e,t=!1,n=""){return t?{insert:!0}:""===n?{insert:!0,format:{[Oc]:{mathml:e}}}:{insert:`$$${n}$$`,format:{[Va]:{mathml:e}}}}function Cc(e){return{id:Oc,cssClass:Oc,iconName:"insert_formula",iconComponent:fc.a,isDialog:!0,isActive:e=>!!e.math&&!!e.math.mathml,onClick:({showModal:t,...n})=>{t(bc,{createChange:Ic,...e,...n})}}}const vc=[...Object.keys(mc),"img[data-mathml]"],Sc=(e,t)=>{const n=e.tagName.toLowerCase(),s=gc(n);return"img"===n?new O.a([{insert:{[Oc]:bt(e,Ec)},attributes:bt(e,Ec)}]):new O.a([{insert:{[n]:{...bt(e,s),children:t.ops}},attributes:bt(e,s)}])};function jc(e){const t=new MutationObserver(_c);return{type:"embedInline",blotName:Oc,tagName:"span",attributes:Ec,renderDomNode:(n,s,o,r)=>{let i=null;if(o.mathml)i=Ma(o.mathml);else if(o.children&&Array.isArray(o.children)){let e=document.createElement("math");e=pt(e,gc("math"),o),o.children.forEach((t=>hc(e,t))),i=e.outerHTML}pt(n,s,{...o,...i?{mathml:i}:null}),n.classList.add("formula-container"),n.innerHTML=i,t.observe(n,{subtree:!0,attributes:!0,attributeFilter:["alt"]});const a=n;return n.classList.add("wants-props-update"),n.formatComponent=e=>{var t;yc=e.isReadOnly;const n=a.parentElement.getElementsByClassName("Wirisformula");for(const e of n)e.nextSibling||(null===(t=e.nextSibling)||void 0===t?void 0:t.getAttribute()("sr-only"))||Rc(e,e.alt)},e.parseElement(n),n}}}function Tc(e,t){return t.mathml}function Ac(e){return function(){e.load()}}function _c(e){e&&e.forEach((e=>{Rc(e.target,e.target.alt)}))}function Rc(e,t){if(yc)e.setAttribute("role","img");else{const n=document.createElement("span");n.classList.add("sr-only"),e.parentElement.appendChild(n),n.textContent=t}}const Nc=c.a.shape({apiBasePath:c.a.string,xsrfToken:c.a.string,courseId:c.a.string,locale:c.a.string});var wc=e=>{const t=new Ua.c(e);return[{pluginId:Oc,buttonConfig:Cc(e),matchers:vc,deltaModifier:Sc,formatter:jc(t),toBbML:Tc,onLoad:Ac(t)},sc(e)]},Dc=n("o27f");const Lc="inlineImage",Pc=["img[src]:not([data-mathml]):not([data-bbtype])"],kc={type:"embedInline",blotName:Lc,tagName:"img",attributes:{src:"",alt:null},renderDomNode:(e,t,n)=>{const s=Ji(e,t,n);return s.onerror=()=>{s.classList.add("broken-image")},s}};function xc(e,t){let n=[t.alt?`alt="${t.alt}"`:""].filter((e=>e.length));return n=n.length?["",...n].join(" "):"",`<img src="${t.src}"${n}/>`}function Bc(e,t,n,s){if(n)return{insert:!0,format:{inlineImage:{bbtype:n?"inlineImage":"image",src:e,alt:t}}};const o=[{insert:!0,format:{image:{bbtype:"image",bbfile:JSON.stringify({alt:t}),href:e}}}];return o.unshift({insert:"\n"}),s||o.push({insert:"\n"}),o}class Mc extends i.a.Component{static isValidSrc(e){return"string"==typeof e&&""!==e.trim()}constructor(e){super(e);let t="",n="";if(e.editorFormat.image){t=JSON.parse(e.editorFormat.image.bbfile).alt||"",n=e.editorFormat.image.href||""}else e.editorFormat.inlineImage&&(n=e.editorFormat.inlineImage.src,t=e.editorFormat.inlineImage.alt);this.state={alt:t,src:n,isOpen:!1},this.onSrcChange=this.onSrcChange.bind(this),this.onAltChange=this.onAltChange.bind(this),this.onCancel=this.onCancel.bind(this),this.onAnimationComplete=this.onAnimationComplete.bind(this),this.onSave=this.onSave.bind(this),this.getSrcErrorMessage=this.getSrcErrorMessage.bind(this),this.getSrcLabel=this.getSrcLabel.bind(this),this.getAltLabel=this.getAltLabel.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.onClick=this.onClick.bind(this)}UNSAFE_componentWillMount(){setTimeout((()=>this.setState({isOpen:!0})))}onCancel(){this.setState({isOpen:!1})}onAnimationComplete(){this.saveInitiated&&this.props.applyChange(Bc(this.state.src,this.state.alt,this.props.editorFormat.inlineImage,this.props.editorFormat.image)),this.props.destroy()}onSave(){const e=this.state.src.includes("://")?this.state.src:`http://${this.state.src}`;return this.constructor.isValidSrc(e)&&!this.saveInitiated&&(this.saveInitiated=!0,this.setState({isOpen:!1,src:e})),!1}onKeyDown(e){e.keyCode===u.a.ENTER&&(e.preventDefault(),e.stopPropagation(),this.onSave())}onClick(e){e.preventDefault(),e.stopPropagation(),this.onSave()}onSrcChange(e){this.setState({src:e})}onAltChange(e){this.setState({alt:e})}getSrcErrorMessage(e){const{t}=this.props,n=this.constructor.isValidSrc(e)?"":t("bbmlEditor.dialogs.image.errorMessage");return oa(n)}getSrcLabel(){const{t:e}=this.props;return e("bbmlEditor.dialogs.image.srcLabel")}getAltLabel(){const{t:e}=this.props;return e("bbmlEditor.dialogs.image.altLabel")}render(){const{editorFormat:e,t}=this.props,n=t("bbmlEditor.buttons.cancel"),s=e.image||e.inlineImage?t("bbmlEditor.dialogs.image.titleEdit"):t("bbmlEditor.dialogs.image.titleInsert"),o=e.image||e.inlineImage?t("bbmlEditor.buttons.save"):t("bbmlEditor.buttons.insert");return i.a.createElement(Oi.Dialog,{hidden:!this.state.isOpen,dialogContentProps:{title:s,showCloseButton:!1,type:Oi.DialogType.fullHeaderFooter},modalProps:{onDismissed:this.onAnimationComplete},firstFocusableSelector:"ms-Dialog-title",analyticsId:e.image||e.inlineImage?"editor.dialogs.image.titleEdit":"editor.dialogs.image.titleInsert"},i.a.createElement(sa.TextField,{label:this.getSrcLabel(),value:this.state.src,onChanged:this.onSrcChange,onGetErrorMessage:this.getSrcErrorMessage,onKeyDown:this.onKeyDown,validateOnLoad:!1,validateOnFocusOut:!0,analyticsId:"editor.dialogs.image.srcLabel.textField",required:!0}),i.a.createElement(sa.TextField,{label:this.getAltLabel(),value:this.state.alt,onChanged:this.onAltChange,onKeyDown:this.onKeyDown,analyticsId:"editor.dialogs.image.altLabel.textField"}),i.a.createElement("br",null),i.a.createElement(Oi.DialogFooter,null,i.a.createElement(fi.AnalyticsDefaultButton,{onClick:this.onCancel,analyticsId:(e.image||e.inlineImage?"editor.dialogs.image.titleEdit":"editor.dialogs.image.titleInsert")+".cancel"},n),i.a.createElement(fi.AnalyticsPrimaryButton,{onClick:this.onClick,disabled:!this.constructor.isValidSrc(this.state.src),analyticsId:(e.image||e.inlineImage?"editor.dialogs.image.titleEdit":"editor.dialogs.image.titleInsert")+".save.button"},o)))}}Mc.propTypes={destroy:c.a.func.isRequired,applyChange:c.a.func.isRequired,editorFormat:c.a.shape()},Mc.defaultProps={editorFormat:{}};var Uc=Object($n.a)(Mc),Gc=n("tIQC");const Fc=e=>{const t=e.component;return(n,s,r,a)=>{e.processValues&&(r=e.processValues(r));const c=Ji(n,s,r);c.contentEditable=!1;const d=e=>{const a=e.localize.getLocalePropsForClone();o.a.render(i.a.createElement(ge.AnalyticsJssThemeProvider,{cssReset:"none",isRtl:a.isRtl},i.a.createElement(l.a,{...a},i.a.createElement(t,{attributes:s,values:r,editorProps:e,node:n}))),c)};d(a);return(c.childNodes[0]||c.appendChild(document.createElement("div"))).classList.add("no-longtext"),c.formatComponent=e=>d(e),c.unmountComponent=()=>{e.onUnmountComponent&&e.onUnmountComponent(c),o.a.unmountComponentAtNode(c)},c.classList.add("wants-props-update",...e.additionalRootClasses||[]),c}},qc="image";function Hc(e){return{id:qc,cssClass:qc,iconName:"image",iconComponent:Gc.a,isDialog:!0,isActive:e=>!!e.image||!!e.inlineImage,onClick:({showModal:t,...n})=>{t(Uc,{...e,...n})}}}const Vc=['[data-bbtype="image"]'],Kc={type:"embed",blotName:qc,tagName:"div",attributes:{"data-bbtype":qc,"data-bbfile":null,href:null},renderDomNode:Fc({additionalRootClasses:"bb-image-container",component:e=>{const{editorProps:t,values:n}=e,s=t.isDisabled||!t.isReadOnly,o=i.a.useMemo((()=>n.bbfile&&JSON.parse(n.bbfile)),[n.bbfile]),r={alt:o&&o.alt||n.href,className:"no-select",onError:e=>e.target.classList.add("broken-image"),src:n.href};return i.a.createElement(Dc.MediaGallery,{disabled:s},i.a.createElement("img",{...r}))}})};function $c(e,t){return`<a href="${t.href}" data-bbtype="image" data-bbfile="${Si(t.bbfile)}">${t.href}</a>`}var Wc=e=>[{pluginId:Lc,matchers:Pc,formatter:kc,toBbML:xc},{pluginId:qc,buttonConfig:Hc(e),matchers:Vc,formatter:Kc,toBbML:$c}];function zc(e,t,n){const s=[{insert:!0,format:{attachment:{bbtype:"attachment",bbfile:JSON.stringify(t),href:e}}}];return s.unshift({insert:"\n"}),n||s.push({insert:"\n"}),s}const Qc=e=>t=>{var n;t.linkName=t.displayName,e.applyChange(zc(e.href,t,e.isEdit)),e.isEdit||null===(n=e.onNewAttachmentSavePressed)||void 0===n||n.call(e),e.destroy()},Yc=e=>{const t={alternativeText:e.file.alternativeText||e.file.linkName,displayName:e.file.linkName,fileName:Wi(e.file.linkName,e.file.mimeType),fileSize:e.file.fileSize,isDecorative:e.file.isDecorative,mimeType:e.file.mimeType,render:e.file.render,resourceUrl:e.href,viewerUrl:e.file.viewerUrl};return i.a.createElement(hi.o,{file:t,hidden:!1,onSave:Qc(e),onCancel:e.destroy,analyticsId:"editor.modelEditAttachment",supportsInlineDocumentRender:e.supportsInlineDocumentRender,canProvideDescription:!0})};Yc.propTypes={isEdit:c.a.bool,applyChange:c.a.func.isRequired,destroy:c.a.func.isRequired,onNewAttachmentSavePressed:c.a.func,file:c.a.shape({linkName:c.a.string,alternativeText:c.a.string,mimeType:c.a.string,fileSize:c.a.number,render:c.a.string,isDecorative:c.a.bool,viewerUrl:c.a.string}).isRequired,href:c.a.string.isRequired,supportsInlineDocumentRender:c.a.bool},Yc.defaultProps={isEdit:!1};var Jc=Yc,Xc=n("C+e0");class Zc extends r.Component{constructor(e){super(e),this.state={isAllyAvailable:!1,contentId:"",xythosId:"",isMediaVisible:!1}}componentDidMount(){const{ally:e,fileViewerProps:t,rootContentId:n}=this.props;if(e&&e.service){const s=e.service;s.isAvailable().then((e=>{e&&this.setState({isAllyAvailable:e,contentId:Object(ui.v1)(),xythosId:s.getXythosIdFromContentFileUrl(t.file.resourceUrl)},(()=>{s.update(n,this.state.xythosId)}))}))}}render(){const{ally:e,fileViewerProps:t,localize:n}=this.props,{isAllyAvailable:s,contentId:o,xythosId:i}=this.state,{file:a}=t,c=Object(hi.ib)(Object(hi.fb)(a))&&Object(hi.Z)(a),l=c&&(Object(hi.hb)(a)||this.state.isMediaVisible);let d=null,u={};s&&t.showContextMenu&&(d=r.createElement("div",{className:"ally-icons"},r.createElement("span",{className:"score-indicator"},r.createElement(Nn.b,{contentRef:o,widgetType:Nn.d.ScoreIndicator})),a.render!==gi.t.InlineOnly?r.createElement("span",{className:"alternative-formats"},r.createElement(Nn.b,{contentRef:o,widgetType:Nn.d.AlternativeFormats,ariaLabel:n.translate("bbmlEditor.fileViewer.downloadAlternativeFormats")})):void 0)),s&&l&&(u={"data-ally-content-id":o,"data-ally-file-eid":i,"data-ally-file-preview-url":a.resourceUrl},e.indexMap&&i&&e.indexMap.has(i)&&(u["data-ally-richcontent-index"]=e.indexMap.get(i)));const p=[];s&&(p.push({key:"instructorfeedback",icon:r.createElement(no.AllyScore,null),name:n.translate("bbmlEditor.fileViewer.instructorFeedback"),additionalAttributes:{"data-ally-show":"instructorfeedback","data-ally-content-ref":o,"data-ally-invoke":"instructorfeedback"},style:{display:"none"}}),a.render!==gi.t.InlineOnly&&p.push({key:"alternativeformats",icon:r.createElement(no.AllyDownload,null),name:n.translate("bbmlEditor.fileViewer.downloadAlternativeFormats"),additionalAttributes:{"data-ally-show":"alternativeformats","data-ally-content-ref":o,"data-ally-invoke":"alternativeformats"},style:{display:"none"}}));const b={};return s&&c&&Object(hi.hb)(a)&&(b.minHeight="6rem"),r.createElement(r.Fragment,null,!!s&&!l&&r.createElement(Nn.a,{contentId:o,fileId:i,filePreviewUrl:a.resourceUrl}),r.createElement("div",{className:"bb-editor-file-viewer",style:b},r.createElement(hi.r,{...t,widgets:d,inlineMediaAdditionalAttributes:u,additionalContextualMenuItems:p,isAllyEnabled:s,onToggleMediaPreview:e=>this.setState({isMediaVisible:e})})))}}Zc.propTypes={ally:wn,fileViewerProps:a.object,rootContentId:a.string},Zc.defaultProps={ally:Dn,fileViewerProps:null,rootContentId:null};const el=Object(Xc.a)(Zc);function tl(e,t){const n=t.linkName||t.displayName||t.title;let s=t.render;return s||!0!==t.displayInline||(s=gi.t.Inline),{href:e||t.resourceUrl||t.webLocation+t.fileName,metadata:{...t,linkName:n,render:s}}}var nl=n("ml91");const sl="editAttachment",ol="attachment",rl=["[data-bbtype=attachment][data-bbfile]","[data-bbfile]:not([data-bbtype])"],il="bb-edit-attachment-remove";function al(e){return{id:sl,cssClass:sl,iconName:"edit",iconComponent:nl.a,isDialog:!0,isActive:e=>!!e[zn.type],onClick:({showModal:t,editorFormat:n,...s})=>{const o=JSON.parse(n.attachment.bbfile);t(Jc,{isEdit:!0,editorFormat:n,file:o,...e,...s,href:n.attachment.href})}}}const cl={type:"embed",blotName:ol,tagName:"div",attributes:{"data-bbtype":sl,"data-bbfile":null,href:null},renderDomNode:Fc({processValues:e=>{const t=JSON.parse(e.bbfile),{href:n,metadata:s}=tl(e.href,t);return{...e,href:n,bbfile:JSON.stringify({...s,render:t.render||t.displayInline?s.render:void 0})}},component:e=>{const{editorProps:t,values:n,node:s}=e,o=i.a.useMemo((()=>JSON.parse(n.bbfile)),[n.bbfile]),{href:r,metadata:a}=tl(n.href,o),c={resourceUrl:r,fileName:Wi(a.linkName,a.mimeType),fileSize:a.fileSize,viewerUrl:a.viewerUrl,render:a.render,alternativeText:a.alternativeText||a.linkName,displayName:a.linkName,mimeType:a.mimeType,isDecorative:a.isDecorative||!1};c.render||(c.render=Object(hi.Z)(c,t.supportsInlineDocumentRender)?gi.t.Inline:gi.t.Attachment);const l={disableMediaModal:!t.isReadOnly,file:c,readOnly:t.isReadOnly||t.isDisabled,showContextMenu:t.isReadOnly&&!t.isDisabled,onDelete:()=>s.dispatchEvent(new CustomEvent(il)),expandInlineFilesOnLoad:t.expandInlineFilesOnLoad,supportsInlineDocumentRender:t.supportsInlineDocumentRender};return i.a.createElement(el,{fileViewerProps:l,ally:t.ally,rootContentId:t.rootContentId})},onUnmountComponent:e=>e.removeEventListener(il,e.customDeleteEventHandler)}),onBlotInit:(e,t)=>{e.customDeleteEventHandler=()=>t.remove(),e.addEventListener(il,e.customDeleteEventHandler)}};function ll(e,t){const n=JSON.parse(t.bbfile);return`<a href="${t.href}" data-bbtype="attachment" data-bbfile="${Si(t.bbfile)}">${n.linkName||n.alternativeText}</a>`}var dl=e=>({pluginId:sl,buttonConfig:al(e),matchers:rl,formatter:cl,toBbML:ll});const ul="reinsertAttachment",pl=["[data-bbtype=reinsertAttachment][data-bbfile]"],bl={type:"embed",blotName:ul,tagName:"div",attributes:{"data-bbtype":ul,"data-bbfile":null,href:null},renderDomNode:(e,t,n,s)=>{const{localize:o}=s,r=JSON.parse(n.bbfile),{href:i,metadata:a}=tl(n.href,r),c=n;c.href=i,c.bbfile=JSON.stringify(a);const l=Ji(e,t,c);l.contentEditable=!1,l.classList.add(ul,"wants-props-update");const d=document.createElement("span");d.classList.add("reinsertAttachment-icon"),l.appendChild(d);const u=document.createElement("span");return u.classList.add("reinsertAttachment-label","no-longtext"),u.innerHTML=o.translate("bbmlEditor.dialogs.reinsertAttachment.label",{fileName:a.linkName}),l.appendChild(u),l.formatComponent=e=>{e.isReadOnly?l.classList.add("hidden"):l.classList.remove("hidden")},l}};var ml=n("ehue");const gl="insertLocalFile";function hl(e,t,n,s,o){(t=t||Tn)(Jc,{file:e,...n,...s,href:o},s.localeProps)}function fl(e,t,n,s){var o;let r=[];e.length>1?(e.forEach((({href:e,bbfile:t})=>{r=r.concat(zc(e,t,!0))})),s.applyChange(r),null===(o=null==n?void 0:n.onNewAttachmentSavePressed)||void 0===o||o.call(n)):hl(e[0].bbfile,t,n,s,e[0].href)}function Ol(e){return{id:e&&e.buttonId||gl,cssClass:gl,iconName:"attachment",iconComponent:ml.a,isDialog:!0,isActive:()=>!1,onClick:({showModal:t,...n})=>{Ki({...e,...n,multiple:!0,showModal:t}).then((s=>{fl(s,t,e,n)}))}}}function El(e){return(t,n,s)=>{Ki({applyChange:n,multiple:!0,...e,showModal:s},(()=>Promise.resolve(t))).then((t=>{fl(t,s,e,{applyChange:n})}))}}const yl=c.a.shape({apiBasePath:c.a.string,xsrfToken:c.a.string,courseId:c.a.string,fileLocation:c.a.string,webLocation:c.a.string,onUploadSuccess:c.a.func,supportsInlineDocumentRender:c.a.bool});var Il=e=>[dl(e),{pluginId:gl,buttonConfig:Ol(e),fileDropHandler:El(e)},{pluginId:ul,matchers:pl,formatter:bl}],Cl=n("8bV9");const vl="insertCloudStorageIntegrationFile";function Sl(e){return{id:vl,cssClass:vl,iconName:"upload-cloud",iconComponent:Cl.a,isDialog:!0,isActive:()=>!1,onClick:({showModal:t,preventBlur:n,...s})=>{n(),Ki({applyChange:s.applyChange,multiple:!0,...e,...s,showModal:t},e.openCloudStorageIntegrationModal,"cloudStorageIntegration").then((n=>{let o=[];n.forEach((({href:r,bbfile:i})=>{var a;n.length>1?(o=o.concat(zc(r,i,!0)),null===(a=e.onNewAttachmentSavePressed)||void 0===a||a.call(e)):hl(i,t,e,s,r)})),o.length>0&&s.applyChange(o)}))}}}const jl=c.a.shape({apiBasePath:c.a.string.isRequired,xsrfToken:c.a.string.isRequired,courseId:c.a.string,fileLocation:c.a.string,webLocation:c.a.string,openCloudStorageIntegrationModal:c.a.func.isRequired});var Tl=e=>[dl(e),{pluginId:vl,buttonConfig:Sl(e),onUnload:()=>{window.postMessage({status:"cancel"},window.origin)}}];const Al="audio",_l=['[data-bbtype="audio"][data-bbfile]'],Rl={type:"embed",tagName:"div",attributes:{"data-bbtype":Al,"data-bbfile":null},renderDomNode:(e,t,n,s)=>{const o=JSON.parse(n.bbfile),r=e=>!(!e.isReadOnly||e.isDisabled),i=document.createElement("div");i.classList.add("bb-audio-embed");const a=document.createElement("audio");a.autoplay=!1,a.classList.add("no-select"),a.controls=!0,a.src=o.src;const c=document.createElement("div");c.classList.add("audio-placeholder"),c.classList.add("no-select"),c.innerHTML=`<span class="audio-placeholder-icon"></span><span class="audio-title">${o.alt}</span>`,r(s)||a.classList.add("hidden"),i.appendChild(c),i.appendChild(a);const l=Ji(e,t,n);return l.contentEditable=!1,l.classList.add("wants-props-update"),l.formatComponent=e=>{r(e)?a.classList.remove("hidden"):a.classList.add("hidden")},l.appendChild(i),l}};function Nl(e,t){const n=JSON.parse(t.bbfile);return`<a href="${n.src}" data-bbtype="audio" data-bbfile="${Si(t.bbfile)}">${n.alt}</a>`}var wl=n("Begd"),Dl=n("OZiN");class Ll extends i.a.Component{constructor(e){super(e),this.state={showLightbox:!1},this.buttonStyle={background:"white",position:"absolute",bottom:"-2rem",left:".5rem",zIndex:"20",padding:".05rem .35rem",borderRadius:"3px"},this.closeLightbox=this.closeLightbox.bind(this),this.showLightbox=this.showLightbox.bind(this)}closeLightbox(){this.setState({showLightbox:!1})}showLightbox(){this.setState({showLightbox:!0})}render(){const{children:e,firstFocusableContentSelector:t,localizedStrings:n}=this.props;return i.a.createElement("div",null,i.a.createElement(Dl.Lightbox,{heading:n.title,isOpen:this.state.showLightbox,onDismiss:this.closeLightbox,containerClassName:"lightboxExample-container",firstFocusableContentSelector:t},e))}}function Pl(e,t={},n={},s={}){const r=Object($n.a)((e=>i.a.createElement("iframe",{...e.iframeProps,title:e.iframeProps.title||e.t("bbmlEditor.editor.iFrameDefaultTitle")}))),a=Ll,c={locale:t,iFrame:n,lightbox:s},d=()=>{o.a.render(i.a.createElement(l.a,{...c.locale},i.a.createElement(a,{...c.lightbox},i.a.createElement(r,{iframeProps:c.iFrame}))),e)};return d(),{update(e={},t={},n={}){c.locale={...c.locale,...e},c.iFrame={...c.iFrame,...t},c.lightbox={...c.lightbox,...n},d()},destroy(){o.a.unmountComponentAtNode(e)}}}Ll.propTypes={localizedStrings:c.a.shape({title:c.a.string,fullScreenButtonDescription:c.a.string,fullScreenButtonText:c.a.string}).isRequired,firstFocusableContentSelector:c.a.string.isRequired};var kl=n("gh1U");function xl(e="",t=!0,n){const s={alt:!0===t||"string"==typeof t&&0===t.length?e:t,src:e},o=[{insert:!0,format:{video:{bbtype:"video",bbfile:JSON.stringify(s)}}}];return o.unshift({insert:"\n"}),n||o.push({insert:"\n"}),o}function Bl(e,t){const n={...e,alt:e.alt||e.src},s=[{insert:!0,format:{"embedded-app":{bbtype:"embedded-app",bbfile:JSON.stringify(n)}}}];return s.unshift({insert:"\n"}),t||s.push({insert:"\n"}),s}function Ml(e){switch(e.dataType){case"embedded-app":return Bl(e.dataContent);case"image":return Bc(e.dataContent.src,e.dataContent.alt);case"link":return aa(e.dataContent.src,e.dataContent.alt);case"video":return xl(e.dataContent.src,e.dataContent.alt);case"audio":return function(e="",t=!0,n){const s={alt:!0===t||"string"==typeof t&&0===t.length?e:t,src:e},o=[{insert:!0,format:{audio:{bbtype:"audio",bbfile:JSON.stringify(s)}}}];return o.unshift({insert:"\n"}),n||o.push({insert:"\n"}),o}(e.dataContent.src,e.dataContent.alt);default:return null}}class Ul extends i.a.Component{constructor(){super(),this.postBackMashupInitConfig=e=>{const t={messageType:ds.outgoing.initContent,config:{}};e.source.postMessage(t,window.origin)},this.state={isOpen:!1},this.onCancel=this.onCancel.bind(this),this.onInsert=this.onInsert.bind(this),this.onAnimationComplete=this.onAnimationComplete.bind(this),this.receiveMessage=this.receiveMessage.bind(this)}UNSAFE_componentWillMount(){window.addEventListener("message",this.receiveMessage,!1),setTimeout((()=>this.setState({isOpen:!0})))}componentWillUnmount(){window.removeEventListener("message",this.receiveMessage)}receiveMessage(e){if(window.origin===e.origin)switch(e.data.messageType){case ds.incoming.pageLoaded:this.postBackMashupInitConfig(e);break;case ds.incoming.canceled:this.onCancel();break;case ds.incoming.contentReady:this.onInsert(e.data)}}onCancel(){this.setState({isOpen:!1})}onInsert(e){this.setState({isOpen:!1,content:e})}onAnimationComplete(){this.state.content&&this.props.applyChange(Ml(this.state.content)),this.props.destroy()}render(){return i.a.createElement(kl.Modal,{containerClassName:"modal-youtube-video-provider",isOpen:this.state.isOpen,onDismiss:this.onCancel,onDismissed:this.onAnimationComplete},i.a.createElement("div",{className:"iframe-container",ref:e=>{this.iframeContainerEl=e}},i.a.createElement("iframe",{id:"demo-iframe",title:"Demo Mashup",src:Vl(),frameBorder:0})),i.a.createElement(Oi.DialogFooter,null,i.a.createElement(fi.AnalyticsDefaultButton,{onClick:this.onCancel,analyticsId:"editor.modal.demo.mashup.close"},"Close")))}}Ul.propTypes={applyChange:c.a.func.isRequired,destroy:c.a.func.isRequired};var Gl=e=>`<html>\n<head>\n    <title>Demo Mashup</title>\n    <script>\n\n    function getParentOrigin() {\n        const parentOrigin = '${e}';\n        return parentOrigin;\n\n        // Actual external demos should use the referrer\n        // However in a sourceDoc-generated mashup the referrer is empty\n        // const url = new URL(document.referrer);\n        // return url.origin;\n    }\n        window.addEventListener('message', receiveMessage);\n        window.onload = () => {\n            window.URL.revokeObjectURL(window.location.href);\n            window.parent.postMessage({ messageType: 'page_loaded' }, getParentOrigin());\n        }\n        window.onunload = () => {\n            window.removeEventListener('message', receiveMessage);\n        }\n        const MESSAGE_LINK = {\n            dataType: 'link',\n            dataContent: {\n                src: 'www.blackboard.com',\n                alt: 'Test Link',\n            },\n            messageType: 'content_ready',\n        };\n        const MESSAGE_IMAGE = {\n            dataType: 'image',\n            dataContent: {\n                src: '',\n                alt: 'Test Image',\n            },\n            messageType: 'content_ready',\n        };\n        const MESSAGE_VIDEO = {\n            dataType: 'video',\n            dataContent: {\n                src: 'https://www.w3schools.com/tags/movie.mp4',\n                alt: 'Test Video',\n            },\n            messageType: 'content_ready',\n        };\n        const MESSAGE_AUDIO = {\n            dataType: 'audio',\n            dataContent: {\n                src: 'https://www.w3schools.com/TAGS/horse.mp3',\n                alt: 'Test Audio',\n            },\n            messageType: 'content_ready',\n        };\n        const MESSAGE_IFRAME = {\n            dataType: 'embedded-app',\n            dataContent: {\n                src: '',\n                alt: 'Test IFrame',\n                embeddedAppConfig: {\n                    id: 'demoMashup',\n                    isEditable: undefined,\n                },\n            },\n            messageType: 'content_ready',\n        };\n\n        const ROBO_HASH_URL = "https://robohash.org/";\n\n        function receiveMessage(event) {\n            if (event.data.messageType != 'init_content' || event.origin !== getParentOrigin()) {\n                return;\n            }\n\n            const { dataToDisplay } = event.data;\n            const mode = dataToDisplay ? dataToDisplay.mode : 'create';\n            document.querySelector('#' + mode + '-container').classList.toggle('hide-container');\n            if (mode === 'view') {\n                let text = 'Robohash for ' +  dataToDisplay.content.dataContent.src.split('/')[3];\n                document.querySelector('#view-container h4').innerText = text;\n                document.querySelector('#view-container img').src = dataToDisplay.content.dataContent.src;\n            }\n            if (mode === 'edit') {\n                document.querySelector('#edit-container input').value = dataToDisplay.content.dataContent.src.split('/')[3];\n                document.querySelector('#edit-container button').onclick = () => {\n                    const message = getEmbeddedAppMessage(true);\n                    message.dataContent.src = ROBO_HASH_URL + document.querySelector('#edit-container input').value;\n                    window.parent.postMessage(message, getParentOrigin());\n                };\n            }\n        }\n\n        function getRandomString(length) {\n            var text = "";\n            var possible = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";\n\n            for (var i = 0; i < length; i++)\n                text += possible.charAt(Math.floor(Math.random() * possible.length));\n\n            return text;\n        }\n\n        function getRandomRoboHashURL() {\n            return ROBO_HASH_URL + getRandomString(6);\n        }\n\n        function getEmbeddedAppMessage(isEditable) {\n            let newMessage = MESSAGE_IFRAME;\n            newMessage.dataContent.src = getRandomRoboHashURL();\n            newMessage.dataContent.embeddedAppConfig.isEditable = isEditable;\n            return newMessage;\n        }\n\n        function getImageMessage() {\n            let newMessage = MESSAGE_IMAGE;\n            newMessage.dataContent.src = getRandomRoboHashURL() + ".png";\n            return newMessage;\n        }\n\n        function sendMessage(mashupType) {\n            switch (mashupType) {\n                case 'link':\n                    window.parent.postMessage(MESSAGE_LINK, getParentOrigin());\n                    break;\n                case 'image':\n                    window.parent.postMessage(getImageMessage(), getParentOrigin());\n                    break;\n                case 'video':\n                    window.parent.postMessage(MESSAGE_VIDEO, getParentOrigin());\n                    break;\n                case 'audio':\n                    window.parent.postMessage(MESSAGE_AUDIO, getParentOrigin());\n                    break;\n                case 'edit-embedded-app':\n                    window.parent.postMessage(getEmbeddedAppMessage(true), getParentOrigin());\n                    break;\n                case 'nonedit-embedded-app':\n                    window.parent.postMessage(getEmbeddedAppMessage(false), getParentOrigin());\n                    break;\n                default:\n                    break;\n            }\n        }\n    <\/script>\n</head>\n<style>\n    .hide-container {\n        display: none;\n    }\n</style>\n\n<body>\n    <div id="create-container" class="hide-container">\n        <h3>This is a sample app to demonstrate posting messages from this content provider iFrame to the parent window (ie.\n            Blackboard Learn/Ultra).</h3>\n        <br />\n        <h4>Click an anchor tag to post the respective message</h4>\n        <br />\n        <ul>\n            <li>\n                <a href="" onClick="sendMessage('link')">link</a>\n            </li>\n            <li>\n                <a href="" onClick="sendMessage('image')">image</a>\n            </li>\n            <li>\n                <a href="" onClick="sendMessage('video')">video</a>\n            </li>\n            <li>\n                <a href="" onClick="sendMessage('audio')">audio</a>\n            </li>\n            <li>\n                <a href="" onClick="sendMessage('edit-embedded-app')">editable embedded-app</a>\n            </li>\n            <li>\n                <a href="" onClick="sendMessage('nonedit-embedded-app')">non-editable embedded-app</a>\n            </li>\n        </ul>\n    </div>\n    <div id="view-container" class="hide-container">\n    <h4></h4>\n    <img></img>\n    </div>\n    <div id="edit-container" class="hide-container">\n    <h4>Change Robohash Text</h4>\n    <input/>\n    <button type="submit">Save</button>\n    </div>\n</body>\n</html>\n`,Fl=n("KCbv");const ql="demoMashup";var Hl=()=>[{pluginId:ql,buttonConfig:{id:ql,cssClass:ql,iconName:"app",iconComponent:Fl.a,isDialog:!0,isActive:()=>!1,onClick:({showModal:e,...t})=>{e(Ul,{...t})}}}];const Vl=()=>{const e=new Blob([Gl(window.origin)],{type:"text/html"});return window.URL.createObjectURL(e)},Kl=new Map;let $l;var Wl=({courseId:e,xsrfToken:t,apiBasePath:n},s)=>((e,t)=>{if(Kl.has(e))return Kl.get(e);const n=Ii()({method:"get",url:e,headers:{"X-Blackboard-XSRF":t}});return Kl.set(e,n),n})(_i(e?`${n}/v1/courses/${e}/mashups`:`${n}/v1/mashups`),t).then((e=>{if(e.data.results=e.data.results||[],s&&s()){$l&&window.URL.revokeObjectURL($l),$l=Vl();const t={id:"demoMashup",label:"demoMashup",srcURL:$l};return{...e,data:{...e.data,results:[...e.data.results,t]}}}return e}));var zl=(e,t,n)=>Wl(t,(()=>Rn(n))).then((t=>t.data.results&&t.data.results.length&&t.data.results.filter((t=>t.id===e))[0]));class Ql extends i.a.Component{constructor(e){super(e),this.state={isOpen:!0},this.getErrorMessage=this.getErrorMessage.bind(this),this.onCancel=this.onCancel.bind(this),this.removeFromDOM=this.removeFromDOM.bind(this)}getErrorMessage(){const{messageType:e,localize:t}=this.props;return"mashupNotAvailable"===e?t.translate("bbmlEditor.errorMessages.mashupNotAvailable"):t.translate("bbmlEditor.errorMessages.defaultError")}onCancel(){this.setState({isOpen:!1})}removeFromDOM(){this.props.destroy()}render(){const{localize:e}=this.props,t=e.translate("bbmlEditor.buttons.close");return i.a.createElement(Oi.Dialog,{hidden:!this.state.isOpen,onDismiss:this.onDismiss,dialogContentProps:{title:e.translate("bbmlEditor.errorMessages.modalTitle"),showCloseButton:!1},modalProps:{containerClassName:"modal-error-message",isAlert:!0,isOpen:this.state.isOpen,onDismiss:this.onCancel,onDismissed:this.removeFromDOM},firstFocusableSelector:"ms-Dialog-title",analyticsId:"editor.errorMessages.modalTitle"},i.a.createElement("div",{className:"error-text"},this.getErrorMessage()),i.a.createElement(Oi.DialogFooter,null,i.a.createElement(fi.AnalyticsDefaultButton,{onClick:this.onCancel,analyticsId:"editor.modalErrorMessage.close"},t)))}}Ql.propTypes={destroy:c.a.func.isRequired,messageType:c.a.oneOf(["defaultError","mashupNotAvailable"])},Ql.defaultProps={messageType:"defaultError"};var Yl=Ql;const Jl=(e,t,n)=>({messageType:ds.outgoing.initContent,config:e,dataToDisplay:{mode:n||"create",content:{dataType:"embedded-app",dataContent:t}}});class Xl extends i.a.Component{constructor(e){super(e),this.origin=new URL(e.srcURL).origin,this.postBackMashupInitConfig=this.postBackMashupInitConfig.bind(this),this.receiveMessage=this.receiveMessage.bind(this),this.onCancel=this.onCancel.bind(this),this.onInsert=this.onInsert.bind(this),this.onAnimationComplete=this.onAnimationComplete.bind(this),this.state={isOpen:!1,content:null}}UNSAFE_componentWillMount(){window.addEventListener("message",this.receiveMessage,!1),setTimeout((()=>this.setState({isOpen:!0})))}componentWillUnmount(){window.removeEventListener("message",this.receiveMessage)}postBackMashupInitConfig(){const{apiBasePath:e,xsrfToken:t,localize:{locale:n,isRtl:s},editingData:o}=this.props;this.iframeEl||(this.iframeEl=this.iframeContainerEl.getElementsByTagName("iframe")[0]);const r={apiBasePath:e,xsrfToken:t,locale:n,isRtl:s()};let i;i=o?((e,t)=>Jl(e,t,"edit"))(r,o):((e,t)=>Jl(e,t,"create"))(r),this.iframeEl.contentWindow.postMessage(i,this.origin)}receiveMessage(e){if(new URL(this.props.srcURL).origin===e.origin)switch(e.data.messageType){case ds.incoming.pageLoaded:this.postBackMashupInitConfig();break;case ds.incoming.canceled:this.onCancel();break;case ds.incoming.contentReady:this.onInsert(e.data)}}onCancel(){this.setState({isOpen:!1})}onInsert(e){this.setState({isOpen:!1,content:e})}onAnimationComplete(){this.state.content&&this.props.applyChange(Ml(this.state.content)),this.props.destroy()}render(){const{srcURL:e,localize:t}=this.props;return i.a.createElement(kl.Modal,{containerClassName:"modal-youtube-video-provider",isBlocking:!1,isOpen:this.state.isOpen,onDismiss:this.onCancel,onDismissed:this.onAnimationComplete},i.a.createElement("div",{className:"iframe-container",ref:e=>{this.iframeContainerEl=e}},this.state.isOpen&&i.a.createElement("iframe",{title:t.translate("bbmlEditor.dialogs.youtubeVideoProviderModal.title"),src:e,frameBorder:0,className:"js-editor-video-container"})))}}Xl.propTypes={apiBasePath:c.a.string.isRequired,applyChange:c.a.func.isRequired,destroy:c.a.func.isRequired,editingData:c.a.shape(),srcURL:c.a.string.isRequired,xsrfToken:c.a.string.isRequired},Xl.defaultProps={editingData:null};var Zl=Object(b.a)(Xl);const ed="editYoutubeVideo",td="embedded-app",nd=['a[data-bbtype="embedded-app"]'],sd="geolocation *; microphone *; camera *; midi *; encrypted-media *; fullscreen *",od=e=>({editorFormat:t,showModal:n,buttonNode:s,...o})=>new Promise(((n,o)=>{const r=t.bbfile?JSON.parse(t.bbfile):{},{embeddedAppConfig:i}=r,{id:a}=i;zl(a,e,s).then((e=>{e?n(e.srcURL):o()}))})).then((s=>{const r=JSON.parse(t.bbfile);n(Zl,{goBack:()=>{},srcURL:s,editingData:r,...e,...o})})).catch((()=>{n(Yl,{destroy:o.destroy,messageType:"mashupNotAvailable"})}));function rd(e){return{id:ed,cssClass:ed,iconName:"app",iconComponent:Fl.a,isDialog:!0,isActive:e=>{const t=e.bbfile?JSON.parse(Qi(e.bbfile)):{};return!!e[Qn.type]&&t&&t.embeddedAppConfig&&t.embeddedAppConfig.isEditable},onClick:od(e)}}function id(e){if(e.data.messageType!==ds.incoming.pageLoaded)return;const t=Array.from(this.querySelectorAll(".embedded-app-container")).find((t=>t.contentWindow===e.source));t&&t.onEmeddedAppLoaded&&t.onEmeddedAppLoaded(e)}function ad(e){window.addEventListener("message",id.bind(e))}function cd(){window.removeEventListener("message",id)}const ld=e=>({type:"embed",blotName:td,tagName:"div",attributes:{"data-bbtype":ed,"data-bbfile":null},renderDomNode(t,n,s,r){const a=JSON.parse(s.bbfile),{embeddedAppConfig:c,linkRefId:l}=a,{id:d}=c||{id:`content_market${l}_${Math.floor(1e3*Math.random())}`},u=Ji(t,n,s),p=document.createElement("div"),b=document.createElement("div"),m=document.createElement("div"),g={allow:sd,className:"embedded-app-container hidden no-select",frameBorder:0,id:d,tabIndex:!r.isReadOnly||r.isDisabled?"-1":"0",width:"100%"};p.classList.add("bb-embedded-app"),a.width&&a.height&&(p.style.width=`${a.width}px`,p.style.height=`${a.height}px`),u.contentEditable=!1,u.classList.add("wants-props-update"),u.style.paddingBottom=".1rem",u.style.overflow="hidden",u.style.display="flex",u.style.backgroundColor="#f8f8f8",u.style.justifyContent="center",m.classList.add("embedded-app-overlay"),b.classList.add("loading-container"),u.appendChild(p),o.a.render(i.a.createElement(wl.Spinner,{size:wl.SpinnerSize.large}),b);const h=r.localize.getLocalePropsForClone(),f={title:a.title||r.localize.translate("bbmlEditor.editor.lightboxDefaultTitle"),fullScreenButtonText:r.localize.translate("bbmlEditor.editor.fullScreenButtonText")},O=new Pl(p,h,g,{localizedStrings:f,firstFocusableContentSelector:`.${g.id}`});return(p.childNodes[0]||p.appendChild(document.createElement("div"))).classList.add("no-longtext"),p.appendChild(b),p.appendChild(m),u.formatComponent=e=>{O.update(h,{tabIndex:!e.isReadOnly||e.isDisabled?"-1":"0"},{})},c?zl(d,e,t).then((t=>{const n=t.srcURL;O.update(h,{onEmeddedAppLoaded:t=>{b.classList.replace("loading-container","hidden"),O.update(h,{className:"embedded-app-container no-select",src:n},{});const s=new URL(n,window.origin);if(t.origin===s.origin){const n=((e,t)=>Jl(e,t,"view"))({apiBasePath:e.apiBasePath,xsrfToken:e.xsrfToken,locale:h.locale},a);t.source.postMessage(n,t.origin)}}},{})})):e.getEmbedSrc(a).then((e=>{b.classList.remove("loading-container"),b.classList.add("hidden"),O.update(h,{src:e,allow:"autoplay *; fullscreen *; encrypted-media *",className:"embedded-app-container no-select"},{})})),u}});function dd(e,t){const n=JSON.parse(t.bbfile);return`<a href="${n.src}" data-bbtype="embedded-app" data-bbfile="${Si(t.bbfile)}">${n.alt}</a>`}var ud=e=>({pluginId:ed,buttonConfig:rd(e),formatter:ld(e),matchers:nd,toBbML:dd,onLoad:ad,onUnload:cd,IFRAME_ALLOW:sd});var pd=[".mp4"];const bd=[/edpuzzle/i,/flipgrid/i,/genial\.ly/i,/h5p/i,/kaltura/i,/microsoftstream/i,/miro/i,/nearpod/i,/panopto/i,/prezi/i,/quizlet/i,/sharepoint.+\/\:[pwx]\:/i,/slideshare/i,/soundcloud/i,/spotify/i,/vidgrid/i,/vimeo\.com/i,/voicethread/i,/youtu\.be/i,/youtube\.com/i];class md extends i.a.Component{constructor(e){super(e);let t="",n="";if(e.editorFormat.video){const s=JSON.parse(e.editorFormat.video.bbfile);t=s.alt,n=s.src}this.state={alt:t,src:n,isOpen:!1},this.isValid=this.isValid.bind(this),this.onSrcChange=this.onSrcChange.bind(this),this.onAltChange=this.onAltChange.bind(this),this.onCancel=this.onCancel.bind(this),this.onAnimationComplete=this.onAnimationComplete.bind(this),this.onSave=this.onSave.bind(this),this.getErrorMessage=this.getErrorMessage.bind(this),this.getSrcLabel=this.getSrcLabel.bind(this),this.getAltLabel=this.getAltLabel.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.onClick=this.onClick.bind(this)}UNSAFE_componentWillMount(){setTimeout((()=>this.setState({isOpen:!0})))}onCancel(){this.setState({isOpen:!1})}onAnimationComplete(){this.saveInitiated&&this.props.applyChange(xl(this.state.src,this.state.alt,this.props.editorFormat.video)),this.props.destroy()}async onSave(){const e=await async function(e){let t=e=function(e){const t=/\<iframe.+src\=(?:\"|\')(.+?)(?:\"|\')(?:.+?)\>/;return t.test(e)?e.match(t)[1]:e}(e);if(t.includes("://")||(e=`https://${t}`),t=t.toLowerCase(),t.includes("m.youtube"))return e.replace(/(m.youtube)/i,"youtube");if(t.includes("youtube.com")&&!t.includes(".com/embed"))return(e=e.replace(/(watch\?v=)/i,"").replace(/(.com\/)/i,".com/embed/")).split(/(&feature=youtu.be)/i)[0];if(t.includes("//youtu.be/"))return e.replace(/(\/\/youtu.be\/)/i,"//youtube.com/embed/");if(t.includes("vimeo.com")&&!t.includes("player.vimeo")){const t=(e=e.endsWith("/")?e.replace(/\/+$/g,""):e).split("/").slice(-1)[0];return e.replace(/vimeo/i,"player.vimeo").replace(/(.com\/).*$/i,`.com/video/${t}`)}if(t.includes("vidgrid.com/view")&&!t.includes("embed"))return(e=e.replace(/(view)/i,"embed")).replace(/(?=\/\?).+/i,"");if(t.includes("kaltura.com")&&!t.includes("embed"))return e.replace(/media\/.[^\/]*\//i,"embed/secure/iframe/entryId/");if(t.includes("panopto.com")&&!t.includes("Embed"))return e.replace(/Viewer/i,"Embed");if(t.includes("flipgrid.com")&&!t.includes("embed=true"))return t.includes("admin")&&(e=e.replace(/admin/i,"shorts").replace(/manage\/shorts/i,"watch")),e.replace(/\?\w+$/i,"?embed=true");if(t.includes("prezi.com")&&!t.includes("embed")){if(!t.includes("view")){let t=e.split("/");t=t.splice(0,5),e=t.join("/")}return e.endsWith("/")||(e=e.concat("/")),e.concat("embed")}return t.includes("voicethread.com")&&!t.includes("/app/player/?threadId=")?e.replace(/\/myvoice\/thread\//i,"/app/player/?threadId=").replace(/(\/[0-9]+){2}$/,""):t.includes("spotify.com")&&!t.includes("embed/")?(t.includes("track")?e=e.replace(/track/i,"embed/track"):t.includes("album")?e=e.replace(/album/i,"embed/album"):t.includes("playlist")?e=e.replace(/playlist/i,"embed/playlist"):t.includes("artist")?e=e.replace(/artist/i,"embed/artist"):t.includes("show")?e=e.replace(/show/i,"embed-podcast/show"):t.includes("episode")&&(e=e.replace(/episode/i,"embed-podcast/episode")),e.replace(/\?.+$/i,"")):t.includes("genial.ly")?e.replace(/\/[\w-]+$/i,""):t.includes("nearpod.com")?e.replace(/command\?puid/i,"?pin").replace(/&[=\w]+$/i,"&he=true"):t.includes("quizlet.com")&&!t.includes("/embed")?e.replace(/(.*\/\/quizlet.com\/)([a-zA-Z]+\/)?(\d+)\/.*/,"$1$3/flashcards/embed"):t.includes("edpuzzle.com")&&!t.includes("embed/media")?e.replace(/media/i,"embed/media"):t.includes("soundcloud.com")&&!t.includes("embed_code/key")||t.includes("slideshare.net")&&!t.includes("//api")?Ai(t):t.includes("h5p.org")&&!t.includes("/embed")?e.replace(/node/i,"h5p/embed"):t.includes("h5p.com")&&!t.includes("/embed")?e.concat("/embed"):t.includes("sharepoint.com")?t.includes("action=")?e.replace(/action=\w*/i,"action=embedview"):e+"&action=embedview":t.includes("microsoftstream.com")&&!t.includes("/embed/")?e.replace(/video/,"embed/video"):t.includes("miro.com")&&!t.includes("/live-embed/")?e.replace(/board/,"live-embed"):e}(this.state.src);this.isValid()&&!this.saveInitiated&&(this.saveInitiated=!0,this.setState({isOpen:!1,src:e}))}onKeyDown(e){e.keyCode===u.a.ENTER&&(e.preventDefault(),e.stopPropagation(),this.onSave())}onClick(e){e.preventDefault(),e.stopPropagation(),this.onSave()}onSrcChange(e){this.setState({src:e})}onAltChange(e){this.setState({alt:e})}getErrorCode(e){if(""===e.trim())return"bbmlEditor.dialogs.media.errorMessage";if(t=e,!bd.some((e=>e.test(t)))){return pd.some((t=>e.toLowerCase().endsWith(t)))?null:"bbmlEditor.dialogs.media.errorMessageOrigin"}var t;return!e.toLowerCase().includes("youtube.com")&&e.toLowerCase().includes("feature=youtu.be")?"bbmlEditor.dialogs.media.errorMessageOrigin":null}getErrorMessage(e){const t=this.getErrorCode(e),{t:n}=this.props;return t?n(t):""}getSrcLabel(){const{t:e}=this.props;return e("bbmlEditor.dialogs.media.srcLabel")}getAltLabel(){const{t:e}=this.props;return e("bbmlEditor.dialogs.media.altLabel")}isValid(){return!this.getErrorCode(this.state.src)}render(){const{editorFormat:e,t}=this.props,n=t("bbmlEditor.buttons.cancel"),s=e.video?t("bbmlEditor.buttons.save"):t("bbmlEditor.buttons.insert");return i.a.createElement(Oi.Dialog,{hidden:!this.state.isOpen,dialogContentProps:{title:e.video?t("bbmlEditor.dialogs.media.titleEdit"):t("bbmlEditor.dialogs.media.titleInsert"),type:Oi.DialogType.fullHeaderFooter,showCloseButton:!1},modalProps:{onDismiss:this.onCancel,onDismissed:this.onAnimationComplete},firstFocusableSelector:"ms-Dialog-title",analyticsId:"editor."+(e.video?"dialogs.video.titleEdit":"dialogs.video.titleInsert")},i.a.createElement(sa.TextField,{className:"required",label:this.getSrcLabel(),value:this.state.src,onChanged:this.onSrcChange,onKeyDown:this.onKeyDown,onGetErrorMessage:this.getErrorMessage,errorAnchor:this.getErrorCode(this.state.src)&&0===this.getErrorCode(this.state.src).localeCompare("dialogs.media.errorMessageOrigin")?{anchorText:t("bbmlEditor.dialogs.media.supportedSites"),anchorHref:"http://help.blackboard.com/001_621en_US"}:{},validateOnLoad:!1,validateOnFocusOut:!0,analyticsId:"editor.dialogs.video.srcLabel.textField",required:!0}),i.a.createElement(sa.TextField,{label:this.getAltLabel(),value:this.state.alt,onChanged:this.onAltChange,onKeyDown:this.onKeyDown,analyticsId:"editor.dialogs.video.altLabel.textField"}),i.a.createElement("br",null),i.a.createElement(Oi.DialogFooter,null,i.a.createElement(fi.AnalyticsDefaultButton,{onClick:this.onCancel,analyticsId:(e.video?"editor.dialogs.video.titleEdit":"editor.dialogs.video.titleInsert")+".cancel"},n),i.a.createElement(fi.AnalyticsPrimaryButton,{onClick:this.onClick,disabled:!this.isValid(),analyticsId:(e.video?"editor.dialogs.video.titleEdit":"editor.dialogs.video.titleInsert")+".save.button"},s)))}}md.propTypes={destroy:c.a.func.isRequired,applyChange:c.a.func.isRequired,editorFormat:c.a.shape()},md.defaultProps={editorFormat:{}};var gd=Object($n.a)(md),hd=n("zyx7");const fd="video",Od=e=>!(!e.isReadOnly||e.isDisabled);function Ed(e){return{id:fd,cssClass:"video",iconName:"video",iconComponent:hd.a,isDialog:!0,isActive:e=>!!e.video,onClick:({showModal:t,...n})=>{t(gd,{...e,...n})}}}const yd=['[data-bbtype="video"][data-bbfile]'],Id={type:"embed",tagName:"div",attributes:{"data-bbtype":fd,"data-bbfile":null},renderDomNode:(e,t,n,s)=>{const o=JSON.parse(Qi(n.bbfile)),r=!pd.some((e=>o.src&&o.src.toLowerCase().endsWith(e))),i=document.createElement("div");let a,c;if(i.classList.add("bb-video-embed"),r)a=(({bbFile:e,editorProps:t})=>{const n=document.createElement("iframe");return n.frameBorder=0,n.setAttribute("allowFullScreen",""),n.tabIndex=Od(t)?"0":"-1",n.src=e.src,n.classList.add("no-select"),n})({bbFile:o,editorProps:s});else{const e=(({bbFile:e,editorProps:t})=>{const{localize:n,isReadOnly:s,isDisabled:o}=t,r=document.createElement("video");r.autoplay=!1,r.controls=!(!s||o),r.playsinline=!0,r.src=e.src,r.classList.add("no-select");const i=document.createElement("div");return i.classList.add("video-placeholder"),i.classList.add("no-select"),Od(t)&&i.classList.add("hidden"),i.innerHTML=`\n        <span class="video-placeholder-icon"></span>\n        <span class="video-title">${e.alt}</span>\n        <span class="placeholder-disclaimer">${n.translate("bbmlEditor.editor.noInlineVideo")}</span>\n        <a tabIndex="-1" href="${e.src}" class="video-preview-link" target="_blank">${n.translate("bbmlEditor.editor.watchInNewTab")}</a>\n    `,{frameEl:r,placeholderEl:i}})({bbFile:o,editorProps:s});a=e.frameEl,c=e.placeholderEl}r||i.appendChild(c),i.appendChild(a);const l=Ji(e,t,n);return l.contentEditable=!1,l.classList.add("wants-props-update"),l.formatComponent=e=>{a.tabIndex=!e.isReadOnly||e.isDisabled?"-1":"0",a.controls=!(!e.isReadOnly||e.isDisabled),r||(Od(e)?(c.classList.add("hidden"),a.classList.remove("hidden")):(c.classList.remove("hidden"),a.classList.add("hidden")))},l.formatComponent(s),l.appendChild(i),l}};function Cd(e,t){const n=JSON.parse(Qi(t.bbfile));return`<a href="${n.src}" data-bbtype="video" data-bbfile="${Si(t.bbfile)}">${n.alt}</a>`}var vd=e=>({pluginId:fd,buttonConfig:Ed(e),matchers:yd,formatter:Id,toBbML:Cd});class Sd extends i.a.Component{constructor(e){super(e),this.state={isOpen:!1,sources:[],selectedSource:null},this.handleSources=this.handleSources.bind(this),this.onCancel=this.onCancel.bind(this),this.onSourceSelect=this.onSourceSelect.bind(this),this.onAnimationComplete=this.onAnimationComplete.bind(this)}UNSAFE_componentWillMount(){const{courseId:e,xsrfToken:t,apiBasePath:n}=this.props;Wl({courseId:e,xsrfToken:t,apiBasePath:n},(()=>Rn(this.props.buttonNode))).then((e=>{this.handleSources(e.data.results)})).catch((()=>{this.setState({isOpen:!0})}))}handleSources(e){e&&1===e.length?(this.props.selectSource(e[0].srcURL),this.props.destroy()):this.setState({isOpen:!0,sources:e})}onCancel(){this.setState({isOpen:!1})}onSourceSelect(e,t){e.preventDefault(),e.stopPropagation(),this.setState({isOpen:!1,selectedSource:t})}onAnimationComplete(){this.state.selectedSource&&this.props.selectSource(this.state.selectedSource.srcURL),this.props.destroy()}render(){const{analyticsEventAugmentor:e,t}=this.props,n=t("bbmlEditor.buttons.cancel");return i.a.createElement(Oi.Dialog,{hidden:!this.state.isOpen,dialogContentProps:{title:t("bbmlEditor.dialogs.insertYoutubeVideo.titleContentSource"),showCloseButton:!1,type:Oi.DialogType.fullHeaderFooterLarge},modalProps:{onDismiss:this.onCancel,onDismissed:this.onAnimationComplete,containerClassName:"modal-insert-youtube-video"},firstFocusableSelector:"ms-Dialog-title",analyticsId:"editor.dialogs.insertYoutubeVideo.titleContentSource"},i.a.createElement("div",{className:"content-sources"},this.state.sources.map((t=>i.a.createElement("button",{"aria-label":t.label,id:t.id,key:t.id,className:"source-container",onClick:e(he.AnalyticsEventTypes.CLICK_EVENT,(e=>this.onSourceSelect(e,t)),"editor.modal.insert.youtube.video.contentSources.button"),"data-analytics-id":"editor.modal.insert.youtube.video.contentSources.button"},i.a.createElement("div",{className:"source-icon"},i.a.createElement("img",{src:t.iconURL,alt:t.label})),i.a.createElement("div",{className:"source-title"},t.label))))),this.state.sources.length<1&&i.a.createElement("div",{className:"no-results"},t("bbmlEditor.dialogs.insertYoutubeVideo.noResults")),i.a.createElement("br",null),i.a.createElement(Oi.DialogFooter,null,i.a.createElement(fi.AnalyticsDefaultButton,{onClick:this.onCancel,analyticsId:"editor.dialogs.insertYoutubeVideo.titleContentSource.cancel"},n)))}}Sd.propTypes={apiBasePath:c.a.string.isRequired,courseId:c.a.string,selectSource:c.a.func.isRequired,destroy:c.a.func.isRequired,xsrfToken:c.a.string.isRequired,buttonNode:c.a.shape(),...hs},Sd.defaultProps={courseId:null,buttonNode:null};var jd=Object($n.a)(Object(he.withAnalytics)(Sd));const Td="insertYoutubeVideo",Ad=e=>({showModal:t,...n})=>new Promise((s=>{t(jd,{selectSource:s,...e,...n})})).then((s=>{t(Zl,{srcURL:s,...e,...n})}));function _d(e){return{id:Td,cssClass:Td,iconName:"app",iconComponent:Fl.a,isDialog:!0,isActive:()=>!1,onClick:Ad(e)}}const Rd=c.a.shape({apiBasePath:c.a.string,xsrfToken:c.a.string,courseId:c.a.string,enableDemoMashup:c.a.bool});var Nd=e=>[{pluginId:Al,matchers:_l,formatter:Rl,toBbML:Nl},ud(e),vd(e),{pluginId:Td,buttonConfig:_d(e)}];function wd(e){return e.reduce(((e,t)=>{const n="string"==typeof t.data?JSON.parse(ji(t.data)):t.data;return n.title=t.title.trim(),"embedded-app"!==n.bbtype&&e.push({insert:"\n"}),e.push(...function(e){return"embedded-app"===e.bbtype?Bl(e):[{insert:!0,format:{[Md]:{href:"#",bbfile:JSON.stringify(e),bbtype:Md}}}]}(n)),e}),[])}var Dd=n("13AT");const Ld=e=>{const t=JSON.parse(e.bbFile),n={href:t.linkType===ls.externalLink?t.url:"#",className:"lti-placement__root "+(e.hasHoverState?"has-hover":""),onClick:t=>{e.launchLtiLink&&e.launchLtiLink(e.bbFile,t)},"data-bbtype":e.bbType,"data-bbfile":e.bbFile};return i.a.createElement("a",{...n,target:"_blank",tabIndex:e.tabIndex},i.a.createElement("div",{className:"lti-placement__root-wrapper"},i.a.createElement("div",{className:"lti-placement__container"},e.iconUrl.length>0?i.a.createElement("img",{src:e.iconUrl,className:"lti-placement__icon",alt:e.displayName,onError:e=>{e.target.style="display: none"}}):i.a.createElement(Dd.a,{color:"primary",className:"lti-placement__icon",alt:e.displayName}),i.a.createElement("span",{className:"lti-placement__title"},e.displayName))))};Ld.propTypes={displayName:c.a.string.isRequired,iconUrl:c.a.string.isRequired,bbType:c.a.string.isRequired,bbFile:c.a.string.isRequired,hasHoverState:c.a.bool.isRequired,tabIndex:c.a.string.isRequired,launchLtiLink:c.a.func},Ld.defaultProps={launchLtiLink:null};var Pd=Ld;class kd extends i.a.Component{constructor(e){super(e),this.state={isOpen:!1,title:e.contentMarketObject.title||"",dirty:!e.editMode},this.onAnimationComplete=this.onAnimationComplete.bind(this),this.onCancel=this.onCancel.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.onSave=this.onSave.bind(this),this.onTitleChange=this.onTitleChange.bind(this),this.getErrorMessage=this.getErrorMessage.bind(this),this.isValid=this.isValid.bind(this)}UNSAFE_componentWillMount(){setTimeout((()=>this.setState((()=>({isOpen:!0})))))}onAnimationComplete(){if(this.saveInitiated){const e=this.props.contentMarketObject;e.title=this.state.title,this.props.applyChange(wd([e]))}this.props.destroy()}onCancel(){this.setState((()=>({isOpen:!1})))}onKeyDown(e){e.keyCode===u.a.ENTER&&this.onSave(e)}onSave(e){e.preventDefault(),e.stopPropagation(),!this.saveInitiated&&this.isValid()&&(this.saveInitiated=!0,this.setState((()=>({isOpen:!1}))))}onTitleChange(e){this.setState((()=>({title:e,dirty:!0})))}getErrorMessage(e){const{t}=this.props;let n="";return e&&e.trim()?e.trim().length>140&&(n=t("bbmlEditor.dialogs.ltiCard.errorMessages.tooLongDisplayName")):n=t("bbmlEditor.dialogs.ltiCard.errorMessages.emptyDisplayName"),oa(n)}isValid(){const e=this.state.title.trim();return this.state.dirty&&e&&e.length<=140}render(){const{editMode:e,t}=this.props;return i.a.createElement(Oi.Dialog,{hidden:!this.state.isOpen,dialogContentProps:{title:t(`bbmlEditor.dialogs.ltiCard.${e?"editMode":"insertMode"}.title`),showCloseButton:!1,type:Oi.DialogType.fullHeaderFooter},modalProps:{onDismiss:this.onCancel,onDismissed:this.onAnimationComplete},firstFocusableSelector:"ms-Dialog-title",analyticsId:`editor.dialogs.ltiCard.${e?"editMode":"insertMode"}.title`},i.a.createElement(sa.TextField,{className:"required",onKeyDown:this.onKeyDown,label:t("bbmlEditor.dialogs.ltiCard.displayNameLabel"),value:this.state.title,onChanged:this.onTitleChange,onGetErrorMessage:this.getErrorMessage,validateOnLoad:!1,analyticsId:"editor.dialogs.ltiCard.displayNameLabel.textField",validateOnFocusOut:!0,required:!0}),i.a.createElement(Oi.DialogFooter,null,i.a.createElement(fi.AnalyticsDefaultButton,{onClick:this.onCancel,analyticsId:`editor.dialogs.ltiCard.${e?"editMode":"insertMode"}.title.cancel`},t("bbmlEditor.buttons.cancel")),i.a.createElement(fi.AnalyticsPrimaryButton,{onClick:this.onSave,disabled:!this.isValid(),analyticsId:"editor.dialogs.ltiCard.buttons."+(e?"save":"insert")},t("bbmlEditor.buttons."+(e?"save":"insert")))))}}kd.propTypes={applyChange:c.a.func.isRequired,contentMarketObject:c.a.shape().isRequired,editMode:c.a.bool,destroy:c.a.func.isRequired},kd.defaultProps={editMode:!1};var xd=Object($n.a)(kd),Bd=n("wtdm");const Md="ltiCard",Ud=[`[data-bbtype=${Md}][data-bbfile]`],Gd=c.a.shape({getEmbedSrc:c.a.func,openContentMarket:c.a.func,noInsert:c.a.bool});function Fd(e){return{id:Md,cssClass:"insert_from_content_market",iconName:"content-market",iconComponent:Bd.a,isDialog:!0,isHideable:e&&e.noInsert,isActive:e=>!!e[Md],onClick:({applyChange:t,editorFormat:n,showModal:s,bbEditorId:o})=>{const r=n[Md];if(r&&r.bbfile)(({showModal:e,applyChange:t,ltiCard:n,bbEditorId:s})=>{const o=JSON.parse(n.bbfile),r=o&&o.title;e(xd,{contentMarketObject:{data:o,title:r},applyChange:t,editMode:!0,bbEditorId:s})})({showModal:s,applyChange:t,ltiCard:r,bbEditorId:o});else{if(!e||!e.openContentMarket)throw new Error("`openContentMarket` function is required to insert a new LTI item");(({showModal:e,applyChange:t,pluginConfig:n,bbEditorId:s})=>{n.openContentMarket((n=>{n&&n.length>0&&(1===n.length?e(xd,{contentMarketObject:n[0],applyChange:t,bbEditorId:s}):t(wd(n)))}))})({showModal:s,applyChange:t,pluginConfig:e,bbEditorId:o})}}}}const qd=e=>!e.isReadOnly||e.isDisabled?"-1":"0",Hd=e=>{const{editorProps:t,values:n,pluginConfig:s}=e,o=i.a.useMemo((()=>JSON.parse(n.bbfile)),[n.bbfile]);let r=o.iconUrl||"";o.linkType===ls.bltiPlacement&&o.url&&!o.iconUrl&&(r=o.url);const a={displayName:o.title,iconUrl:r,bbType:Md,bbFile:n.bbfile,hasHoverState:t.isReadOnly,tabIndex:qd(t),launchLtiLink:s.launchLtiLink};return i.a.createElement(Pd,{...a})},Vd=e=>t=>i.a.createElement(Hd,{...t,pluginConfig:e}),Kd=e=>({type:"embed",blotName:Md,tagName:"div",attributes:{"data-bbtype":Md,"data-bbfile":null,href:null},renderDomNode:Fc({processValues:e=>({...e,bbfile:ji(e.bbfile)}),component:Vd(e)})});function $d(e,t){const n=JSON.parse(t.bbfile);return`<a href="${t.href}" data-bbtype="${Md}" data-bbfile="${Si(t.bbfile)}">${n.title}</a>`}var Wd=e=>{if(e&&e.openContentMarket&&"function"!=typeof e.openContentMarket)throw new Error("`openContentMarket` must be a function");return[ud(e),{pluginId:Md,buttonConfig:Fd(e),matchers:Ud,formatter:Kd(e),toBbML:$d}]};function zd(){const e=document.querySelector("div.modal-video-everywhere-contents > iframe");e&&(e.height=e.offsetWidth*(700/1200)+"px")}class Qd extends i.a.Component{constructor(e){super(e),this.state={isOpen:!1},this.onCancel=this.onCancel.bind(this),this.onAnimationComplete=this.onAnimationComplete.bind(this)}UNSAFE_componentWillMount(){this.timer=setTimeout((()=>{this.setState({isOpen:!0},(()=>{window.addEventListener("resize",zd)}))}))}UNSAFE_componentWillReceiveProps(e){!e.isOpen&&this.state.isOpen&&this.onCancel()}componentWillUnmount(){clearTimeout(this.timer),window.removeEventListener("resize",zd)}onCancel(){this.setState({isOpen:!1})}onAnimationComplete(){this.props.destroy&&this.props.destroy()}getAllowAttribute(){return this.props.allowMedia?"geolocation *; microphone *; camera *; midi *; encrypted-media *; fullscreen *":null}render(){return i.a.createElement(Oi.Dialog,{hidden:!this.state.isOpen,dialogContentProps:{title:this.props.title,type:Oi.DialogType.fullHeaderFooter,showCloseButton:this.props.showCloseButton},modalProps:{onDismiss:this.onCancel,onDismissed:this.onAnimationComplete,containerClassName:"modal-video-everywhere"},onDismiss:this.onCancel,firstFocusableSelector:"ms-Dialog-title"},i.a.createElement("div",{className:"modal-video-everywhere-contents"},this.props.src&&i.a.createElement("iframe",{tabIndex:"0",title:this.props.title,src:this.props.src,frameBorder:"0",width:"100%",height:"100%",scrolling:"no",allow:this.getAllowAttribute(),allowFullScreen:!0,onLoad:zd})))}}Qd.propTypes={allowMedia:c.a.bool,destroy:c.a.func,isOpen:c.a.bool,showCloseButton:c.a.bool,src:c.a.string,title:c.a.string.isRequired},Qd.defaultProps={allowMedia:!1,destroy:null,isOpen:!1,showCloseButton:!0,src:null};var Yd=e=>{let t=!1;const n=new Promise(((n,s)=>{e.then((e=>t||n(e))).catch((e=>t||s(e)))}));return{then(e){return n.then(e),this},catch(e){return n.catch(e),this},cancel(){t=!0}}};class Jd extends i.a.Component{constructor(e){super(e),this.state={isOpen:!1}}UNSAFE_componentWillMount(){this.promise=Yd(this.props.service.getPlaybackLink(this.props.videoId)).then((e=>{this.setState({src:e.data.result,isOpen:!0},zd)}))}componentWillUnmount(){this.promise.cancel()}render(){const{destroy:e,t,showCloseButton:n}=this.props;return i.a.createElement(Qd,{destroy:e,showCloseButton:n,src:this.state.src,isOpen:this.state.isOpen,title:t("bbmlEditor.dialogs.collab_video.playbackTitle")})}}Jd.propTypes={destroy:c.a.func,videoId:c.a.string.isRequired,service:c.a.shape({getPlaybackLink:c.a.func.isRequired}).isRequired,showCloseButton:c.a.bool},Jd.defaultProps={destroy:null,showCloseButton:!0};var Xd=Object($n.a)(Jd);function Zd({src:e,title:t,alt:n,uuid:s,availabilityMessage:o,bbfile:r}){return[{insert:"\n"},{insert:!0,format:{collab_video:{src:e,title:t,alt:n,bbfile:r||JSON.stringify({video_uuid:s}),info:null!=o?o:null}}},{insert:"\n"}]}class eu extends i.a.Component{constructor(e){super(e),this.onDismiss=this.onDismiss.bind(this),this.receiveMessage=this.receiveMessage.bind(this),this.state={isOpen:!1}}UNSAFE_componentWillMount(){this.getRecordLinkPromise=Yd(this.props.service.getRecordLink()).then((e=>{window.addEventListener("message",this.receiveMessage,!1),this.iFrameURLOrigin=e.data.recordUrl,this.setState({isOpen:!0,src:e.data.recordUrl},zd)}))}componentWillUnmount(){this.getRecordLinkPromise.cancel(),window.removeEventListener("message",this.receiveMessage)}onDismiss(){this.setState({isOpen:!1})}receiveMessage(e){const{applyChange:t,t:n,service:s}=this.props,o=e.data.messageType,r=e.origin,i=e.source;if(this.iFrameURLOrigin&&this.iFrameURLOrigin.startsWith(r))switch(o){case"capture_loaded":i.postMessage({messageType:"capture_loaded_ack"},r);break;case"capture_maximize":i.postMessage({messageType:"capture_maximize_ack"},r);break;case"capture_complete":{const o=n("bbmlEditor.dialogs.collab_video.newRecordingLabel",{date:new Date});s.saveVideo(e.data.uid,o,o).then((s=>{const r=/src="([^"]*)"/.exec(s.data.videoEmbeddedLink)[1];t(Zd({src:r,title:o,alt:o,uuid:e.data.uid,availabilityMessage:n("bbmlEditor.dialogs.collab_video.availabilityInfo")})),this.onDismiss()})).catch((()=>{this.onDismiss()}));break}case"capture_close":i.postMessage({messageType:"capture_close_ack"},r)}}render(){const{destroy:e,t,showCloseButton:n}=this.props;return i.a.createElement(Qd,{allowMedia:!0,destroy:e,isOpen:this.state.isOpen,showCloseButton:n,src:this.state.src,title:t("bbmlEditor.dialogs.collab_video.recordingTitle")})}}eu.propTypes={applyChange:c.a.func.isRequired,destroy:c.a.func.isRequired,service:c.a.shape({getRecordLink:c.a.func.isRequired,saveVideo:c.a.func.isRequired}).isRequired,showCloseButton:c.a.bool},eu.defaultProps={showCloseButton:!0};var tu=Object($n.a)(eu);var nu="collab_video";function su(e){return""===e.trim()?"bbmlEditor.dialogs.collab_video.errorMessage":null}class ou extends i.a.Component{constructor(e){super(e);const{title:t,alt:n,src:s,bbfile:o}=e.editorFormat[nu];this.state={isOpen:!1,src:s,bbfile:o,title:t,alt:n},this.isValid=this.isValid.bind(this),this.onTitleChange=this.onTitleChange.bind(this),this.onAltChange=this.onAltChange.bind(this),this.onCancel=this.onCancel.bind(this),this.onSave=this.onSave.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.onClick=this.onClick.bind(this),this.getErrorMessage=this.getErrorMessage.bind(this),this.getTitleLabel=this.getTitleLabel.bind(this),this.getAltLabel=this.getAltLabel.bind(this),this.onAnimationComplete=this.onAnimationComplete.bind(this)}UNSAFE_componentWillMount(){setTimeout((()=>this.setState({isOpen:!0})))}onCancel(){this.setState({isOpen:!1})}onSave(){this.isValid()&&!this.saveInitiated&&(this.saveInitiated=!0,this.setState({isOpen:!1}))}onKeyDown(e){e.keyCode===u.a.ENTER&&(e.preventDefault(),e.stopPropagation(),this.onSave())}onClick(e){e.preventDefault(),e.stopPropagation(),this.onSave()}onTitleChange(e){this.setState({title:e,alt:e})}onAltChange(e){this.setState({alt:e})}getErrorMessage(e){const t=su(e);return t?this.props.t(t):""}getTitleLabel(){const{t:e}=this.props;return e("bbmlEditor.dialogs.collab_video.displayNameLabel")}getAltLabel(){const{t:e}=this.props;return e("bbmlEditor.dialogs.collab_video.altLabel")}isValid(){return!su(this.state.title)&&!su(this.state.alt)}onAnimationComplete(){this.saveInitiated&&this.props.applyChange(Zd({src:this.state.src,title:this.state.title,alt:this.state.alt,bbfile:this.state.bbfile})),this.props.destroy()}render(){const{t:e}=this.props,t=e("bbmlEditor.buttons.cancel"),n=e("bbmlEditor.buttons.save");return i.a.createElement(Oi.Dialog,{hidden:!this.state.isOpen,dialogContentProps:{title:e("bbmlEditor.dialogs.collab_video.editTitle"),type:Oi.DialogType.fullHeaderFooter,showCloseButton:!1},modalProps:{onDismiss:this.onCancel,onDismissed:this.onAnimationComplete},firstFocusableSelector:"ms-Dialog-title",analyticsId:"editor.dialogs.collabVideo.editTitle"},i.a.createElement(sa.TextField,{className:"required",label:this.getTitleLabel(),value:this.state.title,onChanged:this.onTitleChange,onKeyDown:this.onKeyDown,onGetErrorMessage:this.getErrorMessage,validateOnLoad:!1,validateOnFocusOut:!0,analyticsId:"editor.dialogs.collabVideo.displayNameLabel.textField",required:!0}),i.a.createElement(sa.TextField,{className:"required",label:this.getAltLabel(),value:this.state.alt,onChanged:this.onAltChange,onKeyDown:this.onKeyDown,onGetErrorMessage:this.getErrorMessage,validateOnLoad:!1,validateOnFocusOut:!0,analyticsId:"editor.dialogs.collabVideo.altLabel.textField",required:!0}),i.a.createElement("br",null),i.a.createElement(Oi.DialogFooter,null,i.a.createElement(fi.AnalyticsDefaultButton,{onClick:this.onCancel,analyticsId:"editor.dialogs.collabVideo.editTitle.cancel"},t),i.a.createElement(fi.AnalyticsPrimaryButton,{onClick:this.onClick,disabled:!this.isValid(),analyticsId:"editor.dialogs.collabVideo.editTitle.save.button"},n)))}}ou.propTypes={destroy:c.a.func.isRequired,applyChange:c.a.func.isRequired,editorFormat:c.a.shape()},ou.defaultProps={editorFormat:{}};var ru=Object($n.a)(ou);let iu=null;class au{constructor({apiBasePath:e,courseId:t,xsrfToken:n}){this.apiBasePath=e,this.courseId=t,this.xsrfToken=n}getAvailability(){return iu||(iu=Ii()({method:"get",url:_i(`${this.apiBasePath}/v1/video-integration/availability`),headers:{"X-Blackboard-XSRF":this.xsrfToken}}).then((e=>e.data.result))),iu}getRecordLink(){return Ii()({method:"get",url:_i(`${this.apiBasePath}/v1/courses/${this.courseId}/video-integration/recordLink`),headers:{"X-Blackboard-XSRF":this.xsrfToken}})}getPlaybackLink(e){return Ii()({method:"get",url:_i(`${this.apiBasePath}/v1/courses/${this.courseId}/video-integration/playLink/${e}`),headers:{"X-Blackboard-XSRF":this.xsrfToken}})}saveVideo(e,t,n){return Ii()({method:"post",data:{videoUuid:e,videoTitle:t,videoAltText:n},url:_i(`${this.apiBasePath}/v1/video-integration`),headers:{"X-Blackboard-XSRF":this.xsrfToken}})}}var cu=n("l3QI"),lu=n("BqZm"),du=n.n(lu);const uu=n("tlKk"),pu=['img[data-bbtype="collab_video"]'];function bu(e,t){return{id:nu,cssClass:nu,iconName:"collab",iconComponent:cu.a,isDialog:!0,isActive:e=>!!e[nu],onClick({showModal:n,editorFormat:s,...o}){s[nu]?n(ru,{...e,...o,editorFormat:s}):n(tu,{...e,...o,service:t})},checkAvailabilityAsPromise:()=>t.getAvailability(),...e.isHidden&&{isHidden:!0}}}function mu(e,t,n){n.isReadOnly||n.isDisabled?(e.classList.add("clickable"),e.addEventListener("click",t)):(e.classList.remove("clickable"),e.removeEventListener("click",t))}function gu(e,t,n){const s=n.plugins.find((e=>e.pluginId===nu));if(!s)return;e.formatComponent=mu.bind(null,e,(()=>{Tn(Xd,{videoId:t.video_uuid,service:s.service},n.localize.getLocalePropsForClone())})),e.formatComponent(n)}const hu={type:"embed",tagName:"div",attributes:{"data-bbtype":nu,"data-bbfile":null,src:"",title:"",alt:"",info:null},renderDomNode(e,t,n){const s=JSON.parse(n.bbfile),o=Ji(e,t,n);o.classList.add("bb-video-everywhere-playback"),o.contentEditable=!1;const r=n.info?`<br><span class="ve-info">${n.info}</span>`:"",i=`<div class="ve-inline-block"><img class="icon-video-record" src="${n.src}" alt="${du.a.HTML(n.alt)}"></div>`,a=`<div class="ve-inline-block">${du.a.HTML(n.title)}${r}<div>`;return o.innerHTML=`${i}&nbsp;${a}`,o.classList.add("wants-props-update"),o.querySelector("img").onerror=e=>{const t=window.btoa(uu);e.target.src=`data:image/svg+xml;base64,${t}`,e.target.onerror=null},o.formatComponent=gu.bind(null,o,s),o}};function fu(e,t){return`<img ${`src="${t.src}"`} ${`title="${t.title}"`} ${`alt="${t.alt}"`} data-bbtype="collab_video" ${`data-bbfile="${Si(t.bbfile)}"`} />`}const Ou=c.a.shape({apiBasePath:c.a.string,xsrfToken:c.a.string,courseId:c.a.string});var Eu=e=>{const t=new au(e);return t.getAvailability(),{service:t,pluginId:nu,buttonConfig:bu(e,t),matchers:pu,formatter:hu,toBbML:fu}},yu=n("ofrQ");const Iu="contentCollection";function Cu(e,t,n){const s=function(e){return e.map((e=>{const t=decodeURIComponent(e.name);return{href:e.fullUrl,bbfile:{alternativeText:t,linkName:t,mimeType:e.type,render:gi.t.Inline,fileSize:"number"==typeof e.size?e.size:parseInt(e.size,10)},originalFile:e}}))}(e);let o=[];s.length>1?(s.forEach((({href:e,bbfile:t})=>{o=o.concat(zc(e,t,!0))})),n.applyChange(o)):hl(s[0].bbfile,n.showModal,t,n,s[0].href)}function vu(e){return{id:Iu,cssClass:Iu,iconName:"content-collection",iconComponent:yu.a,isDialog:!0,isActive:()=>!1,onClick:t=>{e.getOpenContentCollectionFunction((n=>{Cu(n,e,t)}))}}}const Su=e=>[{pluginId:Iu,buttonConfig:vu(e)}];function ju(e,t={}){let n=t;!function(e){if(!e)throw new Error("bb-editor: DOM element does not exist.")}(e);const s=()=>{const{isRtl:t,locale:s,babelfishInstance:r,babelfishFormatInstance:a,mockLocalize:c,...d}=n;o.a.render(i.a.createElement(l.a,{isRtl:t,locale:s,babelfishInstance:r,babelfishFormatInstance:a,mockLocalize:c},i.a.createElement(ge.AnalyticsJssThemeProvider,{cssReset:"none",isRtl:t},i.a.createElement(mi,{...d}))),e)};return s(),{update(e={}){delete n.bbml,n={...n,...e},s()},destroy(){o.a.unmountComponentAtNode(e)}}}n.d(t,"BbEditorFactory",(function(){return ju})),n.d(t,"optionalPluginConfigPropTypes",(function(){return Tu})),n.d(t,"BbEditor",(function(){return mi})),n.d(t,"customClass",(function(){return na})),n.d(t,"image",(function(){return Wc})),n.d(t,"insertCloudStorageIntegrationFile",(function(){return Tl})),n.d(t,"insertLocalFile",(function(){return Il})),n.d(t,"link",(function(){return ha})),n.d(t,"math",(function(){return wc})),n.d(t,"latex",(function(){return sc})),n.d(t,"video",(function(){return vd})),n.d(t,"contentMarket",(function(){return Wd})),n.d(t,"contentCollection",(function(){return Su})),n.d(t,"insertYoutubeVideo",(function(){return Nd})),n.d(t,"uploadWorkflow",(function(){return Ki})),n.d(t,"ModalInsertLocalFile",(function(){return Di})),n.d(t,"ShowEditFileAttachmentModal",(function(){return hl})),n.d(t,"ModalMaxFileSizeError",(function(){return xi})),n.d(t,"getFileNameWithTypeExtension",(function(){return Wi})),n.d(t,"videoEverywhere",(function(){return Eu})),n.d(t,"demoMashup",(function(){return Hl})),n.d(t,"encodeURIComponentExt",(function(){return Mi})),n.d(t,"isMessageTooLong",(function(){return zi.a})),n.d(t,"fixDoubleQuotesInJSONValues",(function(){return Qi})),n.d(t,"generateToBbML",(function(){return Yi})),n.d(t,"TextBlockStyles",(function(){return or}));const Tu=c.a.shape({insertCloudStorageIntegrationFile:jl,insertLocalFile:yl,math:Nc,latex:nc,contentMarket:Gd,contentCollection:Su,insertYoutubeVideo:Rd,videoEverywhere:Ou})},EvRQ:function(e,t,n){"use strict";var s=n("ERkP");function o(e){const t=Object(s.useRef)(e);return Object(s.useLayoutEffect)((()=>{t.current=e})),Object(s.useCallback)(((...e)=>t.current(...e)),[])}var r=n("nsO7");const i=(e,t)=>{const n=Object(s.useRef)(Object(r.debounce)(e,t)).current;return Object(s.useEffect)((()=>()=>{n.cancel()}),[n]),n};n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return i}))},G3FW:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a}));var s=n("0XUZ"),o=n("zGdY");const r=e=>s.b.LearningModule.isEqualTo(e.contentHandler),i=e=>{var t,n;return r(e)&&!!(null===(n=null===(t=e.contentDetail)||void 0===t?void 0:t[o.t.LearningModule])||void 0===n?void 0:n.isSequential)};function a(e){return!0===e.inSequence}t.a={isLearningModule:r,isForcedSequenceModule:i,isInForcedSequenceLearningModule:a}},GuFu:function(e,t,n){"use strict";var s=n("uDfI"),o=n("ERkP"),r=n("IbyE");const i=e=>{const t=Object(s.d)(),n=Object(s.e)((t=>r.gc.content.getRootFolderByCourseId(t,e.courseId))),i=Object(s.e)((e=>e.content.isLoading));return Object(o.useEffect)((()=>{i||n||t(r.X.content.loadContents(e))}),[t,n,i,e]),n},a=e=>Object(s.e)((t=>r.gc.app.getQueryParams(t)[e])),c=e=>{const t=Object(s.d)(),n=(e=>Object(s.e)((t=>r.gc.courseMembership.getCourseMembershipViewStatusByQuery(t,e)),s.c))(e);Object(o.useEffect)((()=>{n&&(n.isValid||n.isLoading)||t(r.X.courseMembership.loadCourseMembershipsByQuery(e))}),[t,null==n?void 0:n.isValid,null==n?void 0:n.isLoading]);const i=(e=>Object(s.e)((t=>r.gc.courseMembership.getCourseMembershipsByQuery(t,e)),s.c))(e),a=(e=>Object(s.e)((t=>r.gc.user.getUsersByIds(t,e)),s.c))(i.reduce(((e,t)=>(t.userId&&e.push(t.userId),e)),[]));return{memberships:i,users:a,view:n}},l=e=>{const t=(()=>{const e=Object(s.d)();return Object(o.useEffect)((()=>{e(r.X.user.loadCurrentUser())}),[e]),Object(s.e)((e=>r.gc.user.getCurrentUser(e)))})(),n=(e=>{const t=Object(s.d)();return Object(o.useEffect)((()=>{t(r.X.studentPreview.loadStudentPreviewUser(e))}),[t,e]),Object(s.e)((e=>r.gc.studentPreview.getStudentPreviewUserInfo(e)))})(e);return n&&n.previewing?n.user:t};function d(e,t){const n=Object(s.d)(),i=function(e,t){return Object(s.e)((n=>r.gc.courseMembership.getCourseMembershipByUserId(n,e,t)))}(e,t);return Object(o.useEffect)((()=>{e&&t&&n(r.X.courseMembership.loadCourseMembershipByUserId(e,t))}),[n,e,t]),i}function u(e){var t;const n=l(e);return d(e,null!==(t=null==n?void 0:n.id)&&void 0!==t?t:"")}n("ca8s");const p=e=>{const t=Object(s.d)(),n=(e=>Object(s.e)((t=>r.gc.group.getCourseGroupViewStatusByQuery(t,e))))(e);Object(o.useEffect)((()=>{n&&(n.isValid||n.isLoading)||t(r.X.group.loadGroupsByQuery(e))}),[t,null==n?void 0:n.isValid,null==n?void 0:n.isLoading]);const i=(e=>Object(s.e)((t=>r.gc.group.getGroupsByQuery(t,e))))(e);return{groups:i,view:n}},b=(e,t)=>{const n=Object(s.d)();return Object(o.useEffect)((()=>{n(r.X.courseEntitlements.loadUserCourseEntitlements(e))}),[n,e]),Object(s.e)((n=>r.gc.courseEntitlements.userHasCourseEntitlement(n,e,t)))},m=(e,t)=>Object(s.e)((n=>r.gc.courseEntitlements.hasAnyCourseEntitlement(n,e,t))),g=(e,t)=>{const n=Object(s.d)(),i=Object(s.e)((e=>r.gc.courseEntitlements.isLoadingEntitlements(e))),a=m(e,t);return Object(o.useEffect)((()=>{e&&!i&&void 0===a&&n(r.X.courseEntitlements.loadUserCourseEntitlements(e))}),[n,e,i,a]),a},h=e=>{const t=Object(s.d)(),n=(e=>Object(s.e)((t=>!!e&&r.gc.courseEntitlements.hasLoadedCourseEntitlements(t,e))))(e);Object(o.useEffect)((()=>{e&&!n&&t(r.X.courseEntitlements.loadUserCourseEntitlements(e))}),[t,e,n])},f=(e,t)=>{const n=Object(s.d)(),i=Object(s.e)((e=>{var t;return null===(t=r.gc.app.getRoute(e).params)||void 0===t?void 0:t.courseId})),a=Object(s.e)((e=>{if(i)return r.gc.course.getCourseById(e,i)}));Object(o.useEffect)((()=>{i&&!a&&n(r.X.course.fetchCourse(i))}),[a,i,n]);const c=null==a?void 0:a.isOrganization;return n=>c&&n.startsWith(e)?n.replace(e,t):n};var O=n("VQ4P");function E(){return"organizations"===Object(s.e)((e=>r.gc.app.getRoute(e).params.coursesOrOrganizations))}var y=n("RPob");function I(e=y.a.AppendSection,t){const n=E(),s=Object(O.a)(),r=Object(y.m)(n,e,t);return Object(o.useCallback)(((e,t,n)=>s(r(e),t,n)),[s,r])}const C=(e,t)=>{const n=Object(s.d)(),i=((e,t)=>Object(s.e)((n=>r.gc.coursePreference.getCoursePreferenceByKeyAndCourseId(n,e,t))))(e,t);return Object(o.useEffect)((()=>{i||n(r.X.coursePreference.loadCoursePreference({key:e,courseId:t}))}),[n,e,t,i]),i},v=e=>Object(s.e)((t=>r.gc.courseProgress.getCourseProgressConfigurationView(t,e)));var S;!function(e){e.ViewConfiguration="course.progress.settings.VIEW"}(S||(S={}));const j=(e,t=!1)=>{var n,i;const a=Object(s.d)(),c=!!(null===(n=v(e))||void 0===n?void 0:n.isLoading),l=!!(null===(i=v(e))||void 0===i?void 0:i.isValid),d=m(e,[S.ViewConfiguration])||t;return Object(o.useEffect)((()=>{c||l||d&&a(r.X.courseProgress.loadCourseProgressConfiguration({courseId:e}))}),[e,c,a,d]),Object(s.e)((t=>r.gc.courseProgress.getCourseProgressConfiguration(t,e)))};var T=n("zGdY");function A(e,t){const n=Object(O.a)();if(!e)return n("courseContent.contentProgress.status.notAvailable");switch(e){case T.u.Completed:return n(t?"courseContent.contentProgress.status.markedComplete":"courseContent.contentProgress.status.completed");case T.u.Started:return n("courseContent.contentProgress.status.started");case T.u.Unlocked:case T.u.None:return n("courseContent.contentProgress.status.unopened")}}const _=e=>{const t=Object(s.d)(),n=(e=>Object(s.e)((t=>r.gc.courseLogs.getCourseLogViewStatusByQuery(t,e))))(e);Object(o.useEffect)((()=>{n&&(n.isValid||n.isLoading)||t(r.X.courseLogs.loadCourseLogsByQuery(e))}),[t,e,null==n?void 0:n.isValid,null==n?void 0:n.isLoading]);const i=(e=>Object(s.e)((t=>r.gc.courseLogs.getCourseLogsByQuery(t,e))))(e);return{logs:i,view:n}},R=e=>{const t=Object(s.d)(),n=(e=>Object(s.e)((t=>r.gc.courseTasks.getCourseTaskViewStatusByQuery(t,e))))(e);Object(o.useEffect)((()=>{n&&(n.isValid||n.isLoading)||t(r.X.courseTasks.loadCourseTasksByQuery(e))}),[t,e,null==n?void 0:n.isValid,null==n?void 0:n.isLoading]);const i=(e=>Object(s.e)((t=>r.gc.courseTasks.getCourseTasksByQuery(t,e))))(e);return{tasks:i,view:n}},N=(e,t)=>{const n=Object(s.d)();return Object(o.useCallback)((s=>{n(r.X.courseTools.setCourseToolConfiguration(e,t,{toolEnabledSetting:{isAvailable:s}}))}),[e,n,t])};var w=n("Tddw");const D=(e,t)=>{const n=Object(s.e)((n=>w.c.getCourseTool(n,e,t))),i=Object(s.d)();return Object(o.useEffect)((()=>{n||i(r.X.courseTools.loadCourseToolConfiguration(e,t))}),[i,e,n,t]),n};function L(e){const t=Object(s.d)(),n=Object(s.e)((e=>r.gc.discussionBoardSettings.isSettingLoading(e))),i=Object(s.e)((t=>e?r.gc.discussionBoardSettings.getDiscussionboardSettings(t,e):void 0)),a=!!i;return Object(o.useEffect)((()=>{!e||n||a||t(r.X.discussionBoardSettings.loadDiscussionboardSetting({courseId:e}))}),[e,t,a,n]),i}const P=()=>{const e=Object(s.d)(),t=Object(s.e)((e=>r.gc.fileUploadSettings.getFileUploadSettings(e)));return Object(o.useEffect)((()=>{t||e(r.X.fileUploadSettings.loadFileUploadSettings())}),[e,t]),t},k=e=>{const t=Object(s.d)(),n=(e=>Object(s.e)((t=>r.gc.gradebookColumn.getGradebookColumnViewStatusByQuery(t,e))))(e);Object(o.useEffect)((()=>{(null==n?void 0:n.isValid)||(null==n?void 0:n.isLoading)||t(r.X.gradebookColumn.loadGradebookColumnsByQuery(e))}),[t,e,null==n?void 0:n.isValid,null==n?void 0:n.isLoading]);const i=(e=>Object(s.e)((t=>r.gc.gradebookColumn.getGradebookColumnsByQuery(t,e))))(e);return{gradebookColumns:(null==n?void 0:n.isValid)&&!(null==n?void 0:n.isLoading)?i:[],view:n}},x=(e,t)=>{const n=Object(s.d)(),i=(e=>Object(s.e)((t=>r.gc.gradebookSchema.getGradebookSchemaById(t,e))))(t);return Object(o.useEffect)((()=>{!i&&e&&t&&n(r.X.gradebookSchema.loadGradebookSchema({courseId:e,schemaId:t}))}),[i,e,t,n]),i};var B=n("Ajje");function M(e,t,n){const i=Object(s.d)(),a=Object(s.e)((e=>r.gc.group.getGroupsLoadingStatus(e))),c=Object(s.e)((e=>r.gc.group.getGroupByGroupId(e,t)));Object(o.useEffect)((()=>{(n&&!(null==c?void 0:c.id)||!n&&!(null==c?void 0:c.groupSetId))&&a===B.a.HasNotStarted&&i(r.X.group.loadGroupsByCourse(e))}),[e,i,null==c?void 0:c.groupSetId,null==c?void 0:c.id,n,a]);const l=Object(s.e)((e=>n||!(null==c?void 0:c.groupSetId)?null:r.gc.groupWorkspace.getGroupSetById(e,c.groupSetId)));return{group:c,groupSet:l,loadingStatus:a}}const U=e=>Object(s.e)((t=>{if(e)return r.gc.content.getContentById(t,e)}));const G=(e,t)=>{const n=Object(s.d)(),i=U(t);return Object(o.useEffect)((()=>{t&&!i&&e&&n(r.X.content.loadContents({courseId:e,contentId:t}))}),[i,e,t,n]),i},F=(e,t)=>{const n=Object(s.d)(),i=(e=>Object(s.e)((t=>r.gc.contentReviewState.getContentReviewStateForContextUser(t,e))))(t);return Object(o.useEffect)((()=>{i||n(r.X.contentReviewState.getContentReviewState(e,t,!1))}),[n,i,e,t]),i},q=e=>{const[t,n]=Object(o.useState)({filter:{courseId:e}}),i=(e=>Object(s.e)((t=>r.gc.content.getContentsBySearchCriteria(t,e))))(t),a=(e=>Object(s.e)((t=>r.gc.content.getCountBySearchCriteria(t,e))))(t),c=(e=>Object(s.e)((t=>r.gc.content.isLoading(t,e))))(t),l=Object(s.e)((e=>{var t,n;return"network"===(null===(n=null===(t=e.app.error)||void 0===t?void 0:t.originalException)||void 0===n?void 0:n.type)})),d=Object(s.d)(),u=Object(o.useCallback)(((t,s)=>{const o={paging:{limit:s},sort:[{field:"modifiedDate",direction:T.cc.Descending}]},i={filter:{courseId:e,title:t},params:o};d(r.X.app.clearError()),d(r.X.content.loadContentsByQuery(i)),n(i)}),[e,d]);return{contents:i,count:a,isLoading:c,isError:l,search:u}},H=e=>{const t=Object(s.d)();return Object(o.useEffect)((()=>{e&&t(r.X.course.fetchCourse(e))}),[t]),Object(s.e)((t=>e?r.gc.course.getCourseById(t,e):void 0))},V=e=>{const t=Object(s.d)(),n=(e=>Object(s.e)((t=>r.gc.featureFlags.getFeatureFlagValue(t,e))))(e);return Object(o.useEffect)((()=>{n||t(r.X.featureFlags.loadFeatureFlagValueByKey({flagKey:e}))}),[t,e,n]),n},K=e=>{var t;return"true"===(null===(t=V(e))||void 0===t?void 0:t.flagValue)},$=e=>{const t=Object(s.d)(),n=Object(s.e)((t=>r.gc.partnerCloud.getProviderSettingsById(t,e)));return Object(o.useEffect)((()=>{e&&!n&&t(r.X.partnerCloud.loadProviderSettings(e))}),[t,e,n]),n};function W(e){const t=Object(s.d)(),n=Object(s.e)((t=>r.gc.systemPreference.getSystemPreferenceByKey(t,e))),i=Object(s.e)((t=>r.gc.systemPreference.isSystemPreferenceLoading(t,e)));return Object(o.useEffect)((()=>{i||(null==n?void 0:n.value)||t(r.X.systemPreference.loadSystemPreference({key:e}))}),[t,e,i,null==n?void 0:n.value]),null==n?void 0:n.value}const z="allow_user_pronoun_request";function Q(){var e;const t=Object(s.e)((e=>r.gc.systemPreference.getSystemPreferenceByKey(e,z))),[n,i]=Object(o.useState)((null!==(e=null==t?void 0:t.value)&&void 0!==e?e:T.ec.Yes)===T.ec.Yes),[a,c]=Object(o.useState)(!1),l=Object(s.d)(),d=e=>{e&&e===T.ec.Yes?i(!0):i(!1)};Object(o.useEffect)((()=>{c(!0),l(r.X.systemPreference.loadSystemPreference({key:z})).then((({systemPreference:e})=>{d(e.value),c(!1)}))}),[l]);return{enabled:n,loading:a,onToggleChange:Object(o.useCallback)((e=>{const t=e?T.ec.Yes:T.ec.No;return d(t),l(r.X.systemPreference.persistSystemPreference({key:z,value:t}))}),[l])}}const Y=async(e,t)=>{const n=(await e(r.X.userPronouns.loadSystemPronouns(t))).paging;(null==n?void 0:n.nextPage)&&await Y(e,n)},J=()=>{const e=Object(s.d)(),[t,n]=Object(o.useState)(!0);Object(o.useEffect)((()=>{Y(e).then((()=>{n(!1)}))}),[e]);return{list:Object(s.e)((e=>r.gc.userPronouns.getApprovedPronouns(e))),onAddPronoun:Object(o.useCallback)((t=>e(r.X.userPronouns.addSystemPronoun(t))),[e]),onRemovePronoun:Object(o.useCallback)((t=>e(r.X.userPronouns.deleteSystemPronoun(t.id))),[e]),loading:t}},X=e=>{const t=Object(s.d)();return Object(o.useEffect)((()=>{e&&t(r.X.user.loadUser(e))}),[t,e]),Object(s.e)((t=>r.gc.user.getUserById(t,e)))},Z=e=>{const t=Object(s.d)(),n=(e=>Object(s.e)((t=>r.gc.userPreference.getUserPreferenceByKey(t,e))))(e);return Object(o.useEffect)((()=>{n||t(r.X.userPreference.loadUserPreference({key:e}))}),[t,e,n]),n},ee=()=>{const e=Object(s.d)();return Object(o.useCallback)((t=>e(r.X.userPreference.persistUserPreference(t))),[e])};n.d(t,"E",(function(){return i})),n.d(t,"C",(function(){return a})),n.d(t,"h",(function(){return c})),n.d(t,"n",(function(){return u})),n.d(t,"f",(function(){return p})),n.d(t,"x",(function(){return b})),n.d(t,"v",(function(){return g})),n.d(t,"w",(function(){return m})),n.d(t,"z",(function(){return h})),n.d(t,"i",(function(){return f})),n.d(t,"I",(function(){return I})),n.d(t,"j",(function(){return C})),n.d(t,"k",(function(){return j})),n.d(t,"c",(function(){return A})),n.d(t,"g",(function(){return _})),n.d(t,"l",(function(){return R})),n.d(t,"F",(function(){return N})),n.d(t,"m",(function(){return D})),n.d(t,"o",(function(){return L})),n.d(t,"q",(function(){return P})),n.d(t,"s",(function(){return k})),n.d(t,"t",(function(){return x})),n.d(t,"u",(function(){return M})),n.d(t,"a",(function(){return G})),n.d(t,"b",(function(){return F})),n.d(t,"d",(function(){return q})),n.d(t,"e",(function(){return H})),n.d(t,"y",(function(){return E})),n.d(t,"p",(function(){return K})),n.d(t,"B",(function(){return $})),n.d(t,"G",(function(){return W})),n.d(t,"D",(function(){return Q})),n.d(t,"H",(function(){return J})),n.d(t,"r",(function(){return X})),n.d(t,"J",(function(){return Z})),n.d(t,"A",(function(){return ee}))},HdiE:function(e,t,n){"use strict";var s=n("iKGo"),o=n("JGST"),r=n("9EWH"),i=n("nsO7");const a="blog.participation.summary.load";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return d})),n.d(t,"c",(function(){return u}));const c={[a]:s.n,[Object(s.j)(a)]:(e,t)=>{const n=Object(r.a)(e,(e=>{const{byBlogId:n}=t;Object.keys(n).forEach((t=>{e.byBlogId[t]=n[t]}))}));return Object(s.p)(n,t)},[Object(s.h)(a)]:s.l},l=Object(s.g)({byBlogId:{},isLoading:!1},c),d={loadParticipationSummary:(e,t)=>Object(s.f)(a,(()=>Object(o.i)(e,t).then((e=>e)).catch((e=>{throw{err:e}}))))},u={getSummaryByBlogId:(e,t)=>Object(i.find)(e.blog.summary.byBlogId,{id:t}),isLoading:e=>e.blog.summary.isLoading}},IbyE:function(e,t,n){"use strict";var s=n("PPJ4"),o=n("nsO7"),r=n("9EWH"),i=n("iKGo"),a=n("zGdY"),c=n("bV+l"),l=n("cg8W");const d=10,u="announcement.load",p="announcement.load.more",b="announcement.save",m="announcement.remove",g="announcement.search",h="announcement.clear",f="get.announcements.counts",O="get.course.context",E="change.search.input.state",y="get.an.announcement",I="remove.from.recent.updated",C="change.announcement.panel.state",v="switch.sort.criteria";function S(e){const{results:t,paging:n}=e;return{announcements:Object(l.c)(t),paging:n}}const j=e=>{const t=Object(a.Dc)(s.d,e),n=async function(e){const t=new a.tb({courseId:e}).withSession(s.d).withQueryParams({membershipAvailable:!0});return Object(a.Wc)(t)}(e);return Promise.all([t,n]).then((e=>{const t=e.shift(),{count:n}=e.shift();return{courseContext:{...t,membershipCount:n}}}))},T={announcements:{},isLoading:!1,isSearchingSuccessful:null,searchInputState:{searchText:"",isCollapsed:!0},paging:null,announcementsCounts:{},courseContext:{id:"",courseId:"",permissions:{chooseUltraStatus:!1,export:!1,archive:!1,viewAutoArchive:!1,edit:!1,editName:!1,editAvailability:!1,editClosed:!1,editBanner:!1,editBannerVisibility:!1,copy:!1,convert:!1,import:!1,editLocale:!1,editDuration:!1,editTerm:!1,delete:!1,viewEnrollments:!1}},announcement:null,detailPanelState:{},sortCriteria:[{field:a.db.StartDateRestriction,direction:a.cc.Descending}],listener:{refreshAnnouncementsCounts:!1,refreshAnnouncements:!1,resetSearchSetting:!1,resetSortSetting:!1},recentUpdatedAnnouncementIds:[]},A=Object(i.g)(T,{[u]:(e,t)=>Object(i.n)(e,t,{isSearchingSuccessful:null}),[Object(i.j)(u)]:(e,t)=>Object(i.p)(e,t,{announcements:t.announcements,paging:t.paging,listener:{...e.listener,refreshAnnouncements:!1,resetSearchSetting:!1,resetSortSetting:!1}}),[Object(i.j)(p)]:(e,t)=>Object(i.p)(e,t,{announcements:{...e.announcements,...t.announcements}}),[Object(i.j)(g)]:(e,t)=>Object(i.p)(e,t,{isSearchingSuccessful:!0}),[Object(i.h)(u)]:(e,t)=>Object(i.l)(e,t,{announcements:{},paging:null}),[Object(i.h)(g)]:(e,t)=>Object(i.l)(e,t,{isSearchingSuccessful:!1}),[E]:(e,t)=>({...e,searchInputState:t.searchInputState}),[C]:(e,t)=>({...e,detailPanelState:t.detailPanelState}),[Object(i.j)(b)]:(e,t)=>{let n=e.recentUpdatedAnnouncementIds;return t.announcement&&-1===n.indexOf(t.announcement.id)&&(n=[...e.recentUpdatedAnnouncementIds,t.announcement.id]),Object(i.p)(e,t,{announcement:t.announcement,listener:{...e.listener,refreshAnnouncementsCounts:!0,resetSortSetting:!0,refreshAnnouncements:!0},recentUpdatedAnnouncementIds:n})},[Object(i.h)(b)]:(e,t)=>Object(i.l)(e,t,{}),[Object(i.j)(m)]:(e,t)=>Object(i.p)(e,t,{announcements:o.omit(e.announcements,t.announcementId),listener:{...e.listener,refreshAnnouncementsCounts:!0}}),[Object(i.h)(m)]:(e,t)=>Object(i.l)(e,t,{}),[Object(i.j)(f)]:(e,t)=>Object(i.p)(e,t,{announcementsCounts:t.announcementsCounts,listener:{...e.listener,refreshAnnouncementsCounts:!1}}),[Object(i.h)(f)]:(e,t)=>Object(i.l)(e,t,{announcementsCounts:{}}),[Object(i.j)(O)]:(e,t)=>Object(i.p)(e,t,{courseContext:t.courseContext}),[Object(i.h)(O)]:(e,t)=>Object(i.l)(e,t,{courseContext:{}}),[Object(i.j)(y)]:(e,t)=>Object(i.p)(e,t,{announcement:t.announcement}),[Object(i.h)(y)]:(e,t)=>Object(i.l)(e,t,{announcement:{}}),[v]:(e,t)=>({...e,sortCriteria:t.sortCriteria}),[h]:(e,t)=>({...T}),[I]:(e,t)=>Object(r.a)(e,(e=>{e.recentUpdatedAnnouncementIds.length>0&&o.remove(e.recentUpdatedAnnouncementIds,(e=>e===t.id))}))}),_={loadAnnouncements:(e,t,n=!1)=>Object(i.b)(n?p:u,((o,r)=>R(r())?(o(Object(i.a)(u)),((e,t)=>{const{searchText:n="",paging:o={offset:0,limit:d},sort:r}=t,{offset:i,limit:c}=o;if(n){const t=new a.rb({courseId:e}).withSession(s.d).withPaging({offset:i,limit:c}).withQueryParams({q:n});return r&&t.withSort(...r),Object(a.Wc)(t).then(S)}return Object(a.yc)(s.d,e,{offset:i,limit:c},r).then((e=>S(e)))})(e,t).then((e=>(n?o(Object(i.a)(Object(i.j)(p),{...e})):(o(Object(i.a)(Object(i.j)(u),{...e})),t.searchText&&o(Object(i.a)(Object(i.j)(g)))),e)),(e=>(o(Object(i.a)(Object(i.j)(c.a.APP_ERROR),{error:e})),o(Object(i.a)(Object(i.h)(u),{err:e})),t.searchText&&o(Object(i.a)(Object(i.h)(g))),Promise.resolve(null))))):Promise.resolve(null))),changeSearchInputState:e=>Object(i.a)(E,{searchInputState:e}),saveAnnouncement:(e,t)=>Object(i.b)(b,((n,o)=>((e,t)=>(t.id?Object(a.xc)(s.d,e,t.id,t):Object(a.uc)(s.d,e,t)).then((e=>({announcement:e}))))(e,t).then((e=>{n(Object(i.a)(Object(i.j)(b),{...e}))}),(e=>{n(Object(i.a)(Object(i.j)(c.a.APP_ERROR),{error:e})),n(Object(i.a)(Object(i.h)(b),{err:e}))})))),removeAnnouncement:(e,t)=>Object(i.b)(m,((n,o)=>((e,t)=>Object(a.vc)(s.d,e,t))(e,t).then((e=>{n(Object(i.a)(Object(i.j)(m),{announcementId:t}))}),(e=>{n(Object(i.a)(Object(i.j)(c.a.APP_ERROR),{error:e})),n(Object(i.a)(Object(i.h)(m),{err:e}))})))),getAnnouncementsCounts:e=>Object(i.b)(f,((t,n)=>(e=>Object(a.tc)(s.d,e).then((e=>({announcementsCounts:e}))))(e).then((e=>{t(Object(i.a)(Object(i.j)(f),{...e}))}),(e=>{t(Object(i.a)(Object(i.j)(c.a.APP_ERROR),{error:e})),t(Object(i.a)(Object(i.h)(f),{err:e}))})))),getCourseContext:e=>Object(i.b)(O,((t,n)=>j(e).then((e=>{t(Object(i.a)(Object(i.j)(O),{...e}))}),(e=>{t(Object(i.a)(Object(i.j)(c.a.APP_ERROR),{error:e})),t(Object(i.a)(Object(i.h)(O),{err:e}))})))),getAnnouncement:(e,t)=>Object(i.b)(y,((n,o)=>((e,t)=>Object(a.wc)(s.d,e,t).then((e=>({announcement:e}))))(e,t).then((e=>{n(Object(i.a)(Object(i.j)(y),{...e}))}),(e=>{n(Object(i.a)(Object(i.j)(c.a.APP_ERROR),{error:e})),n(Object(i.a)(Object(i.h)(y),{err:e}))})))),changeAnnouncementPanelState:e=>Object(i.a)(C,{detailPanelState:e}),switchSortCriteria:e=>Object(i.a)(v,{sortCriteria:e}),clearAnnouncements:()=>Object(i.a)(h),removeFromRecentUpdated:e=>Object(i.a)(I,{id:e})},R=e=>!e.announcement.isLoading;var N=n("iFXv"),w=n("LhnZ"),D=n("4qp4");const L="question.load",P="question.create",k="question.persist",x="question.delete",B="questions.delete",M="question.block.add.questions",U="question.block.load.questions",G="question.block.delete.questions",F="question.block.update.questions";var q=n("W2ME");const H="/v1/courses/%courseId%/assessments",V=`${H}/%assessmentId%`;function K(e,t,n){const s=Object(q.f)(`${H}/%assessmentId%/checkPattern`,{courseId:e,assessmentId:t});return Object(q.p)(s,{strPattern:n})}function $(e,t,n,s){const o=Object(q.f)(`${H}/%assessmentId%/checkPattern/isCorrect`,{courseId:e,assessmentId:t});return Object(q.p)(o,{strPattern:n,answerText:s})}function W(e,t,n){const s=Object(q.f)(`${V}/checkpassword`,{courseId:e,assessmentId:t});return Object(q.p)(s,{password:n})}async function z(e,t={},n){return Object(a.Yc)(s.d,e,t,n)}async function Q(e){return Object(a.md)(s.d,e)}const Y="/v1/users/%userId%/preferences/%key%";function J(e){return null==e.userId&&(e.userId="me"),Object(q.j)(Object(q.f)(Y,e))}async function X(e,t){const n=t&&t.userId||"me",s=Object(q.f)(Y,{userId:n,key:e.key});return Object(q.q)(s,e)}const Z="assessment.load",ee="assessment.persist",te="assessment.delete",ne="assessment.create",se="assessment.file.upload",oe="assessment.fileUploadTask.add",re="assessment.fileUploadTask.update",ie="assessment.fileUploadTask.remove",ae="assessment.import",ce="assessment.importTasks.load",le="assessment.importTask.add",de="assessment.importTask.update",ue="assessment.importTask.remove",pe="granular.content.copy.complete",be={notifyGCCCompleted:e=>Object(i.a)(pe,{courseId:e})};let me=0;const ge=(e,t,n,s)=>{const o=e[t];o?o[n]=s:e[t]={[n]:s}},he=(e,t,n)=>{const s=e[t];Object.keys(s).length>1?delete s[n]:delete e[t]},fe=e=>["views","byCourseId",e.courseId],Oe=(e,t)=>{var n;if(!t)return{id:null,view:null};const s=null!==(n=e.views.byCourseId[t.courseId])&&void 0!==n?n:{},r=Object.keys(s).find((e=>{const n=s[e];if("assessmentId"in n.query)return"assessmentId"in t&&t.assessmentId===n.query.assessmentId&&t.courseId===n.query.courseId;if("assessmentId"in t)return!1;const r=o.isEqual(n.query.paging,t.paging),i=o.isEqual(n.query.filter,t.filter),a=o.isEqual(n.query.sort,t.sort);return r&&a&&i}));return{id:r,view:r?s[r]:null}};function Ee(e,t){var n;t&&Object.values(null!==(n=e.views.byCourseId[t])&&void 0!==n?n:{}).forEach((e=>{e.isValid=!1}))}const ye=(e,t)=>e.assessment.importTasksByCourseId[t]||{},Ie=e=>`questionBanksImportShowTaskStatus${e.replace(/\_/g,".")}`,Ce=(e,t)=>({key:Ie(e),isRequired:!0,value:JSON.stringify(Object.keys(t).reduce(((e,t)=>({...e,[t]:!0})),{}))}),ve=new Set([a.Rb.Complete,a.Rb.CompleteErrors]),Se=Object(i.g)({byAssessmentId:{},fileUploadTasksByCourseId:{},importTasksByCourseId:{},permissions:null,paging:null,isLoading:!1,views:{byCourseId:{}}},{[D.a.CONTENT_LOAD]:i.n,[Object(i.j)(D.a.CONTENT_LOAD)]:(e,t)=>{const n=Object(r.a)(e,(n=>{if(!o.has(t,"assessments"))return;const{assessments:s}=t;Object.keys(s).forEach((t=>{var o,r;n.byAssessmentId[t]={...s[t],api:{isUpdating:!1,isDeleting:!1},ui:null!==(r=null===(o=e.byAssessmentId[t])||void 0===o?void 0:o.ui)&&void 0!==r?r:{}}}))}));return Object(i.p)(n,t)},[Object(i.h)(D.a.CONTENT_LOAD)]:i.l,[Z]:Object(i.o)(Oe,fe),[Object(i.j)(Z)]:(e,t)=>{if(!t||!t.data)return Object(i.p)(e,t);const{data:n}=t,{assessmentIds:s,byAssessmentId:a,paging:c,permissions:l}=n,d=Object(r.a)(e,(t=>{Object.keys(a).forEach((n=>{const s=e.byAssessmentId[n],r=o.pickBy({contentId:null==s?void 0:s.contentId,permissions:null==s?void 0:s.permissions,ui:null==s?void 0:s.ui});t.byAssessmentId[n]={...a[n],ui:{},...r,api:{isUpdating:!1,isDeleting:!1}}}))}));return Object(i.q)(d,t,{viewResolver:Oe,viewsPathResolver:fe,paging:c,permissions:l,values:s})},[Object(i.h)(Z)]:Object(i.m)(Oe,fe),[ee]:(e,t)=>Object(r.a)(e,(e=>{e.byAssessmentId[t.assessment.id]||(e.byAssessmentId[t.assessment.id]={}),e.byAssessmentId[t.assessment.id].api||(e.byAssessmentId[t.assessment.id].api={}),e.byAssessmentId[t.assessment.id].api.isUpdating=!0})),[Object(i.j)(ee)]:(e,t)=>{const{updatedAssessment:n}=t,s={...n,api:{...e.byAssessmentId[n.id].api,isUpdating:!1},ui:e.byAssessmentId[n.id]&&e.byAssessmentId[n.id].ui};return Object(r.a)(e,(e=>{e.byAssessmentId[s.id]=s,Ee(e,s.courseId)}))},[Object(i.h)(ee)]:(e,t)=>Object(r.a)(e,(e=>{e.byAssessmentId[t.assessment.id].api||(e.byAssessmentId[t.assessment.id].api={}),e.byAssessmentId[t.assessment.id].api.isUpdating=!1})),[te]:(e,t)=>Object(r.a)(e,(e=>{e.byAssessmentId[t.assessmentId].api||(e.byAssessmentId[t.assessmentId].api={}),e.byAssessmentId[t.assessmentId].api.isDeleting=!0})),[Object(i.j)(te)]:(e,t)=>Object(r.a)(e,(e=>{const n=e.byAssessmentId[t.assessmentId];delete e.byAssessmentId[t.assessmentId],Ee(e,n.courseId)})),[Object(i.h)(te)]:(e,t)=>{const n=Object(r.a)(e,(e=>{e.byAssessmentId[t.assessmentId].api||(e.byAssessmentId[t.assessmentId].api={}),e.byAssessmentId[t.assessmentId].api.isDeleting=!1}));return Object(i.l)(n,t)},[Object(i.j)(ne)]:(e,t)=>Object(r.a)(e,(n=>{const s={...e.byAssessmentId},o={...t.assessment,api:{isDeleting:!1,isUpdating:!0}};s[o.id]=o,n.byAssessmentId=s,Ee(n,o.courseId)})),[Object(i.j)(k)]:(e,t)=>Object(r.a)(e,(e=>{const{prevQuestion:n,question:s}=t;0===n.id.indexOf(w.n)&&Ee(e,s.courseId)})),[Object(i.j)(x)]:(e,t)=>Object(r.a)(e,(e=>{Ee(e,t.prevQuestion.courseId)})),[Object(i.j)(D.a.CONTENT_DELETE)]:(e,t)=>Object(r.a)(e,(n=>{const{results:s}=t;s.forEach((t=>{const s=o.findKey(e.byAssessmentId,{contentId:t});if(s){const t=e.byAssessmentId[s];delete n.byAssessmentId[s],Ee(n,t.courseId)}}))})),[Object(i.j)(D.a.CONTENT_DELETE_IN_STORE)]:(e,t)=>{const{contentId:n}=t,s=o.findKey(e.byAssessmentId,{contentId:n});return s?Object(r.a)(e,(t=>{const n=e.byAssessmentId[s];delete t.byAssessmentId[s],Ee(t,n.courseId)})):e},[Object(i.j)(D.a.CONTENT_IMPORT_COMPLETE)]:(e,t)=>{const{courseId:n}=t;return Object(r.a)(e,(e=>{Ee(e,n)}))},[oe]:(e,t)=>Object(r.a)(e,(e=>{const{courseId:n,taskId:s,fileName:o}=t,r={taskId:s,fileName:o,progress:0};ge(e.fileUploadTasksByCourseId,n,s,r)})),[re]:(e,t)=>Object(r.a)(e,(e=>{const{courseId:n,taskId:s,progress:o,fileLocation:r}=t,i=e.fileUploadTasksByCourseId[n][s];e.fileUploadTasksByCourseId[n][s]={...i,progress:o,fileLocation:r}})),[ie]:(e,t)=>Object(r.a)(e,(e=>{const{courseId:n,taskId:s}=t;he(e.fileUploadTasksByCourseId,n,s)})),[ce]:(e,t)=>Object(r.a)(e,(e=>{const{courseId:n,queueTasks:s}=t,r=e.importTasksByCourseId[n];r?s.forEach((e=>{r[e.taskId]=e})):e.importTasksByCourseId[n]=o.keyBy(s,"taskId")})),[le]:(e,t)=>Object(r.a)(e,(e=>{const{courseId:n,queueTask:s}=t;ge(e.importTasksByCourseId,n,s.taskId,s)})),[de]:(e,t)=>Object(r.a)(e,(n=>{const{courseId:s,queueTasks:o}=t;o.forEach((o=>{var r;n.importTasksByCourseId[s][o.taskId]=o;const i=null===(r=e.importTasksByCourseId[s])||void 0===r?void 0:r[o.taskId];o.taskStatus!==(null==i?void 0:i.taskStatus)&&ve.has(o.taskStatus)&&Ee(n,t.courseId)}))})),[Object(i.j)(ue)]:(e,t)=>Object(r.a)(e,(e=>{const{courseId:n,taskId:s}=t;he(e.importTasksByCourseId,n,s)})),[Object(i.h)(ue)]:(e,t)=>Object(i.l)(e,t),[pe]:(e,t)=>{const{courseId:n}=t;return Object(r.a)(e,(e=>{Ee(e,n)}))}}),je={loadAssessments:e=>{const{courseId:t,types:n,offset:s,limit:o}=e;return je.loadAssessmentsByQuery({courseId:t,...n?{filter:{types:n}}:null,paging:{offset:null!=s?s:0,limit:null!=o?o:20}})},loadAssessmentsByQuery:e=>Object(i.b)(Z,(t=>(t(Object(i.a)(Z,{query:e})),async function(e){const t=new a.sb({courseId:e.courseId}).withSession(s.d);e.paging&&t.withPaging(e.paging),e.sort&&t.withSort(...e.sort),e.filter&&t.withQueryParams({types:e.filter.types,textSearch:e.filter.textSearch||void 0}),e.expand&&t.withExpand(e.expand);const{results:n,paging:o,permissions:r}=await Object(a.Wc)(t);return{assessmentIds:n.map((e=>e.id)),byAssessmentId:Object(w.E)(n.map((t=>({...t,courseId:e.courseId})))),paging:o,permissions:r}}(e).then((n=>(t(Object(i.a)(Object(i.j)(Z),{data:n,query:e})),{...n}))).catch((n=>{throw t(Object(i.a)(Object(i.j)(c.a.APP_ERROR),{error:n})),t(Object(i.a)(Object(i.h)(Z),{query:e})),n}))))),loadAssessmentById:({courseId:e,assessmentId:t})=>Object(i.b)(Z,(n=>{const o={assessmentId:t,courseId:e};return n(Object(i.a)(Z,{query:o})),async function({courseId:e,assessmentId:t}){return{...await Object(a.Bc)(s.d,e,t),courseId:e}}({courseId:e,assessmentId:t}).then((e=>(n(Object(i.a)(Object(i.j)(Z),{data:{assessmentIds:[e.id],byAssessmentId:{[e.id]:e}},query:o})),e))).catch((e=>{throw n(Object(i.a)(Object(i.j)(c.a.APP_ERROR),{error:e})),n(Object(i.a)(Object(i.h)(Z),{query:o})),e}))})),deleteAssessment:({courseId:e,assessmentId:t})=>Object(i.b)(te,(n=>(n(Object(i.a)(te,{assessmentId:t})),Object(a.Ac)(s.d,e,t).then((()=>(n(Object(i.a)(Object(i.j)(te),{assessmentId:t})),{assessmentId:t}))).catch((e=>{throw n(Object(i.a)(Object(i.h)(te),{assessmentId:t})),e instanceof a.g||n(Object(i.a)(Object(i.j)(c.a.APP_ERROR),{error:e})),e}))))),createAssessment:e=>Object(i.b)(ne,(t=>(t(Object(i.a)(ne,e)),async function({courseId:e,title:t,type:n}){return{...await Object(a.zc)(s.d,e,{title:t,type:n}),courseId:e}}(e).then((e=>(t(Object(i.a)(Object(i.j)(ne),{assessment:e})),{assessment:e}))).catch((e=>{throw t(Object(i.a)(Object(i.j)(c.a.APP_ERROR),{error:e})),e}))))),uploadAssessmentFile:e=>Object(i.b)(se,((t,n)=>{const{courseId:s,file:o,fileName:r,fileType:a}=e;t(Object(i.a)(se,e));const l=((e,t,n)=>{const s=me;return me+=1,e(Object(i.a)(oe,{courseId:t,fileName:n,taskId:s})),s})(t,s,r);z({fileType:a,fileName:r,file:o}).then((e=>{const o=n().assessment.fileUploadTasksByCourseId[s];if(!(null==o?void 0:o[l]))return;const{fileLocation:r}=e;t(Object(i.a)(re,{courseId:s,taskId:l,progress:100,fileLocation:r}))})).catch((e=>{t(Object(i.a)(Object(i.j)(c.a.APP_ERROR),{error:e}))}))})),removeAssessmentFileUploadTask:(e,t)=>Object(i.b)(ie,(async n=>{n(Object(i.a)(ie,{courseId:e,taskId:t}))})),importAssessment:e=>Object(i.b)(ae,((t,n)=>{const{courseId:s,fileName:o,fileLocation:r}=e;t(Object(i.a)(ae,e));(async function(e,t){const n=Object(q.f)("/v1/courses/%courseId%/imports",e);return Object(q.p)(n,t)})({courseId:s,fileName:o,fileLocation:r},{cxAction:"CX_ACTION_IMPORT",includeItems:["cxConfigArea_POOL"]}).then((e=>{t(Object(i.a)(le,{courseId:s,queueTask:e}));X(Ce(s,ye(n(),s)))})).catch((e=>{throw t(Object(i.a)(Object(i.j)(c.a.APP_ERROR),{error:e})),e}))})),updateImportTaskStatus:(e,t)=>Object(i.b)(de,(async n=>{const s=await Promise.all(t.map((e=>Q(e))));return n(Object(i.a)(de,{courseId:e,queueTasks:s})),s})),loadAssessmentImportTasks:e=>Object(i.b)(ce,(async t=>{const n=await J({key:Ie(e)});if(!n)return;let s={};try{s=JSON.parse(n.value)}catch(e){const t=Error(`Parsing of preference value failed: ${n.value}`);return console.error(t.message),void console.error(e)}const o=Object.entries(s).filter((([e,t])=>!0===t&&"string"==typeof e)).map((([e])=>e));if(!o.length)return;const r=o.map((e=>Q(e))),a=await Promise.all(r);t(Object(i.a)(ce,{courseId:e,queueTasks:a}))})),removeAssessmentImportTask:(e,t)=>Object(i.b)(ue,((n,s)=>{const r=o.omit(ye(s(),e),t);return X(Ce(e,r)).then((()=>{n(Object(i.a)(Object(i.j)(ue),{courseId:e,taskId:t}))})).catch((s=>{n(Object(i.a)(Object(i.h)(ue),{courseId:e,taskId:t})),n(Object(i.a)(Object(i.j)(c.a.APP_ERROR),{error:s}))}))})),persistAssessment:(e,t)=>Object(i.b)(ee,(n=>(n(Object(i.a)(ee,{assessment:e})),async function(e,{assessmentId:t,courseId:n}){return{...await Object(a.Cc)(s.d,n,t,e),courseId:n}}(e,{...t,assessmentId:e.id}).then((t=>(n(Object(i.a)(Object(i.j)(ee),{assessment:e,updatedAssessment:t})),{assessment:e}))).catch((t=>{throw n(Object(i.a)(Object(i.h)(ee),{assessment:e})),n(Object(i.a)(Object(i.j)(c.a.APP_ERROR),{error:t})),t})))))},Te={getAssessmentById:(e,t)=>o.find(e.assessment.byAssessmentId,{id:t}),getAssessmentByContentId:(e,t)=>o.find(e.assessment.byAssessmentId,{contentId:t}),getAssessmentsByCourseId:(e,t,n)=>{let s=o.filter(e.assessment.byAssessmentId,{courseId:t});return n&&(s=s.filter((e=>n.includes(e.type)))),s},getAssessmentsByQuery:(e,t)=>{const{view:n}=Oe(e.assessment,t);return n?(n.values||[]).map((t=>Te.getAssessmentById(e,t))).filter((e=>!!e)):[]},getAssessmentViewStateByQuery:(e,t)=>{const{view:n}=Oe(e.assessment,t);return n?{isLoading:n.isLoading,isValid:n.isValid,paging:n.paging,permissions:n.permissions}:null},getAssessmentFileUploadTasks:e=>t=>t.assessment.fileUploadTasksByCourseId[e]||{},getAssessmentImportTasks:e=>t=>t.assessment.importTasksByCourseId[e]||{}};const Ae="attempt-receipt.load",_e=Object(i.g)({byAttemptReceiptId:{},isLoading:!1},{[Ae]:i.n,[Object(i.j)(Ae)]:(e,t)=>{const{receiptId:n}=t,s=t,o=Object(r.a)(e,(e=>{e.byAttemptReceiptId[n]=s}));return Object(i.p)(o,t)},[Object(i.c)(Ae)]:i.p,[Object(i.h)(Ae)]:i.l}),Re={loadAttemptReceipt:e=>Object(i.f)(Ae,(async()=>{try{return await function(e){return Object(a.fd)(s.d,e)}(e)}catch(e){throw{err:e}}}),null,[a.S.NotFound])};var Ne=n("JGST"),we=n("vIkp");const De=Object(i.g)({byId:{},isLoading:!1},{[Object(i.j)(D.a.CONTENT_LOAD)]:(e,t)=>{const n=Object(r.a)(e,(e=>{const{blogs:n}=t;Object.keys(n||{}).forEach((t=>{e.byId[t]={...n[t],api:{isUpdating:!1,isDeleting:!1}}}))}));return Object(i.p)(n,t)},[we.a.BLOG_LOAD]:i.n,[Object(i.j)(we.a.BLOG_LOAD)]:(e,t)=>{const n=Object(r.a)(e,(e=>{const{blog:n}=t;n&&(e.byId[n.id]=n)}));return Object(i.p)(n,t)},[Object(i.h)(we.a.BLOG_LOAD)]:i.l,[Object(i.j)(D.a.CONTENT_PERSIST)]:(e,t)=>{const n=Object(r.a)(e,(n=>{const{blogs:s}=t;Object.values(s||{}).forEach((t=>{const s=e.byId[t.id];n.byId[t.id]={...Object(i.i)(s,t),api:{isUpdating:!1,isDeleting:!1}}}))}));return Object(i.p)(n,t)}}),Le={loadBlog:e=>Object(i.f)(we.a.BLOG_LOAD,(async()=>{try{return{blog:await Ne.e(e)}}catch(e){throw{err:e}}}))},Pe={getBlogById:(e,t)=>Object(o.find)(e.blog.blogs.byId,{id:t}),canCreateEntry:(e,t)=>{const n=e.blog.blogs.byId[t];return n&&n.permissions.createEntry},canDeleteBlog:(e,t)=>{const n=e.blog.blogs.byId[t];return n&&n.permissions.delete},canModifyBlog:(e,t)=>{const n=e.blog.blogs.byId[t];return n&&n.permissions.modify}},ke="blog.comment.add",xe="blog.entry.comments.load",Be="blog.comment.remove",Me="blog.comment.modify",Ue=Object(i.g)({byId:{},paging:null,permissions:{canDeleteAnyComment:!1},isLoading:!1},{[xe]:i.n,[Object(i.j)(xe)]:(e,t)=>{const{byId:n,paging:s,permissions:o}=t,a=Object(r.b)(e,(e=>{s&&(e.paging=s),o&&(e.permissions=o),n&&(e.byId=n,Object.keys(n).forEach((t=>{e.byId[t].api={isUpdating:!1,isDeleting:!1}})))}));return Object(i.p)(a,t)},[Object(i.h)(xe)]:i.l,[ke]:(e,t)=>Object(r.b)(e,(e=>{e.byId[t.commentId]||(e.byId[t.commentId]={}),e.byId[t.commentId].api={isUpdating:!0,isDeleting:!0}})),[Object(i.j)(ke)]:(e,t)=>{const{comment:n}=t;let s=e;return n&&(s=Object(r.b)(e,(e=>{e.byId[n.id]={...n,api:{isUpdating:!1,isDeleting:!1}}}))),Object(i.p)(s,t)},[Object(i.h)(ke)]:i.l,[Me]:(e,t)=>Object(r.b)(e,(e=>{e.byId[t.commentId]||(e.byId[t.commentId]={}),e.byId[t.commentId].api||(e.byId[t.commentId].api={}),e.byId[t.commentId].api.isUpdating=!0})),[Object(i.j)(Me)]:(e,t)=>{const{comment:n}=t;let s=e;return n&&(s=Object(r.b)(e,(e=>{e.byId[n.id]={...n,api:{isUpdating:!1}}}))),Object(i.p)(s,t)},[Object(i.h)(Me)]:(e,t)=>Object(r.b)(e,(e=>{e.byId[t.commentId]||(e.byId[t.commentId]={}),e.byId[t.commentId].api||(e.byId[t.commentId].api={}),e.byId[t.commentId].api.isUpdating=!1})),[Be]:(e,t)=>Object(r.b)(e,(e=>{e.byId[t.commentId]||(e.byId[t.commentId]={}),e.byId[t.commentId].api||(e.byId[t.commentId].api={}),e.byId[t.commentId].api.isDeleting=!0})),[Object(i.h)(Be)]:(e,t)=>Object(r.b)(e,(e=>{e.byId[t.commentId]||(e.byId[t.commentId]={}),e.byId[t.commentId].api||(e.byId[t.commentId].api={}),e.byId[t.commentId].api.isDeleting=!1})),[Object(i.j)(Be)]:(e,t)=>Object(r.b)(e,(e=>{delete e.byId[t.commentId]}))}),Ge={loadEntryComments:(e,t,n,s={})=>Object(i.f)(xe,(async()=>{try{return await Ne.g(e,t,n,s)}catch(e){throw{err:e}}})),addComment:e=>Object(i.f)(ke,(async()=>{let t;try{t=await Ne.b(e)}catch(e){throw{err:e}}return{comment:t}})),modifyComment:e=>Object(i.f)(Me,(async()=>{let t;try{t=await Ne.k(e)}catch(e){throw{err:e}}return{comment:t}})),deleteComment:e=>Object(i.f)(Be,(async t=>{const{commentId:n}=e;try{const s=Fe.getCommentById(t(),n);return await Ne.d(e),{commentId:n,comment:s}}catch(e){throw{err:e}}}),{commentId:e.commentId})},Fe={getCommentsByEntryId:(e,t)=>Object(o.filter)(e.blog.comments.byId,{entryId:t}),getCommentById:(e,t)=>e.blog.comments.byId[t]};var qe=n("+l7i"),He=n("Dyp/");function Ve(e,t){return e===t||Array.isArray(e)&&Array.isArray(t)&&e.length===t.length&&e.every(((e,n)=>t[n]===e))}function Ke(e,t){return e===t||JSON.stringify(e)===JSON.stringify(t)}var $e=n("M5qL");const We={byId:{},views:{byBlogId:{}}},ze=(e,t)=>{const{blogId:n}=t,s=e.views.byBlogId[n];s&&Object.values(s).forEach((e=>{e.isValid=!1}))},Qe=(e,t)=>{var n;if(!t)return{id:null,view:null};const s=(null===(n=e.views)||void 0===n?void 0:n.byBlogId[t.blogId])||{},r=Object.keys(s).find((e=>{const n=s[e],r=Object(o.isEqual)(n.query.assignedUserId,t.assignedUserId),i=Object(o.isEqual)(n.query.expand,t.expand),a=Object(o.isEqual)(n.query.paging,t.paging);return r&&i&&a}));return{id:r,view:r?s[r]:null}},Ye=e=>["views","byBlogId",e.blogId],Je=Object(i.g)(We.byId,{[Object(i.j)($e.a.BLOG_ENTRY_ADD)]:(e,t)=>Object(r.a)(e,(e=>{Object.keys(t.byId||{}).forEach((n=>{e[n]=t.byId[n],e[n].api||(e[n].api={}),e[n].userStatus||(e[n].userStatus={commentCount:0}),e[n].api.isUpdating=!1,e[n].api.isDeleting=!1}))})),[$e.a.BLOG_ENTRY_MODIFY]:(e,t)=>Object(r.a)(e,(e=>{e[t.entryId]||(e[t.entryId]={}),e[t.entryId].api||(e[t.entryId].api={}),e[t.entryId].api.isUpdating=!0})),[Object(i.h)($e.a.BLOG_ENTRY_MODIFY)]:(e,t)=>Object(r.a)(e,(e=>{e[t.entryId]||(e[t.entryId]={}),e[t.entryId].api||(e[t.entryId].api={}),e[t.entryId].api.isUpdating=!1})),[Object(i.j)($e.a.BLOG_ENTRY_MODIFY)]:(e,t)=>{const n=((e,t)=>t&&t.byId?Object(r.a)(e,(e=>{Object.keys(t.byId||{}).forEach((n=>{e[n]={...e[n],...t.byId[n]}}))})):e)(e,t);return Object(r.a)(n,(e=>{e[t.entryId]||(e[t.entryId]={}),e[t.entryId].api||(e[t.entryId].api={}),e[t.entryId].api.isUpdating=!1}))},[$e.a.BLOG_ENTRY_REMOVE]:(e,t)=>Object(r.a)(e,(e=>{e[t.entryId]||(e[t.entryId]={}),e[t.entryId].api||(e[t.entryId].api={}),e[t.entryId].api.isDeleting=!0})),[Object(i.h)($e.a.BLOG_ENTRY_REMOVE)]:(e,t)=>Object(r.a)(e,(e=>{e[t.entryId]||(e[t.entryId]={}),e[t.entryId].api||(e[t.entryId].api={}),e[t.entryId].api.isDeleting=!1})),[Object(i.j)($e.a.BLOG_ENTRY_REMOVE)]:(e,t)=>Object(r.a)(e,(e=>{delete e[t.entryId]})),[Object(i.j)(ke)]:(e,t)=>{const n=t.comment.entryId,s=e[n];return s&&s.userStatus?Object(r.a)(e,(e=>{e[n]||(e[n]={}),e[n].userStatus||(e[n].userStatus={}),e[n].userStatus.commentCount=s.userStatus.commentCount+1})):e},[Object(i.j)(Be)]:(e,t)=>{const n=t.comment,s=e[n.entryId];return s&&s.userStatus?Object(r.a)(e,(e=>{e[n.entryId]||(e[n.entryId]={}),e[n.entryId].userStatus||(e[n.entryId].userStatus={}),e[n.entryId].userStatus.commentCount=s.userStatus.commentCount-1;new Date(n.createdDate)>new Date(s.userStatus.commentLastSeenDate)&&(e[n.entryId].userStatus.unreadCommentCount=s.userStatus.unreadCommentCount-1)})):e}}),Xe=Object(i.g)(We,{[$e.a.BLOG_ENTRIES_LOAD]:Object(i.o)(Qe,Ye),[Object(i.j)($e.a.BLOG_ENTRIES_LOAD)]:(e,t)=>{const{data:n}=t;if(!n)return Object(i.p)(e,t);const{paging:s,entriesId:o}=n;return e=((e,t)=>t&&t.data.byId?Object(r.a)(e,(e=>{Object.keys(t.data.byId||{}).forEach((n=>{e.byId[n]={...e.byId[n],...t.data.byId[n]}}))})):e)(e,t),Object(i.q)(e,t,{viewResolver:Qe,viewsPathResolver:Ye,paging:s,values:o})},[Object(i.h)($e.a.BLOG_ENTRIES_LOAD)]:Object(i.m)(Qe,Ye),[Object(i.j)($e.a.BLOG_ENTRY_REMOVE)]:(e,t)=>Object(r.a)(e,(e=>{const{entry:n}=t;ze(e,n)})),[Object(i.j)($e.a.BLOG_ENTRY_ADD)]:(e,t)=>Object(r.a)(e,(e=>{const n=Object.keys(t.byId||{}).map((e=>t.byId[e]))[0];ze(e,n)}))}),Ze=Object(i.d)({byId:Je}),et=Object(i.k)(Xe,Ze,We),tt={loadBlogEntriesByQuery:e=>async(t,n)=>{const s=!((e,t)=>{const{view:n}=Qe(e.blog.entries,t);return!n||!n.isLoading&&!n.isValid})(n(),e);if(!s){t(Object(i.a)($e.a.BLOG_ENTRIES_LOAD,{query:e}));try{const n=await Ne.f(e);t(Object(i.a)(Object(i.j)($e.a.BLOG_ENTRIES_LOAD),{query:e,data:n}))}catch(n){t(Object(i.a)(Object(i.h)($e.a.BLOG_ENTRIES_LOAD),{query:e})),t(Object(i.a)(Object(i.j)(c.a.APP_ERROR),{error:n}))}}},addBlogEntry:e=>Object(i.f)($e.a.BLOG_ENTRY_ADD,(async()=>{const{nextEntry:t}=e;try{const n=await Ne.a(e),s=t.assignedUserId;return{...n,entryId:t.id,assignedUserId:s}}catch(e){throw{entryId:t.id,err:e}}}),{entryId:e.nextEntry.id}),modifyBlogEntry:e=>Object(i.f)($e.a.BLOG_ENTRY_MODIFY,(async()=>{const{nextEntry:t}=e;try{const n=await Ne.j(e),s=t.assignedUserId;return{...n,entryId:t.id,assignedUserId:s}}catch(e){throw{entryId:t.id,err:e}}}),{entryId:e.nextEntry.id}),removeBlogEntry:e=>Object(i.f)($e.a.BLOG_ENTRY_REMOVE,(async t=>{const{entryId:n}=e;try{const s=ot.getBlogEntryById(t(),n);return{...await Ne.c(e),entryId:n,entry:s}}catch(e){throw{entryId:n,err:e}}}))},nt=Object(qe.b)(He.a,Ve),st=Object(qe.b)(He.a,Ke)(((e,t)=>{const{view:n}=Qe(e.blog.entries,t);return n?{isLoading:n.isLoading,isValid:n.isValid,paging:n.paging}:null}),(e=>e)),ot={getBlogEntriesByQuery:nt(((e,t)=>{const{view:n}=Qe(e.blog.entries,t);return n?(n.values||[]).map((t=>e.blog.entries.byId[t])):[]}),(e=>e)),getBlogEntriesViewStatusByQuery:st,getBlogEntryById:(e,t)=>e.blog.entries.byId[t]};var rt=n("Bv6r"),it=n("HdiE"),at=n("ca8s");const ct="/v1/calendars";function lt(e,t){return Object(q.p)("/v1/calendars/importIcs",{fileLocation:e,fileName:t})}function dt(e=!1){let t;return t=e?Object(q.p)("/v1/calendars/prepareExport",{}):Object(q.j)("/v1/calendars/prepareExport"),t}const ut="calendars.load",pt="calendar.update",bt="calendars.batch.update",mt="calendar.clear.in.store",gt=Object(i.g)({byId:{},isLoading:!1},{[ut]:i.n,[Object(i.j)(ut)]:(e,t)=>{const{byId:n}=t,s=Object(r.b)(e,(t=>{Object.keys(n).forEach((s=>{const o={...n[s],api:{isUpdating:!1,isDeleting:!1},ui:e.byId[s]&&e.byId[s].ui};t.byId[o.id]=o}))}));return Object(i.p)(s,t)},[Object(i.h)(ut)]:i.l,[pt]:(e,t)=>{const{id:n}=t;return Object(r.b)(e,(e=>{e.byId[n]||(e.byId[n]={}),e.byId[n].api||(e.byId[n].api={}),e.byId[n].api.isUpdating=!0}))},[Object(i.j)(pt)]:(e,t)=>{const{calendar:n}=t;return Object(r.b)(Object(i.p)(e,t),(t=>{t.byId[n.id]={...e.byId[n.id],...n,api:{...e.byId[n.id].api,isUpdating:!1},ui:e.byId[n.id]&&e.byId[n.id].ui}}))},[Object(i.h)(pt)]:(e,t)=>{const{id:n}=t;return Object(r.b)(e,(e=>{e.byId[n]||(e.byId[n]={}),e.byId[n].api||(e.byId[n].api={}),e.byId[n].api.isUpdating=!1}))},[bt]:(e,t)=>{const{byId:n}=t;return Object(r.b)(e,(e=>{Object.keys(n).forEach((t=>{e.byId[t]||(e.byId[t]={}),e.byId[t].api||(e.byId[t].api={}),e.byId[t].api.isUpdating=!0}))}))},[Object(i.j)(bt)]:(e,t)=>{const{byId:n}=t;let s=e;return Object.keys(n).forEach((t=>{s=Object(r.b)(s,(o=>{o.byId[t]={...s.byId[t],...n[t],api:{...e.byId[t].api,isUpdating:!1},ui:s.byId[t]&&s.byId[t].ui}}))})),Object(i.p)(s,t)},[Object(i.h)(bt)]:(e,t)=>{const{byId:n}=t;let s=e;return Object.keys(n).forEach((e=>{s=Object(r.b)(s,(t=>{t.byId[e]||(t.byId[e]={}),t.byId[e].api||(t.byId[e].api={}),t.byId[e].api.isUpdating=!1}))})),s},[mt]:e=>Object(r.b)(e,(e=>{e.byId={}}))}),ht={fetchCalendars:()=>Object(i.f)(ut,(()=>async function(e=1e3){const{results:t}=await Object(q.j)(Object(q.f)(ct,{limit:e}));return{byId:Object(l.c)(t)}}().then((e=>e)).catch((e=>{throw{err:e}})))),updateCalendar:(e,t)=>Object(i.f)(pt,(()=>async function(e,t){return await Object(q.o)(`/v1/calendars/${e}`,{...t})}(e,t).then((e=>({calendar:e}))).catch((t=>{throw{id:e,err:t}}))),{id:e}),batchUpdateCalendar:e=>Object(i.f)(bt,(()=>async function(e){Object(q.s)();const t=await Promise.all(e.map((e=>Object(q.o)(`/v1/calendars/${e.id}`,e))));return{byId:Object(l.c)(t)}}(e).then((e=>e)).catch((t=>{throw{byId:Object(w.E)(e),err:t}}))),{byId:Object(w.E)(e)}),clearCalendarsInStore:()=>Object(i.a)(mt)},ft={getCalendarsSortedByType:e=>{const t=Object.values(e.calendar.byId);return(e=>{e.sort(((e,t)=>e.labelLocalizable.languageKey&&t.labelLocalizable.languageKey||e.labelLocalizable.languageKey&&!t.labelLocalizable.languageKey?e.id===a.U.Institution?1:-1:t.labelLocalizable.languageKey&&!e.labelLocalizable.languageKey?t.id===a.U.Institution?-1:1:e.labelLocalizable.rawValue<t.labelLocalizable.rawValue?-1:1))})(t),t}};function Ot(e,t,n){const s=Object(q.f)("/v1/courses/%courseId%/gradebook/columns/%columnId%/summary",{courseId:e,columnId:t});return Object(q.j)(s,n).then((n=>({...n,columnId:t,courseId:e})))}const Et="fetchColumnSummaries";const yt="column-summary.load",It="column-summary.multiple.load",Ct=Object(i.g)({columnSummaries:{},isLoading:!1},{[yt]:i.n,[Object(i.j)(yt)]:(e,t)=>{const n=Object(r.a)(e,(e=>{const n=t.columnSummary;n&&(e.columnSummaries[n.columnId]=n)}));return Object(i.p)(n,t)},[Object(i.h)(yt)]:i.l,[It]:i.n,[Object(i.j)(It)]:(e,t)=>{const n=Object(r.a)(e,(e=>{const{columnSummaries:n}=t;n&&Object.keys(n).forEach((t=>{const s=n[t];e.columnSummaries[s.columnId]=s}))}));return Object(i.p)(n,t)},[Object(i.h)(It)]:i.l}),vt={loadColumnSummary:({courseId:e,columnId:t})=>Object(i.f)(yt,(async n=>{let s=null;return n(),s=await Ot(e,t),{columnSummary:s}})),loadColumnSummaries:({courseId:e,columnIds:t})=>Object(i.f)(It,(async n=>(n(),async function(e,t){Object(q.s)(Et);const n=[];for(const s of t)n.push(Ot(e,s,{batchKey:Et}));return{columnSummaries:(s=await Promise.all(n),s.reduce(((e,t)=>(e[t.columnId]=t,e)),{}))};var s}(e,t))))},St={getColumnSummaryByColumnId:(e,t)=>o.find(e.columnSummary.columnSummaries,{columnId:t}),getColumnSummariesByCourseId:(e,t)=>o.filter(e.columnSummary.columnSummaries,{courseId:t}),isLoading:e=>e.columnSummary.isLoading};var jt=n("BWPL");const Tt="course.load",At="courses.load",_t="course.update",Rt="course.load.student.count",Nt=Object(i.g)({courses:{},permissions:null,paging:null,isLoading:!1},{[At]:i.n,[Object(i.j)(At)]:(e,t)=>{if(!t||!t.courses)return Object(i.p)(e,t);const{courses:n,permissions:s,paging:o}=t;return Object(r.b)(e,(t=>{Object.keys(n).forEach((s=>{const o={...n[s],api:{isUpdating:!1,isDeleting:!1},ui:e.courses[s]&&e.courses[s].ui};t.courses[o.id]=o})),t.isLoading=!1,t.paging=o,t.permissions=s}))},[Object(i.h)(At)]:i.l,[Tt]:i.n,[Object(i.j)(Tt)]:(e,t)=>{if(!t||!t.course)return Object(i.p)(e,t);const{course:n}=t,s=Object(r.b)(e,(e=>{e.courses[n.id]={...n,api:{isUpdating:!1,isDeleting:!1}}}));return Object(i.p)(s,t)},[Object(i.h)(Tt)]:i.l,[_t]:(e,t)=>{const{nextCourse:n}=t;return Object(r.b)(e,(e=>{e.courses[n.id]||(e.courses[n.id]={}),e.courses[n.id].api||(e.courses[n.id].api={}),e.courses[n.id].api.isUpdating=!0}))},[Object(i.j)(_t)]:(e,t)=>{const{course:n}=t;return Object(r.b)(e,(t=>{t.courses[n.id]={...n,api:{...e.courses[n.id].api,isUpdating:!1},ui:e.courses[n.id]&&e.courses[n.id].ui}}))},[Object(i.h)(_t)]:(e,t)=>{const{prevCourse:n}=t;return Object(r.b)(e,(e=>{e.courses[n.id]||(e.courses[n.id]={}),e.courses[n.id].api||(e.courses[n.id].api={}),e.courses[n.id].api.isUpdating=!1}))},[Rt]:i.n,[Object(i.j)(Rt)]:(e,t)=>{if(!t||!t.courseId)return Object(i.p)(e,t);const{courseId:n,studentCount:s}=t,o=Object(r.b)(e,(e=>{e.courses[n]&&(e.courses[n].studentCount=s)}));return Object(i.p)(o,t)},[Object(i.h)(Rt)]:i.l,[Object(i.j)(jt.a.USER_MEMBERSHIPS_LOAD)]:(e,t)=>{var n;const s=null===(n=null==t?void 0:t.data)||void 0===n?void 0:n.courses;return s?Object(r.b)(e,(e=>{e.courses={...e.courses,...s}})):e}}),wt={fetchCourses:()=>Object(i.f)(At,(e=>{return(t=e()).course.isLoading||null!=t.course.paging?Promise.resolve(null):Object(a.Mc)(s.d).then((e=>({...e,courses:Object(l.c)(e.results)})));var t})),fetchCourse:e=>Object(i.f)(Tt,(async t=>{if(!function(e,t){return!Dt.getCourseById(e,t)}(t(),e))return null;const n=await function(e){return Object(a.Dc)(s.d,e)}(e);return{course:n}})),updateCourse:(e,t)=>Object(i.f)(_t,(()=>function(e,t){const n=Object(q.i)(e,t);return Object(a.Lc)(s.d,t.id,{...n,id:t.id})}(e,t).then((e=>({course:e}))).catch((t=>{throw{prevCourse:e,err:t}}))),{nextCourse:t}),fetchCourseStudentCount:e=>Object(i.f)(Rt,(async()=>{const t=await async function(e){const t=await Object(a.Hc)(s.d,e),{STUDENT:n}=t.results;return n}(e);return{courseId:e,studentCount:t}})),setCourseInStore:e=>Object(i.a)(Object(i.j)(Tt),{course:e})},Dt={getCourseById:(e,t)=>o.find(e.course.courses,{id:t}),getAvailableCourses:e=>o.filter(e.course.courses,{isAvailable:!0}),getCourseStudentCount:(e,t)=>e.course.courses[t]?e.course.courses[t].studentCount:0};var Lt=n("1spm"),Pt=n("0XUZ");const kt="/v1/courses/%courseId%/gradebook/columns",xt=`${kt}?expand=gradebookCategory`,Bt=`${kt}/%columnId%`,Mt=`${Bt}?expand=gradebookCategory,associatedRubrics`,Ut=`${Bt}?expand=externalGrade,gradebookCategory,columnSummary`,Gt=`${kt}?contentId=%contentId%`,Ft=`${Bt}/reconcileRemainingAttempts`,qt=`${Bt}/postReadyGrades`;var Ht,Vt;async function Kt(e,t,n){const s=Object(q.f)(Mt,{courseId:e,columnId:t});return Object(q.j)(s,n)}!function(e){e.HIGHEST="HIGHEST",e.LOWEST="LOWEST",e.AVERAGE="AVERAGE"}(Ht||(Ht={})),function(e){e.ColumnName="columnName",e.DueDate="dueDate"}(Vt||(Vt={}));const $t="fetchColumns";function Wt(e){const{courseId:t,contentId:n}=e,s=Object(q.f)(Gt,{courseId:t,contentId:n});return Object(q.j)(s)}async function zt(e,t,n={}){const s=Object(q.f)(Mt,{courseId:t.courseId,columnId:t.id,...n}),r=Object(q.i)(e,t);return o.isEmpty(r)?e:Object(q.o)(s,r)}function Qt(e,t,n){const s=Object(q.f)(Ft,{courseId:e,columnId:t});return Object(q.p)(s,{reconciliationMode:n})}async function Yt(e){const t=function(e){const{courseId:t,paging:n,sort:s,filter:o}=e;return{...n?{limit:n.limit,offset:n.offset}:{},...s&&s.length?{sort:Object(q.e)(s)}:{},...o,courseId:t}}(e);return Object(q.j)(Object(q.f)(xt,t))}const Jt="/v1/courses/%courseId%/contents",Xt=Jt+"/%contentId%",Zt=Jt+"/%contentId%/adaptiveReleaseRules",en=Zt+"/rules/%ruleId%/conditions/%criteriaId%";var tn,nn;async function sn(e){Object(q.s)();const{courseId:t,contentId:n}=e,s=e.eagerFetchChildren?on({filter:{courseId:t,contentId:n,resolveLinks:!1,fetchDiscussionGradeColumn:!1,contentSearchMode:e.contentSearchMode,title:e.title}}):Promise.resolve({}),o=["assignedGroups,selfEnrollmentGroups.group"];e.expandGradebookCategory&&o.push("gradebookCategory"),e.hasProgressed&&o.push("hasProgressed");const r=Object(q.j)(Object(q.f)(Xt,{courseId:t,contentId:n,expand:o})).then((e=>mn(e))),[i,a]=await Promise.all([r,s]),c=await rn(e,{...i.contents,...a.contents}),d={...i.contents,...a.contents,...c.contents};let u={};return(e.fetchDiscussionGradeColumn||e.fetchJournalGradeColumn)&&(u=await async function(e,t){Object(q.s)();const n=Object.keys(t).map((e=>t[e])).filter((e=>{var t,n;return e&&e.contentHandler&&(n=e,Pt.b.Discussion.isEqualTo(n.contentHandler)||En(e))&&(null===(t=e.genericReadOnlyData)||void 0===t?void 0:t.hasGradeColumn)})).filter(l.d).map((t=>Wt({courseId:e,contentId:t.id}).then((e=>e&&e.results[0])))).filter((e=>!!e));return Object(l.c)(await Promise.all(n))}(e.courseId,d)),{contents:d,assessments:{...i.assessments,...a.assessments,...c.assessments},groups:{...i.groups,...a.groups,...c.groups},columns:{...i.columns,...a.columns,...c.columns,...u},adaptiveRelease:{...i.adaptiveRelease,...a.adaptiveRelease,...c.adaptiveRelease},blogs:{...i.blogs,...a.blogs,...c.blogs},paging:{...i.paging,...a.paging},permissions:{...i.permissions,...a.permissions}}}async function on({filter:e,params:t}){const n=["assignedGroups,selfEnrollmentGroups.group"];e.expandGradebookCategory&&n.push("gradebookCategory");const{courseId:s,contentId:r,contentSearchMode:i,title:a}=e,c=Object(q.e)(null==t?void 0:t.sort),d=null==t?void 0:t.paging,u=i?{contentSearchMode:i,title:a}:{},p=await Object(q.j)(Object(q.f)("/v1/courses/%courseId%/contents/%contentId%/children",{courseId:s,contentId:r,expand:n,...u,...d,sort:c})).then((e=>{const{paging:t,permissions:n,results:s}=e,r=gn(s),i=Cn(s),a=fn(s),c=o.map(s,(e=>({...In(e)}))),d=On(s),u=yn(s);return{contents:{...Object(l.c)(c)},assessments:{...Object(l.c)(r)},groups:{...Object(l.c)(i)},columns:{...Object(l.c)(a)},adaptiveRelease:{...Object(l.c)(d)},blogs:{...Object(l.c)(u)},paging:t,permissions:n}})),b=await rn(e,{...p.contents});return{contents:{...p.contents,...b.contents},assessments:{...p.assessments,...b.assessments},groups:{...p.groups,...b.groups},columns:{...p.columns,...b.columns},adaptiveRelease:{...p.adaptiveRelease,...b.adaptiveRelease},blogs:{...p.blogs,...b.blogs},paging:{...p.paging},permissions:{...p.permissions}}}async function rn(e,t){if(!e.resolveLinks)return{contents:{},assessments:{},groups:{},columns:{},adaptiveRelease:{},blogs:{}};Object(q.s)();const n=await Promise.all(Object.keys(t).map((e=>t[e])).map((e=>e&&e.contentDetail&&e.contentDetail["resource/x-bb-courselink"]&&e.contentDetail["resource/x-bb-courselink"].linkSourceId)).filter((e=>"string"==typeof e)).filter((e=>!t.hasOwnProperty(e))).map((t=>sn({...e,contentId:t,eagerFetchChildren:!1}))));return{contents:Object.assign({},...n.map((e=>e.contents))),assessments:Object.assign({},...n.map((e=>e.assessments))),groups:Object.assign({},...n.map((e=>e.groups))),columns:Object.assign({},...n.map((e=>e.columns))),adaptiveRelease:Object.assign({},...n.map((e=>e.adaptiveRelease))),blogs:Object.assign({},...n.map((e=>e.blogs)))}}async function an(e,t){const n=Object(q.f)(Xt,{contentId:t.id,courseId:t.courseId});let s;if(null==e||null==e.id||0===e.id.indexOf(l.a))s=await Object(q.q)(n,t);else{const r=Object(q.i)(pn(e),pn(t));s=o.isEmpty(r)?e:await Object(q.o)(n,{...r,id:t.id})}return mn(s)}async function cn(e,t){const n=[];return Object(q.s)(),o.forEach(e,(e=>{const s=async function(e,t){const n=!t||t.shouldDeleteGrades?"true":"false",s=Object(q.f)(Xt,{contentId:e.id,courseId:e.courseId,deleteGrades:n,deleteGroups:!0});return Object(q.r)(s)}(e,t).then((()=>({isOk:!0,id:e.id}))).catch((t=>({isOk:!1,id:e.id,...t})));n.push(s)})),{results:Object(l.c)(await Promise.all(n))}}async function ln(e){Object(q.s)();const t=e.map((e=>async function(e){return Object(q.o)(Object(q.f)(en,{contentId:e.contentId,courseId:e.courseId,ruleId:e.ruleId,criteriaId:e.id}),e)}(e).then((t=>({isOk:!0,id:e.id,contentId:e.contentId,result:t}))).catch((t=>({isOk:!1,id:e.id,contentId:e.contentId,...t})))));return{results:Object(l.c)(await Promise.all(t))}}async function dn(e){const{sort:t,...n}=e,s=Object(q.f)("/v1/courses/%courseId%/contents/%contentId%/adaptiveReleaseRules/rules/%ruleId%/conditions/%criteriaId%/acl/users",{...n,sort:Object(q.e)(t)}),{paging:o,permissions:r,results:i}=await Object(q.j)(s);return{paging:o,permissions:r,userPredicates:i}}async function un(e){const{sort:t,...n}=e,s=Object(q.f)("/v1/courses/%courseId%/contents/%contentId%/adaptiveReleaseRules/rules/%ruleId%/conditions/%criteriaId%/acl/groups",{...n,sort:Object(q.e)(t)}),{paging:o,permissions:r,results:i}=await Object(q.j)(s);return{paging:o,permissions:r,groupPredicates:i}}function pn(e){return bn(e)?function(e){const{deploymentSettings:t}=e,n=Object(r.a)(e,(e=>{delete e.deploymentSettings}));if(e.contentDetail)return n;const s={deploymentSettings:t,deployedAssessmentType:a.C.Test},o={[Pt.b.TestLink.toString()]:{test:s}};return{...n,contentDetail:o}}(e):e}function bn(e){return Pt.b.TestLink.isEqualTo(e.contentHandler)}function mn(e){return{contents:Object(l.c)([In(e)]),assessments:Object(l.c)(gn([e])),groups:Object(l.c)(Cn([e])),columns:Object(l.c)(fn([e])),adaptiveRelease:Object(l.c)(On([e])),blogs:Object(l.c)(yn([e]))}}function gn(e){return e.filter((e=>{var t;return bn(e)&&(null===(t=e.contentDetail)||void 0===t?void 0:t[Pt.b.TestLink.toString()].test.assessment)})).map((e=>{var t,n;const s=null===(n=null===(t=e.contentDetail)||void 0===t?void 0:t[Pt.b.TestLink.toString()])||void 0===n?void 0:n.test;if(!s)return;return{...s.assessment,permissions:s.permissions,courseId:e.courseId,contentId:e.id}})).filter((e=>!!e))}function hn(e){if(!e||!e.contentDetail)return[];const t=e.contentDetail[Pt.b.TestLink.handle];if(t&&t.test)return[t.test.gradingColumn];const n=e.contentDetail[Pt.b.LtiLink.handle];if(n&&n.gradingColumn)return[n.gradingColumn];const s=e.contentDetail[Pt.b.PartnerCloud.handle];if(s&&s.gradingColumn)return s.gradingColumn.contentId=e.id,[s.gradingColumn];const o=e.contentHandler,r=o&&e.contentDetail[o.toString()];if(r&&r.gradingColumn&&o.toString().includes(Pt.b.LtiPlacement.handle))return[r.gradingColumn];const i=e.contentDetail[Pt.b.RusticiScorm.handle];return i&&i.gradebookItems&&i.gradebookItems.length>0?i.gradebookItems.map((e=>e.gradingColumn)):[]}function fn(e){return e.reduce(((e,t)=>[...e,...hn(t)]),[]).filter((e=>!!e))}function On(e){return e.reduce(((e,t)=>{if(!t||!t.adaptiveReleaseRules||!t.adaptiveReleaseRules.rules)return e;const n=t.adaptiveReleaseRules.rules.reduce(((e,n)=>{var s;const o=null===(s=n.criteria)||void 0===s?void 0:s.map((e=>({...e,contentId:t.id,courseId:t.courseId,ruleId:n.id})));return o?[...e,...o]:e}),[]);return[...e,...n]}),[])}function En(e){return Pt.b.Journal.isEqualTo(e.contentHandler)}function yn(e){return e.filter((e=>En(e)&&e.contentDetail)).map((e=>{var t,n;return null===(n=null===(t=e.contentDetail)||void 0===t?void 0:t[Pt.b.Journal.toString()])||void 0===n?void 0:n.blog})).filter((e=>!!e))}function In(e){var t,n,s,o;let r={...e,adaptiveReleaseRules:void 0};if(bn(e)){const i=null===(t=e.contentDetail)||void 0===t?void 0:t[Pt.b.TestLink.toString()].test,a=null===(s=null===(n=null==e?void 0:e.contentDetail)||void 0===n?void 0:n[Pt.b.TestLink.toString()])||void 0===s?void 0:s.safeAssignOptions;r={...r,assessmentId:null===(o=null==i?void 0:i.assessment)||void 0===o?void 0:o.id,deploymentSettings:null==i?void 0:i.deploymentSettings,peerSettings:null==i?void 0:i.peerSettings,safeAssignOptions:a,gradingColumn:null==i?void 0:i.gradingColumn,contentDetail:void 0}}return r}function Cn(e){return o.flatten(o.map(e,(e=>o.map(e.assignedGroups,(t=>({id:t.groupId,courseId:e.courseId,contentId:e.id,title:t.groupTitle}))))))}!function(e){e.FamilyName="user.familyName",e.GivenName="user.givenName",e.Username="user.userName",e.UserId="user.id"}(tn||(tn={})),function(e){e.Title="group.title",e.GroupId="group.id"}(nn||(nn={}));class vn extends Error{constructor(e,t,n){super(n),this.error=e,Object.setPrototypeOf(this,new.target.prototype),this.name=t}}class Sn extends vn{constructor(e){super(e,"AssessmentConflictNotEnoughPeerReviews")}}var jn,Tn=n("bfdd"),An=n("bLWl");!function(e){e.GROUP_ENROLLMENT_EXPIRED_ERROR_CODE="enrollmentEndDateViolation",e.GROUP_IS_FULL_ERROR_CODE="maximumEnrollmentsExceeded",e.SOURCE_GROUP_SUBMITTED_ATTEMPT_ERROR_CODE="sourceGroupContainsAttempt",e.TARGET_GROUP_SUBMITTED_ATTEMPT_ERROR_CODE="targetGroupContainsAttempt",e.SOURCE_GROUP_GRADE_ERROR_CODE="sourceGroupContainsGrade",e.TARGET_GROUP_GRADE_ERROR_CODE="targetGroupContainsGrade"}(jn||(jn={}));class _n extends vn{constructor(e){super(e,"GroupEnrollmentExpiredError")}}class Rn extends vn{constructor(e){super(e,"GroupFullError")}}class Nn extends vn{constructor(e){super(e,"TargetGroupSubmittedAttemptError")}}class wn extends vn{constructor(e){super(e,"SourceGroupSubmittedAttemptError")}}class Dn extends vn{constructor(e){super(e,"SourceGroupGradesError")}}class Ln extends vn{constructor(e){super(e,"TargetGroupGradesError")}}class Pn extends vn{constructor(e,t,n){super(n,e),this.ident=t}}class kn extends Pn{constructor(e,t){super("InvalidMathMLError",e,t),this.error=t}}class xn extends Pn{constructor(e,t){super("MissingVariableError",e,t),this.error=t}}var Bn=n("mnLz");class Mn extends vn{constructor(e){super(e,"QuestionAnalysisNoSubmittedAttemptsError")}}class Un extends vn{constructor(e){super(e,"UserPronounsUnsafeName")}}function Gn(e,t){e.contents[t]||(e.contents[t]={}),e.contents[t].api||(e.contents[t].api={})}function Fn(e,t,n){e.adaptiveRelease.byCriteriaId[t]||(e.adaptiveRelease.byCriteriaId[t]={}),e.adaptiveRelease.byCriteriaId[t].api||(e.adaptiveRelease.byCriteriaId[t].api={isUpdating:n}),e.adaptiveRelease.byCriteriaId[t].api.isUpdating=n}function qn(e,t){Object(o.forEach)(e.views.byCourseId,((n,s)=>{Object(o.forEach)(n,((n,o)=>{var r;(null===(r=n.values)||void 0===r?void 0:r.includes(t))&&delete e.views.byCourseId[s][o]}))}))}const Hn=(e,t)=>{const n=t.contents[e.id];return n?{...n,...e,permissions:{...n.permissions,...e.permissions},ui:null==n?void 0:n.ui}:e},Vn=(e,t)=>{if(!t)return{id:null,view:null};const n=e.views.byCourseId[t.filter.courseId]||{},s=Object.keys(n).find((e=>{const s=n[e];return Object(o.isEqual)(s.query,t)}));return{id:s,view:s?n[s]:null}},Kn=e=>["views","byCourseId",e.filter.courseId],$n={[D.a.CONTENT_LOAD]:i.n,[Object(i.j)(D.a.CONTENT_LOAD)]:(e,t)=>{let{contents:n}=t;return n=Object(w.E)(Object.values(n||{}).map((t=>Hn({...t,api:{isUpdating:!1,isDeleting:!1}},e)))),Object(i.p)(e,t,{contents:{...e.contents,...n}})},[Object(i.h)(D.a.CONTENT_LOAD)]:i.l,[D.a.CONTENT_PERSIST]:(e,t)=>Object(r.a)(e,(e=>{Gn(e,t.prevContent.id),e.contents[t.prevContent.id].api.isUpdating=!0})),[Object(i.j)(D.a.CONTENT_PERSIST)]:(e,t)=>Object(r.a)(e,(n=>{const{contents:s}=t;Object.values(s||{}).forEach((t=>{const s=e.contents[t.id];n.contents[t.id]={...s,...t,api:{...null==s?void 0:s.api,isUpdating:!1}}}))})),[Object(i.h)(D.a.CONTENT_PERSIST)]:(e,t)=>Object(r.a)(e,(e=>{Gn(e,t.prevContent.id),e.contents[t.prevContent.id].api.isUpdating=!1})),[D.a.CONTENT_PERSIST_MULTIPLE]:(e,t)=>Object(r.a)(e,(e=>{const{prevContents:n}=t;Object(o.each)(n,(t=>{Gn(e,t.content.id),e.contents[t.content.id].api.isUpdating=!0}))})),[Object(i.j)(D.a.CONTENT_PERSIST_MULTIPLE)]:(e,t)=>Object(r.a)(e,(n=>{const{contents:s}=t;Object.keys(s).forEach((t=>{const o=s[t];o.isOk?n.contents[t]={...o.result,api:{isUpdating:!1,isDeleting:!1},ui:e.contents[t]&&e.contents[t].ui}:(Gn(n,t),n.contents[t].api.isUpdating=!1)}))})),[Object(i.h)(D.a.CONTENT_PERSIST_MULTIPLE)]:(e,t)=>Object(r.a)(e,(e=>{const{prevContents:n}=t;Object(o.each)(n,(t=>{Gn(e,t.content.id),e.contents[t.content.id].api.isUpdating=!1}))})),[D.a.CONTENT_DELETE]:(e,t)=>Object(r.a)(e,(e=>{const{contents:n}=t;n.forEach((t=>{Gn(e,t),e.contents[t].api.isDeleting=!0}))})),[Object(i.j)(D.a.CONTENT_DELETE)]:(e,t)=>Object(r.a)(e,(e=>{const{results:n}=t;n.forEach((t=>{delete e.contents[t],qn(e,t)}))})),[Object(i.h)(D.a.CONTENT_DELETE)]:(e,t)=>Object(r.a)(e,(e=>{const{results:n}=t;n.forEach((t=>{Gn(e,t),e.contents[t].api.isDeleting=!1}))})),[Object(i.j)(D.a.CONTENT_UPDATE_IN_STORE)]:(e,t)=>Object(r.a)(e,(e=>{const{nextContent:n}=t;e.contents[n.id]=n})),[Object(i.j)(D.a.CONTENT_DELETE_IN_STORE)]:(e,t)=>Object(r.a)(e,(e=>{const{contentId:n}=t;delete e.contents[n],qn(e,n)})),[Object(i.j)(D.a.CONTENT_MOVE_IN_STORE)]:(e,t)=>{const{originalContent:n,movedContent:s,sortedTargetSiblings:i}=t;return n?Object(r.a)(e,(t=>{const r=n.parentId===s.parentId,a=Xn(i,s.position);if(t.contents={...t.contents,...a.contents},t.contents[s.id]=s,!r){const s=Xn(Object(o.filter)(e.contents,(e=>e.parentId===n.parentId&&e.id!==n.id)));t.contents={...t.contents,...s.contents}}})):e},[D.a.CONTENT_SEARCH_LOAD]:Object(i.o)(Vn,Kn),[Object(i.j)(D.a.CONTENT_SEARCH_LOAD)]:(e,t)=>{const{data:n}=t;if(!n)return Object(i.p)(e,t);const{contents:s,paging:o}=n,a=Object.keys(s);return e=Object(r.a)(e,(t=>{const n=Object(w.E)(Object.values(s||{}).map((t=>Hn({...t,api:{isUpdating:!1,isDeleting:!1}},e))));t.contents={...e.contents,...n}})),Object(i.q)(e,t,{viewResolver:Vn,viewsPathResolver:Kn,paging:o,values:a})},[Object(i.h)(D.a.CONTENT_SEARCH_LOAD)]:Object(i.m)(Vn,Kn),[Object(i.j)(Lt.a.GRADEBOOK_COLUMN_PERSIST)]:(e,t)=>Object(r.a)(e,(n=>{const{gradebookColumn:s}=t;if(s&&s.contentId){const t=Object(o.find)(e.contents,{id:s.contentId});t&&(n.contents[t.id].genericReadOnlyData={...e.contents[t.id].genericReadOnlyData,hasGradeColumn:!0,dueDate:s.dueDate})}}))},Wn={[Object(i.j)(D.a.CONTENT_LOAD)]:(e,t)=>{const{adaptiveRelease:n}=t;return n?Object(r.a)(e,(e=>{Object.keys(n).forEach((t=>{const s=n[t];e.adaptiveRelease.byCriteriaId[t]={api:{isUpdating:!1},criteria:{...s}}}))})):e},[D.a.CONTENT_PERSIST_ADAPTIVE_RELEASE_MULTIPLE]:(e,t)=>Object(r.a)(e,(e=>{const{criteriaList:n}=t;Object(o.each)(n,(t=>{Fn(e,t.id,!0)}))})),[Object(i.j)(D.a.CONTENT_PERSIST_ADAPTIVE_RELEASE_MULTIPLE)]:(e,t)=>Object(r.a)(e,(n=>{const{results:s}=t;Object.keys(s).forEach((t=>{const o=s[t];o.isOk?n.adaptiveRelease.byCriteriaId[t]={criteria:{...e.adaptiveRelease.byCriteriaId[t].criteria,...o.result},api:{isUpdating:!1}}:Fn(n,t,!1)}))})),[Object(i.h)(D.a.CONTENT_PERSIST_ADAPTIVE_RELEASE_MULTIPLE)]:(e,t)=>Object(r.a)(e,(e=>{const{prevContents:n}=t;Object(o.forEach)(n,(t=>{Fn(e,t.id,!1)}))})),[D.a.CONTENT_DELETE_ADAPTIVE_RELEASE]:(e,t)=>Object(r.a)(e,(n=>{const{contents:s}=t;s.reduce(((t,n)=>t.concat(Object(o.filter)(e.adaptiveRelease.byCriteriaId,{criteria:{contentId:n.id}}))),[]).forEach((e=>{Fn(n,e.criteria.id,!0)}))})),[Object(i.j)(D.a.CONTENT_DELETE_ADAPTIVE_RELEASE)]:(e,t)=>Object(r.a)(e,(n=>{const{results:s}=t;Object(o.forEach)(Object(o.values)(s),(t=>{const s=t.id;Object(o.filter)(e.adaptiveRelease.byCriteriaId,{criteria:{contentId:s}}).forEach((e=>{t.isOk?delete n.adaptiveRelease.byCriteriaId[e.criteria.id]:Fn(n,e.criteria.id,!1)}))}))})),[Object(i.h)(D.a.CONTENT_DELETE_ADAPTIVE_RELEASE)]:(e,t)=>Object(r.a)(e,(n=>{const{contents:s}=t;s.reduce(((t,n)=>t.concat(Object(o.filter)(e.adaptiveRelease.byCriteriaId,{criteria:{contentId:n.id}}))),[]).forEach((e=>{Fn(n,e.criteria.id,!1)}))})),[Object(i.j)(D.a.CONTENT_DELETE_ALL_ADAPTIVE_RELEASE_IN_STORE)]:(e,t)=>Object(r.a)(e,(n=>{const{contentId:s}=t;Object(o.forEach)(e.adaptiveRelease.byCriteriaId,(e=>{e.criteria.contentId===s&&delete n.adaptiveRelease.byCriteriaId[e.criteria.id]}))})),[Object(i.j)(D.a.CONTENT_DELETE_ADAPTIVE_RELEASE_RULE_IN_STORE)]:(e,t)=>Object(r.a)(e,(n=>{const{contentId:s,ruleType:r}=t;Object(o.forEach)(e.adaptiveRelease.byCriteriaId,(e=>{e.criteria.contentId===s&&e.criteria.type===r&&delete n.adaptiveRelease.byCriteriaId[e.criteria.id]}))}))},zn=Object(i.g)({contents:{},adaptiveRelease:{byCriteriaId:{}},permissions:null,paging:null,isLoading:!1,views:{byCourseId:{}}},$n,Wn),Qn={loadContents:e=>Object(i.f)(D.a.CONTENT_LOAD,(t=>(t(),sn(e).then((t=>({filter:e,...t}))).catch((e=>{throw{err:e}}))))),setContents:e=>Object(i.a)(Object(i.j)(D.a.CONTENT_LOAD),mn(e)),persistContent:(e,t)=>Object(i.f)(D.a.CONTENT_PERSIST,(()=>an(e,t).then((e=>e)).catch((t=>{throw{prevContent:e,err:t}}))),{prevContent:e,nextContent:t}),persistContentSync:e=>Object(i.a)(Object(i.j)(D.a.CONTENT_PERSIST),mn(e)),persistContents:e=>Object(i.f)(D.a.CONTENT_PERSIST_MULTIPLE,(()=>async function(e){Object(q.s)();const t={contents:{},assessments:{},groups:{},blogs:{},columns:{}};for(const n of e){const e=n.content.id;try{const e=await an(n.previousContent,n.content);o.assignWith(t,e,((e,t,n)=>{if("contents"===n){const n={};return Object.keys(t).map((e=>n[e]={isOk:!0,id:e,result:t[e]})),{...e,...n}}return{...e,...t}}))}catch(n){if(e){const s={isOk:!1,id:e,error:n};t.contents[e]=s}}}return t}(e).then((t=>({prevContents:e,...t}))).catch((t=>{throw{prevContents:e,err:t}}))),{contents:e}),deleteContents:(e,t)=>Object(i.b)(D.a.CONTENT_DELETE,((n,s)=>{const o=s(),r={};return e.forEach((e=>{const t=Jn(e.id,o);r[e.id]=t,n(Object(i.a)(D.a.CONTENT_DELETE,{contents:t}))})),cn(e,t).then((e=>(Object.keys(e.results).forEach((s=>{const o=e.results[s],a=r[o.id];o.isOk?n(Object(i.a)(Object(i.j)(D.a.CONTENT_DELETE),{results:r[s],deletedGrades:!t||t.shouldDeleteGrades})):n(Object(i.a)(Object(i.h)(D.a.CONTENT_DELETE),{results:a}))})),e))).catch((t=>{throw e.forEach((e=>{const t=r[e.id];n(Object(i.a)(Object(i.h)(D.a.CONTENT_DELETE),{results:t}))})),n(Object(i.a)(Object(i.j)(c.a.APP_ERROR),{error:t})),{contents:e,err:t}}))})),updateContentInStore:e=>Object(i.f)(D.a.CONTENT_UPDATE_IN_STORE,(()=>Promise.resolve({nextContent:e})),{nextContent:e}),deleteContentInStore:e=>Object(i.b)(D.a.CONTENT_DELETE_IN_STORE,((t,n)=>{const s=n();Jn(e,s).forEach((e=>{t(Object(i.a)(D.a.CONTENT_DELETE_IN_STORE,{contentId:e})),t(Object(i.a)(Object(i.j)(D.a.CONTENT_DELETE_IN_STORE),{contentId:e}))}))})),moveContentInStore:(e,t,n)=>Object(i.f)(D.a.CONTENT_MOVE_IN_STORE,((s,r)=>{const i=s(),a=Yn.getContentById(i,e);if(!a)return Promise.resolve({});const c=Yn.getContentsByParentContentId(i,t),l=Object(o.sortBy)(Object(o.filter)(c,(t=>t.id!==e)),["position"]),d={...a,parentId:t,position:n};return Promise.resolve({originalContent:a,movedContent:d,sortedTargetSiblings:l})}),{contentId:e,targetFolderId:t,targetPosition:n}),persistAdaptiveReleaseCriteria:e=>Object(i.f)(D.a.CONTENT_PERSIST_ADAPTIVE_RELEASE_MULTIPLE,(()=>ln(e).then((t=>({prevContents:e,...t}))).catch((t=>{throw{prevContents:e,err:t}}))),{criteriaList:e}),deleteAdaptiveReleaseRules:e=>Object(i.f)(D.a.CONTENT_DELETE_ADAPTIVE_RELEASE,(()=>async function(e){const t=[];return Object(q.s)(),o.forEach(e,(e=>{const n=Object(q.r)(Object(q.f)(Zt,{contentId:e.id,courseId:e.courseId})).then((()=>({isOk:!0,id:e.id}))).catch((t=>({isOk:!1,id:e.id,...t})));t.push(n)})),{results:Object(l.c)(await Promise.all(t))}}(e).then((e=>e)).catch((t=>{throw{contents:e,err:t}}))),{contents:e}),deleteAdaptiveReleaseRulesInStore:e=>Object(i.a)(Object(i.j)(D.a.CONTENT_DELETE_ALL_ADAPTIVE_RELEASE_IN_STORE),{contentId:e}),deleteAdaptiveReleaseRuleInStore:(e,t)=>Object(i.a)(Object(i.j)(D.a.CONTENT_DELETE_ADAPTIVE_RELEASE_RULE_IN_STORE),{contentId:e,ruleType:t}),notifyContentImportComplete:e=>Object(i.a)(Object(i.j)(D.a.CONTENT_IMPORT_COMPLETE),{courseId:e}),loadContentsByQuery:e=>Object(i.f)(D.a.CONTENT_SEARCH_LOAD,(()=>on({filter:{contentId:w.q.Root,contentSearchMode:a.cb.courseContent,...e.filter},params:e.params}).then((t=>({query:e,data:t}))).catch((t=>{throw{query:e,err:t.error||t.type?t:new Bn.a(t.message)}}))),{query:e})},Yn={getContentByAssessmentId:(e,t)=>Object(o.find)(e.content.contents,{assessmentId:t}),getContentById:(e,t)=>Object(o.find)(e.content.contents,{id:t}),getContentsByParentContentId:(e,t)=>Object(o.filter)(e.content.contents,{parentId:t}),getRootFolderByCourseId:(e,t)=>Object(o.find)(e.content.contents,{title:"ROOT",courseId:t}),getContentLinksByLinkedContentId:(e,t)=>Object(o.filter)(e.content.contents,{contentDetail:{[w.d.CourseLink.toString()]:{linkSourceId:t}}}),getAdaptiveReleaseCriteriaByContentId:(e,t)=>Object(o.filter)(e.content.adaptiveRelease.byCriteriaId,{criteria:{contentId:t}}),getContentsBySearchCriteria:(e,t)=>{var n,s;const{view:r}=Vn(e.content,t);return r&&null!==(s=null===(n=r.values)||void 0===n?void 0:n.map((t=>Object(o.find)(e.content.contents,{id:t}))))&&void 0!==s?s:[]},getCountBySearchCriteria:(e,t)=>{var n,s;const{view:o}=Vn(e.content,t);return o&&null!==(s=null===(n=o.paging)||void 0===n?void 0:n.count)&&void 0!==s?s:0},isLoading:(e,t)=>{const{view:n}=Vn(e.content,t);return n?n.isLoading:e.content.isLoading}};function Jn(e,t){const n=Yn.getContentsByParentContentId(t,e).map((e=>e.id)),s=[e].concat(n).map((e=>Yn.getContentLinksByLinkedContentId(t,e).map((e=>e.id)))).reduce(((e,t)=>t.concat(e)),[]);return[e].concat(n).concat(s)}function Xn(e,t){const n={contents:{}};return Object(o.forEach)(e,((e,s)=>{n.contents[e.id]={...e,position:t>=0&&s>=t?s+1:s}})),n}var Zn=n("XBsA");const es="conversion.summary.load",ts="conversion.messages.load",ns=Object(i.g)({conversionSummaries:{},conversionMessages:{},isLoading:!1},{[es]:(e,t)=>Object(i.n)(e,t),[Object(i.j)(es)]:(e,t)=>{let n={};return t&&t.data&&(n={conversionSummaries:{[t.data.courseId]:t.data}}),Object(r.b)(Object(i.p)(e,t),(e=>{o.merge(e,n)}))},[Object(i.h)(es)]:(e,t)=>Object(i.l)(e,t),[ts]:(e,t)=>Object(i.n)(e,t),[Object(i.j)(ts)]:(e,t)=>{let n={};return t&&t.data&&(n={conversionMessages:{[t.data.courseId]:t.data}}),Object(r.b)(Object(i.p)(e,t),(e=>{o.merge(e,n)}))},[Object(i.c)(ts)]:(e,t)=>{const{courseId:n,taskId:s}=t,o=Object(r.b)(e,(e=>{e.conversionMessages[n]&&e.conversionMessages[n].tasks||(e.conversionMessages[n]={courseId:n,tasks:{}}),e.conversionMessages[n].tasks[s]={}}));return Object(i.p)(o,t)},[Object(i.h)(ts)]:(e,t)=>Object(i.l)(e,t)}),ss={loadSummary:e=>Object(i.f)(es,(t=>{const{courseId:n,taskId:s}=e;return function(e,t,n){return!e.courseConversion.conversionSummaries[t]||!e.courseConversion.conversionSummaries[t].tasks[n]}(t(),n,s)?async function(e){const t=await Object(q.j)(Object(q.f)("/v1/courses/%courseId%/ultraConversionReports/%taskId%/summary",e));return{courseId:t.courseId,courseName:t.courseName,tasks:{[t.taskId]:{risks:(n=t.risks,n.reduce(((e,t)=>{var n;return e[t.riskClassification.toLowerCase()]={count:t.count,messages:(n=t.exceptionMessages,n.reduce(((e,t)=>(e[t.name]={count:t.count},e)),{}))},e}),{}))}}};var n}({courseId:n,taskId:s}).then((e=>({data:e}))):Promise.resolve(null)})),loadMessages:(e,t)=>Object(i.f)(ts,(t=>{const{courseId:n,taskId:s}=e;return function(e,t,n){return!e.courseConversion.conversionMessages[t]||!e.courseConversion.conversionMessages[t].tasks[n]}(t(),n,s)?async function(e){let t=await Object(q.j)(Object(q.f)("/v1/courses/%courseId%/ultraConversionReports/%taskId%/messages",e)),n=t.results;for(;t.paging.nextPage;)t=await Object(q.j)((s=t.paging.nextPage,"/"+s.split("/").slice(3).join("/"))),n=n.concat(t.results);var s,o;return{courseId:e.courseId,tasks:{[e.taskId]:(o=n,o.reduce(((e,t)=>{const n=t.riskClassification?t.riskClassification.toLowerCase():null;return e[n]=e[n]||{},e[n][t.message]=e[n][t.message]||[],e[n][t.message].push(t),e}),{}))}}}({courseId:n,taskId:s}).then((e=>({courseId:n,taskId:s,data:e}))).catch((e=>{throw{err:e}})):Promise.resolve(null)}),e,t)},os={getConversionSummaryById:(e,t,n)=>e.courseConversion.conversionSummaries[t]&&e.courseConversion.conversionSummaries[t].tasks[n],getConversionMessagesById:(e,t,n)=>e.courseConversion.conversionMessages[t]&&e.courseConversion.conversionMessages[t].tasks[n],getRawConversionMessagesByTaskIds:(e,t,n)=>{const s=e.courseConversion.conversionMessages[t]&&e.courseConversion.conversionMessages[t].tasks;return o.transform(s,((e,t,s)=>{if(n.indexOf(s)>-1){const n=o.transform(t,((e,t)=>{const n=o.values(t);o.flatten(n).forEach((t=>{e.push(t)}))}),[]);e[s]=n}}),{})}};var rs=n("MN17");const is="course-tasks.load",as="course-tasks.delete",cs="course-tasks.invalidate",ls=(e,t)=>e=Object(r.b)(e,(e=>{var n;const s=null!==(n=e.views.byCourseId[t])&&void 0!==n?n:{};Object.keys(s).forEach((e=>{s[e].isValid=!1}))})),ds=(e,t)=>{if(!t)return{id:null,view:null};const n=e.views.byCourseId[t.courseId]||{},s=Object.keys(n).find((e=>{const s=n[e],r=o.isEqual(s.query.paging,t.paging),i=o.isEqual(s.query.queryParams,t.queryParams);return r&&i}));return{id:s,view:s?n[s]:null}},us=e=>["views","byCourseId",e.courseId],ps=Object(i.g)({byCourseTaskId:{},views:{byCourseId:{}}},{[is]:Object(i.o)(ds,us),[Object(i.j)(is)]:(e,t)=>{const{data:n}=t;n||Object(i.p)(e,t);const{tasksIds:s,tasks:o,paging:a}=n;return e=Object(r.b)(e,(e=>{Object.keys(o).forEach((t=>{e.byCourseTaskId[t]={...e.byCourseTaskId[t],...o[t]}}))})),Object(i.q)(e,t,{viewResolver:ds,viewsPathResolver:us,paging:a,values:s})},[Object(i.h)(is)]:Object(i.m)(ds,us),[as]:(e,t)=>Object(r.b)(e,(e=>{const n={...e.byCourseTaskId[t.taskId].api,isDeleting:!0};e.byCourseTaskId[t.taskId].api=n})),[Object(i.j)(as)]:(e,t)=>ls(e,t.courseId),[Object(i.h)(as)]:(e,t)=>(e=Object(r.b)(e,(e=>{const n={...e.byCourseTaskId[t.taskId].api,isDeleting:!1};e.byCourseTaskId[t.taskId].api=n})),Object(i.l)(e,t)),[cs]:(e,t)=>ls(e,t.courseId)}),bs={deleteTaskByCourseIdAndTaskId:(e,t)=>Object(i.b)(as,(async n=>{n(Object(i.a)(as,{courseId:e,taskId:t}));try{await function(e,t){return Object(a.Jc)(s.d,e,t)}(e,t),n(Object(i.a)(Object(i.j)(as),{courseId:e,taskId:t}))}catch(s){throw n(Object(i.a)(Object(i.h)(as),{courseId:e,taskId:t})),n(Object(i.a)(Object(i.j)(c.a.APP_ERROR),{error:s})),{error:s}}})),loadCourseTasksByQuery:e=>Object(i.b)(is,(async(t,n)=>{const o=!((e,t)=>{const{view:n}=ds(e.courseTasks,t);return!n||!n.isLoading&&!n.isValid})(n(),e);if(!o){t(Object(i.a)(is,{query:e}));try{const n=await async function(e){var t;const{results:n,paging:o}=await Object(a.Kc)(s.d,e.courseId,null!==(t=e.queryParams)&&void 0!==t?t:{},e.paging);return{tasks:Object(w.E)(n,((e,t)=>t?(e[t.taskId]=t,e):e)),tasksIds:n.map((e=>e.taskId)),paging:o}}(e);t(Object(i.a)(Object(i.j)(is),{query:e,data:n}))}catch(n){throw t(Object(i.a)(Object(i.h)(is),{query:e})),t(Object(i.a)(Object(i.j)(c.a.APP_ERROR),{error:n})),{error:n}}}})),invalidateCourseTaskViews:e=>Object(i.b)(cs,(async t=>{t(Object(i.a)(cs,{courseId:e}))}))},ms=Object(qe.b)(He.a,Ve),gs=Object(qe.b)(He.a,Ke)(((e,t)=>{const{view:n}=ds(e.courseTasks,t);return n?{isLoading:n.isLoading,isValid:n.isValid,paging:n.paging}:null}),(e=>e)),hs={getCourseTasksById:(e,t)=>Object(o.find)(e.courseTasks.byCourseTaskId,{taskId:t}),getCourseTasksByQuery:ms(((e,t)=>{const{view:n}=ds(e.courseTasks,t);return n?(n.values||[]).map((t=>e.courseTasks.byCourseTaskId[t])):[]}),(e=>e)),getCourseTaskViewStatusByQuery:gs};const fs="course-logs.load",Os="course-logs.delete",Es="course-logs.invalidate",ys=(e,t)=>{var n;if(!t)return{id:null,view:null};const s=e.views.byCourseId[t.courseId]||{},r=null!==(n=Object.keys(s).find((e=>{const n=s[e],r=o.isEqual(n.query.paging,t.paging),i=o.isEqual(n.query.queryParams,t.queryParams);return r&&i})))&&void 0!==n?n:null;return{id:r,view:r?s[r]:null}},Is=e=>["views","byCourseId",e.courseId],Cs=(e,t)=>e=Object(r.b)(e,(e=>{var n;const s=null!==(n=e.views.byCourseId[t])&&void 0!==n?n:{};Object.keys(s).forEach((e=>{s[e].isValid=!1}))})),vs=Object(i.g)({byCourseLogId:{},views:{byCourseId:{}}},{[fs]:Object(i.o)(ys,Is),[Object(i.j)(fs)]:(e,t)=>{const{data:n}=t;n||Object(i.p)(e,t);const{logIds:s,logs:o,paging:a}=n;return e=Object(r.b)(e,(e=>{Object.keys(o).forEach((t=>{e.byCourseLogId[t]={...e.byCourseLogId[t],...o[t]}}))})),Object(i.q)(e,t,{viewResolver:ys,viewsPathResolver:Is,paging:a,values:s})},[Object(i.h)(fs)]:Object(i.m)(ys,Is),[Os]:(e,t)=>Object(r.b)(e,(e=>{const n={...e.byCourseLogId[t.logId].api,isDeleting:!0};e.byCourseLogId[t.logId].api=n})),[Object(i.j)(Os)]:(e,t)=>Cs(e,t.courseId),[Object(i.h)(Os)]:(e,t)=>(e=Object(r.b)(e,(e=>{const n={...e.byCourseLogId[t.logId].api,isDeleting:!1};e.byCourseLogId[t.logId].api=n})),Object(i.l)(e,t)),[Es]:(e,t)=>Cs(e,t.courseId)}),Ss={loadCourseLogsByQuery:e=>Object(i.b)(fs,(async(t,n)=>{const o=!((e,t)=>{const{view:n}=ys(e.courseLogs,t);return!n||!n.isLoading&&!n.isValid})(n(),e);if(!o){t(Object(i.a)(fs,{query:e}));try{const n=await async function(e){var t;const{results:n,paging:o}=await Object(a.Fc)(s.d,e.courseId,null!==(t=e.queryParams)&&void 0!==t?t:{},e.paging);return{logs:Object(w.E)(n,((e,t)=>t?(e[t.logId]=t,e):e)),logIds:n.map((e=>e.logId)),paging:o}}(e);t(Object(i.a)(Object(i.j)(fs),{query:e,data:n}))}catch(n){throw t(Object(i.a)(Object(i.h)(fs),{query:e})),t(Object(i.a)(Object(i.j)(c.a.APP_ERROR),{error:n})),{error:n}}}})),deleteCourseLogByLogId:(e,t)=>Object(i.b)(Os,(async n=>{n(Object(i.a)(Os,{courseId:t,logId:e}));try{await function(e,t){return Object(a.Ec)(s.d,e,t)}(e,t),n(Object(i.a)(Object(i.j)(Os),{courseId:t,logId:e}))}catch(s){throw n(Object(i.a)(Object(i.h)(Os),{courseId:t,logId:e})),n(Object(i.a)(Object(i.j)(c.a.APP_ERROR),{error:s})),{error:s}}})),invalidateCourseLogViews:e=>Object(i.b)(Es,(async t=>{t(Object(i.a)(Es,{courseId:e}))}))},js=Object(qe.b)(He.a,Ve),Ts=Object(qe.b)(He.a,Ke)(((e,t)=>{const{view:n}=ys(e.courseLogs,t);return n?{isLoading:n.isLoading,isValid:n.isValid,paging:n.paging}:null}),(e=>e)),As={getCourseLogsByQuery:js(((e,t)=>{const{view:n}=ys(e.courseLogs,t);return n?(n.values||[]).map((t=>e.courseLogs.byCourseLogId[t])):[]}),(e=>e)),getCourseLogViewStatusByQuery:Ts};const _s="course.message.count.load.all",Rs=Object(i.g)({counts:{overall:{totalCount:0,unreadCount:0}},isLoading:!1},{[_s]:i.n,[Object(i.j)(_s)]:(e,t)=>{if(!(null==t?void 0:t.count))return Object(i.p)(e,t);const n=Object(r.a)(e,(e=>{e.counts.overall=t.count}));return Object(i.p)(n,t)},[Object(i.h)(_s)]:i.l}),Ns={loadOverallCourseMessageCount:e=>Object(i.f)(_s,(async()=>{try{const t=await async function(e){const t=Object(q.f)("/v1/courses/conversations/counts",{});return e?Object(q.j)(t,e):Object(q.j)(t)}(e);return{count:t}}catch(e){throw{err:e}}}))},ws="/v1/courses/%courseId%/preferences/%key%";const Ds="course-preference.load",Ls="course-preference.persist",Ps="course-preference.delete",ks=Object(i.g)({byCourseId:{},isLoading:!1},{[Ds]:i.n,[Object(i.j)(Ds)]:(e,t)=>{const{courseId:n}=t;let{coursePreference:s}=t;const a=o.get(e,["byCourseId",n],{});s={...s,api:{isUpdating:!1,isDeleting:!1},ui:o.get(a,[s.key,"ui"])};const c=Object(r.b)(e,(e=>{e.byCourseId[n]||(e.byCourseId[n]={}),e.byCourseId[n][s.key]=s}));return Object(i.p)(c,t)},[Object(i.c)(Ds)]:i.p,[Object(i.h)(Ds)]:i.l,[Ls]:(e,t)=>Object(r.b)(e,(e=>{e.byCourseId[t.courseId]||(e.byCourseId[t.courseId]={}),e.byCourseId[t.courseId][t.nextCoursePreference.key]||(e.byCourseId[t.courseId][t.nextCoursePreference.key]={}),e.byCourseId[t.courseId][t.nextCoursePreference.key].api||(e.byCourseId[t.courseId][t.nextCoursePreference.key].api={}),e.byCourseId[t.courseId][t.nextCoursePreference.key].api.isUpdating=!0})),[Object(i.j)(Ls)]:(e,t)=>{const{courseId:n}=t;let{coursePreference:s}=t;const i=o.get(e,["byCourseId",n],{});return s={...s,api:{...o.get(i,[s.key,"api"]),isUpdating:!1},ui:o.get(i,[s.key,"ui"])},Object(r.b)(e,(e=>{e.byCourseId[n]||(e.byCourseId[n]={}),e.byCourseId[n][s.key]=s}))},[Object(i.h)(Ls)]:(e,t)=>Object(r.b)(e,(e=>{e.byCourseId[t.courseId]||(e.byCourseId[t.courseId]={}),e.byCourseId[t.courseId][t.nextCoursePreference.key]||(e.byCourseId[t.courseId][t.nextCoursePreference.key]={}),e.byCourseId[t.courseId][t.nextCoursePreference.key].api||(e.byCourseId[t.courseId][t.nextCoursePreference.key].api={}),e.byCourseId[t.courseId][t.nextCoursePreference.key].api.isUpdating=!1})),[Ps]:(e,t)=>Object(r.b)(e,(e=>{e.byCourseId[t.courseId]||(e.byCourseId[t.courseId]={}),e.byCourseId[t.courseId][t.coursePreferenceKey]||(e.byCourseId[t.courseId][t.coursePreferenceKey]={}),e.byCourseId[t.courseId][t.coursePreferenceKey].api||(e.byCourseId[t.courseId][t.coursePreferenceKey].api={}),e.byCourseId[t.courseId][t.coursePreferenceKey].api.isDeleting=!0})),[Object(i.j)(Ps)]:(e,t)=>{const{courseId:n,coursePreferenceKey:s}=t;let i=o.get(e,["byCourseId",n],{});return i=Object(r.b)(i,(e=>{delete e[s]})),Object(r.b)(e,(e=>{e.byCourseId[n]=i}))},[Object(i.h)(Ps)]:(e,t)=>{const n=Object(r.b)(e,(e=>{e.byCourseId[t.courseId]||(e.byCourseId[t.courseId]={}),e.byCourseId[t.courseId][t.coursePreferenceKey]||(e.byCourseId[t.courseId][t.coursePreferenceKey]={}),e.byCourseId[t.courseId][t.coursePreferenceKey].api||(e.byCourseId[t.courseId][t.coursePreferenceKey].api={}),e.byCourseId[t.courseId][t.coursePreferenceKey].api.isDeleting=!1}));return Object(i.l)(n,t)}}),xs={loadCoursePreference:e=>Object(i.f)(Ds,(t=>(t(),function(e){return Object(q.j)(Object(q.f)(ws,e))}(e).then((t=>({coursePreference:t,courseId:e.courseId}))).catch((e=>{throw{err:e}})))),null,[a.S.NotFound]),persistCoursePreference:(e,t)=>Object(i.f)(Ls,(()=>function(e,t){const n=Object(q.f)(ws,{courseId:t.courseId,key:e.key});return Object(q.q)(n,e)}(e,{courseId:t}).then((e=>({coursePreference:e,courseId:t}))).catch((e=>{throw{err:e}}))),{nextCoursePreference:e,courseId:t}),deleteCoursePreference:e=>Object(i.f)(Ps,(()=>function(e){return Object(q.r)(Object(q.f)(ws,e))}(e).then((()=>({coursePreferenceKey:e.key,courseId:e.courseId}))).catch((e=>{throw{err:e}}))),{coursePreferenceKey:e.key,courseId:e.courseId})};const Bs={getCoursePreferenceByKeyAndCourseId:(e,t,n)=>{var s,o,r;return null===(r=null===(o=null===(s=null==e?void 0:e.coursePreference)||void 0===s?void 0:s.byCourseId)||void 0===o?void 0:o[n])||void 0===r?void 0:r[t]},isPreferenceLoading:e=>e.coursePreference.isLoading},Ms="/v1/courses/%courseId%/progress/configuration",Us="course-progress.configuration.load",Gs="course-progress.configuration.persist",Fs={courseProgressConfiguration:void 0,isLoading:!1,isValid:!1},qs=Object(i.g)({courseProgressConfiguration:{byCourseId:{}}},{[Us]:(e,t)=>{const{courseId:n}=t;return Object(r.a)(e,(e=>{e.courseProgressConfiguration.byCourseId[n]?e.courseProgressConfiguration.byCourseId[n].isLoading=!0:e.courseProgressConfiguration.byCourseId[n]={...Fs,isLoading:!0}}))},[Object(i.j)(Us)]:(e,t)=>{const{courseId:n,courseProgressConfiguration:s}=t;return Object(r.a)(e,(e=>{e.courseProgressConfiguration.byCourseId[n]={...Fs,courseProgressConfiguration:s,isValid:!0}}))},[Object(i.h)(Us)]:(e,t)=>{const{courseId:n}=t;return Object(r.a)(e,(e=>{e.courseProgressConfiguration.byCourseId[n]?e.courseProgressConfiguration.byCourseId[n].isLoading=!1:e.courseProgressConfiguration.byCourseId[n]={...Fs}}))},[Gs]:(e,t)=>{const{courseId:n}=t;return Object(r.a)(e,(e=>{e.courseProgressConfiguration.byCourseId[n]?e.courseProgressConfiguration.byCourseId[n].isLoading=!0:e.courseProgressConfiguration.byCourseId[n]={...Fs,isLoading:!0}}))},[Object(i.j)(Gs)]:(e,t)=>{const{courseId:n,updatedCourseProgressConfiguration:s}=t;return Object(r.a)(e,(e=>{e.courseProgressConfiguration.byCourseId[n]={...Fs,courseProgressConfiguration:s,isValid:!0}}))},[Object(i.h)(Gs)]:(e,t)=>{const{courseId:n}=t;return Object(r.a)(e,(e=>{e.courseProgressConfiguration.byCourseId[n]?e.courseProgressConfiguration.byCourseId[n].isLoading=!1:e.courseProgressConfiguration.byCourseId[n]={...Fs}}))},[pe]:(e,t)=>{const{courseId:n}=t;return Object(r.a)(e,(e=>{e.courseProgressConfiguration.byCourseId[n]?e.courseProgressConfiguration.byCourseId[n].isValid=!1:e.courseProgressConfiguration.byCourseId[n]={...Fs}}))}});const Hs={loadCourseProgressConfiguration:e=>async(t,n)=>{if(!function(e,t){var n,s;const o=!!(null===(n=e.courseProgress.courseProgressConfiguration.byCourseId[t])||void 0===n?void 0:n.isLoading),r=!!(null===(s=e.courseProgress.courseProgressConfiguration.byCourseId[t])||void 0===s?void 0:s.isValid);return!o&&!r}(n(),e.courseId)){return Vs.getCourseProgressConfiguration(n(),e.courseId)}t(Object(i.a)(Us,{courseId:e.courseId}));try{const n=await(e=>Object(q.j)(Object(q.f)(Ms,e)))(e);return t(Object(i.a)(Object(i.j)(Us),{courseProgressConfiguration:n,courseId:e.courseId})),n}catch(n){throw t(Object(i.a)(Object(i.h)(Us),{courseId:e.courseId,err:n})),t(Object(i.a)(Object(i.j)(c.a.APP_ERROR),{error:n})),n}},persistCourseProgress:(e,t)=>Object(i.f)(Gs,(async()=>{try{const n=await((e,t)=>{const n=Object(q.f)(Ms,{courseId:t.courseId});return Object(q.o)(n,e)})(e,{courseId:t});return{updatedCourseProgressConfiguration:n,courseId:t}}catch(e){throw{err:e}}}),{courseId:t})},Vs={getCourseProgressConfiguration:(e,t)=>{var n;return null===(n=e.courseProgress.courseProgressConfiguration.byCourseId[t])||void 0===n?void 0:n.courseProgressConfiguration},getCourseProgressConfigurationView:(e,t)=>e.courseProgress.courseProgressConfiguration.byCourseId[t]};var Ks=n("Tddw");const $s="/v1/courses/%courseId%/gradebook/columns/%columnId%/grades/%gradeId%/attempts/%attemptId%/stagedAttemptGrades",Ws=`${$s}/%stagedAttemptId%`,zs=(e,t)=>{const{paging:n,permissions:s,results:o}=t,r={},i=Object(w.E)(o,((t,n)=>{const{grader:s,userBeingGraded:o,...i}=n;return i.columnId=e,i.graderId=null==s?void 0:s.id,i.userBeingGradedId=null==o?void 0:o.id,s&&!r[s.id]&&(r[s.id]={...s}),o&&!r[o.id]&&(r[o.id]={...o}),t[n.stagedAttemptId]=i,t}));return{paging:n,permissions:s,users:r,byStagedAttemptId:i}},Qs=async e=>{const{updatedProperties:t}=e,n={courseId:e.courseId,columnId:e.columnId,gradeId:e.gradeId,attemptId:e.attemptId,stagedAttemptId:e.stagedAttemptId};return{stagedAttempt:await Object(q.o)(Object(q.f)(Ws,n),t)}};var Ys=n("suvu"),Js=n("D5sL");const Xs=(e,t)=>Object(r.a)(e,(e=>{Object.keys(t.byStagedAttemptId).forEach((n=>{e.byStagedAttemptId[n]={...t.byStagedAttemptId[n],api:{isDeleting:!1,isUpdating:!1,isInvalidated:!1}}}))})),Zs=Object(i.g)({byStagedAttemptId:{}},{[Object(i.j)(Js.a.COMPLETED_DELEGATED_ATTEMPT_GRADE_BY_GRADER_LOAD)]:Xs,[Object(i.j)(Js.a.COMPLETED_DELEGATED_ATTEMPT_GRADE_ON_ATTEMPT_LOAD)]:Xs,[Object(i.j)(Js.a.PATCH_DELEGATED_ATTEMPT_GRADE)]:(e,t)=>{const n=t.stagedAttempt;return Object(r.a)(e,(e=>{const t=e.byStagedAttemptId[n.stagedAttemptId];e.byStagedAttemptId[n.stagedAttemptId]={...t,...n,api:{isDeleting:!1,isUpdating:!1,isInvalidated:!1}}}))},[Object(i.j)(Js.a.INSTRUCTOR_SUBMISSION_LIST_ATTEMPT_DELETED_EVENT)]:(e,t)=>{const n=Object.values(e.byStagedAttemptId);return Object(r.a)(e,(e=>{const{attemptId:s}=t;n.forEach((t=>{t.attemptId===s&&delete e.byStagedAttemptId[t.stagedAttemptId]}))}))}}),eo={loadCompletedDelegatedAttemptGradesByGrader:e=>Object(i.f)(Js.a.COMPLETED_DELEGATED_ATTEMPT_GRADE_BY_GRADER_LOAD,(async()=>{try{const t=await(async e=>{const{columnId:t}=e,n=await Object(q.j)(Object(q.f)("/v1/courses/%courseId%/gradebook/columns/%columnId%/grader/%userId%/peerReviews",e));return zs(t,n)})(e);return t}catch(e){throw{err:e}}})),loadDelegatedAttemptGradesOnAttempt:e=>Object(i.f)(Js.a.COMPLETED_DELEGATED_ATTEMPT_GRADE_ON_ATTEMPT_LOAD,(async()=>{try{const t=await(async e=>{const{columnId:t}=e,n={results:(await Object(q.j)(Object(q.f)($s,e))).stagedAttemptGrades};return zs(t,n)})(e);return t}catch(e){throw{err:e}}})),patchDelegatedAttemptGrade:e=>Object(i.f)(Js.a.PATCH_DELEGATED_ATTEMPT_GRADE,(async()=>{try{return await Qs(e)}catch(e){throw{err:e}}})),deleteDelegatedAttemptsOnDeletedSubmission:e=>Object(i.a)(Object(i.j)(Js.a.INSTRUCTOR_SUBMISSION_LIST_ATTEMPT_DELETED_EVENT),{attemptId:e.attemptId}),toggleVisibilityOfDelegatedAttemptGrade:e=>Object(i.b)(Js.a.TOGGLE_VISIBILITY_DELEGATED_ATTEMPT_GRADE,(async(t,n)=>{try{const s=n().delegatedAttemptGrade.byStagedAttemptId[e];if(s){const{columnId:e,attemptId:o,stagedAttemptId:r}=s,{courseId:a,gradeId:c}=n().gradebookAttempt.byGradebookAttemptId[o],l=await Qs({courseId:a,columnId:e,gradeId:c,attemptId:o,stagedAttemptId:r,updatedProperties:{showFeedbackToStudent:!s.showFeedbackToStudent}});t(Object(i.a)(Object(i.j)(Js.a.PATCH_DELEGATED_ATTEMPT_GRADE),l))}}catch(e){throw t(Object(i.a)(Object(i.j)(c.a.APP_ERROR),{error:e})),{err:e}}}))},to=(e,t)=>{const{graderId:n,userBeingGradedId:s}=t;return{...t,grader:n?Ys.c.getUserById(e,n):null,userBeingGraded:s?Ys.c.getUserById(e,s):null}},no={getCompletedDelegatedAttemptGradesByGrader:(e,t,n)=>Object.values(e.delegatedAttemptGrade.byStagedAttemptId).filter((e=>e.graderId===t&&e.columnId===n)).map((t=>to(e,t))),getCompletedDelegatedAttemptGradesOnAttempt:(e,t)=>Object.values(e.delegatedAttemptGrade.byStagedAttemptId).filter((e=>e.attemptId===t)).map((t=>to(e,t))),getDelegatedAttemptByStagedAttemptId:(e,t)=>to(e,Object.values(e.delegatedAttemptGrade.byStagedAttemptId).find((e=>e.stagedAttemptId===t)))},so="/v1/courses/%courseId%/discussionboards/settings";const oo="discussionboard-settings.load",ro="discussionboard-settings.persist",io=Object(i.g)({byCourseId:{},isLoading:!1},{[oo]:(e,t)=>Object(i.n)(e,t),[Object(i.j)(oo)]:(e,t)=>{const{discussionSettings:n,courseId:s}=t,o=Object(r.a)(e,(e=>{const t={...n,api:{isUpdating:!1,isDeleting:!1}};e.byCourseId[s]=t}));return Object(i.p)(o,t)},[Object(i.h)(oo)]:(e,t)=>Object(i.l)(e,t),[ro]:(e,t)=>{const{courseId:n}=t;return Object(r.a)(e,(e=>{const t=e.byCourseId[n];e.byCourseId[n]={...t,api:{...null==t?void 0:t.api,isUpdating:!0}}}))},[Object(i.j)(ro)]:(e,t)=>{const{discussionSettings:n,courseId:s}=t,o=Object(r.a)(e,(e=>{const t={...n,api:{isUpdating:!1,isDeleting:!1}};e.byCourseId[s]=t}));return Object(i.p)(o,t)},[Object(i.h)(ro)]:(e,t)=>{const{courseId:n}=t;return Object(r.a)(e,(e=>{e.byCourseId[n].api.isUpdating=!1}))}}),ao={getDiscussionboardSettings:(e,t)=>Object(o.get)(e,["discussionBoardSettings","byCourseId",t],{allowStudentsToCreateDiscussionContent:!1}),isSettingLoading:e=>Object(o.get)(e,["discussionBoardSettings","isLoading"])};const co={loadDiscussionboardSetting:e=>Object(i.f)(oo,(async t=>{if(n=t(),s=e.courseId,ao.isSettingLoading(n)&&null!=n.discussionBoardSettings.byCourseId[s])return Promise.resolve(null);var n,s;try{const t=await async function(e){return Object(q.j)(Object(q.f)(so,e))}(e);return{discussionSettings:t,courseId:e.courseId}}catch(e){throw{err:e}}})),persistDiscussionSettings:e=>Object(i.f)(ro,(t=>async function(e,t,n){const s=Object(q.i)(e,t);return Object(o.isEmpty)(s)?t:Object(q.o)(Object(q.f)(so,n),s)}(Object(o.get)(t(),["discussionBoardSettings","byCourseId",e.courseId],{}),e.settings,{courseId:e.courseId}).then((t=>({discussionSettings:t,courseId:e.courseId}))).catch((t=>{throw{err:t,courseId:e.courseId}}))),{courseId:e.courseId})};var lo={};const uo="feature.flags.load.all",po="feature.flags.get.by.key",bo="feature.flags.update.by.key";const mo=Object(i.g)({featureFlags:{byKey:{}},featureFlagValues:{byKey:{}},isLoading:!1},{[uo]:i.n,[Object(i.j)(uo)]:(e,t)=>{if(!t||!t.featureFlags)return Object(i.p)(e,t);const{featureFlags:n}=t;return Object(r.a)(e,(e=>{const t={};Object.keys(n.byKey).forEach((e=>{const s={...n.byKey[e],api:{isUpdating:!1,isDeleting:!1}};t[e]=s})),e.featureFlags.byKey=t,e.isLoading=!1}))},[Object(i.h)(uo)]:i.l,[po]:(e,t)=>Object(r.a)(e,(e=>{e.featureFlagValues.byKey[t.flagKey]||(e.featureFlagValues.byKey[t.flagKey]={}),e.featureFlagValues.byKey[t.flagKey].isLoading=!0})),[Object(i.j)(po)]:(e,t)=>{if(!t||!t.flagKey||!t.flagValue)return Object(i.p)(e,t);const{flagKey:n,flagValue:s}=t;return Object(r.a)(e,(e=>{e.featureFlagValues.byKey[n]={...e.featureFlagValues.byKey[n],flagKey:n,flagValue:s},e.featureFlagValues.byKey[n].isLoading=!1}))},[Object(i.c)(po)]:(e,t)=>Object(r.a)(e,(e=>{e.featureFlagValues.byKey[t.flagKey]||(e.featureFlagValues.byKey[t.flagKey]={}),e.featureFlagValues.byKey[t.flagKey].isLoading=!1})),[Object(i.h)(po)]:(e,t)=>Object(r.a)(e,(e=>{e.featureFlagValues.byKey[t.flagKey]||(e.featureFlagValues.byKey[t.flagKey]={}),e.featureFlagValues.byKey[t.flagKey].isLoading=!1})),[bo]:(e,t)=>Object(r.a)(e,(e=>{e.featureFlags.byKey[t.flagKey].api||(e.featureFlags.byKey[t.flagKey].api={}),e.featureFlags.byKey[t.flagKey].api.isUpdating=!0})),[Object(i.j)(bo)]:(e,t)=>{if(!t||!t.flagKey||!t.flagValue)return Object(i.p)(e,t);const{flagKey:n,flagValue:s}=t,o={...e.featureFlags.byKey[n],flagValue:{...e.featureFlags.byKey[n].flagValue,value:s},api:{...e.featureFlags.byKey[n].api,isUpdating:!1}},a={...e.featureFlagValues.byKey[n],flagKey:n,flagValue:lo[n]?lo[n]:s};return Object(r.a)(e,(e=>{e.featureFlags.byKey[n]=o,e.featureFlagValues.byKey[n]=a}))},[Object(i.h)(bo)]:(e,t)=>Object(r.a)(e,(e=>{e.featureFlags.byKey[t.flagKey].api||(e.featureFlags.byKey[t.flagKey].api={}),e.featureFlags.byKey[t.flagKey].api.isUpdating=!1}))}),go={loadFeatureFlags:()=>Object(i.f)(uo,(()=>Object(a.Sc)(s.d).then((e=>{const{results:t}=e,n={};return t.forEach((e=>{n[e.flagKey]=e})),{featureFlags:{byKey:n}}})))),loadFeatureFlagValueByKey:e=>Object(i.b)(po,((t,n)=>{if(function(e,t){const n=e.featureFlags.featureFlagValues.byKey[t.flagKey];return!n||!1===n.isLoading}(n(),e))if(t(Object(i.a)(po,e)),lo[e.flagKey]){const n={flagKey:e.flagKey,flagValue:lo[e.flagKey]};t(Object(i.a)(Object(i.j)(po),n))}else{var o;(o=e,Object(a.Qc)(s.d,o.flagKey)).then((e=>t(Object(i.a)(Object(i.j)(po),e)))).catch((n=>{var s;(null===(s=null==n?void 0:n.body)||void 0===s?void 0:s.status)!==a.S.NotFound?t(Object(i.a)(Object(i.h)(po),{err:n,flagKey:e.flagKey})):t(Object(i.a)(Object(i.c)(po),{flagKey:e.flagKey}))}))}})),updateFeatureFlagValueByKey:e=>Object(i.f)(bo,(()=>{return t=e,Object(a.Rc)(s.d,t.flagKey,t);var t}),{flagKey:e.flagKey,flagValue:e.flagValue})};const ho="file-upload-settings.load",fo=Object(i.g)({fileUploadSettings:{},isLoading:!1},{[ho]:i.n,[Object(i.j)(ho)]:(e,t)=>Object(i.p)(e,t,{fileUploadSettings:t}),[Object(i.c)(ho)]:i.p,[Object(i.h)(ho)]:i.l}),Oo={getFileUploadSettings:e=>e.fileUploadSettings.fileUploadSettings,isFileUploadSettingsLoading:e=>e.fileUploadSettings.isLoading},Eo={loadFileUploadSettings:()=>Object(i.b)(ho,(async(e,t)=>{if(!function(e){const{maxUploadSizeInBytes:t}=Oo.getFileUploadSettings(e);return void 0===t&&!Oo.isFileUploadSettingsLoading(e)}(t()))return Oo.getFileUploadSettings(t());try{const t=await Object(a.Zc)(s.d);return e(Object(i.a)(Object(i.j)(ho),{...t})),t}catch(t){e(Object(i.a)(Object(i.j)(c.a.APP_ERROR),{error:t})),e(Object(i.a)(Object(i.h)(ho),{err:t}));const n={maxUploadSizeInBytes:2684354560,recommendedAlternatives:"",supportLink:""};return e(Object(i.a)(Object(i.j)(ho),n)),n}}))};var yo=n("0uRC"),Io=n("OrNH");const Co={FILE_UPLOAD_REQUEST:"file-upload.request",CLOUD_FILE_UPLOAD_REQUEST:"cloud.file-upload.request",INVALID_FILE_UPLOAD:"invalid-file-upload",FILE_UPLOAD:"file-upload",FILE_UPLOAD_ABORT:"file-upload.abort",FILE_UPLOAD_GROUP_ABORT:"file-upload.group.abort",FILE_UPLOAD_OVERSIZED:"file-upload.oversized",CAN_UPDATE_FILE_DETAILS:"file-upload.can-update-file-details",UPDATED_FILE_DETAILS:"file-upload.updated-file-details"};var vo,So;!function(e){e.Pending="PENDING",e.Complete="COMPLETE",e.Failed="FAILED",e.Canceled="CANCELED"}(vo||(vo={})),function(e){e.Api="API",e.Oversized="OVERSIZED",e.Invalid="INVALID"}(So||(So={}));function jo(e){return`${e}.aborted`}const To={filesUploadRequest:(e,t,n={skipMaxSizeCheck:!1})=>Object(i.b)(Co.FILE_UPLOAD_REQUEST,(async s=>{let o=e;n.skipMaxSizeCheck||(o=await Ao(s,e,t)),o.forEach((({file:e,correlationId:n})=>{s(To.fileUploadRequest({file:e},{correlationId:n,groupId:t}))}))})),cloudFilesUploadRequest:(e,t,n={skipMaxSizeCheck:!1})=>Object(i.b)(Co.CLOUD_FILE_UPLOAD_REQUEST,(async s=>{let o=e;n.skipMaxSizeCheck||(o=await Ao(s,e,t)),o.forEach((({file:e,accessToken:n,correlationId:o})=>{s(To.cloudFileUploadRequest(e,n,{correlationId:o,groupId:t}))}))})),fileUploadRequest:(e,t)=>({type:Co.FILE_UPLOAD_REQUEST,payload:{file:e},meta:{uploadId:t}}),cloudFileUploadRequest:(e,t,n)=>({type:Co.CLOUD_FILE_UPLOAD_REQUEST,payload:{file:e,accessToken:t},meta:{uploadId:n}}),invalidFileUpload:(e,t,n)=>({type:Co.INVALID_FILE_UPLOAD,payload:{file:e,isCloudUpload:n},meta:{uploadId:t}}),startFileUpload:(e,t)=>({type:Co.FILE_UPLOAD,payload:{aborter:t},meta:{uploadId:e}}),updateFileUploadProgress:(e,t)=>({type:Co.FILE_UPLOAD,payload:{progress:t},meta:{uploadId:e}}),fileUploadSuccess:(e,t)=>({type:Object(i.j)(Co.FILE_UPLOAD),payload:{file:t},meta:{uploadId:e}}),fileUploadFailure:(e,t,n)=>({type:Object(i.h)(Co.FILE_UPLOAD),payload:{error:t,errorCode:n},meta:{uploadId:e}}),fileUploadAborted:e=>({type:jo(Co.FILE_UPLOAD),meta:{uploadId:e}}),canUpdateFileDetails:e=>({type:Co.CAN_UPDATE_FILE_DETAILS,meta:{uploadId:e}}),fileDetailsUpdated:(e,t=!1)=>({type:Co.UPDATED_FILE_DETAILS,meta:{uploadId:e},payload:{cancelled:t}}),abortGroupUploads:e=>Object(i.b)(Co.FILE_UPLOAD_GROUP_ABORT,((t,n)=>{n().fileUpload.byGroupId[e].pendingUploads.forEach((n=>{t(To.abortUpload({groupId:e,correlationId:n}))}))})),abortUpload:e=>Object(i.b)(Co.FILE_UPLOAD_ABORT,((t,n)=>{var s,o;null===(o=null===(s=n().fileUpload.byId[e.correlationId])||void 0===s?void 0:s.uploadProgress.aborter)||void 0===o||o.abort()})),overSizedFiles:(e,t)=>({type:Co.FILE_UPLOAD_OVERSIZED,payload:t,meta:{groupUploadId:e}})};async function Ao(e,t,n){const{validRequests:s,oversizedRequests:o}=await async function(e,t){const{maxUploadSizeInBytes:n}=await e(Eo.loadFileUploadSettings()),s=[],o=[];return t.forEach((e=>{const{file:t}=e;t.size>n?s.push(e):o.push(e)})),{oversizedRequests:s,validRequests:o}}(e,t);return o.length>0&&e(To.overSizedFiles(n,o)),s}function _o(e,t,n){var s;const{correlationId:o,groupId:r}=t;if(e.byId[o]={...e.byId[o],filename:n.name,filesize:n.size,groupId:r,status:vo.Pending,uploadProgress:{},isCloudUpload:!1},r){const t=null!==(s=e.byGroupId[r])&&void 0!==s?s:{groupId:r,pendingUploads:[],uploads:[],oversizedFiles:[]};t.uploads.push(o),t.pendingUploads.push(o),e.byGroupId[r]=t}}function Ro(e,t,n){const s=n&&e.byGroupId[n];if(s){const e=s.pendingUploads.indexOf(t);s.pendingUploads.splice(e,1)}}const No=Object(i.g)({byGroupId:{},byId:{}},{[Co.FILE_UPLOAD_REQUEST]:(e,t)=>Object(r.a)(e,(e=>{const n=t.payload.file.file;_o(e,t.meta.uploadId,n)})),[Co.CLOUD_FILE_UPLOAD_REQUEST]:(e,t)=>Object(r.a)(e,(e=>{const{file:n}=t.payload;_o(e,t.meta.uploadId,n),e.byId[t.meta.uploadId.correlationId].isCloudUpload=!0})),[Co.INVALID_FILE_UPLOAD]:(e,t)=>{const n=Object(r.a)(e,(e=>{const{file:n,isCloudUpload:s}=t.payload,{correlationId:o,groupId:r}=t.meta.uploadId;_o(e,t.meta.uploadId,n);const i=e.byId[o];i.status=vo.Failed,i.error={errorType:So.Invalid},s&&(e.byId[o].isCloudUpload=!0),Ro(e,o,r)}));return Object(i.l)(n,t)},[Co.FILE_UPLOAD]:(e,t)=>{const n=Object(r.a)(e,(e=>{const{progress:n,aborter:s}=t.payload,{correlationId:o}=t.meta.uploadId,r=e.byId[o];r||_o(e,t.meta.uploadId,{});const i=r.uploadProgress;i.progress=n,s&&(i.aborter=s)}));return Object(i.n)(n,t)},[Object(i.j)(Co.FILE_UPLOAD)]:(e,t)=>{const n=Object(r.a)(e,(e=>{var n;const{correlationId:s,groupId:o}=t.meta.uploadId,r=e.byId[s],i=null===(n=e.byId[s])||void 0===n?void 0:n.uploadProgress;i&&(delete i.progress,delete i.aborter),r&&(r.status=vo.Complete),Ro(e,s,o)}));return Object(i.p)(n,t)},[Object(i.h)(Co.FILE_UPLOAD)]:(e,t)=>{const n=Object(r.a)(e,(e=>{var n;const{correlationId:s,groupId:o}=t.meta.uploadId,r=e.byId[s],i=null===(n=e.byId[s])||void 0===n?void 0:n.uploadProgress;i&&(delete i.progress,delete i.aborter),r&&(r.status=vo.Failed,r.error={errorType:t.payload.error,errorCode:t.payload.errorCode}),Ro(e,s,o)}));return Object(i.l)(n,t)},[jo(Co.FILE_UPLOAD)]:(e,t)=>{const n=Object(r.a)(e,(e=>{var n;const{correlationId:s,groupId:o}=t.meta.uploadId,r=e.byId[s],i=null===(n=e.byId[s])||void 0===n?void 0:n.uploadProgress;i&&(delete i.progress,delete i.aborter),r&&(r.status=vo.Canceled),Ro(e,s,o)}));return Object(i.l)(n,t)},[Co.CAN_UPDATE_FILE_DETAILS]:(e,t)=>Object(r.a)(e,(e=>{const{correlationId:n}=t.meta.uploadId;e.byId[n].uploadDetails={canUpdateFileDetails:!0}})),[Co.UPDATED_FILE_DETAILS]:(e,t)=>Object(r.a)(e,(e=>{const{correlationId:n}=t.meta.uploadId,s=e.byId[n];(null==s?void 0:s.uploadDetails)&&(s.uploadDetails.canUpdateFileDetails=!1)})),[Co.FILE_UPLOAD_OVERSIZED]:(e,t)=>Object(r.a)(e,(e=>{const{groupUploadId:n}=t.meta;t.payload.forEach((({correlationId:t,file:s})=>{_o(e,{correlationId:t,groupId:n},s),function(e,t,n){const s=e.byId[t];s&&(s.status=vo.Failed,s.error={errorType:So.Oversized});const o=n&&e.byGroupId[n];o&&(o.oversizedFiles.push(t),Ro(e,t,n))}(e,t,n)}))}))}),wo={getFileUploadById:(e,t)=>{var n;return null===(n=e.fileUpload)||void 0===n?void 0:n.byId[t]},getGroupStatusById:(e,t)=>{var n;return null===(n=e.fileUpload)||void 0===n?void 0:n.byGroupId[t]},getAllFileUploads:e=>{var t,n;return Object.entries(null!==(n=null===(t=e.fileUpload)||void 0===t?void 0:t.byId)&&void 0!==n?n:{}).map((([e,t])=>({correlationId:e,...t})))}};function*Do(e,t,n){const{result:o,progress:r,abort:i}=function(e,t={},n){return Object(a.ad)(s.d,e,t,n)}(e,{},["mimeType","isMedia"]);yield Object(Io.c)(To.startFileUpload({correlationId:t,groupId:n},i));const c=function(e,t,n,s){return Object(yo.c)((o=>{const r=t.subscribe((e=>{o(To.updateFileUploadProgress({correlationId:n,groupId:s},e))}));return e.then((e=>{o(To.fileUploadSuccess({correlationId:n,groupId:s},e)),o(yo.a)})).catch((()=>{})),e.catch((e=>{if(e.errorType===a.mc.Aborted)o(To.fileUploadAborted({correlationId:n,groupId:s}));else{let t;e instanceof a.lc&&(t=e.status),o(To.fileUploadFailure({correlationId:n,groupId:s},So.Api,t))}o(yo.a)})),r}))}(o,r,t,n);for(;;){const e=yield Object(Io.g)(c);yield Object(Io.c)(e)}}const Lo="user-preference.load",Po="user-preference.persist",ko=Object(i.g)({userPreferences:{},isLoading:!1},{[Lo]:(e,t)=>Object(r.b)(e,(e=>{e.isLoading=!0})),[Object(i.j)(Lo)]:(e,t)=>{const{userPreference:n}=t,s={...e.userPreferences};return s[n.key]={...n,api:{isUpdating:!1,isDeleting:!1},ui:e.userPreferences[n.key]&&e.userPreferences[n.key].ui},Object(i.p)(e,t,{userPreferences:s})},[Object(i.c)(Lo)]:i.p,[Object(i.h)(Lo)]:(e,t)=>Object(r.b)(e,(e=>{e.isLoading=!1})),[Po]:(e,t)=>Object(r.b)(e,(e=>{e.userPreferences[t.nextUserPreference.key]||(e.userPreferences[t.nextUserPreference.key]={}),e.userPreferences[t.nextUserPreference.key].api||(e.userPreferences[t.nextUserPreference.key].api={}),e.userPreferences[t.nextUserPreference.key].api.isUpdating=!0})),[Object(i.j)(Po)]:(e,t)=>{const{userPreference:n}=t,s={...n,api:{...e.userPreferences[n.key].api,isUpdating:!1},ui:e.userPreferences[n.key]&&e.userPreferences[n.key].ui};return Object(r.b)(e,(e=>{e.userPreferences[s.key]=s}))},[Object(i.h)(Po)]:(e,t)=>Object(r.b)(e,(e=>{e.userPreferences[t.nextUserPreference.key]||(e.userPreferences[t.nextUserPreference.key]={}),e.userPreferences[t.nextUserPreference.key].api||(e.userPreferences[t.nextUserPreference.key].api={}),e.userPreferences[t.nextUserPreference.key].api.isUpdating=!1}))}),xo={loadUserPreference:e=>Object(i.f)(Lo,(t=>{if(n=t(),s=e.key,Bo.getUserPreferenceByKey(n,s)){const n=Bo.getUserPreferenceByKey(t(),e.key);return Promise.resolve({userPreference:n})}var n,s;return J(e).then((e=>({userPreference:e}))).catch((e=>{throw{err:e}}))}),null,[a.S.NotFound]),persistUserPreference:(e,t)=>Object(i.f)(Po,(()=>X(e,{userId:t}).then((e=>({userPreference:e}))).catch((t=>{throw{err:t,nextUserPreference:e}}))),{nextUserPreference:e})};const Bo={getUserPreferenceByKey:(e,t)=>{var n,s;return null===(s=null===(n=null==e?void 0:e.userPreference)||void 0===n?void 0:n.userPreferences)||void 0===s?void 0:s[t]},isUserPreferenceLoading:e=>{var t;return null===(t=null==e?void 0:e.userPreference)||void 0===t?void 0:t.isLoading}},Mo="ftue.register",Uo="ftue.displayNext",Go="ftue.pause",Fo="ftue.resume";function qo(e,t){return`${e}.${t}`}const Ho=Object(i.g)({ftueCollectionMap:{}},{[Object(i.j)(Mo)]:(e,t)=>{let n=e;if(e.ftueCollectionMap[t.collectionKey]){const s=[...e.ftueCollectionMap[t.collectionKey].ftueKeys,t.ftueKey];n=Object(r.b)(e,(e=>{e.ftueCollectionMap[t.collectionKey]||(e.ftueCollectionMap[t.collectionKey]={}),e.ftueCollectionMap[t.collectionKey].ftueKeys=s}))}else{const s={isPaused:!1,ftueKeys:[t.ftueKey]};n=Object(r.b)(e,(e=>{e.ftueCollectionMap[t.collectionKey]=s}))}return Object(i.p)(n,t)},[Object(i.h)(Mo)]:i.l,[Object(i.j)(Uo)]:(e,t)=>{const n=new Array(...e.ftueCollectionMap[t.collectionKey].ftueKeys);return n.shift(),Object(r.b)(e,(e=>{e.ftueCollectionMap[t.collectionKey]||(e.ftueCollectionMap[t.collectionKey]={}),e.ftueCollectionMap[t.collectionKey].ftueKeys=n}))},[Object(i.h)(Uo)]:i.l,[Object(i.j)(Go)]:(e,t)=>Object(r.b)(e,(e=>{e.ftueCollectionMap[t.collectionKey]||(e.ftueCollectionMap[t.collectionKey]={}),e.ftueCollectionMap[t.collectionKey].isPaused=!0})),[Object(i.h)(Go)]:i.l,[Object(i.j)(Fo)]:(e,t)=>Object(r.b)(e,(e=>{e.ftueCollectionMap[t.collectionKey]||(e.ftueCollectionMap[t.collectionKey]={}),e.ftueCollectionMap[t.collectionKey].isPaused=!1})),[Object(i.h)(Fo)]:i.l}),Vo={registerFtue:(e,t)=>Object(i.b)(Mo,(async(n,s)=>{const o=qo(e,t);let r,a;try{r=await n(xo.loadUserPreference({key:o}))}catch(e){e&&"error"in e&&(a=e.error)}const c=null==r?void 0:r.userPreference;(c&&parseInt(c.value,10)<2||a&&404===a.status)&&n(Object(i.a)(Object(i.j)(Mo),{collectionKey:e,ftueKey:t}))})),markCurrentFtueAsShown:e=>Object(i.b)(Uo,((t,n)=>{const s=Ko.getCurrentFtueKey(n(),e);if(!s)return t(Object(i.a)(Object(i.h)(Uo))),Promise.resolve(null);const o=qo(e,s);t(Object(i.a)(Object(i.j)(Uo),{collectionKey:e}));const r=Bo.getUserPreferenceByKey(n(),o),a=r?parseInt(r.value,10)+1:1;return t(xo.persistUserPreference({key:o,value:`${a}`}))})),pauseFtueSequence:e=>Object(i.a)(Object(i.j)(Go),{collectionKey:e}),resumeFtueSequence:e=>Object(i.a)(Object(i.j)(Fo),{collectionKey:e})},Ko={getCurrentFtueKey:(e,t)=>{const n=e.ftue.ftueCollectionMap[t];if(n){const{ftueKeys:e,isPaused:t}=n;return!t&&e?e[0]:null}return null}};function $o(e){return e.reduce(((e,t)=>(void 0!==t.membershipId&&(e[t.membershipId]=t),e)),{})}function Wo(e){return e.reduce(((e,t)=>(e[t.columnId]=t,e)),{})}const zo={byColumnId:{},isLoading:!1,exceptionsCount:{fixedDueDateExceptionCount:void 0,relativeDueDateExceptionCount:void 0,unlimitedDueDateExceptionCount:void 0,withDueDateExceptionCount:void 0}},Qo="gradable.user.option.item.put",Yo="gradable.user.option.item.delete",Jo="gradable.item.user.option.load",Xo="gradable.item.user.option.count.load",Zo="gradable.item.user.option.exceptions.load",er=Object(i.g)(zo,{[Qo]:i.n,[Object(i.j)(Qo)]:(e,t)=>{const{item:n}=t,s=Object(r.a)(e,(e=>{e.byColumnId[n.columnId]||(e.byColumnId[n.columnId]={byCourseMembershipId:{}}),e.byColumnId[n.columnId].byCourseMembershipId[n.membershipId]={columnId:n.columnId,membershipId:n.membershipId,deltaDueDate:n.deltaDueDate,fixedDueDate:n.fixedDueDate,dueDateExceptionType:n.dueDateExceptionType,effectiveDueDate:n.effectiveDueDate}}));return Object(i.p)(s,t)},[Object(i.h)(Qo)]:i.l,[Yo]:i.n,[Object(i.j)(Yo)]:(e,t)=>{const n=Object(r.a)(e,(e=>{e.byColumnId[t.columnId]&&delete e.byColumnId[t.columnId]}));return Object(i.p)(n,t)},[Object(i.h)(Yo)]:i.l,[Jo]:i.n,[Object(i.j)(Jo)]:(e,t)=>{const{columnId:n,byCourseMembershipId:s}=t,o=Object(r.a)(e,(e=>{e.byColumnId[n]||(e.byColumnId[n]={byCourseMembershipId:{}}),Object.keys(s).forEach((t=>{const o=s[t];e.byColumnId[n].byCourseMembershipId[t]={columnId:o.columnId,membershipId:o.membershipId,deltaDueDate:o.deltaDueDate,fixedDueDate:o.fixedDueDate,dueDateExceptionType:o.dueDateExceptionType,effectiveDueDate:o.effectiveDueDate}}))}));return Object(i.p)(o,t)},[Object(i.h)(Jo)]:i.l,[Xo]:i.n,[Object(i.j)(Xo)]:(e,t)=>{const n=Object(r.a)(e,(e=>{e.exceptionsCount=t.results}));return Object(i.p)(n,t)},[Object(i.h)(Xo)]:i.l,[Zo]:i.n,[Object(i.j)(Zo)]:(e,t)=>{const{membershipId:n,byColumnId:s}=t,o=Object(r.a)(e,(e=>{Object.keys(s).forEach((t=>{e.byColumnId[t]||(e.byColumnId[t]={byCourseMembershipId:{}}),e.byColumnId[t].byCourseMembershipId[n]=s[t]}))}));return Object(i.p)(o,t)},[Object(i.h)(Zo)]:i.l}),tr={persistGradableItemUserOption:(e,t)=>Object(i.f)(Qo,(()=>function(e,t){return Object(a.sd)(s.d,e,t)}(e,t).then((e=>({item:e}))).catch((e=>{throw{err:e}}))),{}),deleteGradableItemUserOption:e=>Object(i.f)(Yo,(async()=>{try{return await function(e){return Object(a.pd)(s.d,e)}(e),{columnId:e.columnId,byCourseMembershipId:{}}}catch(e){throw{err:e}}})),fetchGradableItemUserOption:(e,t)=>Object(i.f)(Jo,(async()=>{try{const n=await async function(e,t){const{results:n}=await Object(a.rd)(s.d,e,t);return{columnId:e.columnId,byCourseMembershipId:$o(n)}}(e,t);return{columnId:n.columnId,byCourseMembershipId:n.byCourseMembershipId}}catch(e){throw{err:e}}})),fetchGradableItemUserOptionCount:(e,t)=>Object(i.f)(Xo,(async()=>{try{return await function(e){return Object(a.od)(s.d,e)}(e)}catch(e){throw{err:e}}})),fetchGradableItemUserOptionExceptions:(e,t)=>Object(i.f)(Zo,(async()=>{try{return await async function(e,t){const{results:n}=await Object(a.qd)(s.d,e,t);return{membershipId:e.membershipId,byColumnId:Wo(n)}}(e,t)}catch(e){throw{err:e}}}))},nr="/v1/courses/%courseId%/gradebook/attempts/%attemptId%";function sr(e){return Object(q.p)(Object(q.f)("/v1/courses/%courseId%/gradebook/columns/%columnId%/grader/%userId%/users",e),{}).catch((e=>{throw(t=e).error.status===a.S.Conflict&&"bb-assessment-conflict-not-enough-peer-reviews"===t.error.code?new Sn(t.error):t;var t}))}var or=n("Unv+");const rr=Object(i.g)({byGradebookAttemptId:{},deletedAttemptsByColumnId:{},paging:null,isLoading:!1},{[or.a.GRADEBOOK_ATTEMPT_LOAD]:i.n,[or.a.GRADEBOOK_CLEAR_STUDENT_SUBMISSION_WITH_VIEW_URL_EXPANDED]:(e,t)=>{const{attemptId:n}=t;return Object(r.a)(e,(t=>{const s=e.byGradebookAttemptId[n];if(s){const e={...s};delete e.studentSubmissionViewUrlExpanded,t.byGradebookAttemptId[n]=e}}))},[Object(i.j)(or.a.GRADEBOOK_ATTEMPT_LOAD)]:(e,t)=>{const{attempt:n,courseId:s,columnId:o,viewUrlRequested:a}=t,c=Object(r.a)(e,(t=>{if(n){const r=e.byGradebookAttemptId[n.id];t.byGradebookAttemptId[n.id]={...r,...n,studentSubmissionViewUrlExpanded:a?n.studentSubmission:void 0,courseId:s,columnId:o}}}));return Object(i.p)(c,t)},[Object(i.h)(or.a.GRADEBOOK_ATTEMPT_LOAD)]:i.l,[or.a.GRADEBOOK_ATTEMPTS_LOAD]:i.n,[Object(i.j)(or.a.GRADEBOOK_ATTEMPTS_LOAD)]:(e,t)=>{const{byGradebookAttemptId:n,deletedAttempts:s,courseId:o,columnId:a}=t,c=Object(r.a)(e,(t=>{a&&(t.deletedAttemptsByColumnId[a]=s.sort(((e,t)=>e.delegatedGraderOrder<t.delegatedGraderOrder?-1:e.delegatedGraderOrder>t.delegatedGraderOrder?1:0))),Object.values(n||{}).forEach((n=>{const s=e.byGradebookAttemptId[n.id];t.byGradebookAttemptId[n.id]={...s,...n,courseId:o,columnId:a}}))}));return Object(i.p)(c,t)},[Object(i.h)(or.a.GRADEBOOK_ATTEMPTS_LOAD)]:i.l,[or.a.GRADEBOOK_ATTEMPT_UPDATE]:(e,t)=>{const{attemptId:n}=t;return Object(r.a)(e,(e=>{e.byGradebookAttemptId[n]={...e.byGradebookAttemptId[n],api:{isUpdating:!0}}}))},[Object(i.j)(or.a.GRADEBOOK_ATTEMPT_UPDATE)]:(e,t)=>{const{attempt:n}=t,{byGradebookAttemptId:s}=e;return e=Object(r.a)(e,(e=>{const t=s[n.id];e.byGradebookAttemptId[n.id]=t?{...t,...n,api:{...t.api,isUpdating:!1}}:{...n,api:{isDeleting:!1,isUpdating:!1}}})),Object(i.p)(e,t)},[Object(i.h)(or.a.GRADEBOOK_ATTEMPT_UPDATE)]:(e,t)=>{const{attemptId:n}=t;return Object(r.a)(e,(e=>{e.byGradebookAttemptId[n]={...e.byGradebookAttemptId[n],api:{isUpdating:!1}}}))}}),ir={loadGradebookAttemptByAttemptId:e=>Object(i.f)(or.a.GRADEBOOK_ATTEMPT_LOAD,(async()=>{var t;try{const n=await function(e){const{courseId:t,columnId:n}=e;return Object(q.j)(Object(q.f)(nr,e)).then((e=>({courseId:t,columnId:n,attempt:e})))}(e),s=o.includes(null===(t=e.expand)||void 0===t?void 0:t.split(","),"viewUrl");return{...n,viewUrlRequested:s}}catch(e){throw{err:e}}})),clearSubmissionTextWithViewUrlByAttemptId:e=>Object(i.a)(or.a.GRADEBOOK_CLEAR_STUDENT_SUBMISSION_WITH_VIEW_URL_EXPANDED,{attemptId:e}),loadGradebookAttemptsByColumnId:e=>Object(i.f)(or.a.GRADEBOOK_ATTEMPTS_LOAD,(async t=>{try{const t=await function(e){const{courseId:t,columnId:n}=e;return Object(q.j)(Object(q.f)("/v1/courses/%courseId%/gradebook/columns/%columnId%/attempts",e)).then((e=>{const{lookup:s,paging:o}=e,r=[],i=[];return s&&Object.values(s).forEach((e=>{e.forEach((e=>{e.deletedAttempt?i.push(e):r.push(e)}))})),{courseId:t,columnId:n,byGradebookAttemptId:Object(w.E)(r),deletedAttempts:i,paging:o}}))}(e);return{...t}}catch(e){throw{err:e}}})),updateAttemptById:e=>Object(i.f)(or.a.GRADEBOOK_ATTEMPT_UPDATE,(async()=>{try{const t=await async function(e){const{courseId:t,attemptId:n,payload:s}=e,o=Object(q.f)(nr,{courseId:t,attemptId:n}),r=await Object(q.o)(o,s);return r.courseId=t,{attempt:r}}(e);return t}catch(t){throw{err:t,attemptId:e.attemptId}}}),{attemptId:e.attemptId}),assignNewAttemptForPeerReview:e=>Object(i.b)("assignNewAttemptForPeerReview",(async(t,n)=>{try{const n=await sr(e),s={courseId:e.courseId,columnId:e.columnId,gradeId:n.gradeId,reviewableAttemptsOnly:!0};return await t(ir.loadGradebookAttemptsByColumnId(s)),{...n}}catch(e){throw e instanceof Sn||t(Object(i.a)(Object(i.j)(c.a.APP_ERROR),{error:e})),e}})),setGradeAttemptInStore:e=>Object(i.a)(Object(i.j)(or.a.GRADEBOOK_ATTEMPT_UPDATE),{attempt:e})},ar={getGradebookAttemptByAttemptId:(e,t)=>e.gradebookAttempt.byGradebookAttemptId[t],getGradebookAttemptsByColumnId:(e,t,n)=>o.filter(e.gradebookAttempt.byGradebookAttemptId,{courseId:t,columnId:n}),getGradebookAttemptsByUserId:(e,t,n,s)=>o.filter(e.gradebookAttempt.byGradebookAttemptId,{courseId:t,columnId:n,userId:s}),getReviewableGradebookAttempts:(e,t,n,s)=>o.filter(e.gradebookAttempt.byGradebookAttemptId,(e=>e.userId!==s&&e.courseId===t&&e.columnId===n)),getDeletedReviewableGradebookAttempts:(e,t)=>{var n;return null!==(n=e.gradebookAttempt.deletedAttemptsByColumnId[t])&&void 0!==n?n:[]},isLoading:e=>e.gradebookAttempt.isLoading},cr="/v1/courses/%courseId%/gradebook/categories",lr="gradebook-categories.load.by.course.id",dr="gradebook-categories.load.by.id",ur=Object(i.g)({byCourseId:{},byId:{}},{[Object(i.j)(lr)]:(e,t)=>{const{courseId:n,response:s}=t;return Object(r.a)(e,(t=>{t.byCourseId[n]=s.results.map((e=>e.id)),s.results.forEach((n=>{const s=e.byId[n.id];t.byId[n.id]={...Object(i.i)(s,n)}}))}))},[Object(i.j)(dr)]:(e,t)=>{const{response:n}=t;return Object(r.a)(e,(t=>{const s=e.byId[n.id];t.byId[n.id]={...Object(i.i)(s,n)}}))}}),pr={loadGradebookCategoriesByCourseId:e=>Object(i.f)(lr,(async()=>{try{const t=await(async e=>{const t=Object(q.f)(cr,{courseId:e}),{paging:n,permissions:s,results:o}=await Object(q.j)(t);return{results:o,paging:n,permissions:s}})(e);return{courseId:e,response:t}}catch(e){throw{err:e}}}))},br={getGradebookCategoriesByCourseId:(e,t)=>{const n=e.gradebookCategory.byCourseId[t];if(n)return n.map((t=>e.gradebookCategory.byId[t]))},getGradebookCategoryById:(e,t)=>e.gradebookCategory.byId[t]},mr=(e,t)=>{if(!t)return{id:null,view:null};const n=e.views.byCourseId[t.courseId]||{},s=Object.keys(n).find((e=>{const s=n[e],r=o.isEqual(s.query.paging,t.paging),i=o.isEqual(s.query.filter,t.filter),a=o.isEqual(s.query.sort,t.sort);return r&&a&&i}));return{id:s,view:s?n[s]:null}},gr=e=>["views","byCourseId",e.courseId],hr=(e,t,n)=>{const{courseId:s,id:o}=t,r=e.views.byCourseId[s];r&&Object.values(r).forEach((e=>{const t=e.values.some((e=>e===o));(n&&t||!n&&!t)&&(e.isValid=!1)}))},fr=Object(i.g)({byColumnId:{},permissions:{byCourseId:{}},isLoading:!1,views:{byCourseId:{}}},{[Lt.a.GRADEBOOK_COLUMN_LOAD]:i.n,[Object(i.j)(Lt.a.GRADEBOOK_COLUMN_LOAD)]:(e,t)=>{const{gradebookColumn:n}=t,s=Object(r.a)(e,(e=>{if(!n)return;const s={...t.gradebookColumn,api:{isUpdating:!1,isDeleting:!1}};e.byColumnId[n.id]=s}));return Object(i.p)(s,t)},[Object(i.c)(Lt.a.GRADEBOOK_COLUMN_LOAD)]:e=>Object(r.a)(e,(e=>{e.isLoading=!1})),[Object(i.h)(Lt.a.GRADEBOOK_COLUMN_LOAD)]:i.l,[Lt.a.GRADEBOOK_COLUMN_LOAD_MULTIPLE]:i.n,[Object(i.j)(Lt.a.GRADEBOOK_COLUMN_LOAD_MULTIPLE)]:(e,t)=>{const{gradebookColumns:n}=t,s=Object(r.a)(e,(e=>{n&&Object.keys(n).forEach((t=>{const s={...n[t],api:{isUpdating:!1,isDeleting:!1}};e.byColumnId[s.id]=s}))}));return Object(i.p)(s,t)},[Object(i.h)(Lt.a.GRADEBOOK_COLUMN_LOAD_MULTIPLE)]:i.l,[Lt.a.GRADEBOOK_COLUMN_PERSIST]:(e,t)=>{const n=Object(r.a)(e,(e=>{const n=t.nextColumn.id||t.prevColumn&&t.prevColumn.id;if(!n)return;let s=e.byColumnId[n];s||(s={}),s.api||(s.api={}),s.api={isUpdating:!0}}));return Object(i.p)(n,t)},[Object(i.j)(Lt.a.GRADEBOOK_COLUMN_PERSIST)]:(e,t)=>{const n=Object(r.a)(e,(e=>{if(!t.gradebookColumn)return;hr(e,t.gradebookColumn,!1);const n={...t.gradebookColumn,api:{isUpdating:!1,isDeleting:!1}};e.byColumnId[n.id]=n}));return Object(i.p)(n,t)},[Object(i.h)(Lt.a.GRADEBOOK_COLUMN_PERSIST)]:(e,t)=>{const n=Object(r.a)(e,(e=>{const n=t.nextColumn&&t.nextColumn.id||t.prevColumn&&t.prevColumn.id;if(!n)return;const s=e.byColumnId[n];s.api?s.api.isUpdating=!1:s.api={isUpdating:!1}}));return Object(i.l)(n,t)},[Lt.a.GRADEBOOK_COLUMN_RUBRIC_ASSOCIATIONS_DELETE]:i.n,[Object(i.j)(Lt.a.GRADEBOOK_COLUMN_RUBRIC_ASSOCIATIONS_DELETE)]:(e,t)=>{const{gradebookColumn:n}=t;return Object(r.a)(e,(e=>{e.byColumnId[n.id].rubricAssociations=n.rubricAssociations}))},[Object(i.h)(Lt.a.GRADEBOOK_COLUMN_RUBRIC_ASSOCIATIONS_DELETE)]:i.l,[Lt.a.GRADEBOOK_COLUMN_DELETE]:(e,t)=>{const{gradebookColumn:n}=t;return(null==n?void 0:n.id)&&(e=Object(r.a)(e,(e=>{e.byColumnId[n.id]||(e.byColumnId[n.id]={api:{}}),e.byColumnId[n.id].api||(e.byColumnId[n.id].api={}),e.byColumnId[n.id].api.isDeleting=!0}))),e},[Object(i.j)(Lt.a.GRADEBOOK_COLUMN_DELETE)]:(e,t)=>{const{gradebookColumn:n}=t;return(null==n?void 0:n.id)&&(e=Object(r.a)(e,(e=>{const t=e.byColumnId[n.id];t&&(hr(e,t,!0),delete e.byColumnId[n.id])}))),Object(i.p)(e,t)},[Object(i.h)(Lt.a.GRADEBOOK_COLUMN_DELETE)]:(e,t)=>{const{gradebookColumn:n}=t;return(null==n?void 0:n.id)&&(e=Object(r.a)(e,(e=>{e.byColumnId[n.id]||(e.byColumnId[n.id]={api:{}}),e.byColumnId[n.id].api||(e.byColumnId[n.id].api={}),e.byColumnId[n.id].api.isDeleting=!1}))),e},[Object(i.j)(D.a.CONTENT_LOAD)]:(e,t)=>{const n=Object(r.a)(e,(n=>{const{columns:s}=t;Object.values(s||{}).forEach((t=>{const s=e.byColumnId[t.id];n.byColumnId[t.id]={...Object(i.i)(s,t),api:{isUpdating:!1,isDeleting:!1},ui:e.byColumnId[t.id]&&e.byColumnId[t.id].ui}}))}));return Object(i.p)(n,t)},[Object(i.j)(D.a.CONTENT_DELETE)]:(e,t)=>{if(!t.deletedGrades)return e;return Object(r.a)(e,(n=>{t.results.forEach((t=>{const s=Object(o.find)(e.byColumnId,{contentId:t});s&&(hr(n,s,!0),delete n.byColumnId[s.id])}))}))},[Object(i.j)(D.a.CONTENT_DELETE_IN_STORE)]:(e,t)=>Object(r.a)(e,(n=>{const{contentId:s}=t,r=Object(o.find)(e.byColumnId,{contentId:s});r&&(hr(n,r,!0),delete n.byColumnId[r.id])})),[Object(i.j)(D.a.CONTENT_PERSIST)]:(e,t)=>Object(r.a)(e,(n=>{const{columns:s,contents:o}=t;Object.values(s||{}).forEach((t=>{const s=e.byColumnId[t.id];n.byColumnId[t.id]={...Object(i.i)(s,t),api:{isDeleting:!1,isUpdating:!1}}})),Object.values(null!=o?o:{}).forEach((e=>{var t,s;const{title:o,id:r}=null!==(t=e.result)&&void 0!==t?t:e;if(!o)return;const i=null===(s=Object.values(n.byColumnId).find((e=>e.contentId===r)))||void 0===s?void 0:s.id;i&&(n.byColumnId[i].columnName=o,n.byColumnId[i].effectiveColumnName=o,n.byColumnId[i].localizedColumnName&&(n.byColumnId[i].localizedColumnName={...n.byColumnId[i].localizedColumnName,languageKey:o}))}))})),[Lt.a.GRADEBOOK_COLUMNS_LOAD]:Object(i.o)(mr,gr),[Object(i.j)(Lt.a.GRADEBOOK_COLUMNS_LOAD)]:(e,t)=>{const{data:n,query:{courseId:s}}=t;if(!n)return Object(i.p)(e,t);const{results:o,paging:a,permissions:c}=n;return e=Object(r.a)(e,(t=>{o.forEach((n=>{const s=e.byColumnId[n.id];t.byColumnId[n.id]={...Object(i.i)(s,n)}})),t.permissions.byCourseId[s]=c})),Object(i.q)(e,t,{viewResolver:mr,viewsPathResolver:gr,paging:a,values:o.map((e=>e.id))})},[Object(i.h)(Lt.a.GRADEBOOK_COLUMNS_LOAD)]:Object(i.m)(mr,gr)}),Or={loadGradebookColumn:({courseId:e,columnId:t,allowedErrors:n})=>Object(i.f)(Lt.a.GRADEBOOK_COLUMN_LOAD,(async n=>{let s=null;n();try{s=await Kt(e,t)}catch(e){throw{err:e}}return{gradebookColumn:s}}),void 0,n),loadGradebookColumns:({courseId:e,columnIds:t})=>Object(i.f)(Lt.a.GRADEBOOK_COLUMN_LOAD_MULTIPLE,(async n=>(n(),async function(e,t){Object(q.s)($t);const n=[];for(const s of t)n.push(Kt(e,s,{batchKey:$t}));return{gradebookColumns:Object(l.c)(await Promise.all(n))}}(e,t)))),loadGradebookColumnsByCourseId:e=>Object(i.f)(Lt.a.GRADEBOOK_COLUMN_LOAD_MULTIPLE,(async t=>(t(),async function(e){const{results:t}=await Object(q.j)(Object(q.f)(kt,{courseId:e}));return{gradebookColumns:Object(l.c)(t)}}(e)))),loadGradebookColumnByContentId:({courseId:e,contentId:t})=>Object(i.f)(Lt.a.GRADEBOOK_COLUMN_LOAD,(async n=>{let s=null;return n(),s=await Wt({courseId:e,contentId:t}),{gradebookColumn:s}})),loadGradebookColumnsByQuery:e=>async(t,n)=>{const s=!((e,t)=>{const{view:n}=mr(e.gradebookColumn,t);return!n||!n.isLoading&&!n.isValid})(n(),e);if(!s){t(Object(i.a)(Lt.a.GRADEBOOK_COLUMNS_LOAD,{query:e}));try{const n=await Yt(e);t(Object(i.a)(Object(i.j)(Lt.a.GRADEBOOK_COLUMNS_LOAD),{data:n,query:e}))}catch(n){throw t(Object(i.a)(Object(i.h)(Lt.a.GRADEBOOK_COLUMNS_LOAD),{query:e})),t(Object(i.a)(Object(i.j)(c.a.APP_ERROR),{error:n})),{err:n}}}},setGradebookColumnInStore:e=>Object(i.a)(Object(i.j)(Lt.a.GRADEBOOK_COLUMN_LOAD),{gradebookColumn:e}),persistGradebookColumn:(e,t)=>Object(i.f)(Lt.a.GRADEBOOK_COLUMN_PERSIST,(()=>zt(e,t).then((e=>({gradebookColumn:e}))).catch((t=>{throw{prevColumn:e,err:t}}))),{prevColumn:e,nextColumn:t}),postReadyGradesByColumnId:(e,t)=>Object(i.f)(Lt.a.GRADEBOOK_COLUMN_POST_READY_GRADES,(async()=>{try{const n=await async function(e,t){return{postedCount:await Object(q.p)(Object(q.f)(qt,{courseId:e,columnId:t}),{})}}(e,t);return n}catch(e){throw{err:e}}}),null),persistGradebookColumns:(e,t)=>Object(i.b)(Lt.a.GRADEBOOK_COLUMN_PERSIST,(async n=>{e.forEach((e=>{n(Object(i.a)(Lt.a.GRADEBOOK_COLUMN_PERSIST,{prevColumn:e.prevColumn,nextColumn:e.nextColumn}))}));const s=await async function(e,t){Object(q.s)();const n=e.map((e=>zt(e.prevColumn,e.nextColumn,t).then((e=>({isOk:!0,id:null==e?void 0:e.id,result:e})),(t=>{var n;return{isOk:!1,id:null===(n=e.prevColumn)||void 0===n?void 0:n.id,error:t,previous:e.prevColumn}}))));return{columns:Object(l.c)(await Promise.all(n))}}(e,t);return Object.keys(s.columns).forEach((e=>{const t=s.columns[e];t.isOk?n(Object(i.a)(Object(i.j)(Lt.a.GRADEBOOK_COLUMN_PERSIST),{gradebookColumn:t.result})):(n(Object(i.a)(Object(i.h)(Lt.a.GRADEBOOK_COLUMN_PERSIST),{prevColumn:t.previous,err:t.error})),n(Object(i.a)(Object(i.j)(c.a.APP_ERROR),{error:t.error})))})),s})),removeRubricAssociations:e=>Object(i.f)(Lt.a.GRADEBOOK_COLUMN_RUBRIC_ASSOCIATIONS_DELETE,(async t=>{let n=Ir.getGradebookColumnById(t(),e);return n=await function(e,t){const n=Object(q.f)(Ut,{courseId:e,columnId:t});return Object(q.o)(n,{rubricAssociations:[]})}(n.courseId,n.id),{gradebookColumn:n}})),removeGradebookColumnFromStore:e=>Object(i.a)(Object(i.j)(Lt.a.GRADEBOOK_COLUMN_DELETE),{gradebookColumn:{id:e}}),addGradebookColumnToStore:e=>Object(i.a)(Object(i.j)(Lt.a.GRADEBOOK_COLUMN_PERSIST),{gradebookColumn:e}),removeColumn:e=>Object(i.f)(Lt.a.GRADEBOOK_COLUMN_DELETE,(async t=>{const n=Ir.getGradebookColumnById(t(),e);return await function(e,t){const n=Object(q.f)(Bt,{courseId:e,columnId:t,onlyIfEmpty:"false"});return Object(q.r)(n)}(n.courseId,n.id),{gradebookColumn:n}}))},Er=Object(qe.b)(He.a,Ve),yr=Object(qe.b)(He.a,Ke),Ir={getGradebookColumnById:(e,t)=>Object(o.find)(e.gradebookColumn.byColumnId,{id:t}),getGradebookColumnsByIds:(e,t)=>{const n={};return t.forEach((t=>n[t]=e.gradebookColumn.byColumnId[t])),n},getGradebookColumnByContentId:(e,t)=>{const n=Te.getAssessmentByContentId(e,t);return n?e.gradebookColumn.byColumnId[n.gradableItemId]:Object(o.find)(e.gradebookColumn.byColumnId,{contentId:t})},getGradebookColumnsByCourseId:(e,t)=>Object(o.filter)(e.gradebookColumn.byColumnId,{courseId:t}),getGradebookColumnsByQuery:Er(((e,t)=>{const{view:n}=mr(e.gradebookColumn,t);return n&&n.isValid?(n.values||[]).map((t=>e.gradebookColumn.byColumnId[t])):[]}),(e=>e)),isLoading:(e,t)=>{const{view:n}=mr(e.gradebookColumn,t);return n?n.isLoading:e.gradebookColumn.isLoading},getGradebookColumnViewStatusByQuery:yr(((e,t)=>mr(e.gradebookColumn,t)),(({view:e})=>e?{isLoading:e.isLoading,isValid:e.isValid,paging:e.paging}:null))};var Cr=n("ggbH");function vr(e){if(e.localizableTitle){const t=e.localizableTitle.languageKey.replace(/[\W_]+/g,"_").toLowerCase();e.ui={displayTitleKey:`components.services.grade.schema.${t}`}}else e.ui={displayTitle:e.title}}async function Sr(e,t){const n=await Object(a.Uc)(s.d,{courseId:e,schemaId:t});return vr(n),n}async function jr(e,t){const n=t.id;let o;o=n?Object(a.Gd)(s.d,{courseId:e,schemaId:n},t):Object(a.xd)(s.d,{courseId:e},t);const r=await o;return vr(r),r}async function Tr(e,t){return jr(e,t)}async function Ar(e,t){return jr(e,t)}const _r="gradebook-schema.load",Rr="gradebook-schema.load.by.course.id",Nr="gradebook-schema.persist.by.course.id",wr="gradebook-schema.update.by.course.id";function Dr(e,t){const n=t.schema,s=Object(r.a)(e,(e=>{n&&(e.byId[n.id]=n)}));return Object(i.p)(s,t)}const Lr=Object(i.g)({byId:{},isLoading:!1,paging:null,permissions:{createGradingSchemas:!1}},{[_r]:i.n,[Rr]:i.n,[Object(i.j)(_r)]:Dr,[Object(i.j)(Nr)]:Dr,[Object(i.j)(wr)]:Dr,[Object(i.h)(_r)]:i.l,[Object(i.h)(Rr)]:i.l,[Object(i.j)(Rr)]:(e,t)=>{const{byId:n,paging:s,permissions:o}=t,a=Object(r.a)(e,(e=>{for(const t of Object.keys(n||{}))e.byId[t]=n[t];s&&(e.paging=s),o&&(e.permissions=o),e.isLoading=!1}));return Object(i.p)(a,t)},[Object(i.h)(Rr)]:i.l}),Pr={loadGradebookSchema:({courseId:e,schemaId:t})=>Object(i.f)(_r,(async()=>({schema:await Sr(e,t)}))),loadGradebookSchemasByCourseId:({courseId:e,offset:t,limit:n})=>Object(i.f)(Rr,(async()=>await async function(e,t,n){const o=await Object(a.Vc)(s.d,{courseId:e},t||n?{offset:t,limit:n}:void 0),{paging:r,permissions:i,results:c}=o;for(const e of c)vr(e);return{byId:Object(w.E)(c),paging:r,permissions:i}}(e,t,n))),persistGradebookSchema:({courseId:e,schema:t})=>Object(i.f)(Nr,(async()=>({schema:await Tr(e,t)}))),updateGradebookSchema:({courseId:e,schema:t})=>Object(i.f)(wr,(async()=>({schema:await Ar(e,t)})))},kr={areGradebookSchemasLoading:e=>e.gradebookSchema.isLoading,getGradebookSchemaById:(e,t)=>Object(o.find)(e.gradebookSchema.byId,{id:t}),getGradebookSchemasByCourseId:(e,t)=>Object(o.filter)(e.gradebookSchema.byId,{courseId:t}),getGradebookSchemasPaging:e=>e.gradebookSchema.paging},xr="import.group.set",Br="clear.import.group.set",Mr="file.upload.group.set.error",Ur="import.group.members",Gr="clear.import.group.members.status",Fr="file.upload.group.members.error";async function qr(e){const t=Object(q.f)("/v1/courses/%course%/gradebook/columns/%column%/export",{course:e.course,column:e.column});return Object(q.p)(t,e.studentIds,void 0,!1)}function Hr(e,t,n){return Object(a.pc)(s.d,e,t,n)}function Vr(e,t,n){return Object(a.oc)(s.d,e,t,n)}function Kr(e,t){return Object(a.qc)(s.d,e,t)}var $r=n("mRWl"),Wr=n("wF9z");const zr="/v1/courses/%courseId%/groups",Qr=`${zr}/batchUpdate`,Yr=`${zr}?limit=%limit%&expand=studentCount,memberships,permissions,signUpSheet,hasSubmittedGroupAttempt,hasGrades`,Jr=`${zr}?limit=%limit%&expand=studentCount,permissions,groupSet,memberships`,Xr=`${zr}/%groupId%?expand=memberships`;var Zr,ei;async function ti(e){const t=Object(q.f)("/v1/courses/%courseId%/contents/%contentId%/assignedGroups",e),n=(await Object(q.j)(t)).results;return{contentId:e.contentId,groups:Object(w.E)(n)}}async function ni(e){try{const t=Object(q.f)("/public/v2/courses/%courseId%/groups/%groupId%/users/%userId%",{courseId:e.courseId,groupId:e.groupId,userId:e.userId});await Object(q.q)(t,{})}catch(e){throw function(e){var t;switch(null===(t=null==e?void 0:e.error)||void 0===t?void 0:t.code){case jn.GROUP_ENROLLMENT_EXPIRED_ERROR_CODE:return new _n(e.error);case jn.GROUP_IS_FULL_ERROR_CODE:return new Rn(e.error);case jn.TARGET_GROUP_SUBMITTED_ATTEMPT_ERROR_CODE:return new Nn(e.error);case jn.SOURCE_GROUP_SUBMITTED_ATTEMPT_ERROR_CODE:return new wn(e.error);case jn.TARGET_GROUP_GRADE_ERROR_CODE:return new Ln(e.error);case jn.SOURCE_GROUP_GRADE_ERROR_CODE:return new Dn(e.error);default:return e}}(e)}return{userId:e.userId,groupId:e.groupId}}async function si(e){const t=function(e){var t;const{courseId:n,paging:s,filter:o,sort:r}=e;return{...s?{limit:null!==(t=s.limit)&&void 0!==t?t:1e3,offset:s.offset}:{limit:1e3},...o?{...o.groupName?{name:o.groupName}:{},...o.nameOrGroupSetName?{nameOrGroupSetName:o.nameOrGroupSetName}:{},...o.groupNameCompare?{nameCompare:o.groupNameCompare}:{},...null!=o.inGroupSet?{inGroupSet:o.inGroupSet.toString()}:{}}:{},...r&&r.length?{sort:Object(q.e)(r)}:{},courseId:n,includeCount:"true"}}(e),{results:n,paging:s,permissions:o}=await Object(q.j)(Object(q.f)(Jr,t));return{groups:Object(w.E)(n),groupIds:n.map((e=>e.id)),paging:s,permissions:o}}async function oi(e,t,n){return Object(a.Oc)(s.d,e,t,n)}!function(e){e.equals="equals",e.notEquals="notEquals",e.contains="contains",e.notContains="notContains",e.startsWith="startsWith"}(Zr||(Zr={})),function(e){e.Title="title"}(ei||(ei={}));n("ICWc"),n("71td"),n("JD9L"),n("4qjI");const ri="fnds.context";function ii(e){return e.refreshToken&&e.refreshTokenExpiresAt&&e.accessToken&&e.expiresAt}function ai(){if(s.c.foundationsToken&&ii(s.c.foundationsToken))return s.c.foundationsToken;const e=function(){const e=sessionStorage.getItem(ri);return e?JSON.parse(atob(e)):null}();return e&&ii(e)?e:null}function ci(e){const t={accessToken:e.accessToken,refreshToken:e.refreshToken,refreshTokenExpiresAt:e.refreshTokenExpiresAt,expiresAt:e.expiresAt},n={...s.c,foundationsToken:t};var o;return Object(s.b)({...s.a,foundationsApiSession:n}),o=t,sessionStorage.setItem(ri,btoa(JSON.stringify(o))),n}const li={fetchFoundationsContext:async function(){const e=Date.now()/1e3,t=s.c.foundationsTokenContext;if(!t||t.expiresAt<e){return function(e){const t={};e.capabilities.forEach((e=>{t[e.capability]={region:e.region,stage:e.stage}}));const n={...s.c,foundationsTokenContext:{tenantId:e.tenantId,personId:e.personId,capabilities:t,expiresAt:e.expiresAt}};return Object(s.b)({...s.a,foundationsApiSession:n}),n}(await Object(a.bd)(s.d))}return s.c},fetchFoundationsToken:async function(){const e=Date.now()/1e3,t=ai();if(t&&ii(t)){if(t.expiresAt>e+300)return ci(t);if(t.refreshTokenExpiresAt>e)try{return ci(await Object(a.dd)(s.d,{refreshToken:t.refreshToken}))}catch(e){}}return ci(await Object(a.cd)(s.d))}};n("pQKg");const di=async(e,t)=>Object(a.Ad)(s.d,{courseId:e},t);async function ui(e,t){return Object(a.td)(s.d,e,t)}const pi="/v1/courses/%courseId%/groupsets",bi=`${pi}?expand=studentCount,groupCount,permissions,signUpSheet,hasAssociatedContent&sort=%sort%,id(desc)&limit=%limit%&offset=%offset%`,mi=`${pi}?expand=groupCount&fields=groupCount&limit=%limit%`,gi=`${pi}/%groupSetId%`,hi=`${gi}?expand=permissions,signUpSheet,hasAssociatedContent`,fi=`${gi}/groups?sort=%sort%&limit=%limit%`,Oi=`${gi}/groups?expand=memberships&fields=memberships,id&limit=%limit%`,Ei=`${pi}?fields=id,title,isAvailable&limit=%limit%`,yi=`${gi}/groups?expand=studentCount&fields=id,studentCount&limit=%limit%`,Ii=1e3,Ci=1e3;var vi;async function Si(e,t=1e3){const{results:n,paging:s,permissions:o}=await Object(q.j)(Object(q.f)(Ei,{courseId:e,limit:t}));return{groupSets:Object(l.c)(n),paging:s,permissions:o}}async function ji(e){const t=function(e){var t;const{courseId:n,paging:s}=e,o=s?{limit:null!==(t=s.limit)&&void 0!==t?t:1e3,offset:0}:{limit:1e3,offset:0};return{sort:a.bc.TITLE_ASC,...o,courseId:n,includeCount:"true"}}(e),{results:n,paging:s,permissions:o}=await Object(q.j)(Object(q.f)(bi,t));return{groupSets:{byId:Object(l.c)(n)},paging:s,permissions:o}}async function Ti(e,t={}){const{sort:n=a.bc.TITLE_ASC,limit:s=Ii,offset:o=0}=t,{results:r,paging:i,permissions:c}=await Object(q.j)(Object(q.f)(bi,{courseId:e,sort:n,limit:s,offset:o}));return{groupSets:{byId:Object(l.c)(r)},paging:i,permissions:c}}!function(e){e.Title="title"}(vi||(vi={}));const Ai="/v1/brands";async function _i(e){return Di({},await Object(q.j)(`/v1/brands/${e}`))}async function Ri(e){return Di({},await Object(q.p)("/v1/brands",{...e}))}async function Ni(e,t){return Di({},await Object(q.q)(`/v1/brands/${e}`,{...t}))}async function wi(e){return Object(q.r)(`/v1/brands/${e}`)}function Di(e,t){const{ultraBranding:n,brandAssociations:s}=t,o=n.id;var r;return e.institutionBrands||(e.institutionBrands={byId:{}}),e.brandAssociations||(e.brandAssociations={byId:{}}),e.institutionRoles||(e.institutionRoles={}),e.institutionBrands.byId[o]=(r=n,{...r,id:r.id}),s.forEach((t=>{const{institutionRole:n,hostName:s}=t,r={id:t.id,brandId:o};s&&(r.hostName=s),n&&(e.institutionRoles[n.roleId]={...n,id:n.roleId},r.institutionRoleId=n.roleId),e.brandAssociations.byId[t.id]=r})),e}const Li="/v1/roles/institutionRoles";const Pi="evaluateMathML";async function ki(e,t,n,s){try{return await Object(q.p)(Object(q.f)("/v1/courses/%courseId%/mathEditor/v3/evaluateMathML",{courseId:e}),{mathML:t,variables:n,ident:s},{batchKey:Pi})}catch(e){throw function(e,t){switch(e.error.message){case"Invalid MathML":return new kn(t,e.error);case"Invalid Variable":return new xn(t,e.error);default:return e}}(e,s)}}async function xi(e,t){Object(q.s)(Pi);const n=t.map((({mathML:t,variables:n,ident:s})=>ki(e,t,n,s)));return(await Promise.allSettled(n)).map((e=>"rejected"===e.status?e.reason:e.value))}async function Bi(e){const t=await Object(q.j)(Object(q.f)("/public/v1/oauth2/tokeninfo",{access_token:e}));return{userId:t.user_id,applicationId:t.application_id,scope:t.scope}}function Mi(){return Object(a.wd)(s.d)}async function Ui(e){return z({fileType:"audio",fileName:"audio_file",file:e})}const Gi="/v1/courses/%courseId%/questionAnalysis";function Fi(e,t,n){const s={courseId:e,assessmentId:t};return Object(q.j)(Object(q.f)("/v1/courses/%courseId%/questionAnalysis/assessments/%assessmentId%",s),n).then((t=>{if(null==t.analysisReportDetails)return null;const n=Vi(t,e),s=null!=t.questionDetailsList?Ki(t):[];return{reports:Object(w.E)([n]),questionDetails:Object(w.E)(s)}}))}const qi="fetchMultipleReports";const Hi=(e,t)=>{const n={courseId:e,analysisId:t};return Object(q.p)(Object(q.f)("/v1/courses/%courseId%/questionAnalysis/%analysisId%/prepareDownload",n),{})};function Vi(e,t){return{analysisReportDetails:e.analysisReportDetails,assessmentId:e.analysisReportDetails.assessmentId,courseId:t,id:e.analysisReportDetails.analysisId,summaryStatsDetails:e.summaryStatsDetails}}function Ki(e){return e.questionDetailsList.map((e=>({...e,id:e.questionId})))}var $i=n("fN3Q"),Wi=n("zSoH");const zi="/v1/courses/%courseId%/assessments/%assessmentId%/questions",Qi=zi,Yi=zi+"/%questionId%",Ji="sourceInfo,usageCount",Xi=zi+"/%questionBlockId%/questions",Zi=Xi+"/%questionId%",ea=`${zi}/copy`,ta=`${ea}/queued`;async function na(e){let t,n={};return e.useSearch?(t=new a.xb({courseId:e.courseId}).withExpand("question.alignedGoals","question.usageCount").withSession(s.d),await async function(e,t){if(t.paging&&e.withPaging(t.paging),t.filter){const n={},{assessmentIds:s,categoryIds:o,excludeAssessmentIds:r,keywords:i,questionTypes:a}=t.filter;s&&s.length>0&&(n.assessmentIds=s),o&&o.length>0&&(n.categoryIds=o),r&&r.length>0&&(n.excludeAssessmentIds=r),i&&i.length>0&&(n.q=pa(i)),a&&a.length>0&&(n.questionTypes=a),Object.keys(n).length>0&&e.withQueryParams(n)}const{paging:n,permissions:s,results:o}=await Object(a.Wc)(e);return{paging:n,permissions:s,questions:Object(l.c)(o.map((e=>(ma(e.question),{...e.question,assessmentId:e.assessmentId,courseId:t.courseId})))),results:o}}(t,e).then((e=>n={...e}))):e.assessmentId&&(t=new a.wb({assessmentId:e.assessmentId,courseId:e.courseId}).withSession(s.d),await async function(e,t){const{paging:n,permissions:s,results:o}=await Object(a.Wc)(e);return{paging:n,permissions:s,questions:Object(l.c)(o.map((e=>(ma(e),{...e,assessmentId:t.assessmentId,courseId:t.courseId})))),results:o}}(t,e).then((e=>n={...e}))),{paging:n.paging,permissions:n.permissions,questionIds:Object.keys(n.questions),questions:n.questions}}async function sa(e,t,n){let s=Object(q.f)(Yi,{...n,questionId:t.id});if(null==e||null==e.id||0===e.id.indexOf(l.a)){s=Object(q.f)(Qi,n),delete t.position;const e=await Object(q.p)(s,t);return ma(e),e}const r=Object(q.i)(e,t);if(o.isEmpty(r))return e;const i=await Object(q.o)(s,{...r,id:t.id,questionType:t.questionType});return ma(i),i}async function oa(e,t){const n=[];return Object(q.s)(),e.forEach((e=>{const s=function(e,t){const n=Object(q.f)(Zi,{...t,questionId:e,expand:Ji});return Object(q.q)(n,{}).then((e=>Sa(e,t.courseId)))}(e,t).then((t=>({isOk:!0,id:e,result:t}))).catch((t=>({isOk:!1,id:e,error:{status:t.status}})));n.push(s)})),{results:await Promise.all(n),questionBlockId:t.questionBlockId}}function ra(e,t,n,s){const r=Object(q.f)(Xi,{courseId:e,assessmentId:t,questionBlockId:n,expand:Ji});return Object(q.p)(r,function(e,t){const n=ia(null==t?void 0:t.searchCriteria,e);return{...!o.isEmpty(t.questionIds)&&{questionIds:t.questionIds},...!o.isEmpty(t.excludeIds)&&{excludeIds:t.excludeIds},...null!=t.selectAll&&{selectAll:t.selectAll},searchCriteria:n}}(t,s))}function ia(e,t){const n=!e||o.isEmpty(e.questionTypes);return{...e,excludeAssessmentIds:[t],...n?{questionTypes:Wi.a}:{}}}async function aa(e,t){var n;const s=Object(q.f)(Yi,{...t,questionId:e.id});return 0===(null===(n=null==e?void 0:e.id)||void 0===n?void 0:n.indexOf(l.a))?e:Object(q.r)(s)}async function ca(e,t){Object(q.s)();const n=e.map((async e=>await(async(e,t)=>aa(e,t).then((()=>({isOk:!0,id:e.id}))).catch((t=>({isOk:!1,id:e.id,...t}))))(e,t)));return{results:Object(l.c)(await Promise.all(n))}}function la(e){const t=Object(q.f)(ea,{courseId:e.courseId,assessmentId:e.assessmentId});return Object(q.p)(t,ua(e))}function da(e){const t=Object(q.f)(ta,{courseId:e.courseId,assessmentId:e.assessmentId});return Object(q.p)(t,ua(e))}function ua(e){return{questionSelectionDetails:{...!o.isEmpty(e.questionIds)&&{questionIds:e.questionIds},...!o.isEmpty(e.excludeIds)&&{excludeIds:e.excludeIds},...null!=e.selectAll&&{selectAll:e.selectAll},...!o.isEmpty(e.searchCriteria)&&{searchCriteria:e.searchCriteria}},positionAfter:e.positionAfter,usePointsFromSource:!0,defaultPointValue:10}}const pa=e=>e.map((e=>`"${e}"`)).join(" OR ");function ba(e){return na({courseId:e.courseId,filter:{assessmentIds:e.assessmentIds,categoryIds:e.categoryIds,excludeAssessmentIds:e.excludeAssessmentIds,keywords:e.q,questionTypes:e.questionTypes},paging:{offset:e.offset,limit:100},useSearch:!0})}function ma(e){a.Qb.Matching===(null==e?void 0:e.questionType)&&e.answers.forEach((e=>{e.ui&&e.ui.id||(e.ui={...e.ui,id:$i.v4()})}))}function ga(e,t,n,s=10){const o={id:l.a+$i.v4(),assessmentId:e,questionType:n,position:1,positionAfter:t,api:{isUpdating:!1,isDeleting:!1}};return n!==a.Qb.QuestionBlock?{...o,correctResponseFeedback:{rawText:""},incorrectResponseFeedback:{rawText:""},points:s,questionText:{rawText:""}}:o}function ha(e,t,n){return{...ga(e,t,n),answer:!0,answerType:a.hc.TrueFalse}}function fa(e,t,n){return{...ga(e,t,n),answers:[],setPointsOnAnswers:!1}}function Oa(e,t,n){const s=ga(e,t,n),{answers:o,prompts:r}=function(){const e=[Wi.b.createMatchingAnswer(),Wi.b.createMatchingAnswer(!0)];return{prompts:[Wi.b.createMatchingPrompt(0)],answers:e}}();return{...s,answers:o,numberType:a.Fb.LetterUpper,prompts:r,showAnswersInRandomOrder:!0}}function Ea(e,t,n){const s=ga(e,t,n),o=[Wi.b.createMultipleAnswerAnswer(!1),Wi.b.createMultipleAnswerAnswer(!1),Wi.b.createMultipleAnswerAnswer(!1),Wi.b.createMultipleAnswerAnswer(!1)];return{...s,answers:o,answersCount:o.length,singleCorrectAnswer:!0}}function ya(e,t,n){return{...ga(e,t,n),answerFormula:"",answerScale:0,correctAnswerFormat:a.m.Normal,correctAnswerTolerance:{type:a.o.Numeric,value:0},correctAnswerPrecision:a.n.Decimal,displayFormulaToStudent:!1,displayRoundingSettingsToStudent:!1,mathMLImageAltText:"",mathMLImageURL:"",partialCreditPointsPercent:0,partialCreditTolerance:{type:a.o.Numeric,value:0},units:{unitPointsPercent:0,unitsCaseSensitive:!1,unitsRequired:!1,unitValue:""},variableDefinitions:[],variableSets:[],variableSetCount:10}}function Ia(e,t,n){return{...ga(e,t,n),answerValue:0,toleranceValue:0}}function Ca(e,t,n,s){const o=ga(e,t,n),r=s&&s.questionIds?s.questionIds:void 0,i=s&&s.questionCount,a=s&&s.selectAll,c=s&&s.searchCriteria,l=s&&s.excludeIds?s.excludeIds:void 0;return{...o,numOfAvailableQuestions:i,numOfQuestionsToChoose:i,pointsPerQuestion:10,questionSelectionDetails:{questionIds:r,selectAll:a,searchCriteria:ia(c,e),excludeIds:l}}}function va(e,t,n){const s=e.map((e=>Sa(e,t,n)));return Object(l.c)(s)}function Sa(e,t,n){var s;return e.assessmentId=n||(null===(s=e.sourceInfo)||void 0===s?void 0:s.id),e.courseId=t,ma(e),e}async function ja(e,t){const n=Object(q.f)(`${zi}/parseFIBQuestion`,t);return Object(q.p)(n,{questionText:e})}const Ta=()=>Object(a.nd)(s.d),Aa=()=>Object(a.ud)(s.d);var _a=n("wgY5"),Ra=n.n(_a),Na=n("+Twb");const wa=/bbcswebdav/;async function Da(e="<body></body>",t,n={}){const s=new FormData,o=Object(Na.b)(Object(Na.d)(e)),r=new Blob([o],{type:"text/html"});return s.append("file",r,t||`UNSAFE_HTML_${Ra()().utc().format("YYYYMMDDHHmmss")}.html`),Object(q.p)(Object(q.f)("/v1/files?expand=mimeType",n),s)}async function La(e){if(!function(e){return Object(q.l)(e)===Object(q.m)()&&wa.test(e)}(e))throw Error(`Unsafe HTML URL ${e} is invalid.`);let t;try{t=await fetch(e,{credentials:"include",method:"GET"})}catch(t){throw Error(`Failed to get unsafe HTML at ${e} with error: ${t}`)}if(t.status!==a.S.Ok)throw Error(`Failed to get unsafe HTML at ${e} with status ${t.status}.`);return Object(Na.a)(await t.text())}const Pa="/v1/themes";const ka="/v1/ultra-ui/ultrasettings";n("Brcr");const xa="/public/v1/pronouns";async function Ba(e){try{return await Object(q.p)(xa,e)}catch(e){throw(null===(n=null==(t=e)?void 0:t.error)||void 0===n?void 0:n.status)===a.S.BadRequest&&Object(o.includes)(null===(s=null==t?void 0:t.error)||void 0===s?void 0:s.code,a.ic)?new Un(t.error):t}var t,n,s}const Ma=Object(i.g)({byCourseId:{},isLoading:!1},{[xr]:i.n,[Object(i.j)(xr)]:(e,t)=>{const n=Object(r.a)(e,(e=>{e.byCourseId[t.courseId]={responseStatus:"SUCCESS"}}));return Object(i.p)(n,t)},[Object(i.h)(xr)]:(e,t)=>{const n=Object(r.a)(e,(e=>{e.byCourseId[t.courseId]={responseStatus:"ERROR",responseCode:t.err.body.code}}));return Object(i.l)(n,t)},[Object(i.j)(Br)]:(e,t)=>{const n=Object(r.a)(e,(e=>{e.byCourseId[t.courseId]={responseStatus:"NONE",responseCode:void 0}}));return Object(i.p)(n,t)},[Object(i.h)(Mr)]:(e,t)=>{const n=Object(r.a)(e,(e=>{e.byCourseId[t.courseId]={responseStatus:"ERROR"}}));return Object(i.l)(n,t)}}),Ua={importGroupSet:(e,t)=>Object(i.f)(xr,(async()=>{try{return await ui(e,t),{courseId:e}}catch(t){throw{err:t,courseId:e}}})),clearImportGroupSetStatus:e=>Object(i.a)(Object(i.j)(Br),{courseId:e}),setFileUploadGroupSetError:(e,t)=>Object(i.a)(Object(i.h)(Mr),{courseId:e,error:t})},Ga=Object(i.g)({byCourseId:{},isLoading:!1},{[Ur]:i.n,[Object(i.j)(Ur)]:(e,t)=>{const n=Object(r.a)(e,(e=>{e.byCourseId[t.courseId]={responseStatus:"SUCCESS"}}));return Object(i.p)(n,t)},[Object(i.h)(Ur)]:(e,t)=>{const n=Object(r.a)(e,(e=>{e.byCourseId[t.courseId]={responseStatus:"ERROR",responseCode:t.err.body.code}}));return Object(i.l)(n,t)},[Object(i.j)(Gr)]:(e,t)=>{const n=Object(r.a)(e,(e=>{e.byCourseId[t.courseId]={responseStatus:"NONE",responseCode:void 0}}));return Object(i.p)(n,t)},[Object(i.h)(Fr)]:(e,t)=>{const n=Object(r.a)(e,(e=>{e.byCourseId[t.courseId]={responseStatus:"ERROR"}}));return Object(i.l)(n,t)}}),Fa={importGroupMembers:(e,t)=>Object(i.f)(Ur,(async()=>{try{return await ui(e,t),{courseId:e}}catch(t){throw{err:t,courseId:e}}})),clearImportGroupMembersStatus:e=>Object(i.a)(Object(i.j)(Gr),{courseId:e}),setFileUploadGroupMembersError:(e,t)=>Object(i.a)(Object(i.h)(Fr),{courseId:e,error:t})},qa="export.group.set",Ha="clear.export.group.set.status",Va="get.exported.files",Ka="delete.exported.file",$a=Object(i.g)({byCourseId:{},isLoading:!1},{[qa]:i.n,[Object(i.j)(qa)]:(e,t)=>{const n=Object(r.a)(e,(e=>{e.byCourseId[t.courseId]={byGroupSetId:{},responseStatus:"SUCCESS",ui:{source:t.source}}}));return Object(i.p)(n,t)},[Object(i.h)(qa)]:(e,t)=>{const n=Object(r.a)(e,(e=>{e.byCourseId[t.courseId]={byGroupSetId:{},responseStatus:"ERROR",ui:{source:t.source}}}));return Object(i.l)(n,t)},[Object(i.j)(Ha)]:(e,t)=>{const n=Object(r.a)(e,(e=>{e.byCourseId[t.courseId]={byGroupSetId:{},responseStatus:"NONE",ui:{source:t.source}}}));return Object(i.p)(n,t)},[Va]:i.n,[Object(i.j)(Va)]:(e,t)=>{const n=Object(r.a)(e,(e=>{e.byCourseId[t.courseId]||(e.byCourseId[t.courseId]={byGroupSetId:{}}),e.byCourseId[t.courseId].byGroupSetId[t.groupSetId]={files:t.payload.results,paging:t.payload.paging}}));return Object(i.p)(n,t)},[Object(i.h)(Va)]:i.l,[Ka]:i.n,[Object(i.j)(Ka)]:i.p,[Object(i.h)(Ka)]:i.l}),Wa={exportGroupSet:(e,t,n,o)=>Object(i.f)(qa,(async()=>{try{return await async function(e,t,n){return Object(a.Pc)(s.d,e,t,n)}(e,t,n),{courseId:e,groupSetId:t,source:o}}catch(n){throw{err:n,courseId:e,groupSetId:t,source:o}}})),clearExportGroupSetStatus:e=>Object(i.a)(Object(i.j)(Ha),{courseId:e}),getExportedFiles:(e,t,n)=>Object(i.f)(Va,(async()=>{try{const o=await async function(e,t,n){return Object(a.id)(s.d,e,t,n)}(e,t,n);return{courseId:e,groupSetId:t,payload:o}}catch(n){throw{err:n,courseId:e,groupSetId:t}}})),deleteFile:(e,t,n)=>Object(i.f)(Ka,(async()=>{try{await async function(e,t,n){return Object(a.Nc)(s.d,e,t,n)}(e,t,n)}catch(e){throw{err:e}}}))};var za=n("YdFf");const Qa="group.sets.load",Ya="group.sets.load.by.query",Ja="group.sets.load.more",Xa="group.set.add",Za="group.set.modify",ec="group.set.remove",tc="group.set.mark.as.old",nc="group.set.load",sc="get.group.and.set.count",oc="group.workspace.reset.count",rc={groupSets:{byId:{},byCourseId:{}},permissions:{},paging:{count:0},status:{isLoading:!1,loadingGroupSetIds:[]},totalGroupCount:0,lastGroupSetId:"",ui:{newGroupSetIds:[]},views:{byCourseId:{}}},ic=(e,t)=>{var n;if(!t)return{id:null,view:null};const s=(null===(n=e.views)||void 0===n?void 0:n.byCourseId[t.courseId])||{},r=Object.keys(s).find((e=>{const n=s[e];return o.isEqual(n.query.paging,t.paging)}));return{id:r,view:r?s[r]:null}},ac=e=>["views","byCourseId",e.courseId],cc=(e,t)=>{const n=e.loadingGroupSetIds.filter((e=>e!==t.groupSetId));return{...e,loadingGroupSetIds:n}},lc=Object(i.g)(rc.groupSets,{[Object(i.j)(nc)]:(e,t)=>Object(r.a)(e,(e=>{e.byId[t.groupSetId]={...e.byId[t.groupSetId],...t.groupSet}})),[Object(i.j)(Qa)]:(e,t)=>Object(r.a)(e,(e=>{var n;e.byId=t.groupSets.byId;const s=null!==(n=e.byCourseId[t.courseId])&&void 0!==n?n:[];e.byCourseId[t.courseId]=[...new Set([...Object.keys(t.groupSets.byId),...s])]})),[Object(i.j)(Ja)]:(e,t)=>Object(r.a)(e,(e=>{var n;o.merge(e.byId,t.groupSets.byId);const s=null!==(n=e.byCourseId[t.courseId])&&void 0!==n?n:[];e.byCourseId[t.courseId]=[...new Set([...s,...Object.keys(t.groupSets.byId)])]})),[Object(i.j)(Xa)]:(e,t)=>Object(r.a)(e,(e=>{var n;const{groupSet:s,courseId:o}=t;e.byId[s.id]=s;const r=null!==(n=e.byCourseId[o])&&void 0!==n?n:[];e.byCourseId[o]=[...new Set([...r,s.id])]})),[Za]:(e,t)=>Object(r.a)(e,(e=>{const n=t.groupSet.id;e.byId[n]||(e.byId[n]={}),e.byId[n].api||(e.byId[n].api={}),e.byId[n].api.isUpdating=!0})),[Object(i.j)(Za)]:(e,t)=>Object(r.a)(e,(e=>{const n=t.groupSet.id;e.byId[n]=t.groupSet,e.byId[n]||(e.byId[n]={}),e.byId[n].api||(e.byId[n].api={}),e.byId[n].api.isUpdating=!1})),[Object(i.h)(Za)]:(e,t)=>Object(r.a)(e,(e=>{const n=t.groupSet.id;e.byId[n]||(e.byId[n]={}),e.byId[n].api||(e.byId[n].api={}),e.byId[n].api.isUpdating=!1})),[Object(i.j)(ec)]:(e,t)=>Object(r.a)(e,(e=>{const{groupSetId:n,courseId:s}=t;delete e.byId[t.groupSetId],e.byCourseId[s]=e.byCourseId[s].filter((e=>e!==n))})),[Object(i.j)(za.a.GROUPS_ADD)]:(e,t)=>{var n;const s=null!==(n=e.byId[t.groupSetId].groupCount)&&void 0!==n?n:0;return Object(r.a)(e,(e=>{e.byId[t.groupSetId].groupCount=s+t.addedCourseGroupIds.length}))},[Object(i.j)(za.a.GROUPS_LOAD_BY_QUERY)]:(e,t)=>Object(r.a)(e,(e=>{const n=[...Object.values(t.data.groups).map((e=>(e.groupSet.permissions=e.permissions,e.groupSet))),...Object.values(e.byId)];e.byId=Object(w.E)(n)})),[Object(i.j)(za.a.GROUP_DELETE_BATCH)]:(e,t)=>{var n,s;const o=t.groupSetId||(null===(s=null===(n=t.deletedGroups)||void 0===n?void 0:n[0])||void 0===s?void 0:s.groupSetId),i=e.byId[o];if(o&&i){const n=i.groupCount||0;return Object(r.a)(e,(e=>{e.byId[o].groupCount=n-t.deletedGroups.length}))}return e},[Object(i.j)(za.a.GROUP_STUDENT_COUNT_LOAD)]:(e,t)=>Object(r.a)(e,(e=>{e.byId[t.groupSetId]||(e.byId[t.groupSetId]={}),e.byId[t.groupSetId].studentCount=t.groupSetStudentCount}))}),dc=Object(i.g)(rc.status,{[Qa]:i.n,[nc]:(e,t)=>{const n=e.loadingGroupSetIds.concat(t.groupSetId);return{...e,loadingGroupSetIds:n}},[Object(i.j)(Qa)]:i.p,[Object(i.j)(nc)]:cc,[Object(i.h)(Qa)]:i.l,[Object(i.h)(nc)]:cc,[Object(i.j)(Ja)]:i.p,[za.a.GROUPS_LOAD]:(e,t)=>{const n=e.loadingGroupSetIds.concat(t.groupSetId);return{...e,loadingGroupSetIds:n}},[Object(i.j)(za.a.GROUPS_LOAD)]:cc,[Object(i.h)(za.a.GROUPS_LOAD)]:cc}),uc=Object(i.g)(rc.permissions,{[Object(i.j)(Qa)]:(e,t)=>Object(r.a)(e,(e=>({...e,...t.permissions}))),[Object(i.h)(Qa)]:(e,t)=>({}),[Object(i.j)(sc)]:(e,t)=>Object(r.a)(e,(e=>({...e,...t.permissions}))),[Object(i.h)(sc)]:(e,t)=>({})}),pc=Object(i.g)(rc.paging,{[Object(i.j)(Qa)]:(e,t)=>t.paging,[Object(i.j)(Ja)]:(e,t)=>t.paging,[Object(i.j)(Xa)]:(e,t)=>Object(r.a)(e,(e=>{e.count+=1})),[Object(i.j)(ec)]:(e,t)=>Object(r.a)(e,(e=>{e.count-=1})),[Object(i.j)(sc)]:(e,t)=>t.paging,[Object(i.h)(Qa)]:(e,t)=>rc.paging,[oc]:(e,t)=>rc.paging}),bc=Object(i.g)(rc.totalGroupCount,{[Object(i.j)(sc)]:(e,t)=>t.results.map((e=>e.groupCount)).reduce(((e,t)=>e+t),0),[Object(i.j)(ec)]:(e,t)=>e-t.groupCount,[Object(i.j)(za.a.GROUPS_ADD)]:(e,t)=>e+t.addedCourseGroupIds.length,[Object(i.j)(za.a.GROUPS_UPDATE)]:(e,t)=>e,[Object(i.j)(za.a.GROUP_DELETE_BATCH)]:(e,t)=>{var n,s;return t.groupSetId||(null===(s=null===(n=t.deletedGroups)||void 0===n?void 0:n[0])||void 0===s?void 0:s.groupSetId)?e-t.deletedGroups.length:e},[oc]:(e,t)=>rc.totalGroupCount}),mc=Object(i.g)(rc.lastGroupSetId,{[Object(i.j)(Xa)]:(e,t)=>t.groupSet.id,[Object(i.j)(Za)]:(e,t)=>t.groupSet.id}),gc=Object(i.g)(rc.ui,{[Object(i.j)(Xa)]:(e,t)=>{const n=t.groupSet.id;return-1===e.newGroupSetIds.indexOf(n)?Object(r.a)(e,(t=>{t.newGroupSetIds=[...e.newGroupSetIds,n]})):e},[Object(i.j)(Za)]:(e,t)=>{const n=t.groupSet.id;return-1===e.newGroupSetIds.indexOf(n)?Object(r.a)(e,(t=>{t.newGroupSetIds=[...e.newGroupSetIds,n]})):e},[tc]:(e,t)=>Object(r.a)(e,(n=>{n.newGroupSetIds=e.newGroupSetIds.filter((e=>e!==t.groupSetId))}))}),hc=Object(i.g)(rc,{[Ya]:Object(i.o)(ic,ac),[Object(i.j)(Ya)]:(e,t)=>{const{data:n}=t;if(!n)return Object(i.p)(e,t);const{groupSets:s,paging:o}=n;return e=((e,t)=>{const{groupSets:n}=t;return Object(r.a)(e,(e=>{const t=Object.values(n.byId),s=[...Object.values(e.groupSets.byId),...t];e.groupSets.byId=Object(w.E)(s)}))})(e,n),Object(i.q)(e,t,{viewResolver:ic,viewsPathResolver:ac,paging:o,values:Object.keys(s.byId)})},[Object(i.h)(Ya)]:Object(i.m)(ic,ac)}),fc=Object(i.d)({groupSets:lc,permissions:uc,paging:pc,status:dc,totalGroupCount:bc,lastGroupSetId:mc,ui:gc}),Oc=Object(i.k)(hc,fc,rc),Ec={loadGroupSetsByQuery:e=>Object(i.f)(Ya,(async()=>{try{return{data:await ji(e),query:e}}catch(t){throw{err:t,query:e}}}),{query:e}),loadGroupSets:(e,t,n=!1)=>Object(i.b)(Qa,(async(s,o)=>{if(!yc.isLoading(o()))try{s(Object(i.a)(Qa));const o=await Ti(e,t);s(n?Object(i.a)(Object(i.j)(Ja),{...o,courseId:e}):Object(i.a)(Object(i.j)(Qa),{...o,courseId:e}))}catch(e){s(Object(i.a)(Object(i.h)(Qa),{err:e})),s(Object(i.a)(Object(i.j)(c.a.APP_ERROR),{error:e}))}})),loadGroupSetById:(e,t)=>Object(i.b)(nc,(async(n,s)=>{if(!yc.isLoading(s(),t))try{n(Object(i.a)(nc,{groupSetId:t}));const s=await async function(e,t){return{groupSet:await Object(q.j)(Object(q.f)(hi,{courseId:e,groupSetId:t}))}}(e,t);n(Object(i.a)(Object(i.j)(nc),{...s,groupSetId:t}))}catch(e){n(Object(i.a)(Object(i.h)(nc),{groupSetId:t,err:e})),n(Object(i.a)(Object(i.j)(c.a.APP_ERROR),{error:e}))}})),saveGroupSet:(e,t)=>Object(i.f)(t.id?Za:Xa,(async()=>{try{const n=t.id&&"permissions,groupCount,studentCount,hasAssociatedContent",s=await async function(e,t,n="permissions"){return t.id?await Object(q.o)(Object(q.f)(`${gi}?expand=%expand%`,{courseId:e,groupSetId:t.id,expand:n}),t):await Object(q.p)(Object(q.f)(`${pi}?expand=%expand%`,{courseId:e,expand:n}),t)}(e,t,n);return{groupSet:s,courseId:e}}catch(e){throw{groupSet:t,err:e}}}),{groupSet:t}),removeGroupSet:(e,t)=>Object(i.f)(ec,(async n=>{try{return await((e,t)=>Object(q.r)(Object(q.f)(gi,{courseId:e,groupSetId:t})))(e,t),{groupSetId:t,groupCount:yc.getGroupsCountByGroupSetId(n(),t),courseId:e}}catch(e){throw{err:e}}})),getGroupAndSetCount:e=>Object(i.f)(sc,(async()=>{try{const t=await async function(e,t=1e3){const{results:n,paging:s,permissions:o}=await Object(q.j)(Object(q.f)(mi,{courseId:e,limit:t}));return{results:n,paging:s,permissions:o}}(e);return{...t}}catch(e){throw{err:e}}})),markAsOld:e=>Object(i.a)(tc,{groupSetId:e}),reset:()=>Object(i.a)(oc)},yc={getGroupsSetsByQuery:(e,t)=>{const{view:n}=ic(e.groupWorkspace,t);return n?(n.values||[]).map((t=>e.groupWorkspace.groupSets.byId[t])):[]},getCourseGroupSetsViewStatusByQuery:(e,t)=>{const{view:n}=ic(e.groupWorkspace,t);return n?{isLoading:n.isLoading,isValid:n.isValid,paging:n.paging}:null},getLastCreatedGroupSetId:e=>e.groupWorkspace.lastGroupSetId,getGroupSetById:(e,t)=>t&&e.groupWorkspace.groupSets.byId.hasOwnProperty(t)?e.groupWorkspace.groupSets.byId[t]:null,getGroupsCountByGroupSetId:(e,t)=>{var n,s;return t&&null!==(s=null===(n=e.groupWorkspace.groupSets.byId[t])||void 0===n?void 0:n.groupCount)&&void 0!==s?s:0},getTotalGroupSetCount:e=>e.groupWorkspace.paging&&e.groupWorkspace.paging.count,getTotalGroupCount:e=>e.groupWorkspace.totalGroupCount,isLoading:(e,t)=>t?-1!==e.groupWorkspace.status.loadingGroupSetIds.indexOf(t):e.groupWorkspace.status.isLoading,canCreate:e=>e.groupWorkspace.permissions.createGroups,isNew:(e,t)=>-1!==e.groupWorkspace.ui.newGroupSetIds.indexOf(t)};var Ic=n("Ajje");const Cc={groups:{byId:{},byGroupSetId:{},views:{byCourseId:{},byContentId:{}},loadingStatus:Ic.a.HasNotStarted},groupMemberships:{},isLoading:!1},vc=Object(i.g)(Cc,{[D.a.CONTENT_LOAD]:i.n,[Object(i.j)(D.a.CONTENT_LOAD)]:(e,t)=>{if(o.has(t,"groups")){const n=Object(r.a)(e,(e=>{const{groups:n}=t;Object.keys(n).forEach((t=>{var s;const o=null!==(s=e.groups.byId[t])&&void 0!==s?s:{};e.groups.byId[t]={...o,...n[t],api:{isUpdating:!1,isDeleting:!1}}}))}));return Object(i.p)(n,t)}return Object(i.p)(e,t)},[Object(i.h)(D.a.CONTENT_LOAD)]:i.l,[za.a.GROUPS_LOAD_BY_CONTENT_ID]:i.n,[Object(i.j)(za.a.GROUPS_LOAD_BY_CONTENT_ID)]:(e,t)=>{const n=Object(r.a)(e,(e=>{const{contentId:n,groups:s}=t;Object.keys(s).forEach((t=>{e.groups.byId[t]={...s[t],contentId:n}}))}));return Object(i.p)(n,t)},[Object(i.h)(za.a.GROUPS_LOAD_BY_CONTENT_ID)]:i.l,[za.a.GROUP_DELETE_BATCH]:(e,t)=>Object(r.a)(e,(e=>{const{deletedGroups:n}=t;n.forEach((t=>{e.groups.byId[t.id]||(e.groups.byId[t.id]={}),e.groups.byId[t.id].api||(e.groups.byId[t.id].api={}),e.groups.byId[t.id].api.isDeleting=!0}))})),[Object(i.j)(za.a.GROUP_DELETE_BATCH)]:(e,t)=>{const{deletedGroups:n,groupSetId:s}=t;return Object(r.a)(e,(e=>{var o,r;n.forEach((t=>{delete e.groups.byId[t.id]})),n.length&&Rc(e.groups);const i=null!=s?s:null===(o=null==n?void 0:n[0])||void 0===o?void 0:o.groupSetId;if(!i)return;const a=null!==(r=e.groups.byGroupSetId[i])&&void 0!==r?r:[],c=new Set(t.deletedGroups.map((e=>e.id))),l=a.filter((e=>!c.has(e)));e.groups.byGroupSetId[s]=l}))},[Object(i.h)(za.a.GROUP_DELETE_BATCH)]:(e,t)=>Object(r.a)(e,(e=>{const{deletedGroups:n}=t;n.forEach((t=>{e.groups.byId[t.id].api.isDeleting=!1}))})),[Object(i.j)(za.a.GROUP_LOAD_BY_ID)]:(e,t)=>{const{group:n,groupId:s}=t;return Object(r.a)(e,(t=>{const o=e.groups.byId[s];t.groups.byId[s]={...Object(i.i)(o,n)}}))}}),Sc=(e,t)=>Object.keys(e).find((n=>{const s=e[n],r=o.isEqual(s.query.paging,t.paging),i=o.isEqual(s.query.filter,t.filter);return r&&i})),jc=(e,t)=>{if(!t)return{id:null,view:null};const n=e.views.byCourseId[t.courseId]||{},s=Sc(n,t);return{id:s,view:s?n[s]:null}},Tc=(e,t)=>{if(!t)return{id:null,view:null};const n=e.views.byContentId[t.contentId]||{},s=Sc(n,t);return s?{id:s,view:s?n[s]:null}:{id:null,view:null}},Ac=e=>["views","byCourseId",e.courseId],_c=e=>["views","byContentId",e.contentId],Rc=e=>{Object.keys(e.views.byCourseId).forEach((t=>{const n=e.views.byCourseId[t];n&&Object.keys(n).forEach((e=>{n[e].isValid=!1}))}))},Nc=(e,t)=>Object(r.a)(e,(e=>{let n=!1;Object.keys(t).forEach((s=>{var o;e.byId[s]||(n=!0),e.byId[s]={...e.byId[s],...t[s],ui:{...null===(o=e.byId[s])||void 0===o?void 0:o.ui}},delete e.byId[s].groupSet})),n&&Rc(e)})),wc=Object(i.g)(Cc.groups,{[za.a.GROUPS_LOAD]:(e,t)=>Object(i.n)(e,t,{loadingStatus:Ic.a.Loading}),[Object(i.j)(za.a.GROUPS_LOAD)]:(e,t)=>Object(r.a)(e,(e=>{const{groups:n}=t;Object.keys(n).forEach((t=>{const s=n[t];if(e.byId[t]={...s,api:{isUpdating:!1,isDeleting:!1}},!s.groupSetId)return;const o=new Set(e.byGroupSetId[s.groupSetId]).add(s.id);e.byGroupSetId[s.groupSetId]=Array.from(o)})),e.loadingStatus=Ic.a.Loaded})),[Object(i.h)(za.a.GROUPS_LOAD)]:e=>Object(r.a)(e,(e=>{e.loadingStatus=Ic.a.Error})),[za.a.GROUPS_LOAD_BY_QUERY]:Object(i.o)(jc,Ac),[Object(i.h)(za.a.GROUPS_LOAD_BY_QUERY)]:Object(i.m)(jc,Ac),[Object(i.j)(za.a.GROUPS_LOAD_BY_QUERY)]:(e,t)=>{const{data:n}=t;if(!n)return Object(i.p)(e,t);const{groupIds:s,paging:o,groups:r}=n;return e=Nc(e,r),Object(i.q)(e,t,{viewResolver:jc,viewsPathResolver:Ac,paging:o,values:s})},[za.a.GROUPS_LOAD_BY_CONTENT_ID_AND_QUERY]:Object(i.o)(Tc,_c),[Object(i.h)(za.a.GROUPS_LOAD_BY_CONTENT_ID_AND_QUERY)]:Object(i.m)(Tc,_c),[Object(i.j)(za.a.GROUPS_LOAD_BY_CONTENT_ID_AND_QUERY)]:(e,t)=>{const{data:n}=t;if(!n)return Object(i.p)(e,t);const{groupIds:s,paging:o,groups:r}=n;return e=Nc(e,r),Object(i.q)(e,t,{viewResolver:Tc,viewsPathResolver:_c,paging:o,values:s})},[Object(i.j)(ec)]:(e,t)=>Object(r.a)(e,(n=>{const{groupSetId:s}=t;Object.keys(e.byId).forEach((t=>{e.byId[t].groupSetId===s&&delete n.byId[t]})),Rc(n)})),[Object(i.j)(Za)]:(e,t)=>Object(r.a)(e,(n=>{const{groupSet:s}=t,o=e.byGroupSetId[s.id];null==o||o.forEach((e=>n.byId[e].isAvailable=s.isAvailable))})),[Object(i.j)(za.a.GROUPS_ADD)]:(e,t)=>{const{addedGroupsById:n,groupSetId:s}=t;let o=Nc(e,n);return s&&t.addedCourseGroupIds&&(o=Object(r.a)(o,(n=>{var o;const r=null!==(o=e.byGroupSetId[s])&&void 0!==o?o:[],i=new Set([...t.addedCourseGroupIds,...r]);n.byGroupSetId[s]=Array.from(i)}))),o},[Object(i.j)(za.a.GROUPS_UPDATE)]:(e,t)=>{const{updatedGroupsById:n}=t;return Nc(e,n)},[Object(i.h)(za.a.GROUPS_UPDATE)]:i.l,[Object(i.j)(za.a.GROUP_STUDENT_COUNT_LOAD)]:(e,t)=>Object(r.a)(e,(n=>{const{groups:s}=t;Object.keys(s).forEach((t=>{n.byId[t]={...e.byId[t],...s[t]}}))})),[Object(i.j)(za.a.ADD_GROUP_MEMBERSHIP)]:(e,t)=>Object(r.a)(e,(n=>{const{groupId:s,userId:r}=t,i=e.byId[s];!i||!i.memberships||o.findIndex(i.memberships,["userId",r])>=0||(n.byId[s]={...i,memberships:[...i.memberships,{groupId:s,userId:r}],studentCount:i.studentCount+1})})),[Object(i.j)(za.a.REMOVE_GROUP_MEMBERSHIP)]:(e,t)=>Object(r.a)(e,(n=>{const{userId:s,enrolledGroupId:r}=t,i=e.byId[r];if(!i||!i.memberships||-1===o.findIndex(i.memberships,["userId",s]))return;const a=i.memberships.filter((e=>e.userId!==s));n.byId[i.id]={...i,memberships:a,studentCount:i.studentCount-1}}))}),Dc=Object(i.g)(Cc.groupMemberships,{[Object(i.j)(za.a.GROUP_MEMBERSHIPS_LOAD)]:(e,t)=>Object(r.a)(e,(e=>{const{memberships:n}=t;Object.keys(n).forEach((t=>{e[t]={...n[t]}}))})),[Object(i.j)(za.a.ADD_GROUP_MEMBERSHIP)]:(e,t)=>Object(r.a)(e,(n=>{const{groupId:s,userId:r}=t,i=Array.from(e[s]||[]);o.findIndex(i,["userId",r])>=0||(n[s]=[...i,{groupId:s,userId:r}])})),[Object(i.j)(za.a.REMOVE_GROUP_MEMBERSHIP)]:(e,t)=>Object(r.a)(e,(n=>{const{userId:s,enrolledGroupId:r}=t,i=e[r];i&&-1!==o.findIndex(i,["userId",s])&&(n[r]=i.filter((e=>e.userId!==s)))}))}),Lc=Object(i.d)({groups:wc,groupMemberships:Dc}),Pc=Object(i.k)(vc,Lc,Cc),kc={deleteByContentId:e=>Object(i.b)(za.a.GROUP_DELETE_BATCH,((t,n)=>{const s=xc.getGroupsByContentId(n(),e),r=Yn.getContentById(n(),e).courseId;t(Object(i.a)(za.a.GROUP_DELETE_BATCH,{deletedGroups:s}));const a=()=>{const t=Yn.getContentById(n(),e);return{prevContent:t,nextContent:{...t,isGroupContent:!1,assignedGroups:[]}}};return async function(e,t){const n=Object(q.f)(Qr,{courseId:e}),s=o.map(t,(e=>({method:q.a,relativeUrl:e.id})));return Object(q.q)(n,s)}(r,s).then((()=>{const{prevContent:e,nextContent:n}=a();return t(Qn.persistContent(e,n))})).then((()=>{const{nextContent:e}=a();return t(Qn.persistContentSync(e))})).then((()=>{t(Object(i.a)(Object(i.j)(za.a.GROUP_DELETE_BATCH),{deletedGroups:s}))})).catch((e=>{throw t(Object(i.a)(Object(i.h)(za.a.GROUP_DELETE_BATCH),{deletedGroups:s})),t(Object(i.a)(Object(i.j)(c.a.APP_ERROR),{error:e})),{err:e}}))})),loadGroupsByQuery:e=>Object(i.f)(za.a.GROUPS_LOAD_BY_QUERY,(async()=>{try{return{data:await si(e),query:e}}catch(t){throw{err:t,query:e}}}),{query:e}),loadByContentId:(e,t)=>Object(i.f)(za.a.GROUPS_LOAD_BY_CONTENT_ID,(n=>t||Bc(n(),e.contentId)?ti(e).catch((e=>{throw{err:e}})):Promise.resolve({groups:{}}))),loadByContentIdAndQuery:e=>Object(i.b)(za.a.GROUPS_LOAD_BY_CONTENT_ID_AND_QUERY,(async(t,n)=>{const{view:o}=Tc(n().group.groups,e);if(!(null==o?void 0:o.isLoading)){t(Object(i.a)(za.a.GROUPS_LOAD_BY_CONTENT_ID_AND_QUERY,{query:e}));try{const n=await async function(e){const{results:t,paging:n,permissions:o}=await Object(a.jd)(s.d,e);return{groups:Object(w.E)(t),groupIds:t.map((e=>e.id)).filter((e=>!!e)),paging:n,permissions:o}}(e);t(Object(i.a)(Object(i.j)(za.a.GROUPS_LOAD_BY_CONTENT_ID_AND_QUERY),{data:n,query:e}))}catch(n){t(Object(i.a)(Object(i.h)(za.a.GROUPS_LOAD_BY_CONTENT_ID_AND_QUERY),{err:n,query:e})),t(Object(i.a)(Object(i.j)(c.a.APP_ERROR),{error:n}))}}})),loadByGroupSetId:(e,t,n)=>Object(i.b)(za.a.GROUPS_LOAD,(async(s,o)=>{if(!yc.isLoading(o(),t))try{s(Object(i.a)(za.a.GROUPS_LOAD,{groupSetId:t}));const o=await async function(e,t,n={}){const{sort:s=a.bc.MODIFIED_DATE_DESC,limit:o=Ci,expand:r="studentCount,permissions"}=n||{},{results:i,paging:c,permissions:d}=await Object(q.j)(Object(q.f)(fi,{courseId:e,groupSetId:t,sort:s,limit:o,expand:r}));return{groups:Object(l.c)(i),paging:c,permissions:d}}(e,t,n),r=Object.keys(o.groups);s(Object(i.a)(Object(i.j)(za.a.GROUPS_LOAD),{...o,groupSetId:t,assignedGroups:r}))}catch(e){s(Object(i.a)(Object(i.h)(za.a.GROUPS_LOAD),{err:e})),s(Object(i.a)(Object(i.j)(c.a.APP_ERROR),{error:e}))}})),loadGroupsByCourse:e=>Object(i.f)(za.a.GROUPS_LOAD,(()=>async function(e,t=1e3){const{results:n,paging:s,permissions:o}=await Object(q.j)(Object(q.f)(Yr,{courseId:e,limit:t}));return{groups:Object(w.E)(n),paging:s,permissions:o}}(e).catch((e=>{throw{err:e}})))),loadMembershipsByGroupSetId:(e,t)=>Object(i.f)(za.a.GROUP_MEMBERSHIPS_LOAD,(async()=>{const n=await async function(e,t,n=1e3){const{results:s,paging:o,permissions:r}=await Object(q.j)(Object(q.f)(Oi,{courseId:e,groupSetId:t,limit:n}));return{memberships:Object(l.c)(s),paging:o,permissions:r}}(e,t),s=n.memberships;return{...n,groupSetId:t,memberships:s}})),addGroupMembership:e=>Object(i.b)(za.a.ADD_GROUP_MEMBERSHIP,(async(t,n)=>{t(Object(i.a)(za.a.ADD_GROUP_MEMBERSHIP)),t(Object(i.a)(za.a.REMOVE_GROUP_MEMBERSHIP));try{const n=await ni(e);return t(Object(i.a)(Object(i.j)(za.a.ADD_GROUP_MEMBERSHIP),n)),t(Object(i.a)(Object(i.j)(za.a.REMOVE_GROUP_MEMBERSHIP),{userId:n.userId,enrolledGroupId:e.enrolledGroupId,courseId:e.courseId})),await t(Ys.a.loadUser(n.userId)),n}catch(e){if(t(Object(i.a)(Object(i.h)(za.a.ADD_GROUP_MEMBERSHIP),e)),t(Object(i.a)(Object(i.h)(za.a.REMOVE_GROUP_MEMBERSHIP),e)),e instanceof Rn||e instanceof _n||e instanceof Nn||e instanceof wn||e instanceof Ln||e instanceof Dn)throw e;return t(Object(i.a)(Object(i.j)(c.a.APP_ERROR),{error:e})),null}})),loadStudentCountByGroupSetId:(e,t)=>Object(i.f)(za.a.GROUP_STUDENT_COUNT_LOAD,(async()=>{const n=await async function(e,t,n=1e3){const{results:s}=await Object(q.j)(Object(q.f)(yi,{courseId:e,groupSetId:t,limit:n}));return{groups:Object(l.c)(s)}}(e,t),s=n.groups,o=Object.keys(s).reduce(((e,t)=>e+s[t].studentCount),0);return{...n,groupSetId:t,groups:s,groupSetStudentCount:o}})),addByGroupSetId:(e,t)=>{if(!e)throw new Error("Expected an existing group set id");const n=Object(w.E)(t);return Object(i.a)(Object(i.j)(za.a.GROUPS_ADD),{addedGroupsById:n,groupSetId:e,addedCourseGroupIds:Object.keys(n)})},updateByGroupSetId:(e,t,n)=>{if(!e)throw new Error("Expected an existing group set id");const s=Object(w.E)(t);return Object(i.a)(Object(i.j)(za.a.GROUPS_UPDATE),{updatedGroupsById:s,groupSetId:e,courseId:n})},deleteByGroupSetId:(e,t)=>{if(!e)throw new Error("Expected an existing group set id");return Object(i.a)(Object(i.j)(za.a.GROUP_DELETE_BATCH),{deletedGroups:t,groupSetId:e})},removeGroupsFromStore:e=>Object(i.a)(Object(i.j)(za.a.GROUP_DELETE_BATCH),{deletedGroups:e}),loadGroupById:(e,t)=>Object(i.f)(za.a.GROUP_LOAD_BY_ID,(async()=>{const n=await function(e,t){return Object(q.j)(Object(q.f)(Xr,{courseId:e,groupId:t}))}(e,t);return Object(i.a)(Object(i.j)(za.a.GROUP_LOAD_BY_ID),{group:n,courseId:e,groupId:t})}))},xc={getGroupsByQuery:(e,t)=>{var n;const{view:s}=jc(e.group.groups,t);if(!s||!s.isValid||s.isLoading)return[];const o=(null!==(n=s.values)&&void 0!==n?n:[]).map((t=>{var n,s;const o=e.group.groups.byId[t];if(!o)return null;const r={...o},i=null===(s=null===(n=e.groupWorkspace)||void 0===n?void 0:n.groupSets)||void 0===s?void 0:s.byId[o.groupSetId];return r.groupSet=i,r})).filter((e=>e));return o},getGroupByGroupId:(e,t)=>e.group.groups.byId[t],getCourseGroupsByIds:(e,t)=>t.map((t=>e.group.groups.byId[t])),getCourseGroupViewStatusByQuery:(e,t)=>{const{view:n}=jc(e.group.groups,t);return n?{isLoading:n.isLoading,isValid:n.isValid,paging:n.paging}:null},getGroupsByContentId:(e,t)=>o.filter(e.group.groups.byId,{contentId:t}),getGroupsByContentIdAndQuery:(e,t)=>{var n;const{view:s}=Tc(e.group.groups,t);if(!s||!s.isValid||s.isLoading)return[];return(null!==(n=s.values)&&void 0!==n?n:[]).map((t=>{const n=e.group.groups.byId[t];if(!n)return null;const s={...n};let o;return n.groupSetId&&(o=yc.getGroupSetById(e,n.groupSetId)),s.groupSet=o,s})).filter((e=>!!e))},getGroupsByGroupSetId:(e,t)=>{var n,s;return null!==(s=null===(n=e.group.groups.byGroupSetId[t])||void 0===n?void 0:n.map((t=>e.group.groups.byId[t])))&&void 0!==s?s:[]},getGroupMembershipsByGroupSetId:(e,t)=>{if(!t)return[];if(!e.groupWorkspace.groupSets.byId.hasOwnProperty(t))return[];const n=e.group.groups.byGroupSetId[t];return Array.isArray(n)?n.map((t=>e.group.groupMemberships[t])):[]},hasJoined:(e,t)=>{const n=o.filter(e.group.groups.byId,{...t.contentId&&{contentId:t.contentId},...t.groupSetId&&{groupSetId:t.groupSetId}});return o.some(n,(e=>!!e.memberships&&o.find(e.memberships,{userId:t.userId})))},getGroupsLoadingStatus:e=>e.group.groups.loadingStatus,isLoading:e=>e.group.isLoading},Bc=(e,t)=>0===xc.getGroupsByContentId(e,t).length;var Mc=n("Nvcb");const Uc=Object(i.g)({institutionBrands:{byId:{}},brandAssociations:{byId:{}},brandHosts:{hostnames:[],paging:null,isLoading:!1},paging:null,permissions:null,isLoading:!1},{[Mc.b.INSTITUTION_BRANDS_LOAD]:i.n,[Object(i.j)(Mc.b.INSTITUTION_BRANDS_LOAD)]:(e,t)=>{if(!t||!t.institutionBrands)return Object(i.p)(e,t);const{permissions:n,paging:s}=t,o=Fc(e,t);return Object(r.a)(o,(e=>{e.isLoading=!1,e.paging=s,e.permissions=n}))},[Object(i.h)(Mc.b.INSTITUTION_BRANDS_LOAD)]:i.l,[Mc.b.INSTITUTION_BRAND_LOAD]:i.n,[Object(i.j)(Mc.b.INSTITUTION_BRAND_LOAD)]:(e,t)=>t&&t.institutionBrands?(e=Fc(e,t),Object(i.p)(e,t)):Object(i.p)(e,t),[Object(i.h)(Mc.b.INSTITUTION_BRAND_LOAD)]:i.l,[Object(i.j)(Mc.b.INSTITUTION_BRAND_CREATE)]:(e,t)=>Fc(e,t),[Object(i.h)(Mc.b.INSTITUTION_BRAND_CREATE)]:i.l,[Mc.b.INSTITUTION_BRANDS_UPDATE]:(e,t)=>{const{ultraBranding:n,brandAssociations:s}=t,i=n.id;let a=e;a=Object(r.a)(a,(e=>{e.institutionBrands.byId[i]||(e.institutionBrands.byId[i]={}),e.institutionBrands.byId[i].api||(e.institutionBrands.byId[i].api={}),e.institutionBrands.byId[i].api.isUpdating=!0}));return Object(o.filter)(e.brandAssociations.byId,{brandId:i}).forEach((e=>{a=Object(o.find)(s,{id:e.id})?Object(r.a)(a,(t=>{t.brandAssociations.byId[e.id]||(t.brandAssociations.byId[e.id]={}),t.brandAssociations.byId[e.id].api||(t.brandAssociations.byId[e.id].api={}),t.brandAssociations.byId[e.id].api.isUpdating=!0})):Object(r.a)(a,(t=>{t.brandAssociations.byId[e.id]||(t.brandAssociations.byId[e.id]={}),t.brandAssociations.byId[e.id].api||(t.brandAssociations.byId[e.id].api={}),t.brandAssociations.byId[e.id].api.isDeleting=!0}))})),a},[Object(i.j)(Mc.b.INSTITUTION_BRANDS_UPDATE)]:(e,t)=>{const{institutionBrands:n,brandAssociations:s}=t,i=Object.keys(n.byId)[0];let a=e;const c=Object(o.chain)(e.brandAssociations.byId).filter({brandId:i}).filter((e=>!s.byId[e.id])).value();return a=Object(r.a)(a,(e=>{c.forEach((t=>{delete e.brandAssociations.byId[t.id]}))})),Fc(a,t)},[Object(i.h)(Mc.b.INSTITUTION_BRANDS_UPDATE)]:(e,t)=>{const{brandWithAssociations:n}=t;let s=e;if(n){const t=n.ultraBranding.id,i=Object(o.filter)(e.brandAssociations.byId,{brandId:t});s=Object(r.a)(s,(e=>{i.forEach((t=>{e.brandAssociations.byId[t.id]||(e.brandAssociations.byId[t.id]={}),e.brandAssociations.byId[t.id].api={isDeleting:!1,isUpdating:!1}})),e.institutionBrands.byId[t]||(e.institutionBrands.byId[t]={}),e.institutionBrands.byId[t].api||(e.institutionBrands.byId[t].api={}),e.institutionBrands.byId[t].api.isUpdating=!1}))}return Object(i.l)(s,t)},[Mc.b.INSTITUTION_BRAND_DELETE]:(e,t)=>{const{brandId:n}=t,s=Object(o.filter)(e.brandAssociations.byId,{brandId:n});return Object(r.a)(e,(e=>{s.forEach((t=>{e.brandAssociations.byId[t.id]||(e.brandAssociations.byId[t.id]={}),e.brandAssociations.byId[t.id].api||(e.brandAssociations.byId[t.id].api={}),e.brandAssociations.byId[t.id].api.isDeleting=!0})),e.institutionBrands.byId[n]||(e.institutionBrands.byId[n]={}),e.institutionBrands.byId[n].api||(e.institutionBrands.byId[n].api={}),e.institutionBrands.byId[n].api.isDeleting=!0}))},[Object(i.j)(Mc.b.INSTITUTION_BRAND_DELETE)]:(e,t)=>{const{brandId:n}=t,s=Object(o.filter)(e.brandAssociations.byId,{brandId:n});return Object(r.a)(e,(e=>{s.forEach((t=>{delete e.brandAssociations.byId[t.id]})),delete e.institutionBrands.byId[n]}))},[Object(i.h)(Mc.b.INSTITUTION_BRAND_DELETE)]:(e,t)=>{const{brandId:n}=t,s=Object(o.filter)(e.brandAssociations.byId,{brandId:n});let a=e;return a=Object(r.a)(a,(e=>{s.forEach((t=>{e.brandAssociations.byId[t.id]||(e.brandAssociations.byId[t.id]={}),e.brandAssociations.byId[t.id].api||(e.brandAssociations.byId[t.id].api={}),e.brandAssociations.byId[t.id].api.isDeleting=!1})),e.institutionBrands.byId[n]||(e.institutionBrands.byId[n]={}),e.institutionBrands.byId[n].api||(e.institutionBrands.byId[n].api={}),e.institutionBrands.byId[n].api.isDeleting=!1})),Object(i.l)(a,t)},[Mc.b.DEFAULT_INSTITUTION_BRAND_LOAD]:i.n,[Object(i.j)(Mc.b.DEFAULT_INSTITUTION_BRAND_LOAD)]:(e,t)=>t&&t.institutionBrands?(e=Fc(e,t),Object(i.p)(e,t)):Object(i.p)(e,t),[Object(i.h)(Mc.b.DEFAULT_INSTITUTION_BRAND_LOAD)]:i.l,[Mc.b.INSTITUTION_BRAND_HOSTNAMES_LOAD]:(e,t)=>Object(r.a)(e,(e=>{e.brandHosts.isLoading=!0})),[Object(i.j)(Mc.b.INSTITUTION_BRAND_HOSTNAMES_LOAD)]:(e,t)=>{if(!t||!t.hostnames)return Object(r.a)(e,(e=>{e.brandHosts.isLoading=!1}));const{hostnames:n,paging:s}=t;return Object(r.a)(e,(e=>{e.brandHosts.hostnames=n,e.brandHosts.paging=s,e.brandHosts.isLoading=!1}))},[Object(i.h)(Mc.b.INSTITUTION_BRAND_HOSTNAMES_LOAD)]:(e,t)=>Object(r.a)(e,(e=>{e.brandHosts.isLoading=!1}))}),Gc=e=>Object(o.find)(e.institutionBrand.institutionBrands.byId,{isDefault:!0}),Fc=(e,t)=>{const{institutionBrands:n,brandAssociations:s}=t;return Object(r.a)(e,(e=>{Object.keys(n.byId).forEach((t=>{const s={...n.byId[t],api:{isUpdating:!1,isDeleting:!1}};e.institutionBrands.byId[s.id]=s})),Object.keys(s.byId).forEach((t=>{const n={...s.byId[t],api:{isUpdating:!1,isDeleting:!1}};e.brandAssociations.byId[n.id]=n}))}))},qc={createBrand:e=>Object(i.f)(Mc.b.INSTITUTION_BRAND_CREATE,(()=>Ri(e).catch((t=>{throw{err:t,brandWithAssociations:e}})))),updateBrand:e=>Object(i.f)(Mc.b.INSTITUTION_BRANDS_UPDATE,(()=>Ni(e.ultraBranding.id,e).catch((t=>{throw{err:t,brandWithAssociations:e}}))),e),fetchInstitutionBrand:e=>Object(i.b)(Mc.b.INSTITUTION_BRAND_LOAD,((t,n)=>{return t(Object(i.a)(Mc.b.INSTITUTION_BRAND_LOAD)),(s=n(),Hc.getInstitutionBrandById(s,e)?Promise.resolve(null):_i(e).catch((t=>{throw{err:t,brandId:e}}))).then((e=>t(Object(i.a)(Object(i.j)(Mc.b.INSTITUTION_BRAND_LOAD),e)))).catch((e=>{const n=Object(Tn.a)(e);if(t(Object(i.a)(Object(i.h)(Mc.b.INSTITUTION_BRAND_LOAD),e)),!Object(An.a)(n,[a.S.NotFound]))return t(Object(i.a)(Object(i.j)(c.a.APP_ERROR),{error:n})),null;throw n.originalException}));var s})),fetchInstitutionBrands:()=>Object(i.f)(Mc.b.INSTITUTION_BRANDS_LOAD,(e=>null!=e().institutionBrand.paging?Promise.resolve(null):async function(e=1e3){const{results:t,paging:n}=await Object(q.j)(Object(q.f)(Ai,{limit:e}));return{...t.reduce(Di,{}),paging:n}}().catch((e=>{throw{err:e}})))),deleteInstitutionBrand:e=>Object(i.f)(Mc.b.INSTITUTION_BRAND_DELETE,(()=>wi(e).then((()=>({brandId:e}))).catch((t=>{throw{err:t,brandId:e}}))),{brandId:e}),fetchDefaultInstitutionBrand:()=>Object(i.f)(Mc.b.DEFAULT_INSTITUTION_BRAND_LOAD,(e=>{return t=e(),Hc.getDefaultInstitutionBrand(t)?Promise.resolve(null):_i("default").catch((e=>{throw{err:e}}));var t})),fetchInstitutionBrandHostnames:()=>Object(i.f)(Mc.b.INSTITUTION_BRAND_HOSTNAMES_LOAD,(e=>null!=e().institutionBrand.brandHosts.paging?Promise.resolve(null):async function(e=1e3){const{results:t,paging:n}=await Object(q.j)(Object(q.f)("/v1/brands/hosts",{limit:e}));return{hostnames:t.map((e=>e.hostname)),paging:n}}().catch((e=>{throw{err:e}}))))},Hc={getInstitutionBrandById:(e,t)=>t===Mc.a?Gc(e):Object(o.find)(e.institutionBrand.institutionBrands.byId,{id:t}),getAssociationsByBrandId:(e,t)=>{const n=Gc(e),s=t===Mc.a?n&&n.id:t;return Object(o.filter)(e.institutionBrand.brandAssociations.byId,{brandId:s})},getAllAssociationsByBrandId:e=>Object(o.groupBy)(e.institutionBrand.brandAssociations.byId,"brandId"),getDefaultInstitutionBrand:e=>Gc(e)};const Vc="institution.role.load",Kc="institution.roles.load",$c=Object(i.g)({institutionRoles:{byId:{}},paging:null,isLoading:!1},{[Kc]:i.n,[Object(i.j)(Kc)]:(e,t)=>{if(!t||!t.institutionRoles)return Object(i.p)(e,t);const{institutionRoles:n,paging:s}=t;let o=e;return Object.keys(n.byId).forEach((e=>{const t={...n.byId[e],api:{isUpdating:!1,isDeleting:!1}};o=Object(r.a)(o,(e=>{e.institutionRoles.byId[t.id]=t}))})),Object(r.a)(o,(e=>{e.isLoading=!1,e.paging=s}))},[Object(i.h)(Kc)]:i.l,[Vc]:i.n,[Object(i.j)(Vc)]:(e,t)=>{if(!t||!t.institutionRole)return Object(i.p)(e,t);const{institutionRole:n}=t;return Object(i.p)(e,t,{institutionRoles:{byId:Object(r.a)(e.institutionRoles.byId,(e=>{e[n.id]={...n,api:{isUpdating:!1,isDeleting:!1}}}))}})},[Object(i.h)(Vc)]:i.l,[Object(i.j)(Mc.b.INSTITUTION_BRANDS_LOAD)]:Wc,[Object(i.j)(Mc.b.INSTITUTION_BRAND_LOAD)]:Wc});function Wc(e,t){if(!t||!t.institutionRoles)return e;const{institutionRoles:n}=t;let s=e;return Object.keys(n).forEach((e=>{s=Object(r.a)(s,(t=>{t.institutionRoles.byId[e]={...n[e],api:{isUpdating:!1,isDeleting:!1}}}))})),s}const zc={fetchInstitutionRole:e=>Object(i.f)(Vc,(t=>{return n=t(),Qc.getInstitutionRoleById(n,e)?Promise.resolve(null):async function(e){const{result:t}=await Object(q.j)(`/v1/roles/institutionRoles/${e}`);return t}(e).then((e=>({institutionRole:e}))).catch((e=>{throw{err:e}}));var n})),fetchInstitutionRoles:()=>Object(i.f)(Kc,(e=>null!=e().institutionRole.paging?Promise.resolve(null):async function(e=1e3){const{results:t,institutionId:n,paging:s}=await Object(q.j)(Object(q.f)(Li,{limit:e}));return{institutionId:n,institutionRoles:{byId:t.reduce(((e,t)=>(e[t.roleId]={id:t.roleId,...t},e)),{})},paging:s}}().then((e=>e)).catch((e=>{throw{err:e}}))))},Qc={getInstitutionRoleById:(e,t)=>Object(o.find)(e.institutionRole.institutionRoles.byId,{id:t}),getAllInstitutionRolesById:e=>e.institutionRole.institutionRoles.byId};const Yc="locale.load",Jc=Object(i.g)({byLocale:{},isLoading:!1},{[Yc]:(e,t)=>Object(i.n)(e,t),[Object(i.j)(Yc)]:(e,t)=>{const n=Object(r.a)(e,(e=>{const{localeSettings:n}=t;e.byLocale[n.languageTag]=n}));return Object(i.p)(n,t)},[Object(i.h)(Yc)]:(e,t)=>Object(i.l)(e,t),[Object(i.c)(Yc)]:(e,t)=>Object(i.p)(e,t)}),Xc={getLocaleSettings:e=>Object(i.b)(Yc,((t,n)=>{return s=n(),r=e.locale,o.isEmpty(Zc.getLocaleSettings(s,r))&&!Zc.isLocaleLoading(s)?(t(Object(i.a)(Yc)),async function(e){return null==e.locale&&(e.locale="en_US"),Object(q.j)(Object(q.f)("/v1/locales/%locale%?exactMatch=false",e))}(e).then((e=>(e&&(e.calendar.firstDayOfWeek=a.H[e.calendar.firstDayOfWeek]),t(Object(i.a)(Object(i.j)(Yc),{localeSettings:e})),{localeSettings:e}))).catch((e=>{const n=Object(Tn.a)(e);Object(An.a)(n,[a.S.NotFound])?t(Object(i.a)(Object(i.c)(Yc))):(t(Object(i.a)(Object(i.h)(Yc),e)),t(Object(i.a)(Object(i.j)(c.a.APP_ERROR),{error:e})))}))):Promise.resolve(null);var s,r}))};const Zc={getLocaleSettings:(e,t)=>o.get(e,["locale","byLocale",t],{}),isLocaleLoading:e=>o.get(e,["locale","isLoading"])},el="lti.domains.load",tl="lti.domain.create",nl=(e,t)=>{const n=Object.keys(e.views).find((n=>{const s=e.views[n];return Object(o.isEqual)(s.query,t)}));return{id:n,view:n?e.views[n]:null}},sl=()=>["views"],ol=Object(i.g)({views:{},byDomainId:{}},{[el]:Object(i.o)(nl,sl),[Object(i.h)(el)]:Object(i.m)(nl,sl),[Object(i.j)(el)]:(e,t)=>{let n=Object(r.a)(e,(e=>{t.data.results.forEach((t=>{e.byDomainId[t.id]=t}))}));return n=Object(i.q)(n,t,{viewResolver:nl,viewsPathResolver:sl,paging:t.data.paging,values:t.data.results.map((e=>e.id))}),n}}),rl={loadDomains:e=>Object(i.b)(el,(async t=>{try{t(Object(i.a)(el,{query:e}));const n=await Object(a.kd)(s.d,e);return t(Object(i.a)(Object(i.j)(el),{query:e,data:n})),{query:e,data:n}}catch(n){throw t(Object(i.a)(Object(i.h)(el),{query:e,error:n})),n}})),createDomain:e=>Object(i.b)(tl,(async t=>{try{t(Object(i.a)(tl,{data:e}));const n=await Object(a.yd)(s.d,e);return t(Object(i.a)(Object(i.j)(tl),{data:n})),n}catch(e){throw t(Object(i.a)(Object(i.h)(tl),e)),e}}))},il={shouldLoadView:(e,t)=>{const n=nl(e.ltiDomain,t);return!n.view||!n.view.isValid&&!n.view.isLoading},domains:Object(qe.b)(He.a,Ve)(((e,t)=>{var n,s,o;return null!==(o=null===(s=null===(n=nl(e.ltiDomain,t).view)||void 0===n?void 0:n.values)||void 0===s?void 0:s.map((t=>e.ltiDomain.byDomainId[t])))&&void 0!==o?o:[]}),(e=>e))},al="lti.placements.load",cl="lti.placement.create",ll=(e,t)=>{const n=Object.keys(e.views).find((n=>{const s=e.views[n];return Object(o.isEqual)(s.query,t)}));return{id:n,view:n?e.views[n]:null}},dl=()=>["views"],ul=Object(i.g)({views:{},byPlacementId:{}},{[al]:Object(i.o)(ll,dl),[Object(i.h)(al)]:Object(i.m)(ll,dl),[Object(i.j)(al)]:(e,t)=>{let n=Object(r.a)(e,(e=>{t.data.results.forEach((t=>{e.byPlacementId[t.id]=t}))}));return n=Object(i.q)(n,t,{viewResolver:ll,viewsPathResolver:dl,paging:t.data.paging,values:t.data.results.map((e=>e.id))}),n}}),pl={shouldLoadView:(e,t)=>{const n=ll(e.ltiPlacement,t);return!n.view||!n.view.isValid&&!n.view.isLoading},getPlacementsByQuery:Object(qe.b)(He.a,Ve)(((e,t)=>{var n,s,o;return null!==(o=null===(s=null===(n=ll(e.ltiPlacement,t).view)||void 0===n?void 0:n.values)||void 0===s?void 0:s.map((t=>e.ltiPlacement.byPlacementId[t])))&&void 0!==o?o:[]}),(e=>e)),getPlacementById:(e,t)=>e.ltiPlacement.byPlacementId[t]},bl={loadPlacements:e=>Object(i.b)(al,(async(t,n)=>{if(!pl.shouldLoadView(n(),e))return{query:e,data:pl.getPlacementsByQuery(n(),e)};try{t(Object(i.a)(al,{query:e}));const n=await Object(a.ld)(s.d,e);return t(Object(i.a)(Object(i.j)(al),{query:e,data:n})),{query:e,data:n}}catch(n){throw t(Object(i.a)(Object(i.h)(al),{query:e,error:n})),t(Object(i.a)(Object(i.j)(c.a.APP_ERROR),{error:n})),n}})),createPlacement:e=>Object(i.b)(cl,(async t=>{try{t(Object(i.a)(cl,{data:e}));const n=await Object(a.zd)(s.d,e);t(Object(i.a)(Object(i.j)(cl),{data:n}))}catch(e){t(Object(i.a)(Object(i.h)(cl),e))}}))},ml="_",gl=e=>{const t={};return e.forEach((e=>{const n=e.context.toString()+ml+e.source+ml+e.event;t[n]?t[n].distributionMethods.push({method:e.method,isEnabled:e.isEnabled,isEditable:e.isEditable}):t[n]={context:e.context,source:e.source,event:e.event,distributionMethods:[{method:e.method,isEnabled:e.isEnabled,isEditable:e.isEditable}]}})),Object.values(t)},hl=e=>{const t=[];return e.forEach((e=>{e.distributionMethods&&e.distributionMethods.forEach((n=>{const s={context:e.context,source:e.source,event:e.event,...n};t.push(s)}))})),t},fl=e=>{const t=e.courseId||"",n=e.ownerId||"";return e.context.toString()+ml+e.source+ml+e.event+ml+e.method+ml+t+ml+n},Ol=e=>e.reduce(((e,t)=>(e[fl(t)]=t,e)),{});const El="/public/v1/administration/notifications/settings";const yl="notification.method.settings.load.all",Il="notification.method.settings.multiple.update",Cl=Object(i.g)({byId:{},isLoading:!1},{[yl]:i.n,[Object(i.j)(yl)]:(e,t)=>{let n=e;return t.notificationMethodSettings&&(n=Object(r.a)(n,(e=>{Object.entries(t.notificationMethodSettings).forEach((t=>{e.byId[t[0]]=t[1]}))}))),Object(i.p)(n,t)},[Object(i.h)(yl)]:i.l,[Il]:(e,t)=>{const{toUpdate:n}=t;return Object(r.a)(e,(e=>{n.forEach((t=>{e.byId[fl(t)]||(e.byId[fl(t)]={}),e.byId[fl(t)].api||(e.byId[fl(t)].api={}),e.byId[fl(t)].api.isUpdating=!0}))}))},[Object(i.j)(Il)]:(e,t)=>{const{notificationMethodSettings:n}=t;return Object(r.a)(e,(e=>{Object.entries(n).forEach((t=>{e.byId[t[0]]=t[1],e.byId[t[0]].api||(e.byId[t[0]].api={}),e.byId[t[0]].api.isUpdating=!1}))}))},[Object(i.h)(Il)]:(e,t)=>{const{toUpdate:n}=t;return Object(r.a)(e,(e=>{n.forEach((t=>{e.byId[fl(t)]||(e.byId[fl(t)]={}),e.byId[fl(t)].api||(e.byId[fl(t)].api={}),e.byId[fl(t)].api.isUpdating=!1}))}))}}),vl={loadAdminNotificationMethodSettings:()=>Object(i.f)(yl,(e=>jl(e())?async function(){let e=await Object(q.j)(Object(q.f)(El,{})),t=e.results;for(;e.paging&&e.paging.nextPage;)e=await Object(q.j)((n=e.paging.nextPage,"/"+n.split("/").slice(3).join("/"))),t=t.concat(e.results);var n;return{notificationMethodSettings:Ol(hl(t))}}():Promise.resolve(null))),persistAdminNotificationMethodSettings:e=>Object(i.f)(Il,(()=>async function(e){const t=(await Object(q.o)(Object(q.f)(El,{}),gl(e))).results;return{notificationMethodSettings:Ol(hl(t))}}(e).then((e=>({...e}))).catch((t=>{throw{toUpdate:e,err:t}}))),{toUpdate:e})},Sl={getAdminNotificationMethodSettings:e=>Object.values(e.notificationMethodSetting.byId).filter((e=>!e.courseId&&!e.ownerId)),isLoading:e=>e.notificationMethodSetting.isLoading},jl=e=>0===Sl.getAdminNotificationMethodSettings(e).length,Tl="partner.cloud.settings.load",Al=Object(i.g)({byId:{},isLoading:!1},{[Tl]:i.n,[Object(i.j)(Tl)]:(e,t)=>{const{providerId:n,settings:s}=t;let o=e;return n&&s&&(o=Object(r.a)(e,(e=>{e.byId[n]={settings:s}}))),Object(i.p)(o,t)},[Object(i.h)(Tl)]:i.l}),_l={loadProviderSettings:e=>Object(i.f)(Tl,(t=>function(e,t){return!Rl.getProviderSettingsById(e,t)}(t(),e)?async function(e){return Object(a.vd)(s.d,e)}(e).then((t=>({providerId:e,settings:t}))):Promise.resolve(null)))},Rl={getProviderSettingsById:(e,t)=>{var n;return null===(n=e.partnerCloud.byId[t])||void 0===n?void 0:n.settings}};const Nl="proctoringServices.load";const wl=e=>e.reduce(((e,t)=>({...e,[t.handle]:t})),{}),Dl=Object(i.g)({byHandle:{},isLoading:!1},{[Nl]:i.n,[Object(i.j)(Nl)]:(e,t)=>{const{proctoringServices:n}=t;if(null===n)return Object(i.p)(e,t);const s=Object(r.a)(e,(e=>{e.byHandle=n}));return Object(i.p)(s,t)},[Object(i.h)(Nl)]:i.l}),Ll={loadProctoringServices:()=>Object(i.f)(Nl,(async e=>{if(t=e(),0!==Object.keys(t.proctoringServices.byHandle).length)return Promise.resolve({proctoringServices:Pl.getProctoringServices(e())});var t;try{const e=await async function(){return(await Object(q.j)("/public/v1/proctoring/services")).results}();return{proctoringServices:wl(e)}}catch(e){throw{err:e}}})),setProctoringServicesInStore:e=>Object(i.a)(Object(i.j)(Nl),{proctoringServices:wl(e)})},Pl={getAvailableProctoringServices:e=>{const t=e.proctoringServices.byHandle;return Object.values(t).filter((e=>e.availability.available===a.Mb.Yes))},getProctoringServices:e=>Object.values(e.proctoringServices.byHandle)},kl="question-analysis.question-details.load",xl="question-analysis.reports.load",Bl="question-analysis.reports.create",Ml=Object(i.g)({byId:{},isLoading:!1},{[xl]:i.n,[Object(i.j)(xl)]:(e,t)=>{const n=Object(r.a)(e,(e=>{const{reports:n}=t;e.byId=n}));return Object(i.p)(n,t)},[Object(i.h)(xl)]:i.l,[Object(i.j)(Bl)]:(e,t)=>{const n=Object(r.a)(e,(e=>{const{report:n}=t;e.byId[n.id]=n}));return Object(i.p)(n,t)},[Object(i.h)(Bl)]:i.l}),Ul={fetchReports:(e,t)=>Object(i.b)(xl,((n,s)=>(n(Object(i.a)(xl)),function(e,t){const n={courseId:e,...t};return Object(q.j)(Object(q.f)(Gi,n)).then((t=>{var n;const s=[],o=[];for(const r of t.results)null!=r.analysisReportDetails&&o.push(Vi(r,e)),null!=r.questionDetailsList&&s.push(...null!==(n=Ki(r))&&void 0!==n?n:[]);return{reports:Object(w.E)(o),questionDetails:Object(w.E)(s)}}))}(e,t).then((e=>{n(Object(i.a)(Object(i.j)(xl),e)),n(Object(i.a)(Object(i.j)(kl),e))})).catch((e=>{n(Object(i.a)(Object(i.j)(c.a.APP_ERROR),{error:e})),n(Object(i.a)(Object(i.h)(xl))),n(Object(i.a)(Object(i.h)(kl)))}))))),fetchReport:(e,t)=>Object(i.b)(xl,((n,s)=>function(e,t){const n=Gl.getMostRecentByAssessmentId(e,t);return!Fl(e)&&(null==n||n.analysisReportDetails.state===a.Nb.InProgress)}(s(),t)?(n(Object(i.a)(xl)),Fi(e,t).then((e=>(n(Object(i.a)(Object(i.j)(xl),e)),n(Object(i.a)(Object(i.j)(kl),e)),{...e}))).catch((e=>{n(Object(i.a)(Object(i.j)(c.a.APP_ERROR),{error:e})),n(Object(i.a)(Object(i.h)(xl))),n(Object(i.a)(Object(i.h)(kl)))}))):Promise.resolve(null))),fetchMultipleReports:(e,t)=>Object(i.b)(xl,((n,s)=>Fl(s())?Promise.resolve(null):(n(Object(i.a)(xl)),async function(e,t){Object(q.s)(qi);const n=[];for(const s of t)n.push(Fi(e,s,{batchKey:qi}));return(await Promise.all(n)).reduce(((e,t)=>null!=t?{reports:{...e.reports,...t.reports},questionDetails:{...e.questionDetails,...t.questionDetails}}:e),{reports:{},questionDetails:{}})}(e,t).then((e=>(n(Object(i.a)(Object(i.j)(xl),e)),n(Object(i.a)(Object(i.j)(kl),e)),{...e}))).catch((e=>{n(Object(i.a)(Object(i.j)(c.a.APP_ERROR),{error:e})),n(Object(i.a)(Object(i.h)(xl))),n(Object(i.a)(Object(i.h)(kl)))}))))),generateReport:(e,t)=>Object(i.f)(Bl,(()=>async function(e,t){const n={courseId:e,assessmentId:t},s=await Object(q.p)(Object(q.f)("/v1/courses/%courseId%/questionAnalysis/assessments/%assessmentId%",n),{});return{report:{id:s.analysisId,assessmentId:t,analysisReportDetails:s,courseId:e}}}(e,t).then((e=>({...e}))).catch((e=>{throw{err:(t=e,t.error.status===a.S.BadRequest&&(o.includes(t.error.message,"Item Analysis can only be run once there are submitted attempts")||o.includes(t.error.message,"There are no questions"))?new Mn(t.error):t)};var t}))))},Gl={getById:(e,t)=>o.find(e.questionAnalysis.reports.byId,{id:t}),getMostRecentByAssessmentId:(e,t)=>{const n=o.filter(e.questionAnalysis.reports.byId,{assessmentId:t});return o.reduce(n,((e,t)=>{const n=e.analysisReportDetails.executionTimeStamp,s=t.analysisReportDetails.executionTimeStamp;return null==e||s>n?t:e}))},getByCourseId:(e,t)=>o.filter(e.questionAnalysis.reports.byId,{courseId:t})};function Fl(e){return e.questionAnalysis.reports.isLoading}const ql=Object(i.g)({isLoading:!1,byId:{}},{[kl]:i.n,[Object(i.j)(kl)]:(e,t)=>{const n=Object(r.a)(e,(e=>{const{questionDetails:n}=t;e.byId=n}));return Object(i.p)(n,t)},[Object(i.h)(kl)]:i.l}),Hl={getByAnalysisId:(e,t)=>o.filter(e.questionAnalysis.questionDetails.byId,{analysisId:t})};const Vl=Object(qe.a)((e=>e.question.questions),((e,t)=>t),((e,t)=>o.filter(e,{assessmentId:t,questionType:a.Qb.PageBreak}))),Kl=e=>["views","byCourseId",e.courseId],$l=(e,t)=>{var n;if(!t)return{id:null,view:null};const s=null!==(n=e.views.byCourseId[t.courseId])&&void 0!==n?n:{},r=Object.keys(s).find((e=>{const n=s[e];return"questionId"in n.query?"questionId"in t&&t.questionId===n.query.questionId&&t.courseId===n.query.courseId:!("questionId"in t)&&function(e,t){const{assessmentId:n,courseId:s,filter:r,paging:i,refreshState:a,useSearch:c}=t,l=o.isEqual(i,e.paging)&&n===e.assessmentId&&s===e.courseId&&a===e.refreshState&&c===e.useSearch;if(!e.filter)return l;if(!l)return!1;const{assessmentIds:d,categoryIds:u,excludeAssessmentIds:p,keywords:b,questionTypes:m}=r;if(d&&!Xl(d,e.filter.assessmentIds))return!1;if(u&&!Xl(u,e.filter.categoryIds))return!1;if(p&&!Xl(p,e.filter.excludeAssessmentIds))return!1;if(b&&!Xl(b,e.filter.keywords))return!1;if(m&&!Xl(m,e.filter.questionTypes))return!1;return!0}(t,n.query)}));return{id:r,view:r?s[r]:null}};function Wl(e,t){var n;t&&Object.values(null!==(n=e.views.byCourseId[t])&&void 0!==n?n:{}).forEach((e=>{e.isValid=!1}))}const zl=Object(i.g)({isLoading:!1,paging:null,permissions:null,questions:{},views:{byCourseId:{}}},{[L]:Object(i.o)($l,Kl),[Object(i.j)(L)]:(e,t)=>{if(!t||!t.data)return Object(i.p)(e,t);const{data:n}=t,{paging:s,permissions:a,questionIds:c,questions:l}=n,d=Object(r.a)(e,(t=>{Object.keys(l).forEach((n=>{const s=e.questions[n],r=o.pickBy({contentId:null==s?void 0:s.contentId,permissions:null==s?void 0:s.permissions,ui:null==s?void 0:s.ui});t.questions[n]={...l[n],ui:{},...r,api:{isUpdating:!1,isDeleting:!1}},Wl(t,l[n].courseId)}))}));return Object(i.q)(d,t,{viewResolver:$l,viewsPathResolver:Kl,paging:s,permissions:a,values:c})},[Object(i.h)(L)]:Object(i.m)($l,Kl),[Object(i.j)(P)]:(e,t)=>Object(r.a)(e,(n=>{let{nextQuestion:s}=t;"start"!==s.positionAfter&&(s={...s,position:e.questions[s.positionAfter].position+1});const o=e.questions[s.positionAfter]?e.questions[s.positionAfter].position+1:1,r=Jl(e.questions,s.assessmentId,!0,o);r.questions[s.id]=s,n.questions={...n.questions,...r.questions}})),[k]:(e,t)=>Object(r.a)(e,(e=>{e.questions[t.prevQuestion.id]||(e.questions[t.prevQuestion.id]={}),e.questions[t.prevQuestion.id].api||(e.questions[t.prevQuestion.id].api={}),e.questions[t.prevQuestion.id].api.isUpdating=!0})),[Object(i.j)(k)]:(e,t)=>Object(r.a)(e,(n=>{const{prevQuestion:s,question:o}=t;if(0===s.id.indexOf(w.n)){const e={...o,api:{isUpdating:!1,isDeleting:!1}};return n.questions[o.id]=e,delete n.questions[s.id],void Wl(n,e.courseId)}const r=e.questions[o.id],i={...o,...r.questionIdsInBlock&&{questionIdsInBlock:r.questionIdsInBlock},...r.sourceInfo&&{sourceInfo:r.sourceInfo},api:{...r.api,isUpdating:!1},...r.ui&&{ui:r.ui}};if(s.position!==i.position){const t=i.position<s.position,o=t?i.position:s.position+1,r=t?s.position-1:i.position,a=Jl(e.questions,i.assessmentId,t,o,r);n.questions={...n.questions,...a.questions},n.questions[i.id]=i}else n.questions[i.id]=i;Wl(n,i.courseId)})),[Object(i.h)(k)]:(e,t)=>Object(r.a)(e,(e=>{e.questions[t.prevQuestion.id].api||(e.questions[t.prevQuestion.id].api={}),e.questions[t.prevQuestion.id].api.isUpdating=!1})),[x]:(e,t)=>Object(r.a)(e,(e=>{var n;e.questions[t.prevQuestion.id]&&((null===(n=e.questions[t.prevQuestion.id])||void 0===n?void 0:n.api)||(e.questions[t.prevQuestion.id].api={}),e.questions[t.prevQuestion.id].api.isDeleting=!0)})),[Object(i.j)(x)]:(e,t)=>Object(r.a)(e,(n=>{const{prevQuestion:s}=t,r=(i=e.questions,c=s.id,o.filter(i,(e=>{const t=e;return a.Qb.QuestionBlock===e.questionType&&o.includes(t.questionIdsInBlock,c)})));var i,c;const l=function(e,t){const n={};return e.forEach((e=>{const s=e.questionIdsInBlock&&e.questionIdsInBlock.filter((e=>e!==t)),o={...e,questionIdsInBlock:s};n[o.id]=o})),n}(r,s.id);n.questions={...n.questions,...l};const d=Jl(n.questions,s.assessmentId,!1,s.position+1);n.questions={...n.questions,...d.questions};const u=n.questions[s.id];delete n.questions[s.id],Wl(n,u.courseId)})),[Object(i.h)(x)]:(e,t)=>Object(r.a)(e,(e=>{e.questions[t.prevQuestion.id].api||(e.questions[t.prevQuestion.id].api={}),e.questions[t.prevQuestion.id].api.isDeleting=!1})),[U]:i.n,[Object(i.j)(U)]:(e,t)=>{const n=Object(r.a)(e,(n=>{const{questions:s,questionBlockId:o}=t;let r=e.questions[o];r||(r={id:o,api:{isUpdating:!1,isDeleting:!1}}),Object.keys(s).forEach((t=>{const o=e.questions[t];n.questions[t]={...s[t],api:{isUpdating:!1,isDeleting:!1},ui:o&&o.ui},r={...r,questionIdsInBlock:Array.from(new Set([...r.questionIdsInBlock||[],t]))}})),n.questions[r.id]=r}));return Object(i.p)(n,t)},[Object(i.j)(G)]:(e,t)=>Object(r.a)(e,(e=>{const{prevQuestion:n,questionBlockId:s}=t,r=e.questions[s];e.questions[s].questionIdsInBlock=o.without(r.questionIdsInBlock,n.id),Wl(e,n.courseId)})),[Object(i.j)(M)]:(e,t)=>{const n=Object(r.a)(e,(n=>{const{questionBlockId:s}=t;let o=e.questions[s];o||(o={id:s,api:{isUpdating:!1,isDeleting:!1}}),t.results.forEach((t=>{if(t.isOk){let s=t.result;const r=e.questions[s.id];s={...s,api:{isUpdating:!1,isDeleting:!1},ui:r&&r.ui},o={...o,questionIdsInBlock:Array.from(new Set([...o.questionIdsInBlock||[],s.id]))},n.questions={...n.questions,...Object(w.E)([s,o])},Wl(n,s.courseId)}}))}));return Object(i.p)(n,t)}}),Ql={loadQuestion:e=>{const{assessmentId:t,courseId:n,questionId:s}=e;return Ql.loadQuestionById({assessmentId:t,courseId:n,questionId:s})},loadQuestions:e=>{const{assessmentId:t,courseId:n,offset:s,refreshState:o}=e;return Ql.loadQuestionsByQuery({assessmentId:t,courseId:n,paging:{offset:s,limit:100},refreshState:o})},loadQuestionById:({courseId:e,assessmentId:t,questionId:n})=>Object(i.b)(L,(o=>{const r={assessmentId:t,courseId:e,questionId:n};return o(Object(i.a)(L,{query:r})),async function({assessmentId:e,courseId:t,questionId:n}){return{...await Object(a.Ic)(s.d,e,t,n),assessmentId:e,courseId:t}}({assessmentId:t,courseId:e,questionId:n}).then((e=>(o(Object(i.a)(Object(i.j)(L),{data:{questions:{[e.id]:e},questionIds:[e.id]},query:r})),e))).catch((e=>{throw o(Object(i.a)(Object(i.j)(c.a.APP_ERROR),{error:e})),o(Object(i.a)(Object(i.h)(L),{query:r})),e}))})),loadQuestionsByQuery:e=>Object(i.b)(L,(async(t,n)=>function(e,t,n=!1){const s=o.isEmpty(Yl.getQuestionsByCourseId(e,t)),r=e.question.views.byCourseId[t];let i=!1;if(r){i=Object.keys(r).some((e=>!0===r[e].isLoading))}return!i&&(s||n)}(n(),e.courseId,null==e?void 0:e.refreshState)?(t(Object(i.a)(L,{query:e})),na(e).then((n=>(t(Object(i.a)(Object(i.j)(L),{data:n,query:e})),{...n}))).catch((n=>{throw t(Object(i.a)(Object(i.j)(c.a.APP_ERROR),{error:n})),t(Object(i.a)(Object(i.h)(L),{query:e})),n}))):Promise.resolve(null))),persistQuestion:(e,t,n)=>Object(i.f)(k,(s=>{const o=Te.getAssessmentById(s(),n.assessmentId),r=o?o.courseId:t.courseId;return sa(e,t,{...n,courseId:r}).then((t=>({prevQuestion:e,question:{...t,assessmentId:n.assessmentId,courseId:r}}))).catch((t=>{throw{prevQuestion:e,err:t}}))}),{prevQuestion:e}),createQuestion:(e,t,n,s)=>Object(i.b)(P,(async(o,r)=>{o(Object(i.a)(P,{assessmentId:e,positionAfter:t,questionType:n,questionOptions:s}));const l=Te.getAssessmentById(r(),e);return function(e,t,n,s,o){let r={courseId:t};switch(s){case a.Qb.Either:r={...r,...ha(e,n,s),...o,isAutoGraded:!0};break;case a.Qb.Essay:r={...r,...ga(e,n,s),...o,isAutoGraded:!1};break;case a.Qb.FIMB:r={...r,...fa(e,n,s),...o,isAutoGraded:!0};break;case a.Qb.Matching:r={...r,...Oa(e,n,s),...o,allowPartialCredit:!0,allowNegativeScoreForIncorrectAnswers:!1,allowNegativeOverallScore:!1,isAutoGraded:!0};break;case a.Qb.Multiple:r={...r,...Ea(e,n,s),...o,isAutoGraded:!0};break;case a.Qb.PresentationOnly:r={...r,...ga(e,n,s,0),...o,isAutoGraded:!0};break;case a.Qb.CalculatedFormula:r={...r,...ya(e,n,s),allowPartialCredit:!1,isAutoGraded:!0};break;case a.Qb.CalculatedNumeric:r={...r,...Ia(e,n,s),isAutoGraded:!0};break;case a.Qb.Hotspot:r={...ga(e,n,s),...o};break;case a.Qb.QuestionBlock:{const t=o;r={...r,...Ca(e,n,s,t)};break}case a.Qb.PageBreak:r={...r,...ga(e,n,s),...o,questionText:{rawText:"pageBreak"}};break;default:throw new Error(`Unsupported questionType: ${s}`)}return Promise.resolve(r)}(l.id,l.courseId,t,n,s).then((e=>(o(Object(i.a)(Object(i.j)(P),{nextQuestion:e})),{nextQuestion:e}))).catch((e=>{throw o(Object(i.a)(Object(i.h)(P),e)),o(Object(i.a)(Object(i.j)(c.a.APP_ERROR),{error:e})),e}))})),deleteQuestion:e=>Object(i.f)(x,(t=>{const n=Te.getAssessmentById(t(),e.assessmentId);return aa(e,{courseId:n.courseId,assessmentId:n.id}).then((()=>({prevQuestion:e}))).catch((t=>{throw{prevQuestion:e,err:t}}))}),{prevQuestion:e}),deleteQuestions:e=>Object(i.b)(B,((t,n)=>{const s=Te.getAssessmentById(n(),e[0].assessmentId);return ca(e,{courseId:s.courseId,assessmentId:s.id}).then((n=>{const s=new Map(e.map((e=>[e.id,e])));return Object.keys(n.results).forEach((e=>{const o=n.results[e],r=s.get(o.id);o.isOk?t(Object(i.a)(Object(i.j)(x),{prevQuestion:r})):t(Object(i.a)(Object(i.h)(x),{prevQuestion:r}))})),n}))})),loadQuestionsFromQuestionBlock:e=>Object(i.b)(U,((t,n)=>(n(),t(Object(i.a)(U)),function(e){const t=Object(q.f)(Xi,{...e,expand:Ji,sort:"id(ASC)"});return Object(q.j)(t).then((t=>{const{results:n,paging:s,permissions:o}=t;return{questions:va(n,e.courseId),paging:s,permissions:o,questionBlockId:e.questionBlockId}}))}(e).then((e=>(t(Object(i.a)(Object(i.j)(U),{...e})),e))).catch((e=>{t(Object(i.a)(Object(i.h)(U),e)),t(Object(i.a)(Object(i.j)(c.a.APP_ERROR),{error:e}))}))))),addQuestionsToQuestionBlock:(e,t)=>Object(i.b)(M,(async n=>{let s;try{s=await oa(e,t),n(Object(i.a)(Object(i.j)(M),s))}catch(e){throw n(Object(i.a)(Object(i.h)(M),e)),n(Object(i.a)(Object(i.j)(c.a.APP_ERROR),{error:e})),e}const{assessmentId:o,courseId:r,questionBlockId:a}=t;return await n(Ql.loadQuestionById({courseId:r,assessmentId:o,questionId:a})),s})),updateQuestionsInQuestionBlock:(e,t,n,s)=>Object(i.b)(F,(async o=>{let r;try{r=await ra(e,t,n,s),o(Object(i.a)(Object(i.j)(F),r))}catch(e){throw o(Object(i.a)(Object(i.h)(F),e)),o(Object(i.a)(Object(i.j)(c.a.APP_ERROR),{error:e})),e}const a=n;return await o(Ql.loadQuestionById({courseId:e,assessmentId:t,questionId:a})),r})),deleteQuestionFromQuestionBlock:(e,t)=>Object(i.b)(G,(async n=>{const s={prevQuestion:e,questionBlockId:t.questionBlockId};try{await async function(e,t){const n=Object(q.f)(Zi,{...t,questionId:e.id});return Object(q.r)(n)}(e,t),n(Object(i.a)(Object(i.j)(G),s))}catch(e){throw n(Object(i.a)(Object(i.h)(G),e)),n(Object(i.a)(Object(i.j)(c.a.APP_ERROR),{error:e})),e}const{assessmentId:o,courseId:r}=t;return await n(Ql.loadQuestionsByQuery({courseId:r,assessmentId:o})),s}))},Yl={getByQuestionId:(e,t)=>o.find(e.question.questions,{id:t}),getQuestionsByAssessmentId:(e,t)=>o.filter(e.question.questions,{assessmentId:t}),getPageBreakQuestionsByAssessmentId:Vl,getQuestionByPosition:(e,t)=>o.find(e.question.questions,{position:t}),getQuestionsByContentId:(e,t)=>{const n=Te.getAssessmentByContentId(e,t);return n?o.filter(e.question.questions,{assessmentId:n.id,api:{isDeleting:!1}}):[]},getQuestionsByCourseId:(e,t)=>{const n=Te.getAssessmentsByCourseId(e,t);return o.filter(e.question.questions,(e=>o.includes(o.map(n,"id"),e.assessmentId)))},getQuestionsByQuery:(e,t)=>{const{view:n}=$l(e.question,t);return n?(n.values||[]).map((t=>Yl.getByQuestionId(e,t))).filter((e=>!!e)):[]},getQuestionViewStatusByQuery:(e,t)=>{const{view:n}=$l(e.question,t);return n?{isLoading:n.isLoading,isValid:n.isValid,paging:n.paging,permissions:n.permissions}:null},getQuestionsByQuestionBlockId:(e,t)=>{const n=o.find(e.question.questions,{id:t}),s=[];return(null==n?void 0:n.questionIdsInBlock)?(n.questionIdsInBlock.forEach((t=>{const n=e.question.questions[t];n&&s.push(n)})),o.sortBy(s,Zl,ed)):s}};function Jl(e,t,n,s,r,i=1){const a={questions:{}},c=function(e,t){return o.filter(o.values(e),(e=>e.assessmentId===t.assessmentId&&-1===e.id.indexOf(w.n)&&e.position>=t.minPosition&&(!t.maxPosition||e.position<=t.maxPosition)))}(e,{assessmentId:t,minPosition:s,maxPosition:r});return c.forEach((t=>{a.questions[t.id]={...e[t.id],position:n?t.position+i:t.position-i}})),a}function Xl(e,t){return void 0===e&&void 0===t||void 0!==e&&void 0!==t&&((null==e?void 0:e.length)===(null==t?void 0:t.length)&&e.every((e=>t.includes(e))))}function Zl(e){return parseInt(td(e.id)[0],10)}function ed(e){return parseInt(td(e.id)[1],10)}function td(e){return e.split("_").slice(1)}const nd=e=>e.questionAttempt.questionAttemptsById,sd=Object(qe.a)(nd,((e,t)=>t),((e,t)=>e[t])),od=Object(qe.a)(nd,((e,t)=>e.questionAttempt.questionAttemptsByAttemptIds[t]),((e,t)=>null==t?void 0:t.map((t=>e[t]))));const rd="question.attempt.persist",id="question.attempt.set",ad="question.attempts.load",cd="question.attempts.set",ld=(e,t)=>Object(r.a)(e,(e=>{t.forEach((t=>{var n;const s=e.questionAttemptsById[t.id];((e,t)=>{const n=(e,t,n)=>{const s=e.questionAttemptsByAttemptIds[t];s?s.includes(n)||s.push(n):e.questionAttemptsByAttemptIds[t]=[n]};"groupAttemptId"in t&&n(e,t.groupAttemptId,t.id),n(e,t.attemptId,t.id)})(e,t),!t.questionType&&(null===(n=t.question)||void 0===n?void 0:n.questionType)&&(t.questionType=t.question.questionType),e.questionAttemptsById[t.id]={...s,...t}}))})),dd=Object(i.g)({questionAttemptsById:{},questionAttemptsByAttemptIds:{}},{[Object(i.j)(id)]:(e,t)=>{const{data:n}=t;return ld(e,[n])},[Object(i.j)(cd)]:(e,t)=>{const{data:n}=t;return ld(e,n)},[Object(i.j)(rd)]:(e,t)=>{const{data:n}=t;return ld(e,[n])},[Object(i.j)(ad)]:(e,t)=>{const{data:{results:n}}=t;return ld(e,n)}}),ud=(e,t,n,o)=>{const r=bd.getQuestionAttemptById(e(),n.id);return function(e,t){const{id:n,attemptId:o}=t;return n&&o?Object(a.Bd)(s.d,{courseId:e,attemptId:o,questionAttemptId:n},t):Promise.reject("Missing the question attempt id and attempt id.")}(o,{questionType:r.questionType,attemptId:r.attemptId,...n}).then((e=>({data:e}))).catch((e=>{throw{err:e}}))},pd={loadQuestionAttemptsByAttemptId:(e,t)=>Object(i.f)(ad,(()=>function(e,t){return Object(a.Cd)(s.d,{courseId:e,attemptId:t})}(t,e).then((t=>{if(t.results.length<1||t.results[0].attemptId===e)return{data:t};const n=t.results.map((t=>({...t,groupAttemptId:t.attemptId,attemptId:e})));return{data:{...t,results:n}}})).catch((e=>{throw{err:e}})))),setQuestionAttemptInStore:e=>Object(i.a)(Object(i.j)(id),{data:e}),setQuestionAttemptsInStore:e=>Object(i.a)(Object(i.j)(cd),{data:e}),persistQuestionAttempt:(e,t)=>Object(i.f)(rd,((n,s)=>ud(n,0,e,t)),{data:e}),markQuestionAttemptMovedOn(e,t){return this.persistQuestionAttempt({id:e,attemptStatus:a.l.InProgress},t)}},bd={getQuestionAttemptById:sd,getQuestionAttemptsByAttemptId:od},md="question.tag.load",gd=Object(i.g)({questionTags:{},permissions:null,paging:null,isLoading:!1},{[md]:i.n,[Object(i.j)(md)]:(e,t)=>{const n=Object(r.a)(e,(e=>{const{questionTags:n}=t;e.questionTags={...e.questionTags,...n}}));return Object(i.p)(n,t)},[Object(i.h)(md)]:i.l}),hd={loadQuestionTags:e=>Object(i.f)(md,(()=>function(e){return Object(q.j)(Object(q.f)("/v1/courses/%courseId%/questions/tags",e)).then((e=>{const{results:t,paging:n,permissions:s}=e;return{questionTags:Object(l.c)(t),paging:n,permissions:s}}))}(e).catch((e=>{throw{err:e}}))))},fd={getQuestionTagsByCourseId:(e,t)=>o.filter(e.questionTag.questionTags,{courseId:t})},Od="question.type.load",Ed=Object(i.g)({questionTypes:{},permissions:null,paging:null,isLoading:!1},{[Od]:i.n,[Object(i.j)(Od)]:(e,t)=>{const n=Object(r.a)(e,(e=>{const{questionTypes:n}=t;e.questionTypes={...e.questionTypes,...n}}));return Object(i.p)(n,t)},[Object(i.h)(Od)]:i.l}),yd={loadQuestionTypes:e=>Object(i.f)(Od,(()=>function(e){return Object(q.j)(Object(q.f)("/v1/courses/%courseId%/questions/types",e)).then((t=>{const{results:n,paging:s,permissions:o}=t;return n.forEach((t=>{const{courseId:n}=e;t.id=n+t.key,t.courseId=n})),{questionTypes:Object(l.c)(n),paging:s,permissions:o}}))}(e).catch((e=>{throw{err:e}}))))},Id={getQuestionTypesByCourseId:(e,t)=>o.filter(e.questionType.questionTypes,{courseId:t})},Cd="sessionDebug.submit",vd="sessionDebug.resetState",Sd={logCode:"",isUpdating:!1,submissionErrorCode:0},jd=Object(i.g)(Sd,{[Cd]:(e,t)=>Object(r.b)(e,(e=>{e.isUpdating=!0})),[Object(i.h)(Cd)]:(e,t)=>{var n,s;return Object(i.l)(e,t,{submissionErrorCode:(null===(s=null===(n=null==t?void 0:t.err)||void 0===n?void 0:n.error)||void 0===s?void 0:s.status)||a.S.BadRequest})},[Object(i.j)(Cd)]:(e,t)=>Object(r.b)(e,(e=>{e.logCode=t.logCode})),[vd]:(e,t)=>Object(r.b)(e,(e=>{Object(i.e)(e,Sd)}))}),Td={submitSessionDebug:e=>Object(i.f)(Cd,(()=>async function(e){return Object(q.q)("/v1/utilities/userSessionDebugLog",{sessionDebug:e})}(e).catch((e=>{throw{err:e}})))),resetSessionDebugState:()=>Object(i.a)(vd)};var Ad=n("U7Ic");const _d={isLoading:!1,previewing:void 0,courseMembershipId:void 0,user:void 0},Rd=Object(i.g)(_d,{[Ad.a.STUDENT_PREVIEW_LOAD]:i.n,[Object(i.j)(Ad.a.STUDENT_PREVIEW_LOAD)]:(e,t)=>{const{studentPreviewInfo:n}=t;let s=e;return s=Object(r.a)(e,(e=>{e.previewing=!!(null==n?void 0:n.previewing),e.user=null==n?void 0:n.user,e.courseMembershipId=null==n?void 0:n.courseMembershipId})),Object(i.p)(s,t)},[Object(i.h)(Ad.a.STUDENT_PREVIEW_LOAD)]:i.l,[Object(i.j)(Ad.a.STUDENT_PREVIEW_EXIT)]:e=>Object(r.a)(e,(e=>{e.courseMembershipId=_d.courseMembershipId,e.previewing=_d.previewing,e.user=_d.user}))}),Nd={exitStudentPreview:e=>Object(i.b)(Ad.a.STUDENT_PREVIEW_EXIT,(t=>(t(Object(i.a)(Object(i.j)(Ad.a.STUDENT_PREVIEW_EXIT),{data:{courseId:e}})),Promise.resolve(null)))),loadStudentPreviewUser:e=>Object(i.f)(Ad.a.STUDENT_PREVIEW_LOAD,(t=>{return n=t(),void 0===wd.getIsPreviewing(n)?function(e){return Object(a.Fd)(s.d,e)}(e).then((e=>({studentPreviewInfo:e}))):Promise.resolve({studentPreviewInfo:wd.getStudentPreviewUserInfo(t())});var n}))},wd={getStudentPreviewUserInfo:e=>({previewing:e.studentPreview.previewing,courseMembershipId:e.studentPreview.courseMembershipId,user:e.studentPreview.user}),getIsPreviewing:e=>e.studentPreview.previewing};const Dd="submissionServices.load",Ld="submissionService.save";function Pd(e){const t=e();if(t)return Object.values(t).find((e=>{var t,n;return(null==e?void 0:e.available)&&(null===(n=null===(t=null==e?void 0:e.capabilities)||void 0===t?void 0:t.OriginalityReport)||void 0===n?void 0:n.default)}))}const kd=Object(i.g)({byColumnId:{},isLoading:!1},{[Dd]:i.n,[Object(i.j)(Dd)]:(e,t)=>{const n=Object(r.a)(e,(e=>{e.byColumnId={...e.byColumnId,...t.submissionServices}}));return Object(i.p)(n,t)},[Object(i.h)(Dd)]:i.l,[Ld]:i.n,[Object(i.j)(Ld)]:(e,t)=>{const n=Object(r.a)(e,(e=>{const{submissionServices:n}=t;Object.keys(n).forEach((t=>{Object.keys(n[t]||{}).forEach((s=>{e.byColumnId[t][s]=n[t][s]}))}))}));return Object(i.p)(n,t)},[Object(i.h)(Ld)]:i.l,[Object(i.j)(D.a.CONTENT_PERSIST)]:(e,t)=>Object(r.a)(e,(e=>{const{contents:n,assessments:s}=t;Object.values(n||{}).forEach((t=>{var n,o;if((null==t?void 0:t.safeAssignOptions)&&(null==t?void 0:t.assessmentId)&&s[t.assessmentId]&&s[t.assessmentId].gradableItemId){const{safeAssignOptions:r}=t,i=s[t.assessmentId].gradableItemId,c=Pd((()=>{var t;return null===(t=e.byColumnId)||void 0===t?void 0:t[i]}));c&&c.uniqueHandle===a.Dd&&(null===(o=null===(n=null==c?void 0:c.capabilities)||void 0===n?void 0:n.OriginalityReport)||void 0===o?void 0:o.enabled)!==(null==r?void 0:r.checkAttempts)&&(c.capabilities.OriginalityReport.enabled=r.checkAttempts,e.byColumnId[i]={[c.uniqueHandle]:c})}}))}))}),xd={getDefaultOriginalityReportSubmissionService:(e,t)=>Pd((()=>{var n;return null===(n=e.submissionServices.byColumnId)||void 0===n?void 0:n[t]}))},Bd={loadSubmissionServices:(e,t)=>Object(i.f)(Dd,(async n=>{if(!function(e,t){var n;return!(null===(n=e.submissionServices.byColumnId)||void 0===n?void 0:n[t])}(n(),t))return;const s=await async function(e,t){return Object(q.j)(Object(q.f)("/v1/courses/%courseId%/gradebook/columns/%columnId%/submissionServices",{courseId:e,columnId:t})).then((e=>e.submissionServices))}(e,t),o=s.reduce(((e,t)=>({...e,[t.uniqueHandle]:t})),{});return{submissionServices:{[t]:o}}}),null,[a.S.Forbidden]),saveSubmissionService:(e,t,n)=>Object(i.f)(Ld,(async()=>{const s=await async function(e,t,n){if(!e||!t)return Promise.reject();const s=n.uniqueHandle;return Object(q.o)(Object(q.f)("/v1/courses/%courseId%/gradebook/columns/%columnId%/submissionServices/%uniqueHandle%",{courseId:e,columnId:t,uniqueHandle:s}),n)}(e,t,n);return{submissionServices:{[t]:{[s.uniqueHandle]:s}}}}))};class Md extends vn{constructor(e){super(e,"SystemPreferenceValueMissing")}}const Ud="/v1/systemPreferences/%key%";async function Gd(e){try{return await Object(q.j)(Object(q.f)(Ud,e))}catch(e){throw(null===(n=null==(t=e)?void 0:t.error)||void 0===n?void 0:n.status)===a.S.NotFound&&Object(o.includes)(null===(s=null==t?void 0:t.error)||void 0===s?void 0:s.message,"No value was found for given preference key")?new Md(t.error):t}var t,n,s}const Fd="system-preference.load",qd="system-preference.persist",Hd=Object(i.g)({systemPreferences:{}},{[Fd]:(e,t)=>Object(r.a)(e,(e=>{e.systemPreferences[t.key]||(e.systemPreferences[t.key]={api:{},key:t.key}),e.systemPreferences[t.key].api.isLoading=!0})),[Object(i.j)(Fd)]:(e,t)=>{const{systemPreference:n}=t;return Object(r.a)(e,(e=>{var t;e.systemPreferences[n.key]={...n,api:{isUpdating:!1,isDeleting:!1,isLoading:!1},ui:null===(t=e.systemPreferences[n.key])||void 0===t?void 0:t.ui}}))},[Object(i.c)(Fd)]:(e,t)=>Object(r.a)(e,(e=>{e.systemPreferences[t.key]||(e.systemPreferences[t.key]={api:{},key:t.key}),e.systemPreferences[t.key].api.isLoading=!1})),[Object(i.h)(Fd)]:(e,t)=>Object(r.a)(e,(e=>{e.systemPreferences[t.key]||(e.systemPreferences[t.key]={api:{},key:t.key}),e.systemPreferences[t.key].api||(e.systemPreferences[t.key].api={}),e.systemPreferences[t.key].api.isLoading=!1})),[qd]:(e,t)=>Object(r.a)(e,(e=>{e.systemPreferences[t.nextSystemPreference.key]||(e.systemPreferences[t.nextSystemPreference.key]={}),e.systemPreferences[t.nextSystemPreference.key].api||(e.systemPreferences[t.nextSystemPreference.key].api={}),e.systemPreferences[t.nextSystemPreference.key].api.isUpdating=!0})),[Object(i.j)(qd)]:(e,t)=>{const{systemPreference:n}=t,s={...n,api:{...e.systemPreferences[n.key].api,isUpdating:!1},ui:e.systemPreferences[n.key]&&e.systemPreferences[n.key].ui};return Object(r.a)(e,(e=>{e.systemPreferences[s.key]=s}))},[Object(i.h)(qd)]:(e,t)=>Object(r.a)(e,(e=>{e.systemPreferences[t.nextSystemPreference.key]||(e.systemPreferences[t.nextSystemPreference.key]={}),e.systemPreferences[t.nextSystemPreference.key].api||(e.systemPreferences[t.nextSystemPreference.key].api={}),e.systemPreferences[t.nextSystemPreference.key].api.isUpdating=!1}))}),Vd={getSystemPreferenceByKey:(e,t)=>{var n,s;return null===(s=null===(n=null==e?void 0:e.systemPreference)||void 0===n?void 0:n.systemPreferences)||void 0===s?void 0:s[t]},isSystemPreferenceLoading:(e,t)=>{var n,s;return!!(null===(s=null===(n=Vd.getSystemPreferenceByKey(e,t))||void 0===n?void 0:n.api)||void 0===s?void 0:s.isLoading)}};const Kd={loadSystemPreference:e=>Object(i.b)(Fd,(async(t,n)=>{const{key:s,shouldLoadWhilePending:o}=e;if(!function(e,t,n){const s=!!Vd.getSystemPreferenceByKey(e,t),o=Vd.isSystemPreferenceLoading(e,t);return!(s&&!o)&&(!s||n)}(n(),s,o)){return{systemPreference:Vd.getSystemPreferenceByKey(n(),e.key)}}t(Object(i.a)(Fd,{key:s}));try{const n=await Gd(e);return t(Object(i.a)(Object(i.j)(Fd),{key:s,systemPreference:n})),{systemPreference:n}}catch(e){if(e instanceof Md)return t(Object(i.a)(Object(i.c)(Fd),{key:s})),null;throw t(Object(i.a)(Object(i.h)(Fd),{key:s})),t(Object(i.a)(Object(i.j)(c.a.APP_ERROR),{error:e})),e}})),persistSystemPreference:e=>Object(i.f)(qd,(()=>async function(e){const t=Object(q.f)(Ud,{key:e.key});return Object(q.q)(t,e)}(e).then((e=>({systemPreference:e}))).catch((e=>{throw{err:e}}))),{nextSystemPreference:e})},$d="theme.create",Wd="theme.delete",zd=Object(i.g)({themes:{byId:{}},paging:null,isLoading:!1},{[Object(i.j)($d)]:(e,t)=>{const n={...t.theme,api:{isUpdating:!1,isDeleting:!1}};return Object(r.a)(e,(e=>{e.themes.byId[n.id]=n}))},[Object(i.h)($d)]:i.l,[Wd]:(e,t)=>Object(r.a)(e,(e=>{e.themes.byId[t.id].api.isDeleting=!0})),[Object(i.j)(Wd)]:(e,t)=>Object(r.a)(e,(e=>{delete e.themes.byId[t.id]})),[Object(i.h)(Wd)]:(e,t)=>{const n=Object(r.a)(e,(e=>{e.themes.byId[t.id].api.isDeleting=!1}));return Object(i.l)(n,t)}}),Qd={createTheme:e=>Object(i.f)($d,(()=>async function(e){return Object(q.p)(Pa,{...e})}(e).catch((e=>{throw{err:e}})))),deleteTheme:e=>Object(i.f)(Wd,(()=>async function(e){return Object(q.r)(`/v1/themes/${e}`)}(e).then((()=>({id:e}))).catch((e=>{throw{err:e}}))),{id:e})},Yd="user-pronouns.load",Jd="user-pronoun.add",Xd="user-pronoun.delete",Zd=(e,t)=>Object(r.b)(e,(n=>{const s={...e.approvedPronounsById},o={...e.pendingPronounsById};t.forEach((e=>{const t={...e,api:{isDeleting:!1,isUpdating:!1,isInvalidated:!1}};e.status===a.Lb.Approved?(s[t.id]=t,delete o[t.id]):(o[t.id]=t,delete s[t.id])})),n.approvedPronounsById=s,n.pendingPronounsById=o})),eu=Object(i.g)({approvedPronounsById:{},pendingPronounsById:{},isLoading:!1},{[Yd]:(e,t)=>Object(i.n)(e,t),[Object(i.j)(Yd)]:(e,t)=>{const n=t.results;return Object(i.p)(Zd(e,n),t)},[Object(i.j)(Jd)]:(e,t)=>{const n=t.pronoun.id?[t.pronoun]:[];return Zd(e,n)},[Object(i.j)(Xd)]:(e,t)=>{const n=t.pronounId;return Object(r.b)(e,(t=>{const s={...e.approvedPronounsById},o={...e.pendingPronounsById};delete s[n],delete o[n],t.approvedPronounsById=s,t.pendingPronounsById=o}))}}),tu={loadSystemPronouns:e=>Object(i.f)(Yd,(async()=>{try{return await async function(e){var t;const n=(null==e?void 0:e.nextPage)?await Object(q.j)(null==e?void 0:e.nextPage):await Object(q.j)(Object(q.f)(xa,{offset:null==e?void 0:e.offset,limit:null==e?void 0:e.limit}));if(null===(t=n.paging)||void 0===t?void 0:t.nextPage){const e=n.paging.nextPage.split("/"),t=e.findIndex((e=>"public"===e));let s="";e.splice(t).forEach((e=>s=s+"/"+e)),n.paging.nextPage=s}return n}(e)}catch(e){throw{err:e}}})),addSystemPronoun:e=>Object(i.b)(Jd,(async t=>{let n;try{return t(Object(i.a)(Jd,{pronoun:e})),n=await Ba(e),t(Object(i.a)(Object(i.j)(Jd),{pronoun:n})),{pronoun:n}}catch(e){if(e instanceof Un)throw e;throw t(Object(i.a)(Object(i.j)(c.a.APP_ERROR),{error:e})),e}})),deleteSystemPronoun:e=>Object(i.f)(Xd,(async()=>{try{return await async function(e){return Object(q.r)(Object(q.f)("/public/v1/pronouns/%pronounId%",{pronounId:e}))}(e),{pronounId:e}}catch(e){throw{err:e}}}))},nu={getApprovedPronouns:e=>Object.values(e.userPronouns.approvedPronounsById),getPendingPronouns:e=>Object.values(e.userPronouns.pendingPronounsById),getAllPronouns:e=>[...nu.getApprovedPronouns(e),...nu.getPendingPronouns(e)]};const su="indicators.load",ou="indicators.removeGroupId",ru="indicators.disableClassConversationIndicator",iu={[su]:(e,t)=>Object(r.a)(e,(e=>{const{courseId:n}=t;e.dateLoadedByCourseId[n]||(e.dateLoadedByCourseId[n]={}),e.dateLoadedByCourseId[n].isLoading=!0})),[Object(i.j)(su)]:(e,t)=>Object(r.a)(e,(e=>{const{indicators:n,courseId:s}=t;e.dateLoadedByCourseId[s]||(e.dateLoadedByCourseId[s]={}),n&&(n.forEach((t=>{e.byContentId[t.contentId]=t})),e.contentIdsByCourseId[s]=new Set(n.map((e=>e.contentId))),e.dateLoadedByCourseId[s].dateLoaded=new Date),e.dateLoadedByCourseId[s].isLoading=!1})),[Object(i.h)(su)]:(e,t)=>Object(r.a)(e,(e=>{const{courseId:n}=t;e.dateLoadedByCourseId[n]||(e.dateLoadedByCourseId[n]={}),e.dateLoadedByCourseId[n].isLoading=!1})),[ru]:(e,t)=>Object(r.a)(e,(e=>{const{contentId:n}=t;e.byContentId[n]||(e.byContentId[n]={}),e.byContentId[n].classConversationHasIndicator=!1})),[ou]:(e,t)=>Object(r.a)(e,(e=>{const{contentId:n,groupId:s}=t;e.byContentId[n]||(e.byContentId[n]={});const o=e.byContentId[n].groupIds;o&&(e.byContentId[n].groupIds=o.filter((e=>e!==s)))}))},au=Object(i.g)({byContentId:{},contentIdsByCourseId:{},dateLoadedByCourseId:{}},iu),cu={loadIndicators:(e,t)=>Object(i.f)(su,(n=>((e,t,n)=>{const s=e.contentIndicators.dateLoadedByCourseId[t];if(!s)return!0;const{isLoading:o,dateLoaded:r}=s;return!o&&(!(!n&&r)||Date.now()-r.getTime()>9e5)})(n(),e,t)?async function(e){const t=await Object(q.j)(Object(q.f)("/v1/courses/%courseId%/contents/indicators",{courseId:e})),{results:n}=t;return{indicators:n}}(e).then((t=>({courseId:e,...t}))).catch((t=>{throw{courseId:e,err:t}})):Promise.resolve({courseId:e})),{courseId:e}),removeGroupIdFromIndicatorCache:(e,t)=>Object(i.a)(ou,{contentId:e,groupId:t}),setClassConversationHasIndicatorToFalseInCache:e=>Object(i.a)(ru,{contentId:e})},lu={getIndicatorByContentId:(e,t)=>Object(o.find)(e.contentIndicators.byContentId,{contentId:t})},du="ultra-settings.load",uu="ultra-settings.persist",pu=Object(i.g)({ultraSettings:null,isLoading:!1},{[du]:(e,t)=>Object(i.n)(e,t),[Object(i.j)(du)]:(e,t)=>{const{ultraSettings:n}=t,s=Object(r.a)(e,(e=>{const t={...n,api:{isUpdating:!1}};e.ultraSettings=t}));return Object(i.p)(s,t)},[Object(i.h)(du)]:(e,t)=>Object(i.l)(e,t),[uu]:(e,t)=>Object(r.a)(e,(e=>{const t=e.ultraSettings;e.ultraSettings={...t,api:{...null==t?void 0:t.api,isUpdating:!0}}})),[Object(i.j)(uu)]:(e,t)=>{const{ultraSettings:n}=t,s=Object(r.a)(e,(e=>{const t={...n,api:{isUpdating:!1}};e.ultraSettings=t}));return Object(i.p)(s,t)},[Object(i.h)(uu)]:(e,t)=>Object(r.a)(e,(e=>{e.ultraSettings.api.isUpdating=!1}))}),bu={getUltraSettings:e=>e.ultraSettings,isSettingLoading:e=>Object(o.get)(e,["ultraSettings","isLoading"])},mu={loadUltraSetting:()=>Object(i.f)(du,(async e=>{try{return{ultraSettings:await async function(){return Object(q.j)(Object(q.f)(ka,[]))}()}}catch(e){throw{err:e}}})),persistUltraSettings:e=>Object(i.f)(uu,(()=>async function(e){const t=Object(q.f)(ka,[]);return Object(q.p)(t,e)}(e).then((e=>({ultraSettings:e}))).catch((e=>{throw{err:e}}))),{ultraSettings:e})},gu="/public/v1/courses/%courseId%/children",hu=`${gu}/%childCourseId%`;const fu="child-courses.load",Ou="child-course.load",Eu=Object(i.g)({byParentCourseId:{},byChildCourseId:{}},{[fu]:i.n,[Object(i.j)(fu)]:(e,t)=>{const n=t.childCourses,s=t.courseId;return Object(r.b)(e,(t=>(t.byParentCourseId[s]=n.map((e=>e.id)),n.forEach((n=>{const s=e.byChildCourseId[n.id];t.byChildCourseId[n.id]={...Object(i.i)(s,n)}})),t)))},[Object(i.h)(fu)]:i.l,[Object(i.j)(Ou)]:(e,t)=>{const{childCourse:n}=t;return Object(r.b)(e,(t=>{const s=e.byChildCourseId[n.id];t.byChildCourseId[n.id]={...Object(i.i)(s,n)}}))}}),yu={loadChildCourses:e=>Object(i.f)(fu,(async()=>{try{const t=await async function(e){let t;try{t=await Object(q.j)(Object(q.f)(gu,e))}catch(e){if(!e.error.code||"bb-blackboard-core-course-has-no-children"!==e.error.code)throw e.error;t={results:[]}}return t}({courseId:e,fields:["id","childCourse"]});return{courseId:e,childCourses:t.results}}catch(e){throw{err:e}}})),loadChildCourse:(e,t)=>Object(i.f)(Ou,(async()=>{try{const n=await async function(e){return await Object(q.j)(Object(q.f)(hu,{courseId:e.parentCourseId,childCourseId:e.childCourseId,fields:e.fields}))}({parentCourseId:e,childCourseId:t,fields:["id","childCourse"]});return{childCourseId:t,childCourse:n}}catch(e){throw{err:e}}}))},Iu={byParentCourseId:(e,t)=>{const n=e.courseChildren.byParentCourseId[t];if(n)return n.map((t=>e.courseChildren.byChildCourseId[t]))},byChildCourseId:(e,t)=>e.courseChildren.byChildCourseId[t]},Cu={announcement:A,assessment:Se,attemptReceipt:_e,blog:{blogs:De,comments:Ue,entries:et,participants:rt.b,summary:it.b},calendar:gt,columnSummary:Ct,contentReviewState:Zn.b,course:Nt,courseChildren:Eu,courseConversion:ns,courseEntitlements:rs.b,courseTasks:ps,courseLogs:vs,courseMembership:at.b,courseMessage:Rs,coursePreference:ks,courseProgress:qs,courseTools:Ks.b,content:zn,delegatedAttemptGrade:Zs,discussionBoardSettings:io,featureFlags:mo,fileUploadSettings:fo,fileUpload:No,ftue:Ho,gradableItemUserOption:er,gradebookAttempt:rr,gradebookCategory:ur,gradebookColumn:fr,gradebookGrade:Cr.b,gradebookSchema:Lr,group:Pc,groupSetImport:Ma,groupMembersImport:Ga,groupSetExport:$a,groupWorkspace:Oc,institutionBrand:Uc,institutionRole:$c,locale:Jc,ltiDomain:ol,ltiPlacement:ul,notificationMethodSetting:Cl,partnerCloud:Al,proctoringServices:Dl,question:zl,questionAnalysis:{questionDetails:ql,reports:Ml},questionAttempt:dd,questionTag:gd,questionType:Ed,sessionDebug:jd,submissionServices:kd,studentPreview:Rd,systemPreference:Hd,theme:zd,user:Ys.b,userPreference:ko,userPronouns:eu,app:N.b,contentIndicators:au,ultraSettings:pu},vu={announcement:_,assessment:je,attemptReceipt:Re,blog:{blogs:Le,comments:Ge,entries:tt,participants:rt.a,summary:it.a},calendar:ht,columnSummary:vt,contentReviewState:Zn.a,course:wt,courseChildren:yu,courseConversion:ss,courseEntitlements:rs.a,courseTasks:bs,courseLogs:Ss,courseMembership:at.a,courseMessage:Ns,coursePreference:xs,courseProgress:Hs,courseTools:Ks.a,content:Qn,delegatedAttemptGrade:eo,discussionBoardSettings:co,featureFlags:go,fileUpload:To,fileUploadSettings:Eo,ftue:Vo,gradableItemUserOption:tr,gradebookAttempt:ir,gradebookCategory:pr,gradebookColumn:Or,gradebookGrade:Cr.a,gradebookSchema:Pr,granularContentCopy:be,group:kc,groupSetImport:Ua,groupMembersImport:Fa,groupSetExport:Wa,groupWorkspace:Ec,institutionBrand:qc,institutionRole:zc,locale:Xc,ltiDomain:rl,ltiPlacement:bl,notificationMethodSetting:vl,partnerCloud:_l,proctoringServices:Ll,question:Ql,questionAnalysis:{questionDetails:{},reports:Ul},questionAttempt:pd,questionTag:hd,questionType:yd,sessionDebug:Td,studentPreview:Nd,submissionServices:Bd,systemPreference:Kd,theme:Qd,user:Ys.a,userPreference:xo,userPronouns:tu,app:N.a,contentIndicators:cu,ultraSettings:mu},Su={assessment:Te,attemptReceipt:{getAttemptReceipt:(e,t)=>e.attemptReceipt.byAttemptReceiptId[t],isLoading:e=>e.attemptReceipt.isLoading},blog:{blogs:Pe,comments:Fe,entries:ot,participants:rt.c,summary:it.c},calendar:ft,columnSummary:St,contentReviewState:Zn.c,course:Dt,courseChildren:Iu,courseConversion:os,courseEntitlements:rs.c,courseTasks:hs,courseLogs:As,courseMembership:at.c,courseMessage:{getOverallUnreadMessageCount:e=>{var t,n,s,o;return null!==(o=null===(s=null===(n=null===(t=e.courseMessage)||void 0===t?void 0:t.counts)||void 0===n?void 0:n.overall)||void 0===s?void 0:s.unreadCount)&&void 0!==o?o:0}},coursePreference:Bs,courseProgress:Vs,courseTools:Ks.c,content:Yn,delegatedAttemptGrade:no,discussionBoardSettings:ao,featureFlags:{getFeatureFlags:e=>e.featureFlags.featureFlags.byKey,getFeatureFlagValues:e=>e.featureFlags.featureFlagValues.byKey,getFeatureFlagValue:(e,t)=>e.featureFlags.featureFlagValues.byKey[t],isLoading:e=>e.featureFlags.isLoading},fileUploadSettings:Oo,fileUpload:wo,ftue:Ko,gradableItemUserOption:{getGradableItemUserOptionByColumnAndMembershipId:(e,t,n)=>{const s=e.gradableItemUserOption.byColumnId[t];return s&&s.byCourseMembershipId[n]}},gradebookAttempt:ar,gradebookCategory:br,gradebookColumn:Ir,gradebookGrade:Cr.c,gradebookSchema:kr,group:xc,groupSetImport:{getImportGroupSetStatus:(e,t)=>e.groupSetImport.byCourseId[t]},groupMembersImport:{getImportGroupMembersStatus:(e,t)=>e.groupMembersImport.byCourseId[t]},groupSetExport:{getExportGroupSet:(e,t)=>e.groupSetExport.byCourseId[t]},groupWorkspace:yc,institutionBrand:Hc,institutionRole:Qc,locale:Zc,ltiDomain:il,ltiPlacement:pl,notificationMethodSetting:Sl,partnerCloud:Rl,proctoringServices:Pl,question:Yl,questionAnalysis:{questionDetails:Hl,reports:Gl},questionAttempt:bd,questionTag:fd,questionType:Id,sessionDebug:{getLogCode:e=>e.sessionDebug.logCode,isUpdating:e=>e.sessionDebug.isUpdating,getSubmissionErrorCode:e=>e.sessionDebug.submissionErrorCode},submissionServices:xd,studentPreview:wd,systemPreference:Vd,user:Ys.c,userPreference:Bo,userPronouns:nu,app:N.c,contentIndicators:lu,ultraSettings:bu};function ju(e,t,n){const s=Object.keys(n),i=arguments.length<=0||void 0===e?{}:e;let a=i;return s.forEach((e=>{const s=o.get(n,e),c=o.get(i,e);"object"==typeof s?a=Object(r.a)(a,(n=>{o.set(n,e,ju(c,t,s))})):"function"==typeof s&&(a=Object(r.a)(a,(n=>{o.set(n,e,s(c,t))})))})),a}function Tu(e,t){return ju(e,t,Cu)}var Au={uploadRequestWatcherSaga:function*(){yield Object(Io.h)(Co.FILE_UPLOAD_REQUEST,(function*(e){const{file:t}=e.payload,{correlationId:n,groupId:s}=e.meta.uploadId;yield Object(Io.b)(Do,t,n,s)}))}};const _u={groupSet:{getRenderedGroupSets:(e,t)=>{var n,s;return null!==(s=null===(n=e.groupWorkspace.groupSets.byCourseId[t])||void 0===n?void 0:n.map((t=>{var n;return{id:t,...e.groupWorkspace.groupSets.byId[t],assignedGroups:null===(n=xc.getGroupsByGroupSetId(e,t))||void 0===n?void 0:n.map((e=>e.id))}})))&&void 0!==s?s:[]}}};var Ru;!function(e){e.AssessmentTimerToasts="feature.course.content.assessment.timer.toast",e.MultipleAttemptsAndGroups="feature.course.content.assessments.multipleAttemptsAndGroupsFeatureFlag",e.GradingBarAttemptNavigation="feature.content.course.grading.bar.attempt.navigation",e.OverallGradeSorting="feature.course.gradebook.overall.grade.sorting"}(Ru||(Ru={})),n.d(t,"lb",(function(){return s.b})),n.d(t,"kb",(function(){return s.a})),n.d(t,"hc",(function(){return s.d})),n.d(t,"u",(function(){return vo})),n.d(t,"V",(function(){return So})),n.d(t,"Bb",(function(){return Co})),n.d(t,"X",(function(){return vu})),n.d(t,"gc",(function(){return Su})),n.d(t,"dc",(function(){return Tu})),n.d(t,"e",(function(){return Sn})),n.d(t,"z",(function(){return _n})),n.d(t,"A",(function(){return Rn})),n.d(t,"U",(function(){return Nn})),n.d(t,"S",(function(){return wn})),n.d(t,"R",(function(){return Dn})),n.d(t,"T",(function(){return Ln})),n.d(t,"W",(function(){return Un})),n.d(t,"t",(function(){return w.i})),n.d(t,"i",(function(){return w.d})),n.d(t,"v",(function(){return w.j})),n.d(t,"d",(function(){return w.b})),n.d(t,"P",(function(){return w.q})),n.d(t,"jc",(function(){return w.F})),n.d(t,"Q",(function(){return w.r})),n.d(t,"Qb",(function(){return w.E})),n.d(t,"K",(function(){return w.n})),n.d(t,"a",(function(){return w.a})),n.d(t,"N",(function(){return w.o})),n.d(t,"s",(function(){return w.h})),n.d(t,"j",(function(){return w.e})),n.d(t,"h",(function(){return w.c})),n.d(t,"n",(function(){return w.f})),n.d(t,"q",(function(){return w.g})),n.d(t,"D",(function(){return w.l})),n.d(t,"C",(function(){return w.k})),n.d(t,"Nb",(function(){return w.C})),n.d(t,"Mb",(function(){return w.B})),n.d(t,"fb",(function(){return w.w})),n.d(t,"bb",(function(){return w.s})),n.d(t,"eb",(function(){return w.v})),n.d(t,"gb",(function(){return w.x})),n.d(t,"db",(function(){return w.u})),n.d(t,"cb",(function(){return w.t})),n.d(t,"Hb",(function(){return w.z})),n.d(t,"Gb",(function(){return w.y})),n.d(t,"O",(function(){return w.p})),n.d(t,"Jb",(function(){return w.A})),n.d(t,"Ob",(function(){return w.D})),n.d(t,"E",(function(){return w.m})),n.d(t,"ec",(function(){return Au})),n.d(t,"ib",(function(){return K})),n.d(t,"jb",(function(){return $})),n.d(t,"hb",(function(){return W})),n.d(t,"bc",(function(){return qr})),n.d(t,"Lb",(function(){return lt})),n.d(t,"Cb",(function(){return dt})),n.d(t,"Fb",(function(){return Hr})),n.d(t,"ic",(function(){return Vr})),n.d(t,"Eb",(function(){return Kr})),n.d(t,"c",(function(){return tn})),n.d(t,"b",(function(){return nn})),n.d(t,"vb",(function(){return dn})),n.d(t,"ub",(function(){return un})),n.d(t,"B",(function(){return $r.a})),n.d(t,"m",(function(){return Wr.b})),n.d(t,"l",(function(){return Wr.a})),n.d(t,"Vb",(function(){return Wr.i})),n.d(t,"Tb",(function(){return Wr.h})),n.d(t,"k",(function(){return Zr})),n.d(t,"yb",(function(){return ti})),n.d(t,"cc",(function(){return oi})),n.d(t,"lc",(function(){return z})),n.d(t,"p",(function(){return li})),n.d(t,"f",(function(){return Ht})),n.d(t,"y",(function(){return Vt})),n.d(t,"Zb",(function(){return Qt})),n.d(t,"ac",(function(){return di})),n.d(t,"x",(function(){return Ii})),n.d(t,"zb",(function(){return Si})),n.d(t,"xb",(function(){return Ti})),n.d(t,"pb",(function(){return Ri})),n.d(t,"kc",(function(){return Ni})),n.d(t,"qb",(function(){return wi})),n.d(t,"sb",(function(){return ki})),n.d(t,"Y",(function(){return xi})),n.d(t,"tb",(function(){return Bi})),n.d(t,"Ib",(function(){return Mi})),n.d(t,"Rb",(function(){return Ui})),n.d(t,"wb",(function(){return Hi})),n.d(t,"g",(function(){return 1})),n.d(t,"I",(function(){return 1})),n.d(t,"H",(function(){return 2})),n.d(t,"G",(function(){return 100})),n.d(t,"F",(function(){return 10})),n.d(t,"J",(function(){return 2})),n.d(t,"Xb",(function(){return sa})),n.d(t,"nb",(function(){return la})),n.d(t,"ob",(function(){return da})),n.d(t,"fc",(function(){return ba})),n.d(t,"Ub",(function(){return ja})),n.d(t,"Sb",(function(){return Ta})),n.d(t,"Wb",(function(){return Aa})),n.d(t,"Yb",(function(){return Da})),n.d(t,"Ab",(function(){return La})),n.d(t,"Kb",(function(){return Q})),n.d(t,"mb",(function(){return q.g})),n.d(t,"rb",(function(){return q.h})),n.d(t,"Db",(function(){return q.k})),n.d(t,"Pb",(function(){return q.n})),n.d(t,"Z",(function(){return q.e})),n.d(t,"ab",(function(){return q.f})),n.d(t,"o",(function(){return q.a})),n.d(t,"w",(function(){return q.b})),n.d(t,"L",(function(){return q.c})),n.d(t,"M",(function(){return q.d})),n.d(t,"mc",(function(){return _u})),n.d(t,"r",(function(){return Ru}))},IzIX:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var s=n("ERkP"),o=n("tN4z");const r=e=>s.createElement(o.AnalyticsSvgIcon,{analyticsId:"components-react.icons.filledAdd",...e,fontSize:"small",x:"0px",y:"0px",viewBox:"0 0 16 16"},s.createElement("svg",{id:"icon-color-small-add-circle-press",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},s.createElement("g",{fill:"none",fillRule:"evenodd"},s.createElement("path",{fill:"#A234B5",stroke:"#979797",d:"M15.5 8c0 4.143-3.357 7.5-7.5 7.5A7.5 7.5 0 1 1 15.5 8"}),s.createElement("path",{stroke:"#A234B5",d:"M15.5 8c0 4.143-3.357 7.5-7.5 7.5A7.5 7.5 0 1 1 15.5 8z"}),s.createElement("path",{stroke:"#FFF",strokeLinecap:"round",strokeWidth:"2",d:"M8 4.5v7M11.5 8h-7"}))))},JGST:function(e,t,n){"use strict";n.d(t,"e",(function(){return g})),n.d(t,"f",(function(){return h})),n.d(t,"a",(function(){return f})),n.d(t,"j",(function(){return O})),n.d(t,"c",(function(){return E})),n.d(t,"b",(function(){return y})),n.d(t,"k",(function(){return I})),n.d(t,"d",(function(){return C})),n.d(t,"g",(function(){return v})),n.d(t,"h",(function(){return S})),n.d(t,"i",(function(){return j}));var s=n("nsO7"),o=n("W2ME"),r=n("cg8W");const i="/v1/courses/%courseId%/journals",a=`${i}/%blogId%`,c=`${i}/%blogId%/entries`,l=`${c}/membership/%assignedUserId%`,d=`${c}/%entryId%`,u=`${d}/comments`,p=`${u}/%commentId%`,b=`${i}/%blogId%/participants`,m=`${i}/%blogId%/summary`;async function g(e){const{courseId:t,blogId:n,expandHasEntries:s,options:r}=e,i=s?"hasEntries":null,c=Object(o.f)(a,{courseId:t,blogId:n,expand:i});return await Object(o.j)(c,r)}async function h(e){const t=function(e){const{courseId:t,paging:n,expand:s,assignedUserId:o,blogId:r}=e;return{...n?{limit:n.limit,offset:n.offset}:{},assignedUserId:o,blogId:r,courseId:t,expand:s}}(e),{results:n,paging:s,permissions:i}=await Object(o.j)(Object(o.f)(l,t));return{byId:Object(r.c)(n),entriesId:n.map((e=>e.id)),paging:s,permissions:i}}async function f(e,t="permissions"){const{courseId:n,blogId:s,nextEntry:i}=e,a=await Object(o.p)(Object(o.f)(`${c}?expand=%expand%`,{courseId:n,blogId:s,expand:t}),i);return{byId:Object(r.c)([a])}}async function O(e){const{courseId:t,blogId:n,nextEntry:i,prevEntry:a}=e,c=Object(o.i)(a,i);if(Object(s.isEmpty)(c))return null;const l=Object(o.f)(d,{courseId:t,blogId:n,entryId:null==i?void 0:i.id}),u=await Object(o.o)(l,i);return{byId:Object(r.c)([u])}}const E=e=>{const{courseId:t,blogId:n,entryId:s}=e;return Object(o.r)(Object(o.f)(d,{courseId:t,blogId:n,entryId:s}))};async function y(e){const{courseId:t,blogId:n,entryId:s,nextComment:r}=e,i=Object(o.f)(u,{courseId:t,blogId:n,entryId:s});return await Object(o.p)(i,r)}async function I(e){const{courseId:t,blogId:n,entryId:r,nextComment:i,prevComment:a}=e,c=Object(o.i)(a,i);if(Object(s.isEmpty)(c))return null!=a?a:null;const l=Object(o.f)(p,{courseId:t,blogId:n,entryId:r,commentId:null==i?void 0:i.id});return await Object(o.o)(l,i)}const C=async e=>{const{courseId:t,blogId:n,entryId:s,commentId:r}=e,i=Object(o.f)(p,{courseId:t,blogId:n,entryId:s,commentId:r});return Object(o.r)(i)};async function v(e,t,n,s={}){const{permissions:i,results:a,paging:c}=await Object(o.j)(Object(o.f)(u,{courseId:e,blogId:t,entryId:n,...s}));return{paging:c,permissions:i,byId:Object(r.c)(a)}}async function S(e,t="user"){var n,s;const r={limit:null===(n=e.paging)||void 0===n?void 0:n.limit,offset:null===(s=e.paging)||void 0===s?void 0:s.offset,searchText:e.searchText,submissionStatus:e.submissionStatus,blogId:e.blogId,courseId:e.courseId,expand:t},{results:i,paging:a}=await Object(o.j)(Object(o.f)(b,r));return{paging:a,byCourseMembershipId:(c=i,c.reduce(((e,t)=>(e[t.membershipId]=t,e)),{}))};var c}async function j(e,t){const n=await Object(o.j)(Object(o.f)(m,{courseId:e,blogId:t}));return{byBlogId:Object(r.c)([n])}}},LhnZ:function(e,t,n){"use strict";var s=n("0XUZ");const o={S:"global.course.role.S",P:"global.course.role.P",BB_FACILITATOR:"global.course.role.BB_FACILITATOR",T:"global.course.role.T",B:"global.course.role.B",G:"global.course.role.G",U:"global.course.role.U"};var r=n("zGdY"),i=n("nbDY"),a=n.n(i);class c extends a.a{constructor(e,t,n,s="grades",o="grades"){super(e),this.iconClass=t,this.contentHandlers=n,this.needsGradingIcon=s,this.needsReconcilingIcon=o}getContentHandlers(){return this.contentHandlers.map((e=>s.b.parse(e)))}static parse(e){return c.getValues().find((t=>e===t.toString()))}static parseByContentHandler(e){if(e===c.Test.contentHandlers[0])return c.Test;return c.getValues().find((t=>t.contentHandlers.some((t=>t===e))))}}c.UltraAssignment=new c("resource/x-bb-assessment-ultraassignment","assignment",[r.t.UltraAssignment.toString()]),c.ClassicAssignment=new c("resource/x-bb-assignment","assignment",[r.t.ClassicAssignment.toString()]),c.Attendance=new c("resource/x-bb-attendance","attendance",[r.t.Attendance.toString()]),c.Blog=new c("resource/x-bb-bloglink","blog",[r.t.Blog.toString()]),c.Discussion=new c("resource/x-bb-forumlink","discussion",[r.t.Discussion.toString()]),c.Wiki=new c("resource/x-bb-wiki","wiki",[r.t.Wiki.toString()]),c.Survey=new c("resource/x-bb-assessment-survey","survey",[r.t.SurveyLink.toString()]),c.Test=new c("resource/x-bb-assessment","test",[r.t.TestLink.toString()]),c.PeerSubmissionsTest=new c("resource/x-bb-peer-submission","test",[r.t.TestLink.toString()]),c.PeerEvaluationTest=new c("resource/x-bb-peer-eval","test",[r.t.TestLink.toString()]),c.LTILink=new c("resource/x-bb-blti-link","lti",[r.t.LtiLink.toString(),r.t.LtiPlacement.toString()]),c.PartnerCloud=new c("resource/x-bbgs-partner-cloud","link",[r.t.PartnerCloud.toString()]),c.Scorm=new c("resource/x-plugin-scormengine","scormengine",[r.t.RusticiScorm.toString()]),c.Journal=new c("resource/x-bb-journallink","journal",[r.t.Journal.toString()]);var l=n("cg8W");var d={hasAccommodations:(e,t)=>{const{viewDueDateException:n,viewTimeLimitException:s}=t,{isAvailable:o,dueDateExceptionType:i,timeLimitExceptionType:a}=e;if(!o||!n&&!s)return!1;const c=!(!i||i===r.D.Normal),l=!(!a||a===r.fc.NoAccommodation);return c&&n||l&&s}},u=n("zSoH");var p={getFeedbackModeByOption:(e,t)=>{let n=null,s=null;if(t){const o=Object.keys(t);for(let r=0;r<o.length;r++){const i=o[r],a=t[i];if(null==a?void 0:a.options.some((t=>e.toString()===t))){n=i,(null==a?void 0:a.associatedDate)&&(s=new Date(a.associatedDate));break}}}return{mode:n,associatedDate:s}}},b=n("1hyT"),m=n("uq3J"),g=n("WQFv");var h,f={isCreatedByStudent:e=>{var t;const n=null===(t=e.contentDetail)||void 0===t?void 0:t[r.t.Discussion];return!!n&&!!n.isDiscussionCreatedByStudent}};function O(e){return e.startsWith(r.t.LtiPlacement)}function E(e){var t;const n=null===(t=e.contentHandler)||void 0===t?void 0:t.toString();return!!n&&(s.b.LtiLink.isEqualTo(n)||O(n)||s.b.PartnerCloud.isEqualTo(n))}function y(e){var t,n;if(!s.b.LtiLink.isEqualTo(e.contentHandler))return!1;if(!e.contentHandler)return!1;const o=null===(n=null===(t=e.contentDetail)||void 0===t?void 0:t[e.contentHandler.toString()])||void 0===n?void 0:n.url;return!!(null==o?void 0:o.includes("://xplor"))}function I(e){var t,n,s;const o=null===(t=null==e?void 0:e.contentHandler)||void 0===t?void 0:t.toString();if(o)return null===(s=null===(n=e.contentDetail)||void 0===n?void 0:n[o])||void 0===s?void 0:s.existsPlacement}!function(e){e.CloudDocument="CloudDocument",e.ContentItemMessage="CIM"}(h||(h={}));var C={isLtiPlacement:O,isLtiLink:E,isXplorLtiLink:y,ltiPlacementExists:I,ltiToolProviderExists:function(e){var t,n,s;const o=null===(t=null==e?void 0:e.contentHandler)||void 0===t?void 0:t.toString();if(o)return null===(s=null===(n=e.contentDetail)||void 0===n?void 0:n[o])||void 0===s?void 0:s.existsLTIProvider},isGroupLaunchAllowed:function(e){var t,n,s;const o=null===(t=null==e?void 0:e.contentHandler)||void 0===t?void 0:t.toString();return!!o&&!!(null===(s=null===(n=e.contentDetail)||void 0===n?void 0:n[o])||void 0===s?void 0:s.allowGroupLaunch)},isUnlaunchableLtiLink:function(e){const t=!!e.id&&E(e),n=y(e),s=!!function(e){var t,n,s;const o=null===(t=e.contentHandler)||void 0===t?void 0:t.toString();if(o)return null===(s=null===(n=e.contentDetail)||void 0===n?void 0:n[o])||void 0===s?void 0:s.launchLink}(e),o=!1===I(e);return t&&(!n&&!s||o)},getCloudDocumentType:function(e){var t,n,s;const o=null===(t=null==e?void 0:e.contentHandler)||void 0===t?void 0:t.toString();if(o)return null===(s=null===(n=e.contentDetail)||void 0===n?void 0:n[o])||void 0===s?void 0:s.cloudDocumentType},isCloudDocument:function(e){var t,n,s;const o=null===(t=e.contentHandler)||void 0===t?void 0:t.toString();return!!o&&(null===(s=null===(n=e.contentDetail)||void 0===n?void 0:n[o])||void 0===s?void 0:s.itemOrigin)===h.CloudDocument},getCloudDocumentAttrsByType:function(e,t){const n=e.filter((e=>e.customParameters.typeCloudDocument===t))[0];return{showButton:!!n,...(null==n?void 0:n.id)&&{placementId:n.id}}}},v=n("G3FW");const S=e=>!0===e.isAvailable&&!0===e.isClosed,j=e=>r.z.Undecided===e.ultraStatus||r.z.Classic===e.ultraStatus,T=e=>r.z.UltraPreview===e.ultraStatus,A=e=>e.permissions.export&&!T(e),_=e=>e.permissions.archive&&!T(e),R=e=>e.permissions.edit,N=e=>e.permissions.import,w=e=>e.permissions.copy,D=e=>e.permissions.convert;var L;!function(e){e.Pdf="pdf",e.Presentation="presentation",e.Spreadsheet="spreadsheet",e.Zip="zip",e.Audio="audio",e.Photo="photo",e.Video="video",e.DocumentText="document-text",e.DocumentBlank="document-blank"}(L||(L={}));const P=new Map([["pdf",L.Pdf],["powerpoint",L.Presentation],["presentation",L.Presentation],["excel",L.Spreadsheet],["spreadsheet",L.Spreadsheet],["zip",L.Zip],["audio",L.Audio],["image",L.Photo],["video",L.Video],["word",L.DocumentText],["document",L.DocumentText],["text",L.DocumentText],["rtf",L.DocumentText]]),k=e=>{var t;if(!e)return L.DocumentBlank;return null!==(t=(e=>{for(const[t,n]of P)if(e.includes(t))return n})(e.toLowerCase()))&&void 0!==t?t:L.DocumentBlank},x=e=>`img-icon-${k(e)}`,B="rs-lockdown";function M(e){var t,n,o,r;const i=null===(t=e.contentHandler)||void 0===t?void 0:t.toString();return s.b.TestLink.isEqualTo(e.contentHandler)&&i&&(null===(r=null===(o=null===(n=e.contentDetail)||void 0===n?void 0:n[i])||void 0===o?void 0:o.test)||void 0===r?void 0:r.deploymentSettings)?e.contentDetail[i].test.deploymentSettings:null}function U(e){var t;const n=M(e);return null!==(t=null==n?void 0:n.proctoringServiceHandle)&&void 0!==t?t:null}function G(e){const t=M(e);return null!==t&&(t.proctoringServiceHandle===B&&!!t.isSecureBrowserRequiredToTake)}n.d(t,"i",(function(){return s.c})),n.d(t,"d",(function(){return s.b})),n.d(t,"j",(function(){return s.d})),n.d(t,"b",(function(){return s.a})),n.d(t,"q",(function(){return s.e})),n.d(t,"F",(function(){return o})),n.d(t,"r",(function(){return c})),n.d(t,"E",(function(){return l.c})),n.d(t,"n",(function(){return l.a})),n.d(t,"a",(function(){return d})),n.d(t,"o",(function(){return u.b})),n.d(t,"h",(function(){return p})),n.d(t,"e",(function(){return b.a})),n.d(t,"c",(function(){return m.a})),n.d(t,"f",(function(){return g.a})),n.d(t,"g",(function(){return f})),n.d(t,"l",(function(){return C})),n.d(t,"k",(function(){return v.a})),n.d(t,"C",(function(){return S})),n.d(t,"B",(function(){return j})),n.d(t,"w",(function(){return A})),n.d(t,"s",(function(){return _})),n.d(t,"v",(function(){return R})),n.d(t,"x",(function(){return N})),n.d(t,"u",(function(){return w})),n.d(t,"t",(function(){return D})),n.d(t,"z",(function(){return k})),n.d(t,"y",(function(){return x})),n.d(t,"p",(function(){return B})),n.d(t,"A",(function(){return U})),n.d(t,"D",(function(){return G})),n.d(t,"m",(function(){return h}))},M5qL:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));const s={BLOG_ENTRIES_LOAD:"blog.entries.load",BLOG_ENTRY_ADD:"blog.entry.add",BLOG_ENTRY_MODIFY:"blog.entry.modify",BLOG_ENTRY_REMOVE:"blog.entry.remove"}},MN17:function(e,t,n){"use strict";var s=n("9EWH"),o=n("iKGo"),r=n("W2ME");const i="courseEntitlements.load";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return l}));const a=Object(o.g)({byCourseId:{},isLoading:!1},{[i]:o.n,[Object(o.j)(i)]:(e,t)=>{const n=t.entitlements;let r=e;if(n){const o=n.reduce(((e,t)=>(e[t.uid]=t,e)),{});r=Object(s.a)(e,(e=>{e.byCourseId[t.courseId]=o}))}return Object(o.p)(r,t)},[Object(o.h)(i)]:o.l}),c={loadUserCourseEntitlements:e=>Object(o.f)(i,(()=>function(e){return Object(r.j)(Object(r.f)("/v1/courses/%courseId%/entitlements",{courseId:e})).then((t=>({entitlements:t.results,courseId:e})))}(e).catch((e=>{throw{err:e}}))))},l={userHasCourseEntitlement:(e,t,n)=>{const s=e.courseEntitlements.byCourseId[t];return!!s&&!!s[n]},hasAnyCourseEntitlement:(e,t,n)=>{const s=e.courseEntitlements.byCourseId[t];if(s)return n.some((e=>!!s[e]))},hasLoadedCourseEntitlements:(e,t)=>!!t&&!!e.courseEntitlements.byCourseId[t],isLoadingEntitlements:e=>e.courseEntitlements.isLoading}},MROq:function(e,t,n){var s={"./af":"8GSH","./af.js":"8GSH","./ar":"NcOb","./ar-dz":"1ors","./ar-dz.js":"1ors","./ar-kw":"Sc1Y","./ar-kw.js":"Sc1Y","./ar-ly":"GzvP","./ar-ly.js":"GzvP","./ar-ma":"hH25","./ar-ma.js":"hH25","./ar-sa":"u2jB","./ar-sa.js":"u2jB","./ar-tn":"5Mza","./ar-tn.js":"5Mza","./ar.js":"NcOb","./az":"ZVVJ","./az.js":"ZVVJ","./be":"kQaN","./be.js":"kQaN","./bg":"+n5x","./bg.js":"+n5x","./bm":"TTiN","./bm.js":"TTiN","./bn":"aIF2","./bn-bd":"lTqY","./bn-bd.js":"lTqY","./bn.js":"aIF2","./bo":"QWb5","./bo.js":"QWb5","./br":"iQoZ","./br.js":"iQoZ","./bs":"EL7g","./bs.js":"EL7g","./ca":"vd/2","./ca.js":"vd/2","./cs":"K+3W","./cs.js":"K+3W","./cv":"Jt3X","./cv.js":"Jt3X","./cy":"sWi3","./cy.js":"sWi3","./da":"YcFX","./da.js":"YcFX","./de":"BKZ+","./de-at":"Oq9h","./de-at.js":"Oq9h","./de-ch":"hHY4","./de-ch.js":"hHY4","./de.js":"BKZ+","./dv":"w8Ej","./dv.js":"w8Ej","./el":"tSbB","./el.js":"tSbB","./en-au":"HgyJ","./en-au.js":"HgyJ","./en-ca":"ZyTy","./en-ca.js":"ZyTy","./en-gb":"exaB","./en-gb.js":"exaB","./en-ie":"yKzn","./en-ie.js":"yKzn","./en-il":"TB59","./en-il.js":"TB59","./en-in":"S70V","./en-in.js":"S70V","./en-nz":"iDxo","./en-nz.js":"iDxo","./en-sg":"zS0P","./en-sg.js":"zS0P","./eo":"4bvN","./eo.js":"4bvN","./es":"GNPT","./es-do":"R7mU","./es-do.js":"R7mU","./es-mx":"FkqR","./es-mx.js":"FkqR","./es-us":"Nstw","./es-us.js":"Nstw","./es.js":"GNPT","./et":"ZOjb","./et.js":"ZOjb","./eu":"kFC9","./eu.js":"kFC9","./fa":"8Cju","./fa.js":"8Cju","./fi":"vcN1","./fi.js":"vcN1","./fil":"3g1g","./fil.js":"3g1g","./fo":"8Ygf","./fo.js":"8Ygf","./fr":"Y8Ij","./fr-ca":"t+Zl","./fr-ca.js":"t+Zl","./fr-ch":"SPXN","./fr-ch.js":"SPXN","./fr.js":"Y8Ij","./fy":"T3MF","./fy.js":"T3MF","./ga":"NowM","./ga.js":"NowM","./gd":"GJYX","./gd.js":"GJYX","./gl":"MdC8","./gl.js":"MdC8","./gom-deva":"QJjq","./gom-deva.js":"QJjq","./gom-latn":"5j0y","./gom-latn.js":"5j0y","./gu":"fY0S","./gu.js":"fY0S","./he":"ACAV","./he.js":"ACAV","./hi":"3WqV","./hi.js":"3WqV","./hr":"OnNk","./hr.js":"OnNk","./hu":"EQmw","./hu.js":"EQmw","./hy-am":"MNf7","./hy-am.js":"MNf7","./id":"0yow","./id.js":"0yow","./is":"TmOJ","./is.js":"TmOJ","./it":"xD/0","./it-ch":"foQf","./it-ch.js":"foQf","./it.js":"xD/0","./ja":"jOnb","./ja.js":"jOnb","./jv":"lOtj","./jv.js":"lOtj","./ka":"BAN/","./ka.js":"BAN/","./kk":"iNiw","./kk.js":"iNiw","./km":"TUxt","./km.js":"TUxt","./kn":"hQzt","./kn.js":"hQzt","./ko":"ZNZT","./ko.js":"ZNZT","./ku":"S0Tg","./ku.js":"S0Tg","./ky":"JO+T","./ky.js":"JO+T","./lb":"vn/h","./lb.js":"vn/h","./lo":"gnIm","./lo.js":"gnIm","./lt":"6PD3","./lt.js":"6PD3","./lv":"YKe2","./lv.js":"YKe2","./me":"d3TR","./me.js":"d3TR","./mi":"hTlv","./mi.js":"hTlv","./mk":"ffVN","./mk.js":"ffVN","./ml":"ejL1","./ml.js":"ejL1","./mn":"RIsM","./mn.js":"RIsM","./mr":"CPJk","./mr.js":"CPJk","./ms":"d5Hy","./ms-my":"t4T9","./ms-my.js":"t4T9","./ms.js":"d5Hy","./mt":"1KVU","./mt.js":"1KVU","./my":"LsNb","./my.js":"LsNb","./nb":"h+U8","./nb.js":"h+U8","./ne":"2JSI","./ne.js":"2JSI","./nl":"jsZ8","./nl-be":"+h6j","./nl-be.js":"+h6j","./nl.js":"jsZ8","./nn":"mh29","./nn.js":"mh29","./oc-lnc":"zX+o","./oc-lnc.js":"zX+o","./pa-in":"O6bP","./pa-in.js":"O6bP","./pl":"8Bez","./pl.js":"8Bez","./pt":"DDip","./pt-br":"uHm5","./pt-br.js":"uHm5","./pt.js":"DDip","./ro":"baBi","./ro.js":"baBi","./ru":"ecsu","./ru.js":"ecsu","./sd":"e9KM","./sd.js":"e9KM","./se":"CZRU","./se.js":"CZRU","./si":"TO58","./si.js":"TO58","./sk":"K+Lk","./sk.js":"K+Lk","./sl":"QK6v","./sl.js":"QK6v","./sq":"v3Qg","./sq.js":"v3Qg","./sr":"Ndyf","./sr-cyrl":"PGvg","./sr-cyrl.js":"PGvg","./sr.js":"Ndyf","./ss":"2B8G","./ss.js":"2B8G","./sv":"WF5B","./sv.js":"WF5B","./sw":"4VvY","./sw.js":"4VvY","./ta":"dw3T","./ta.js":"dw3T","./te":"4MAb","./te.js":"4MAb","./tet":"/hi0","./tet.js":"/hi0","./tg":"PoVJ","./tg.js":"PoVJ","./th":"OY2w","./th.js":"OY2w","./tk":"zO4H","./tk.js":"zO4H","./tl-ph":"UC+K","./tl-ph.js":"UC+K","./tlh":"cWLW","./tlh.js":"cWLW","./tr":"EqYs","./tr.js":"EqYs","./tzl":"fN8o","./tzl.js":"fN8o","./tzm":"6cYq","./tzm-latn":"pdAN","./tzm-latn.js":"pdAN","./tzm.js":"6cYq","./ug-cn":"J+SV","./ug-cn.js":"J+SV","./uk":"6Olw","./uk.js":"6Olw","./ur":"QNGR","./ur.js":"QNGR","./uz":"hLzJ","./uz-latn":"KqOT","./uz-latn.js":"KqOT","./uz.js":"hLzJ","./vi":"EnIJ","./vi.js":"EnIJ","./x-pseudo":"W7dU","./x-pseudo.js":"W7dU","./yo":"QDhB","./yo.js":"QDhB","./zh-cn":"bjMe","./zh-cn.js":"bjMe","./zh-hk":"JFCg","./zh-hk.js":"JFCg","./zh-mo":"5BRa","./zh-mo.js":"5BRa","./zh-tw":"xBDH","./zh-tw.js":"xBDH"};function o(e){var t=r(e);return n(t)}function r(e){if(!n.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}o.keys=function(){return Object.keys(s)},o.resolve=r,e.exports=o,o.id="MROq"},Nvcb:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return o}));const s={INSTITUTION_BRAND_CREATE:"institution.brand.create",INSTITUTION_BRANDS_UPDATE:"institution.brand.update",INSTITUTION_BRAND_DELETE:"institution.brand.delete",INSTITUTION_BRAND_LOAD:"institution.brand.load",INSTITUTION_BRANDS_LOAD:"institution.brands.load",DEFAULT_INSTITUTION_BRAND_LOAD:"institution.brands.default.load",INSTITUTION_BRAND_HOSTNAMES_LOAD:"institution.brand.hostnames.load",INSTITUTION_CUSTOM_CSS_UPSERT:"institution.custom.css.upsert"},o="default"},OIxA:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return s}));const s=t=>e.byteLength(t)>196e3}).call(this,n("+ZX+").Buffer)},PPJ4:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return c})),n.d(t,"d",(function(){return l})),n.d(t,"c",(function(){return d}));var s=n("zGdY");const o={apiBasePath:"",xsrf:"",partnerCloudBasePath:""},r={userName:"",xsrfToken:""},i={fetchFoundationsToken:void 0,fetchFoundationsContext:void 0,cookies:void 0,foundationsToken:void 0,foundationsTokenContext:void 0};function a(e){Object.assign(o,e),Object.assign(r,{xsrfToken:e.xsrf,cookies:e.cookies}),Object.assign(i,e.foundationsApiSession),function(e){var t,n,o;let r;r=null!==(n=null===(t=null===globalThis||void 0===globalThis?void 0:globalThis.location)||void 0===t?void 0:t.href)&&void 0!==n?n:e.apiBasePath;const i=/^[^\/]*\/\/[^\/]+/.exec(r);r=null!==(o=null==i?void 0:i[0])&&void 0!==o?o:r,s.Hd.setBaseUrl(r)}(e)}const c=o,l=r,d=i},"Q/M7":function(e,t,n){"use strict";(function(e){n.d(t,"d",(function(){return o})),n.d(t,"f",(function(){return r})),n.d(t,"g",(function(){return i}));var s=n("RPob");function o(e,t){let n="";return t&&e&&e.isClassic()&&(n=decodeURIComponent(t).trim()),n.length>0&&"/"===n[0]&&n||null}function r(t,n,s){return encodeURIComponent(t+"/"+n+"?"+e.param(s))}function i(e){return Object(s.f)("/webapps/blackboard/execute/ultraFramePassThrough?redirectTo="+encodeURIComponent(Object(s.f)(e)))}n.d(t,"a",(function(){return s.c})),n.d(t,"b",(function(){return s.e})),n.d(t,"c",(function(){return s.f})),n.d(t,"e",(function(){return s.i})),n.d(t,"h",(function(){return s.k})),n.d(t,"i",(function(){return s.l})),n.d(t,"j",(function(){return s.n})),n.d(t,"k",(function(){return s.p})),n.d(t,"l",(function(){return s.s})),n.d(t,"m",(function(){return s.t})),n.d(t,"n",(function(){return s.v})),n.d(t,"o",(function(){return s.x})),n.d(t,"p",(function(){return s.A})),n.d(t,"q",(function(){return s.D})),n.d(t,"r",(function(){return s.E})),n.d(t,"s",(function(){return s.F}))}).call(this,n("71td"))},RPob:function(e,t,n){"use strict";const s=e=>Math.abs(e.scrollHeight-e.clientHeight-e.scrollTop)<1,o=e=>{const t={};return e&&Object.keys(e).forEach((n=>{"object"==typeof e[n]?"domNode"!==n&&(t[n]=o(e[n])):t[n]=e[n]})),t},r=(e,t)=>JSON.stringify(o(e))===JSON.stringify(o(t));let i=null;const a=(e,t)=>(null!==i&&(i.remove(),i=null),new Promise(((n,s)=>{i=document.createElement("input"),i.setAttribute("id","id_file_upload"),i.setAttribute("type","file"),i.setAttribute("accept",e),i.setAttribute("multiple",`${t}`),i.style.display="none",document.body.appendChild(i),i.addEventListener("change",(()=>{i&&null!==i.files?n(i.files):s(new Error("File selection failed")),null==i||i.remove(),i=null})),i.click()}))),c=(e,t)=>{const n=t.map((e=>e.toLowerCase()));return Array.from(e).map((e=>`.${e.name.toLowerCase().split(".").pop()}`)).every((e=>n.includes(e)))},l=/^[a-z][a-z0-9\+\-\.]*\:{1}/;function d(e){return function(e){return l.test(e)}(e)?e:`http://${e}`}let u;const p=/^[^\/]*\/\/[^\/]+/;function b(e){var t;const n=p.exec(e);return null!==(t=null==n?void 0:n[0])&&void 0!==t?t:e}function m(){return u||void 0===window.location||(u=b(window.location.href)),u}function g(e){return 0===e.indexOf("https://")}const h=/^[a-zA-Z]*:?\/\//;function f(e){return h.test(e)}function O(e,t){return e&&e.indexOf("://")<0&&0!==e.indexOf("//")&&("/"!==e[0]&&(e="/"+e),e=t?t+e:m()+e),e}const E=/[^\?#]*/;function y(e){var t,n;return e&&null!==(n=null===(t=E.exec(e))||void 0===t?void 0:t[0])&&void 0!==n?n:e}function I(e){f(e)||(e="http://"+e),window.open(e,"_blank")}function C(e){window.location.replace(e)}const v=/^https?:/;function S(e){return e?e.replace(v,""):""}function j(e){return e&&e.indexOf("://")>=0?e.substring(e.indexOf("://")+3):e}function T(e){let t;return t=e.indexOf("://")>-1?e.split("/")[2]:e.split("/")[0],t=t.split("?")[0],t=t.split(":")[0],t}function A(e){const t=e.indexOf("?");if(t<0)return{};const n=e.substring(t+1).split("&"),s={};return n.forEach((e=>{const t=e.split("=");s[t[0]]=decodeURIComponent(t[1])})),s}function _(e,t,n){return e.indexOf(t+"=")<0?e+(e.indexOf("?")<0?"?":"&")+t+"="+n:e}function R(e,t){let n=_(e,"isForcedDownload","true");return n=_(n,"downloadFileName",encodeURIComponent(t)),n}function N(e){const t=e.split("/");return t[t.length-1]}const w=/[\[]/,D=/[\]]/,L=/\+/g;function P(e,t){e=e.replace(w,"\\[").replace(D,"\\]");const n=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(t);return null===n?"":decodeURIComponent(n[1].replace(L," "))}var k=n("n7/H");function x(e,t){var n;return"Y"===t&&null!==(n=e.preferredDisplayName)&&void 0!==n?n:k.PreferredDisplayName.Given}var B=n("IxpK");function M(e,t){const n=setTimeout(t,36e5);return e=>{clearTimeout(n),e&&e()}}function U(e){const t={...e,legacySetup:M};return Object(B.a)(t)}const G=new class{constructor(){this.readPolite=()=>{},this.readAssertive=()=>{}}},F=e=>{G.readPolite(e)},q=e=>{G.readAssertive(e)};function H(e,t){return(null!=t?t:[{tag:"table",replacementText:""},{tag:"math",replacementText:"",replacementTextPlural:""}]).forEach((t=>{if(t.replacementTextPlural&&e.body.querySelectorAll(`body > p > ${t.tag}`).forEach((e=>{var t;if("P"===(null===(t=e.parentElement)||void 0===t?void 0:t.nodeName)){const t=[];e.parentElement.childNodes.forEach((e=>{t.push(e)})),e.parentElement.replaceWith(...t)}})),t.tagQuery&&t.replacementAttribute){const n=t.replacementAttribute;e.body.querySelectorAll(t.tagQuery).forEach((e=>{e.hasAttribute(n)&&e.replaceWith(e.getAttribute(n))}))}let n=!1;(t.tag?Array.from(e.body.querySelectorAll(t.tag)):[]).forEach((s=>{var o,r,i,a,c;const l=s.previousSibling,d=function(e){var t,n,s;let o=!0,r=!0,i=e;for(;o&&r;)i=null!==(t=null==i?void 0:i.nextSibling)&&void 0!==t?t:null,o="SPAN"===(null==i?void 0:i.nodeName)||"#text"===(null==i?void 0:i.nodeName),r=""===(null===(n=null==i?void 0:i.textContent)||void 0===n?void 0:n.trim())||"\n"===(null===(s=null==i?void 0:i.textContent)||void 0===s?void 0:s.trim());return i}(s);if("BR"===(null==l?void 0:l.nodeName)&&(null===(o=s.parentElement)||void 0===o||o.removeChild(l)),"BR"===(null==d?void 0:d.nodeName)&&(null===(r=s.parentElement)||void 0===r||r.removeChild(d)),s.nodeName===(null==d?void 0:d.nodeName)&&t.replacementTextPlural)n=!0,s.remove();else{const o=e.createElement("p");o.innerHTML=n?null!==(i=t.replacementTextPlural)&&void 0!==i?i:"":null!==(a=t.replacementText)&&void 0!==a?a:"",null===(c=s.parentElement)||void 0===c||c.replaceChild(o,s),n=!1}}))})),e}const V=(e,t)=>{var n;3===e.nodeType&&(null===(n=e.textContent)||void 0===n?void 0:n.trim())?t.push(e.textContent.trim()):e.firstChild&&!e.hasAttribute("data-bbtype")&&V(e.firstChild,t),e.nextSibling&&V(e.nextSibling,t)};function K(e,t){const n=H((new DOMParser).parseFromString(e,"text/html"),t),s=[];return V(n.body,s),s.join(" ")}var $;!function(e){e.AppendSection="appendSection",e.Outdated_PrependSection="prependSection"}($||($={}));var W=n("nsO7");const z={courseKeySection:"course",orgKeySection:"organization"},Q={0:e=>`${e}.course`,1:e=>`${e}.organization`},Y=Object(W.memoize)(((e,t,n)=>{const{courseKeySection:s,orgKeySection:o}=null!=n?n:{};return{[$.AppendSection]:Q,[$.Outdated_PrependSection]:{0:e=>`${s}.${e}`,1:e=>`${o}.${e}`}}[t][e?1:0]}),((e,t,n=z)=>{const{courseKeySection:s,orgKeySection:o}=n;return`${e?1:0}_${t}${t===$.Outdated_PrependSection?`_${s}_${o}`:""}`}));function J(e){return!!e&&"createReader"in e}function X(e){return new Promise(((t,n)=>{e.readEntries(t,n)}))}async function Z(e){const t=[];async function n(e){const t=await function(e){return new Promise(((t,n)=>{e.file(t,n)}))}(e);return{type:ee.File,name:t.name,file:t,children:null}}async function s(e){const t=await Z(e);return{type:ee.Folder,name:e.name,file:null,children:t}}if(J(e)){const o=e.createReader();for await(const e of async function*(e){let t=await X(e);for(;t.length>0;)yield t,t=await X(e)}(o))e.forEach((e=>{var o;(o=e)&&"file"in o?t.push(n(e)):J(e)&&t.push(s(e))}))}return Promise.all(t)}var ee;async function te(e){var t;if(!(null===(t=e.dataTransfer)||void 0===t?void 0:t.items))return{droppedFiles:[]};const n=e.dataTransfer.items,s=[];for(let e=0;e<n.length;e++)n[e]&&s.push(n[e]);const o=s.map((e=>{const t=function(e){return e.getAsEntry?e.getAsEntry():e.webkitGetAsEntry()}(e);return t&&!(null==t?void 0:t.isDirectory)?function(e,t){let n=null;if(e.getAsFile&&(n=e.getAsFile()),n&&!(null==t?void 0:t.isDirectory))return{type:ee.File,name:n.name,file:n,children:null}}(e,t):(null==t?void 0:t.isDirectory)?async function(e){const t=await Z(e);return{type:ee.Folder,name:e.name,file:null,children:t}}(t):void 0})).filter((e=>!!e));return{droppedFiles:await Promise.all(o)}}!function(e){e[e.Folder=0]="Folder",e[e.File=1]="File"}(ee||(ee={}));const ne=[".ds_store","thumbs.db","desktop.ini"];function se(e){const t=[],n=[];return e.forEach((e=>{var s,o;e.type===ee.File&&e.file?(o=e.file.name,ne.includes(o.toLowerCase())||t.push(e.file)):e.type===ee.Folder&&n.push({name:e.name,children:se(null!==(s=e.children)&&void 0!==s?s:[])})})),{files:t,directories:n}}n.d(t,"u",(function(){return s})),n.d(t,"g",(function(){return r})),n.d(t,"w",(function(){return a})),n.d(t,"G",(function(){return c})),n.d(t,"h",(function(){return d})),n.d(t,"l",(function(){return b})),n.d(t,"n",(function(){return m})),n.d(t,"v",(function(){return g})),n.d(t,"F",(function(){return f})),n.d(t,"f",(function(){return O})),n.d(t,"E",(function(){return y})),n.d(t,"x",(function(){return I})),n.d(t,"A",(function(){return C})),n.d(t,"s",(function(){return S})),n.d(t,"D",(function(){return j})),n.d(t,"i",(function(){return T})),n.d(t,"e",(function(){return A})),n.d(t,"c",(function(){return _})),n.d(t,"k",(function(){return R})),n.d(t,"p",(function(){return N})),n.d(t,"t",(function(){return P})),n.d(t,"r",(function(){return x})),n.d(t,"C",(function(){return U})),n.d(t,"d",(function(){return G})),n.d(t,"z",(function(){return F})),n.d(t,"y",(function(){return q})),n.d(t,"B",(function(){return H})),n.d(t,"q",(function(){return K})),n.d(t,"a",(function(){return $})),n.d(t,"m",(function(){return Y})),n.d(t,"b",(function(){return ee})),n.d(t,"o",(function(){return te})),n.d(t,"j",(function(){return se}))},RRs6:function(e,t,n){var s={"./ar-001/_combined.json":["bzSq",254],"./ar-AE/_combined.json":["kXUs",255],"./ar-BH/_combined.json":["uu8c",256],"./ar-DJ/_combined.json":["AXSJ",257],"./ar-DZ/_combined.json":["d2Tw",258],"./ar-EG/_combined.json":["HU5B",259],"./ar-EH/_combined.json":["Rf/8",260],"./ar-ER/_combined.json":["lMqs",261],"./ar-IL/_combined.json":["sCR2",262],"./ar-IQ/_combined.json":["s69u",263],"./ar-JO/_combined.json":["YeG1",264],"./ar-KM/_combined.json":["Nsqb",265],"./ar-KW/_combined.json":["v7VH",266],"./ar-LB/_combined.json":["4UZ5",267],"./ar-LY/_combined.json":["d5Iy",268],"./ar-MA/_combined.json":["dJ98",269],"./ar-MR/_combined.json":["kPIw",270],"./ar-OM/_combined.json":["QBE7",271],"./ar-PS/_combined.json":["oCQ2",272],"./ar-QA/_combined.json":["Hadl",273],"./ar-SA/_combined.json":["BWYe",274],"./ar-SD/_combined.json":["sZn0",275],"./ar-SO/_combined.json":["/pS2",276],"./ar-SS/_combined.json":["P5MV",277],"./ar-SY/_combined.json":["t6FV",278],"./ar-TD/_combined.json":["0dWw",279],"./ar-TN/_combined.json":["olD4",280],"./ar-YE/_combined.json":["cwri",281],"./ar/_combined.json":["Z7mm",253],"./bg-BG/_combined.json":["lhO/",283],"./bg/_combined.json":["XExx",282],"./ca-AD/_combined.json":["1TTF",285],"./ca-ES-VALENCIA/_combined.json":["x5id",287],"./ca-ES/_combined.json":["OeTV",286],"./ca-FR/_combined.json":["pD9U",288],"./ca-IT/_combined.json":["i92d",289],"./ca/_combined.json":["pXk6",284],"./cs-CZ/_combined.json":["/ACq",291],"./cs/_combined.json":["F5xB",290],"./cy-GB/_combined.json":["aQ0a",293],"./cy/_combined.json":["PtiR",292],"./da-DK/_combined.json":["06Qy",295],"./da-GL/_combined.json":["WpLh",296],"./da/_combined.json":["eYMN",294],"./dav-KE/_combined.json":["ZzyU",298],"./dav/_combined.json":["qiBt",297],"./de-AT/_combined.json":["ESfo",300],"./de-BE/_combined.json":["MZB8",301],"./de-CH/_combined.json":["RKx5",302],"./de-DE/_combined.json":["F/Ao",303],"./de-LI/_combined.json":["ZsKg",304],"./de-LU/_combined.json":["NQwb",305],"./de/_combined.json":["4uqP",299],"./en-001/_combined.json":["YHcT",307],"./en-150/_combined.json":["6nXF",308],"./en-AG/_combined.json":["Ma+m",309],"./en-AI/_combined.json":["Bb4Y",310],"./en-AS/_combined.json":["3DdZ",311],"./en-AU/_combined.json":["+YpM",312],"./en-BB/_combined.json":["0r6j",313],"./en-BE/_combined.json":["MYcT",314],"./en-BM/_combined.json":["Beag",315],"./en-BS/_combined.json":["4GKC",316],"./en-BW/_combined.json":["fyZ5",317],"./en-BZ/_combined.json":["KDbT",318],"./en-CA/_combined.json":["JPNH",319],"./en-CC/_combined.json":["wcBm",320],"./en-CK/_combined.json":["yKBd",321],"./en-CM/_combined.json":["wJ3H",322],"./en-CX/_combined.json":["nv2n",323],"./en-DG/_combined.json":["oaA8",324],"./en-DM/_combined.json":["PVF+",325],"./en-ER/_combined.json":["Ufgi",326],"./en-FJ/_combined.json":["xGrz",327],"./en-FK/_combined.json":["AVBD",328],"./en-FM/_combined.json":["GEpg",329],"./en-GB/_combined.json":["iETG",330],"./en-GD/_combined.json":["BwNK",331],"./en-GG/_combined.json":["m4mR",332],"./en-GH/_combined.json":["Ndt5",333],"./en-GI/_combined.json":["7qmt",334],"./en-GM/_combined.json":["LI3r",335],"./en-GU/_combined.json":["1mog",336],"./en-GY/_combined.json":["4oOp",337],"./en-HK/_combined.json":["kzZH",338],"./en-IE/_combined.json":["cZDf",339],"./en-IM/_combined.json":["FWGY",340],"./en-IN/_combined.json":["8QNH",341],"./en-IO/_combined.json":["Wk71",342],"./en-JE/_combined.json":["hL7Z",343],"./en-JM/_combined.json":["6RUH",344],"./en-KE/_combined.json":["imc3",345],"./en-KI/_combined.json":["ZLwJ",346],"./en-KN/_combined.json":["fY0N",347],"./en-KY/_combined.json":["2bN7",348],"./en-LC/_combined.json":["L5G8",349],"./en-LR/_combined.json":["uAu1",350],"./en-LS/_combined.json":["+9Km",351],"./en-MG/_combined.json":["pkMa",352],"./en-MH/_combined.json":["Pght",353],"./en-MO/_combined.json":["4brt",354],"./en-MP/_combined.json":["f3kU",355],"./en-MS/_combined.json":["Cner",356],"./en-MT/_combined.json":["CB9i",357],"./en-MU/_combined.json":["dcsm",358],"./en-MW/_combined.json":["vx0Y",359],"./en-MY/_combined.json":["4xdO",360],"./en-NA/_combined.json":["XOdH",361],"./en-NF/_combined.json":["3zUU",362],"./en-NG/_combined.json":["XcAH",363],"./en-NR/_combined.json":["1hF2",364],"./en-NU/_combined.json":["Rd4I",365],"./en-NZ/_combined.json":["Thfj",366],"./en-PG/_combined.json":["Pwz4",367],"./en-PH/_combined.json":["cBN5",368],"./en-PK/_combined.json":["Jp8X",369],"./en-PN/_combined.json":["kVcJ",370],"./en-PR/_combined.json":["C79j",371],"./en-PW/_combined.json":["IHQ7",372],"./en-RW/_combined.json":["3+fb",373],"./en-SB/_combined.json":["k36a",374],"./en-SC/_combined.json":["khir",375],"./en-SD/_combined.json":["ugPT",376],"./en-SG/_combined.json":["h5D0",377],"./en-SH/_combined.json":["kWBW",378],"./en-SL/_combined.json":["Dzhg",379],"./en-SS/_combined.json":["RUIe",380],"./en-SX/_combined.json":["wDR3",381],"./en-SZ/_combined.json":["3w4R",382],"./en-TC/_combined.json":["IcK3",383],"./en-TK/_combined.json":["FOhX",384],"./en-TO/_combined.json":["TCjz",385],"./en-TT/_combined.json":["fS+W",386],"./en-TV/_combined.json":["3onS",387],"./en-TZ/_combined.json":["5zt/",388],"./en-UG/_combined.json":["JPX0",389],"./en-UM/_combined.json":["Mb5E",390],"./en-US-POSIX/_combined.json":["jQAd",392],"./en-US/_combined.json":["yTKl",391],"./en-VC/_combined.json":["umMp",393],"./en-VG/_combined.json":["EDFe",394],"./en-VI/_combined.json":["Er4e",395],"./en-VU/_combined.json":["nrZT",396],"./en-WS/_combined.json":["4QLw",397],"./en-ZA/_combined.json":["wCbM",398],"./en-ZM/_combined.json":["/LDK",399],"./en-ZW/_combined.json":["Hw9p",400],"./en/_combined.json":["sNIU",306],"./es-419/_combined.json":["ZPZ1",402],"./es-AR/_combined.json":["Am5Z",403],"./es-BO/_combined.json":["tzf5",404],"./es-CL/_combined.json":["J0SI",405],"./es-CO/_combined.json":["UbmO",406],"./es-CR/_combined.json":["qt+y",407],"./es-CU/_combined.json":["QE7f",408],"./es-DO/_combined.json":["HYau",409],"./es-EA/_combined.json":["KcLf",410],"./es-EC/_combined.json":["S0/D",411],"./es-ES/_combined.json":["lVSm",412],"./es-GQ/_combined.json":["wsbn",413],"./es-GT/_combined.json":["OLUC",414],"./es-HN/_combined.json":["WoHz",415],"./es-IC/_combined.json":["n6S2",416],"./es-MX/_combined.json":["VjBw",417],"./es-NI/_combined.json":["gmAL",418],"./es-PA/_combined.json":["wD63",419],"./es-PE/_combined.json":["mjzo",420],"./es-PH/_combined.json":["QFbx",421],"./es-PR/_combined.json":["mQ8Z",422],"./es-PY/_combined.json":["1vOg",423],"./es-SV/_combined.json":["BCZi",424],"./es-US/_combined.json":["0mEl",425],"./es-UY/_combined.json":["AZ1f",426],"./es-VE/_combined.json":["Bfc6",427],"./es/_combined.json":["Iutf",401],"./fi-FI/_combined.json":["FkZD",429],"./fi/_combined.json":["JvJC",428],"./fr-BE/_combined.json":["Tkl0",431],"./fr-BF/_combined.json":["cxwg",432],"./fr-BI/_combined.json":["zeJq",433],"./fr-BJ/_combined.json":["al0q",434],"./fr-BL/_combined.json":["4cKm",435],"./fr-CA/_combined.json":["WBM3",436],"./fr-CD/_combined.json":["wmPG",437],"./fr-CF/_combined.json":["RhSx",438],"./fr-CG/_combined.json":["iqMf",439],"./fr-CH/_combined.json":["hUD0",440],"./fr-CI/_combined.json":["D+DA",441],"./fr-CM/_combined.json":["D5cn",442],"./fr-DJ/_combined.json":["a28n",443],"./fr-DZ/_combined.json":["0dq+",444],"./fr-FR/_combined.json":["6gRC",445],"./fr-GA/_combined.json":["7pVJ",446],"./fr-GF/_combined.json":["76IO",447],"./fr-GN/_combined.json":["FiR1",448],"./fr-GP/_combined.json":["j8tI",449],"./fr-GQ/_combined.json":["Kkty",450],"./fr-HT/_combined.json":["Celw",451],"./fr-KM/_combined.json":["VOt+",452],"./fr-LU/_combined.json":["d9qI",453],"./fr-MA/_combined.json":["fK3G",454],"./fr-MC/_combined.json":["PRyJ",455],"./fr-MF/_combined.json":["wbFQ",456],"./fr-MG/_combined.json":["VTW6",457],"./fr-ML/_combined.json":["fHIT",458],"./fr-MQ/_combined.json":["Fxzu",459],"./fr-MR/_combined.json":["bVZY",460],"./fr-MU/_combined.json":["uqex",461],"./fr-NC/_combined.json":["UU7a",462],"./fr-NE/_combined.json":["3i7k",463],"./fr-PF/_combined.json":["OujE",464],"./fr-PM/_combined.json":["HUZ+",465],"./fr-RE/_combined.json":["/OY7",466],"./fr-RW/_combined.json":["u1qL",467],"./fr-SC/_combined.json":["lkww",468],"./fr-SN/_combined.json":["5U+s",469],"./fr-SY/_combined.json":["lYx8",470],"./fr-TD/_combined.json":["wOiP",471],"./fr-TG/_combined.json":["F0gJ",472],"./fr-TN/_combined.json":["1qTE",473],"./fr-VU/_combined.json":["kGPb",474],"./fr-WF/_combined.json":["nN8O",475],"./fr-YT/_combined.json":["8MCW",476],"./fr/_combined.json":["foK4",430],"./ga-IE/_combined.json":["eG2/",478],"./ga/_combined.json":["s8KT",477],"./he-IL/_combined.json":["sMz+",480],"./he/_combined.json":["cQ2g",479],"./it-CH/_combined.json":["fzun",482],"./it-IT/_combined.json":["P9b0",483],"./it-SM/_combined.json":["NYQX",484],"./it/_combined.json":["/GVn",481],"./ja-JP/_combined.json":["/K1E",486],"./ja/_combined.json":["QmgJ",485],"./ko-KP/_combined.json":["IOaT",488],"./ko-KR/_combined.json":["7gcV",489],"./ko/_combined.json":["wQWN",487],"./kok-IN/_combined.json":["ICiQ",491],"./kok/_combined.json":["9ycP",490],"./ms-Latn-BN/_combined.json":["22hl",494],"./ms-Latn-MY/_combined.json":["ZuP2",495],"./ms-Latn-SG/_combined.json":["e91u",496],"./ms-Latn/_combined.json":["ukDk",493],"./ms/_combined.json":["s6EQ",492],"./nb-NO/_combined.json":["1R50",498],"./nb-SJ/_combined.json":["8W6M",499],"./nb/_combined.json":["9xWY",497],"./nl-AW/_combined.json":["O/ru",501],"./nl-BE/_combined.json":["i+Bd",502],"./nl-BQ/_combined.json":["T2Ti",503],"./nl-CW/_combined.json":["9yzq",504],"./nl-NL/_combined.json":["iCPS",505],"./nl-SR/_combined.json":["Zt0n",506],"./nl-SX/_combined.json":["kWFG",507],"./nl/_combined.json":["7I+W",500],"./nn-NO/_combined.json":["FQcW",509],"./nn/_combined.json":["B4Kb",508],"./pl-PL/_combined.json":["R1Tu",511],"./pl/_combined.json":["kVtb",510],"./pt-AO/_combined.json":["B3/k",513],"./pt-BR/_combined.json":["1X4n",514],"./pt-CV/_combined.json":["iEac",515],"./pt-GW/_combined.json":["/Ul8",516],"./pt-MO/_combined.json":["p9ZG",517],"./pt-MZ/_combined.json":["XskY",518],"./pt-PT/_combined.json":["MDaI",519],"./pt-ST/_combined.json":["OvaG",520],"./pt-TL/_combined.json":["wSWv",521],"./pt/_combined.json":["VMFA",512],"./ru-BY/_combined.json":["iiA/",523],"./ru-KG/_combined.json":["IZwx",524],"./ru-KZ/_combined.json":["YFdG",525],"./ru-MD/_combined.json":["UW08",526],"./ru-RU/_combined.json":["jUNN",527],"./ru-UA/_combined.json":["OYM5",528],"./ru/_combined.json":["rJfS",522],"./sv-AX/_combined.json":["BHCm",530],"./sv-FI/_combined.json":["oV3l",531],"./sv-SE/_combined.json":["9OhI",532],"./sv/_combined.json":["Q4W9",529],"./th-TH/_combined.json":["l+x3",534],"./th/_combined.json":["3Oph",533],"./tr-CY/_combined.json":["v8bW",536],"./tr-TR/_combined.json":["jg1M",537],"./tr/_combined.json":["C2yj",535],"./vi-VN/_combined.json":["5jb1",539],"./vi/_combined.json":["RzWr",538],"./zh-Hans-CN/_combined.json":["XLN1",542],"./zh-Hans-HK/_combined.json":["v9E7",543],"./zh-Hans-MO/_combined.json":["4fh/",544],"./zh-Hans-SG/_combined.json":["ZXIt",545],"./zh-Hans/_combined.json":["KSkj",541],"./zh-Hant-HK/_combined.json":["4hpr",547],"./zh-Hant-MO/_combined.json":["CAr/",548],"./zh-Hant-TW/_combined.json":["A9p9",549],"./zh-Hant/_combined.json":["eH5n",546],"./zh/_combined.json":["1qkM",540]};function o(e){if(!n.o(s,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=s[e],o=t[0];return n.e(t[1]).then((function(){return n.t(o,3)}))}o.keys=function(){return Object.keys(s)},o.id="RRs6",e.exports=o},ReGF:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));class s extends Error{constructor(e){super(e.message),this.responseBody=e,Object.setPrototypeOf(this,new.target.prototype)}get body(){return this.responseBody}}},RxZr:function(e,t,n){"use strict";var s=n("ERkP"),o=n("HuI8"),r=n("4vxQ"),i=n("DRH8"),a=n("Agfx");const c=Object(a.makeStyles)((()=>({localizedNumberInput:e=>{const{locale:t,displayWesternNumbers:n}=e,s=Object(i.e)(t,n),o=s?"right":"inherit";return{flip:!s,textAlign:o,'& input[type="text"], & input[type="text"]:focus':{flip:!s,textAlign:o,margin:"0",background:"transparent",height:"auto",boxShadow:"none",minHeight:"34px",border:"none",outline:"none"}}}})));var l=n("7O4Y");n.d(t,"c",(function(){return d})),n.d(t,"b",(function(){return h})),n.d(t,"a",(function(){return f}));const d=16,u=/\D/g,p=e=>e.replace(u,"").length>d,b=(e,t,n,s,o,r,a,c,l)=>{if(!(null==n?void 0:n.number))return null;if(p(t))return t;const d="-"===t.charAt(0),u=d?1:0,b=n.number.getDecimalStringSync(s);let m;t.charAt(u)===b&&(t=d?`-0${t.substring(1)}`:`0${t}`),m=Object(i.a)(t)?t.substring(u).replace(r,""):o?t.substring(u):e(t.substring(u));const g=d?`-${m}`:m;if(g===t)return g;const h=g.length-t.length,f=g.substring(0,a)!==t.substring(0,a)?a+h:a;return c(f>=0?f:0),l(!0),g},m=(e,t,n,s,o,r,a,c,l,u,b,m)=>{const g=m||e,h=Object(i.d)(n,u,s,o),f=Object(i.d)(n,l,s,o),O=Object(i.d)(n,d,s,o),E=Object(i.d)(n,Number.MAX_SAFE_INTEGER-1,s,o),y=Object(i.d)(n,Number.MIN_VALUE,s,o),I=Object(i.d)(n,Number.MAX_VALUE,s,o),C=Number.isFinite(e)?e:null;return!1===(null==c?void 0:c(C))?(r(""),C):0===e&&b.match(/[1-9]/g)?(r(t("cr.components.localizedNumberInput.validationError.minExponentialNotation",{minExponentialNotationLocalized:y})),null):e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY?(r(t("cr.components.localizedNumberInput.validationError.maxExponentialNotation",{maxExponentialNotationLocalized:I})),null):p(b)?(r(t("cr.components.localizedNumberInput.validationError.maxDigits",{maxDigits:O})),null):Number.isInteger(g)&&!Number.isSafeInteger(g)?(r(t("cr.components.localizedNumberInput.validationError.maxSafeInteger",{maxSafeInteger:E})),null):!Number.isFinite(e)&&(a||b.length>0)?(r(t("cr.components.localizedNumberInput.validationError.notNumber")),null):void 0!==u&&void 0!==l&&Number.isFinite(u)&&Number.isFinite(l)&&(e<u||e>l)&&b.length>0?(r(t("cr.components.localizedNumberInput.validationError.outsideRange",{min:h,max:f})),null):void 0!==u&&Number.isFinite(u)&&e<u&&b.length>0?(r(t("cr.components.localizedNumberInput.validationError.outsideMinRange",{min:h})),null):void 0!==l&&Number.isFinite(l)&&e>l&&b.length>0?(r(t("cr.components.localizedNumberInput.validationError.outsideMaxRange",{max:f})),null):(r(""),Number.isFinite(e)?e:null)},g=(e,t,n,s,o,r,a,c,l,d,u=!1)=>{if(!(null==s?void 0:s.number)||null===n)return null;const p=s.number.getDecimalStringSync(o),b="-"===n.charAt(0)?1:0,g=((e,t)=>{if(e.charAt(e.length-1)===t){const n=e.match(new RegExp(`\\${t}`,"g"));return n&&n.length<=1}return!1})(n,p)?1:0;let h=null;if(Object(i.a)(n)){const p=((e,t,n,s)=>{const{integer:o,exponentialNotation:r}=Object(i.f)(e),a="-"===r.charAt(1)||"+"===r.charAt(1)?2:1,c=s(o.substring(t,o.length-n)),l=r.length>a?c+r:c;let d=Number(l);return 1===t&&(d*=-1),{value:d,integerString:o,parsedInteger:c}})(n,b,g,t);h=m(p.value,e,o,u,s,r,a,c,l,d,p.integerString,p.parsedInteger)}else{const p=((e,t,n,s,o,r)=>{Object(i.e)(o,r)&&(e=e.replace(/,/g,""));let a=s(e.substring(t,e.length-n));return 1===t&&(a*=-1),{value:a,integerString:e}})(n,b,g,t,o,u);h=m(p.value,e,o,u,s,r,a,c,l,d,p.integerString)}return h},h=e=>{var t,n;const{ariaDescribedBy:a,ariaLabel:d,className:u,maintainInputValueOnBlur:p,max:m,min:h,numberFormatOptions:f,onBlur:O,onBlurNative:E,onChange:y,onChangeValidState:I,inputRef:C=null,required:v,validate:S,value:j,displayWesternNumbers:T=!1,hideErrorMessage:A=!1,..._}=e,{locale:R,babelfishFormat:N,regroupNumber:w,translate:D,parseNumber:L}=Object(o.a)(),P=c({displayWesternNumbers:T,locale:R}),{displayValue:k,numericValue:x,setDisplayValue:B,setNumericValue:M}=Object(i.g)(e),[U,G]=s.useState(""),[F,q]=s.useState(null),H=s.useRef(null),[V,K]=s.useState(null),[$,W]=s.useState(null),z=""===U&&(null===(t=null==S?void 0:S(j))||void 0===t||t),Q=!A&&""!==U;s.useEffect((()=>{if(null==N?void 0:N.number){const e=N.number.getGroupingStringSync(Object(i.c)(R,T));q(new RegExp(`\\${e}`,"g"))}}),[N,R,T]),s.useEffect((()=>{H.current&&$&&(H.current.setSelectionRange(V,V),W(!1))}),[k,V,$]),s.useEffect((()=>{null==I||I(z,U)}),[z,U,I]);return s.createElement(r.a,{className:Object(l.a)(P.localizedNumberInput,u),inputRef:e=>{H.current=e,"function"==typeof C?C(e):null!==C&&(C.current=e)},css:null,error:Q||!(null===(n=null==S?void 0:S(j))||void 0===n||n),inputProps:{"aria-label":d,"aria-describedby":a},onBlur:e=>{let t=Number.isFinite(x)?Object(i.d)(R,x,T,N,f):k;p&&(t=b(w,e.target.value,N,Object(i.c)(R,T),Object(i.e)(R,T),F,e.target.selectionStart,K,W)),B(t);const n=g(D,L,t,N,R,G,v,S,m,h,T);n!==x&&(M(n),y&&y(n)),null==O||O(n),null==E||E(e,n)},onChange:e=>{const t=b(w,e.target.value,N,Object(i.c)(R,T),Object(i.e)(R,T),F,e.target.selectionStart,K,W),n=g(D,L,t,N,R,G,v,S,m,h,T);B(null===n?e.target.value:t),M(n),y&&y(n)},type:"text",value:k,dir:Object(i.b)(R,T),required:v,..._,helperText:Q?U:e.helperText})},f=s.forwardRef((({onBlur:e,onBlurNative:t,...n},o)=>s.createElement(h,{...n,onBlurNative:(n,s)=>{null==e||e(n),null==t||t(n,s)},inputRef:o})))},Tddw:function(e,t,n){"use strict";var s=n("zGdY"),o=n("PPJ4");const r="course-tool",i="course-tool-set-visibility";var a=n("iKGo"),c=n("9EWH");n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return d})),n.d(t,"c",(function(){return u}));const l=Object(a.g)({byCourseId:{}},{[Object(a.j)(r)]:(e,t)=>{const{courseId:n,toolId:s,toolEnabledSetting:o}=t;return Object(c.a)(e,(e=>{e.byCourseId[n]||(e.byCourseId[n]={}),e.byCourseId[n][s]={toolEnabledSetting:o}}))},[Object(a.j)(i)]:(e,t)=>{const{courseId:n,toolId:s,toolEnabledSetting:o}=t;return Object(c.a)(e,(e=>{e.byCourseId[n][s]={toolEnabledSetting:o}}))},[Object(a.h)(r)]:(e,t)=>{const{courseId:n,toolId:s}=t;return Object(c.a)(e,(e=>{delete e.byCourseId[n][s]}))}}),d={loadCourseToolConfiguration:(e,t)=>Object(a.f)(r,(async()=>{const{toolEnabledSetting:n}=await(r={courseId:e,toolId:t},Object(s.gd)(r,o.d));var r;return{toolEnabledSetting:n,courseId:e,toolId:t}})),setCourseToolConfiguration:(e,t,n)=>Object(a.f)(i,(async()=>{const{toolEnabledSetting:r}=await function(e,t){return Object(s.Ed)(e,o.d,t)}({courseId:e,toolId:t},n);return{toolEnabledSetting:r,courseId:e,toolId:t}}))},u={getCourseTool:(e,t,n)=>{const s=e.courseTools.byCourseId[t];if(s)return s[n]}}},TvvE:function(e,t,n){"use strict";(function(e){n("2bmK"),n("sUzX")}).call(this,n("+ZX+").Buffer)},U7Ic:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));const s={STUDENT_PREVIEW_EXIT:"studentPreview.exit",STUDENT_PREVIEW_LOAD:"studentPreview.load"}},"Unv+":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));const s={GRADEBOOK_ATTEMPTS_LOAD:"gradebook-attempts.load",GRADEBOOK_ATTEMPT_LOAD:"gradebook-attempt.load",GRADEBOOK_ATTEMPT_UPDATE:"gradebook-attempt.update",GRADEBOOK_CLEAR_STUDENT_SUBMISSION_WITH_VIEW_URL_EXPANDED:"gradebook-attempt.clear-student-submission-with-view-url-expanded"}},W2ME:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return l})),n.d(t,"s",(function(){return b})),n.d(t,"j",(function(){return m})),n.d(t,"q",(function(){return g})),n.d(t,"p",(function(){return h})),n.d(t,"o",(function(){return f})),n.d(t,"r",(function(){return O})),n.d(t,"h",(function(){return I})),n.d(t,"i",(function(){return C})),n.d(t,"f",(function(){return v})),n.d(t,"e",(function(){return S})),n.d(t,"k",(function(){return j})),n.d(t,"g",(function(){return T})),n.d(t,"m",(function(){return _})),n.d(t,"l",(function(){return R})),n.d(t,"n",(function(){return N}));var s=n("nsO7"),o=n("PPJ4"),r=n("cg8W");const i="DELETE",a="GET",c="PATCH",l="POST",d=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(.\d{3})?Z$/,u={},p="defaultBatch";function b(e="defaultBatch"){u[e]||(u[e]={operations:[],immediateId:setTimeout((()=>async function(e){if(!u[e])return;const t=u[e];if(delete u[e],!t.operations.length)return;const n=t.operations.map(((e,t)=>({method:e.method,body:e.body,relativeUrl:v(e.relativeUrl,{"bbds-xb":t})})));try{(await g("/v1/utilities/batch",n,{noBatch:!0,method:"PUT"})).forEach((e=>{const n=e.relativeUrl.match(/bbds-xb=(\d+)/);if(!n||n.length<2)throw new Error("Did not find correlation ID in response URL");const s=+n[1],o=t.operations[s];if(!o)throw new Error("Did not find operation specified by response");const{statusCode:r,body:i}=e,a=new Headers;Object.keys(e.headers).forEach((t=>{a.append(t,e.headers[t][0])})),new Response(i,{status:r,headers:a}).ok?o.resolve(i):o.reject({error:{...i,url:e.relativeUrl}})}))}catch(e){t.operations.forEach((t=>{t.reject(e)}))}}(e)),0)})}function m(e,t,n){return y(a,e,null,t,n)}function g(e,t,n,s){return y("PUT",e,t,n,s)}function h(e,t,n,s){return y(l,e,t,n,s)}function f(e,t,n,s){return y(c,e,t,n,s)}function O(e,t,n){return y(i,e,null,t,n)}function E(e){const t=s.cloneDeep(e);return delete t.api,delete t.ui,t.id&&t.id.includes(r.a)&&delete t.id,t}function y(e,t,n,r,i){const c=r&&r.batchKey||p;if(u[c]&&(!r||!r.noBatch)){const s={method:e,...r};return n&&(s.body=E(n)),function(e,t,n){return new Promise(((s,o)=>{u[t].operations.push({method:n&&n.method||a,relativeUrl:e,body:n&&n.body,resolve:s,reject:o})}))}(t,c,s)}return function(e,t,n,r,i=!0){let a=o.a.apiBasePath+t;a=T(a);const c={credentials:"same-origin",method:e},l={"X-Blackboard-XSRF":o.a.xsrf};(null==r?void 0:r.suppressTimestampUpdate)&&(l["Suppress-Session-Timestamp-Update"]="true",delete r.suppressTimestampUpdate);let d=null;n&&(n instanceof FormData?d=n:(l["Content-Type"]="application/json;charset=UTF-8",d=JSON.stringify(E(n))));c.headers=l,d&&(c.body=d);return s.merge(c,r),new Promise(((e,t)=>{fetch(a,c).then((n=>n.ok?e(!1!==i?204===n.status?null:async function(e){const t=await e.text(),n=(e,t)=>I(t);return JSON.parse(t,n)}(n):n):n.json().then((e=>{t({error:{...e,url:n.url}})}))),t)}))}(e,t,n,r,i)}function I(e){return"string"==typeof e&&d.test(e)?new Date(e):e}function C(e,t){return s.transform(t,(function(t,n,o){s.isEqual(n,e[o])||(t[o]=n)}))}function v(e,t){return Object.keys(t).sort().forEach((n=>{let o=t[n];if(s.isArray(o)&&(o=o.join(",")),e.indexOf(`%${n}%`)>0)e=e.replace("%"+n+"%",o);else if(s.isNumber(o)||s.isBoolean(o)||!s.isEmpty(o)){const t=e.indexOf("?")<0?"?":"&";e+=`${t}${n}=${encodeURIComponent(o)}`}})),e}function S(e){return e?e.map((e=>`${e.field}(${e.direction})`)).join(","):""}function j(){return T(o.a.apiBasePath)}function T(e,t){return e&&e.indexOf("://")<0&&0!==e.indexOf("//")&&("/"!==e[0]&&(e="/"+e),e=t?t+e:_()+e),e}let A;function _(){return A||void 0===globalThis.location||(A=R(globalThis.location.href)),A}function R(e){const t=/^[^\/]*\/\/[^\/]+/.exec(e);return t&&t[0]||e}function N(e){return e.startsWith("https://")}},WQFv:function(e,t,n){"use strict";n.d(t,"b",(function(){return o}));var s=n("zGdY");function o(e){return!(!(null==e?void 0:e.isPreviewStudent)&&(null==e?void 0:e.role)!==s.V.Student)}t.a={isStudentMembership:o}},XBsA:function(e,t,n){"use strict";n.d(t,"d",(function(){return d})),n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return O})),n.d(t,"c",(function(){return I}));var s=n("nsO7"),o=n("LhnZ"),r=n("iKGo"),i=n("9EWH"),a=n("mRWl"),c=n("4qp4"),l=n("+l7i");const d={CONTENT_REVIEW_STATE_PERSIST:"content-review-state.persist",CONTENTS_REVIEW_STATES_GET:"contents-review-states-get",CONTENTS_REVIEW_STATES_USERS_GET:"contents-review-states-users-get",CONTENTS_REVIEW_STATES_USERS_REPORTS_STATES_GET:"contents-review-states-users-reports-states-get",CONTENTS_REVIEW_STATES_USER_CONTENT_GET:"contents-review-states-user-content-get"},u=(e,t)=>{var n;if(!t)return{id:null,view:null};const o=(null===(n=e.contentReviewState.byContentId[t.contentId])||void 0===n?void 0:n.byViewId)||{},r=Object.keys(o).find((e=>{const n=o[e];return s.isEqual(n.query,t)}));return{id:null!=r?r:null,view:void 0!==r?o[r]:null}},p=(e,t)=>{var n;if(!t)return{id:null,view:null};const o=(null===(n=e.contentReviewState.byUserId[t.userId])||void 0===n?void 0:n.byViewId)||{},r=Object.keys(o).find((e=>{const n=o[e];return s.isEqual(n.query,t)}));return{id:null!=r?r:null,view:void 0!==r?o[r]:null}},b=e=>["contentReviewState","byContentId",e.contentId,"byViewId"],m=e=>["contentReviewState","byUserId",e.userId,"byViewId"];function g(e,t){e.contentReviewState.byContentId[t]||(e.contentReviewState.byContentId[t]={byUserId:{},byViewId:{},reports:{}})}function h(e){return Object(i.a)(e,(e=>{e.contentReviewState.byUserId={}}))}const f=Object(r.g)({contentReviewState:{byContentId:{},byUserId:{}}},{[d.CONTENT_REVIEW_STATE_PERSIST]:(e,t)=>{const{contentId:n,userId:s}=t;return Object(i.a)(e,(e=>{g(e,n),e.contentReviewState.byContentId[n].byUserId[s]||(e.contentReviewState.byContentId[n].byUserId[s]={status:null,isLoading:!0}),e.contentReviewState.byContentId[n].byUserId[s].isLoading=!0}))},[Object(r.j)(d.CONTENT_REVIEW_STATE_PERSIST)]:(e,t)=>{const{contentId:n,contentStates:s,userId:o}=t;return Object(i.a)(e,(e=>{e.contentReviewState.byContentId[n].byUserId[o].isLoading=!1,s&&Object.values(s).forEach((t=>{const s=t.contentId;g(e,n),e.contentReviewState.byContentId[s].byUserId[o]={status:{state:t.state,startedDate:null,reviewedDate:null},isLoading:!1}}))}))},[Object(r.h)(d.CONTENT_REVIEW_STATE_PERSIST)]:(e,t)=>{const{contentId:n,userId:s}=t;return Object(i.a)(e,(e=>{g(e,n),e.contentReviewState.byContentId[n].byUserId[s].isLoading=!1}))},[d.CONTENTS_REVIEW_STATES_GET]:(e,t)=>{const{contentId:n,userId:s}=t;return Object(i.a)(e,(e=>{g(e,n),e.contentReviewState.byContentId[n].byUserId[s]||(e.contentReviewState.byContentId[n].byUserId[s]={status:null,isLoading:!0}),e.contentReviewState.byContentId[n].byUserId[s].isLoading=!0}))},[Object(r.j)(d.CONTENTS_REVIEW_STATES_GET)]:(e,t)=>{const{contentStates:n,contentId:s,userId:o}=t;return Object(i.a)(e,(e=>{n&&Object.values(n).forEach((t=>{const n=t.contentId;g(e,n),e.contentReviewState.byContentId[n].byUserId[o]={status:{state:t.state,startedDate:null,reviewedDate:null},isLoading:!1}})),e.contentReviewState.byContentId[s].byUserId[o].isLoading=!1}))},[Object(r.h)(d.CONTENTS_REVIEW_STATES_GET)]:(e,t)=>{const{contentId:n,userId:s}=t;return Object(i.a)(e,(e=>{g(e,n),e.contentReviewState.byContentId[n].byUserId[s].isLoading=!1}))},[d.CONTENTS_REVIEW_STATES_USERS_GET]:(e,t)=>{const n=Object(i.a)(e,(e=>{g(e,t.query.contentId)}));return Object(r.o)(u,b)(n,t)},[Object(r.j)(d.CONTENTS_REVIEW_STATES_USERS_GET)]:(e,t)=>{const{data:n,query:s}=t,o=Object(i.a)(e,(e=>{g(e,s.contentId),void 0===s.fields&&n.results.forEach((t=>{e.contentReviewState.byContentId[s.contentId].byUserId[t.courseMembership.userId]={status:t.status,isLoading:!1}})),e.contentReviewState.byContentId[s.contentId].permissions=n.permissions}));return Object(r.q)(o,t,{viewResolver:u,viewsPathResolver:b,paging:n.paging,values:n.results.map((e=>e.courseMembership.userId))})},[Object(r.h)(d.CONTENTS_REVIEW_STATES_USERS_GET)]:Object(r.m)(u,b),[d.CONTENTS_REVIEW_STATES_USER_CONTENT_GET]:(e,t)=>{const n=Object(i.a)(e,(n=>{e.contentReviewState.byUserId[t.query.userId]||(n.contentReviewState.byUserId[t.query.userId]={byContentId:{},byViewId:{}})}));return Object(r.o)(p,m)(n,t)},[Object(r.j)(d.CONTENTS_REVIEW_STATES_USER_CONTENT_GET)]:(e,t)=>{const{data:n,query:s}=t,o=Object(i.a)(e,(e=>{n.results.forEach((t=>{e.contentReviewState.byUserId[s.userId].byContentId[t.contentId]=t}))}));return Object(r.q)(o,t,{viewResolver:p,viewsPathResolver:m,paging:n.paging,values:n.results.map((e=>e.contentId))})},[Object(r.h)(d.CONTENTS_REVIEW_STATES_USER_CONTENT_GET)]:Object(r.m)(p,m),[d.CONTENTS_REVIEW_STATES_USERS_REPORTS_STATES_GET]:(e,t)=>Object(i.a)(e,(e=>{g(e,t.query.contentId),e.contentReviewState.byContentId[t.query.contentId].reports.states={isLoading:!0,states:void 0}})),[Object(r.j)(d.CONTENTS_REVIEW_STATES_USERS_REPORTS_STATES_GET)]:(e,t)=>{const{data:n,query:{contentId:s}}=t;return Object(i.a)(e,(e=>{g(e,s),e.contentReviewState.byContentId[s].reports.states.isLoading=!1,e.contentReviewState.byContentId[s].reports.states.states=n.states}))},[Object(r.h)(d.CONTENTS_REVIEW_STATES_USERS_REPORTS_STATES_GET)]:(e,t)=>Object(i.a)(e,(e=>{e.contentReviewState.byContentId[t.query.contentId].reports.states.isLoading=!1})),[Object(r.j)(c.a.CONTENT_LOAD)]:(e,t)=>{let{contents:n}=t;return n=Object(o.E)(Object.values(n||{})),Object(i.a)(e,(e=>{Object.values(n).forEach((t=>{const n=t.id;g(e,n),e.contentReviewState.byContentId[n].byUserId[a.b]={status:{state:t.state,startedDate:null,reviewedDate:null},isLoading:!1}}))}))},[Object(r.j)(c.a.CONTENT_CREATE)]:h,[Object(r.j)(c.a.CONTENT_DELETE)]:h,[Object(r.j)(c.a.CONTENT_DELETE_ADAPTIVE_RELEASE)]:h,[Object(r.j)(c.a.CONTENT_DELETE_ADAPTIVE_RELEASE_RULE_IN_STORE)]:h,[Object(r.j)(c.a.CONTENT_DELETE_ALL_ADAPTIVE_RELEASE_IN_STORE)]:h,[Object(r.j)(c.a.CONTENT_DELETE_IN_STORE)]:h,[Object(r.j)(c.a.CONTENT_PERSIST)]:h,[Object(r.j)(c.a.CONTENT_PERSIST_MULTIPLE)]:h,[Object(r.j)(c.a.CONTENT_PERSIST_ADAPTIVE_RELEASE_MULTIPLE)]:h,[Object(r.j)(c.a.CONTENT_MOVE_IN_STORE)]:h,[Object(r.j)(c.a.CONTENT_UPDATE_IN_STORE)]:h}),O={persistContentReviewState:(e,t,n)=>Object(r.f)(d.CONTENT_REVIEW_STATE_PERSIST,(async()=>{try{const s={courseId:e,contentId:t,userId:a.b,state:n};await Object(a.g)(s);const o={courseId:e,contentId:t,includeRelated:!0};return{contentStates:(await Object(a.f)(o)).contentStates,contentId:t,userId:a.b}}catch(e){throw{contentId:t,userId:a.b,err:e}}}),{contentId:t,userId:a.b}),getContentReviewState:(e,t,n)=>Object(r.f)(d.CONTENTS_REVIEW_STATES_GET,(async()=>{try{const s={courseId:e,contentId:t,includeRelated:n};return{contentStates:(await Object(a.f)(s)).contentStates,contentId:t,userId:a.b}}catch(e){throw{contentId:t,userId:a.b,err:e}}}),{contentId:t,userId:a.b}),fetchContentReviewUserStatesByQuery:e=>Object(r.f)(d.CONTENTS_REVIEW_STATES_USERS_GET,(async()=>{try{return{data:await Object(a.d)(e),query:e}}catch(t){throw{query:e,err:t}}}),{query:e}),fetchContentReviewStateUsersReportStates:e=>Object(r.f)(d.CONTENTS_REVIEW_STATES_USERS_REPORTS_STATES_GET,(async()=>{try{return{data:await Object(a.e)(e),query:e}}catch(t){throw{query:e,err:t}}}),{query:e}),fetchMoreContentReviewStateUserContent:e=>Object(r.f)(d.CONTENTS_REVIEW_STATES_USER_CONTENT_GET,(async()=>{try{return{data:await Object(a.c)(e),query:e}}catch(t){throw{query:e,err:t}}}),{query:e})},E=Object(l.a)([(e,t)=>e.contentReviewState.contentReviewState.byUserId[t.userId],(e,t)=>t],((e,t)=>{var n;return{byViewId:null!==(n=null==e?void 0:e.byViewId)&&void 0!==n?n:{},query:t}})),y=Object(l.a)(E,(({byViewId:e,query:t})=>({views:Object.values(e).filter((e=>e.query.courseId===t.courseId&&e.query.contentId===t.contentId)).sort(((e,t)=>{var n,s,o,r;return(null!==(s=null===(n=t.query.paging)||void 0===n?void 0:n.offset)&&void 0!==s?s:0)-(null!==(r=null===(o=e.query.paging)||void 0===o?void 0:o.offset)&&void 0!==r?r:0)})),query:t}))),I={getContentReviewStateForContextUser:(e,t)=>{var n,s,o;return null===(o=null===(s=null===(n=e.contentReviewState.contentReviewState.byContentId[t])||void 0===n?void 0:n.byUserId[a.b])||void 0===s?void 0:s.status)||void 0===o?void 0:o.state},getLoadingStatusForContentReviewStateForContextUser:(e,t)=>{var n,s;return null===(s=null===(n=e.contentReviewState.contentReviewState.byContentId[t])||void 0===n?void 0:n.byUserId[a.b])||void 0===s?void 0:s.isLoading},getContentReviewStateUsersByQuery:(e,t)=>{var n;const{view:s}=u(e.contentReviewState,t);return s?(null!==(n=s.values)&&void 0!==n?n:[]).map((n=>{const s=e.contentReviewState.contentReviewState.byContentId[t.contentId].byUserId[n];return{contentId:t.contentId,status:s.status,courseMembership:Object.values(e.courseMembership.byCourseMembershipId).find((e=>e.courseId===t.courseId&&e.userId===n))}})):[]},getContentReviewStateUsersStatusByQuery:(e,t)=>{const{view:n}=u(e.contentReviewState,t);return n?{isLoading:n.isLoading,isValid:n.isValid,paging:n.paging}:null},getContentReviewStateUsersPermissions:(e,t)=>{var n;return null===(n=e.contentReviewState.contentReviewState.byContentId[t])||void 0===n?void 0:n.permissions},getContentReviewStateUsersReportStates:(e,t)=>{var n;return null===(n=e.contentReviewState.contentReviewState.byContentId[t])||void 0===n?void 0:n.reports.states},hasMoreContentReviewStateUserContent:Object(l.a)(y,(({views:e,query:t})=>{var n,s;if(0===e.length)return{isLoading:!1,canLoadMore:!0,nextOffset:0};const o=e[0],r=!!(null===(n=o.paging)||void 0===n?void 0:n.nextPage),i=r?o.paging.offset+t.limit:void 0;return{isLoading:o.isLoading,canLoadMore:r,nextOffset:i,count:null===(s=o.paging)||void 0===s?void 0:s.count}})),getContentReviewStateFirstUserContent:Object(l.a)([(e,t)=>{var n,s;return null!==(s=null===(n=e.contentReviewState.contentReviewState.byUserId[t.userId])||void 0===n?void 0:n.byContentId)&&void 0!==s?s:{}},(e,t)=>t],((e,t)=>Object.values(e).filter((e=>e.content.parentId===t.contentId&&(!t.visibility||t.visibility.includes(e.content.visibility)))).sort(((e,t)=>e.content.position-t.content.position))))}},Xnku:function(e,t,n){"use strict";class s extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}class o extends s{}var r=n("ReGF");class i extends Error{constructor(e,t,n){super(`HTTP ${t}: ${n}`),this.response=e,this.status=t,Object.setPrototypeOf(this,new.target.prototype)}get statusCode(){return this.status}get responseMessage(){return this.response}}n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return r.a})),n.d(t,"c",(function(){return i}))},"Y+9S":function(e,t,n){"use strict";var s,o,r,i,a,c,l=n("HnWI"),d=n("fN3Q");!function(e){e.QuestionGoalAlignmentForStudent="question-goal-alignment-for-student",e.AssessmentSubmissionFeedback="assessment-submission-feedback",e.AssessmentSubmissionFeedbackTab="assessment-submission-feedback-tab",e.RubricEvaluation="rubric-evaluation",e.RubricView="rubric-view",e.Collab="collab",e.DiscussionParticipants="discussion-participants",e.SubmissionList="submission-list",e.DiscussionFeedback="discussion-feedback",e.JournalSetting="journal-settings",e.JournalDetail="journal-details",e.JournalParticipationDetail="journal-participation-detail",e.Roster="roster",e.EnrolUsers="enroll-users",e.EditEnrollment="edit-enrollment",e.Description="description",e.GroupSetList="group-set-list",e.GroupSetDetail="group-set-detail",e.CourseEditBanner="course-edit-banner",e.Attendance="attendance",e.AttendanceSettings="attendance-settings",e.AttendanceStudentRecords="attendance-student-records",e.AnnouncementDetail="announcement-detail",e.AnnouncementList="announcement-list",e.BooksAndTools="books-and-tools",e.ContentMarket="content-market",e.QuestionBanks="question-banks",e.ClassSchedule="class-schedule",e.CourseMessages="course.messages",e.CreateMessage="create-message",e.CourseCalendar="course.calendar",e.CourseCalendarCreateEvent="event-create",e.CourseCalendarEditEvent="event-edit",e.CourseCalendarOfficeHours="office-hours",e.DiscussionsSettings="discussions-settings",e.DiscussionSettings="discussion-settings",e.DiscussionTelemetry="telemetryDiscussionForumInsights",e.NewMessage="message",e.CreateFolder="content-manage.create.folder",e.CreateContent="content-manage.create",e.CourseGroup="course-group",e.AdminAnnouncement="announcement",e.PerAssessmentSettings="per-assessment-settings",e.AssessmentSettings="assessment-settings",e.SubmissionGrading="submission-grading",e.AssessmentSubmissionGradingFeedbackTab="submission-grading.assessment-submission-feedback-tab",e.GradesBulkDownload="grades-bulk-download",e.QuestionGoalAlignmentForInstructor="question-goal-alignment",e.GoalPickerLegacy="goal-picker-legacy",e.CourseGradesAccommodations="accommodation",e.ContentCopy="content-manage.copy",e.BulkEditContent="bulk-edit-content",e.ImportContent="content-manage.import",e.Exports="exports",e.ContentCollection="content-collection",e.ContentCollectionSettings="content-collection-settings",e.ContentCollectionPicker="content-collection-picker",e.CourseGradesAddItem="grade-item.create",e.CourseGradesAddItemCalculation="gradebook-item.calculation",e.CourseGradesViewIndividualGrade="view-individual-grades",e.QuestionAnalysisReport="question-analysis.report",e.QuestionAnalysis="course.analytics.question-analysis",e.QuestionAnalyticsScorm="course.analytics.scorm-reports",e.CourseQuestionAnalysisReport="course.analytics.question-analysis.peek.question-analysis.report",e.EventEdit="event-edit",e.ActivityStream="base.recentActivity",e.CourseTimeline="base.courses",e.Document="content-manage.edit.document",e.CourseOutline="course.outline",e.CourseGrades="course.grades",e.Journal="journal.view.with-participation",e.AssessmentInst="gradebook-item.assessment",e.Discussion="discussion.view.with-grading",e.GradedScormInst="gradebook-item.scorm-submissions",e.CourseMessageList="course.messages",e.CourseMessage="edit-message",e.StudentActivity="telemetryContentActivityInDetail",e.CreateLink="content-manage.create.link",e.LTILaunchLink="lti.launch-frame",e.CreateLTI="content-manage.create.lti",e.ScormSettings="scorm-settings",e.PreviewScorm="scorm-launch-frame",e.DiscussionBoard="course.engagement",e.ScormAnalysisReport="scorm-analytics-report",e.PartnerTool="partner-tool.tool",e.EditFolder="content-manage.edit.folder",e.EditLTI="content-manage.edit.lti",e.EditPlacement="content-manage.edit.placement",e.DocumentSettings="document-settings",e.Tools="base.tools",e.Messages="base.messages",e.ReleaseCondition="conditional-release",e.GradeBookOverAllGrade="gradebook-item.overall-grade",e.CourseGroupEnroll="course-group-enroll",e.AttendanceStudentView="attendance-student-view",e.StudentScormOverview="scorm-overview.student",e.AssessmentOverview="assessment.overview",e.AssessmentOverviewAttempt="assessment.overview.attempt",e.AssessmentDetails="assessment-details",e.AssessmentAttemptSubmissionFeedback="assessment.overview.attempt.review.assessment-submission-feedback-tab",e.AssessmentOverviewAttemptReviewInlineRubrics="assessment.overview.attempt.review.inline-rubric",e.GradeAndFeedback="grade-and-feedback",e.OverallGradeSettings="overall-grade-settings",e.InstitutionAdminPage="base.institution-page-admin",e.InstitutionPage="base.institution-page",e.BrandDetail="brand-detail",e.CreateModule="createModule",e.EditModule="editModule",e.BrowserSettings="browserSettings",e.IpContentCollection="contentCollection",e.GradeSettings="grade-setting",e.EditIpLinkImage="linkImage",e.IpViewLinks="allLinks",e.IpColorSelection="colorSelection",e.GradeDownloadSettings="grade-download-setting",e.MultipleAttemptGrading="multiple-attempt-grading",e.EditFileSettings="edit-file-settings",e.ContentManageCreateDocument="content-manage.create.document",e.DownloadTestResults="download-test-results",e.AssessmentOverviewMultipleAttempt="assessment.overview.multiple-attempt",e.AssessmentOverviewAttemptReview="assessment.overview.attempt.review",e.DiscussionDetails="discussion-details",e.OverallGrade="overall-grade-student",e.GradeUpload="grade-upload-setting",e.GradeSubmissionReceipt="attempt-receipt-search"}(s||(s={})),function(e){e.OpenAttempt="OPEN_ATTEMPT",e.OpenDocument="OPEN_DOCUMENT",e.ReviewAttempt="REVIEW_ATTEMPT",e.ReviewFeedback="REVIEW_FEEDBACK",e.PreviewAssessment="PREVIEW_ASSESSMENT",e.CollabRecordingPreview="COLLAB_RECORDING_PREVIEW",e.CollabManageSession="COLLAB_MANAGE_SESSION",e.OpenCourse="OPEN_COURSE",e.OpenDiscussion="OPEN_DISCUSSION",e.OpenGroupDiscussion="OPEN_GROUP_DISCUSSION",e.OpenJournal="OPEN_JOURNAL",e.OpenAssessment="OPEN_ASSESSMENT",e.OpenAssessmentInstView="OPEN_ASSESSMENT_INST_VIEW",e.OpenAssessmentSubmissionView="OPEN_ASSESSMENT_SUBMISSION_VIEW",e.OpenCourseAnnouncement="OPEN_COURSE_ANNOUNCEMENT",e.OpenAdminAnnouncement="OPEN_ADMIN_ANNOUNCEMENT",e.OpenCourseMessage="OPEN_COURSE_MESSAGE",e.OpenGradeBook="OPEN_GRADEBOOK",e.OpenCalendar="OPEN_CALENDAR",e.OpenGradedSCORM="OPEN_GRADED_SCORM",e.OpenInstViewGradedSCORM="OPEN_GRADED_SCORM_INST_VIEW",e.OpenTimeline="OPEN_TIMELINE",e.OpenPersonalEvent="OPEN_PERSONAL_EVENT",e.OpenCalendarEvent="OPEN_CALENDAR_EVENT",e.OpenTools="OPEN_TOOLS",e.OpenCreateMessages="OPEN_CREATE_MESSAGES",e.OpenCourseMessagesList="OPEN_MESSAGES_LIST",e.OpenInstitutionPage="OPEN_INSTITUTION_PAGE",e.OpenAdminInstitutionPage="OPEN_ADMIN_INSTITUTION_PAGE",e.OpenJournalParticipantsGrades="OPEN_JOURNAL_GRADE_PARTICIPANTS",e.OpenViewGradesOfflinePage="OPEN_VIEW_GRADES_OFFLINE_PAGE",e.OpenViewGradesAssessmentsPage="OPEN_VIEW_GRADES_ASSESSMENT_PAGE",e.OpenScormGradesPage="OPEN_SCORM_GRADES_PAGE",e.OpenDiscussionGradePage="OPEN_DISCUSSION_GRADE_PAGE",e.OpenAttendancePage="OPEN_ATTENDANCE_PAGE",e.OpenCalendarAssessmentPage="OPEN_CALENDAR_ASSESSMENT_PAGE",e.OpenCalendarDiscussionPage="OPEN_CALENDAR_DISCUSSION_PAGE",e.OpenCalendarJournalPage="OPEN_CALENDAR_JOURNAL_PAGE",e.OpenCalendarScormPage="OPEN_CALENDAR_SCORM_PAGE",e.OpenStudentCalendarAssessmentPage="OPEN_STUDENT_CALENDAR_ASSESSMENT_PAGE",e.OpenStudentCalendarScormPage="OPEN_STUDENT_CALENDAR_SCORM_PAGE",e.OpenStudentDiscusssionPage="OPEN_STUDENT_DISCUSSION_PAGE"}(o||(o={})),function(e){e.AttemptSaveAndClosed="ATTEMPT_SAVE_AND_CLOSED",e.AttemptSubmitted="ATTEMPT_SUBMITTED",e.AttemptFeedbackOpened="ATTEMPT_FEEDBACK_OPENED",e.AttemptRubricOpened="ATTEMPT_RUBRIC_OPENED",e.AttemptGoalAlignmentOpened="ATTEMPT_GOAL_ALIGNMENT_OPENED",e.AttemptFeedbackClosed="ATTEMPT_FEEDBACK_CLOSED",e.AttemptRubricClosed="ATTEMPT_RUBRIC_CLOSED",e.AttemptGoalAlignmentClosed="ATTEMPT_GOAL_ALIGNMENT_CLOSED",e.AttemptOpened="ATTEMPT_OPENED",e.AttemptReviewOpened="ATTEMPT_REVIEW_OPENED",e.DocumentOpened="DOCUMENT_OPENED",e.DocumentClosed="DOCUMENT_CLOSED",e.LoadDocument="LOAD_DOCUMENT",e.AssessementPreviewOpened="ASSESSMENT_PREVIEW_OPENED",e.CollabClosed="COLLAB_CLOSED",e.CollabRoomSettingsOpened="COLLAB_ROOM_SETTINGS_OPENED",e.CollabRoomSettingsClosed="COLLAB_ROOM_SETTINGS_CLOSED",e.CollabViewRoomReportOpened="COLLAB_ROOM_VIEW_REPORT_OPENED",e.CollabViewRoomReportClosed="COLLAB_ROOM_VIEW_REPORT_CLOSED",e.CollabManageSessionOpened="COLLAB_MANAGE_SESSION_OPENED",e.CollabSessionOpened="COLLAB_SESSION_OPENED",e.CollabSessionClosed="COLLAB_SESSION_CLOSED",e.CollabRecordingsOpened="COLLAB_RECORDING_OPENED",e.DiscussionOpened="DISCUSSION_OPENED",e.DiscussionClosed="DISCUSSION_CLOSED",e.DiscussionParticipantsOpened="DISCUSSION_PARTICIPANTS_OPENED",e.DiscussionParticipantsClosed="DISCUSSION_PARTICIPANTS_CLOSED",e.DiscussionGradesParticipationOpened="DISCUSSION_GRADES_PARTICIPATION_OPENED",e.DiscussionGradesParticipationClosed="DISCUSSION_GRADES_PARTICIPATION_CLOSED",e.SubmissionListOpened="SUBMISSION_LIST_OPENED",e.SubmissionListClosed="SUBMISSION_LIST_CLOSED",e.DiscussionFeedbackOpened="DISCUSSION_FEEDBACK_OPENED",e.DiscussionFeedbackClosed="DISCUSSION_FEEDBACK_CLOSED",e.JournalOpened="JOURNAL_OPENED",e.JournalClosed="JOURNAL_CLOSED",e.JournalSettingsOpened="JOURNAL_SETTINGS_OPENED",e.JournalSettingsClosed="JOURNAL_SETTINGS_CLOSED",e.JournalDetailsOpened="JOURNAL_DETAILS_OPENED",e.JournalDetailsClosed="JORNRAL_DETAILS_CLOSED",e.JournalParticipationDetailOpened="JOURNAL_PARTICIPATION_DETAIL_OPENED",e.JournalParticipationDetailClosed="JOURNAL_PARTICIPATION_DETAIL_CLOSED",e.AssessmentOpened="ASSESSMENT_OPENED",e.AssessmentClosed="ASSESSMENT_CLOSED",e.EditAssignmentOpened="EDIT_ASSIGNMENT_OPENED",e.EditTestOpened="EDIT_TEST_OPENED",e.EditExamOpened="EDIT_EXAM_OPENED",e.EditHomeworkOpened="EDIT_HOMEWORK_OPENED",e.EditPresentationOpened="EDIT_PRESENTATION_OPENED",e.EditQuizOpened="EDIT_QUIZ_OPENED",e.CreateAssignmentOpened="CREATE_ASSIGNMENT_OPENED",e.CreateTestOpened="CREATE_TEST_OPENED",e.AssessmentOverviewOpened="ASSESSMENT_OVERVIEW_OPENED",e.AssessmentDetailOpened="ASSESSMENT_DETAIL_OPENED",e.FolderOpened="FOLDER_OPENED",e.LearningModuleOpened="LEARNING_MODULE_OPENED",e.CourseContentOpened="COURSE_CONTENT_OPENED",e.CourseContentClosed="COURSE_CONTENT_CLOSED",e.DiscussionBoardOpened="DISCUSSION_BOARD_OPENED",e.DiscussionBoardClosed="DISCUSSION_BOARD_CLOSED",e.RosterOpened="ROSTER_OPENED",e.RosterClosed="ROSTER_CLOSED",e.EnrollUsersOpened="ENROL_USERS_OPENED",e.EnrollUsersClosed="ENROL_USERS_CLOSED",e.EditEnrollmentOpened="EDIT_ENROLLMENT_OPENED",e.EditEnrollmentClosed="EDIT_ENROLLMENT_CLOSED",e.DescriptionOpened="DESCRIPTION_OPENED",e.DescriptionClosed="DESCRIPTION_CLOSED",e.GroupSetDetailOpened="GROUP_SET_DETAIL_OPENED",e.GroupSetDetailClosed="GROUP_SET_DETAIL_CLOSED",e.GroupSetListOpened="GROUP_SET_LIST_OPENED",e.GroupSetListClosed="GROUP_SET_LIST_CLOSED",e.CourseEditBannerOpened="COURSE_EDIT_BANNER_OPENED",e.CourseEditBannerClosed="COURSE_EDIT_BANNER_CLOSED",e.AttendanceOpened="ATTENDANCE_OPENED",e.AttendanceClosed="ATTENDANCE_CLOSED",e.AttendanceSettingsOpened="ATTENDANCE_SETTINGS_OPENED",e.AttendanceSettingsClosed="ATTENDANCE_SETTINGS_CLOSED",e.AttendanceStudentRecordsOpened="ATTENDANCE_STUDENT_RECORDS_OPENED",e.AttendanceStudentRecordsClosed="ATTENDANCE_STUDENT_RECORDS_CLOSED",e.AnnouncementDetailOpened="ANNOUNCEMENT_DETAIL_OPENED",e.AnnouncementDetailClosed="ANNOUNCEMENT_DETAIL_CLOSED",e.AnnouncementListOpened="ANNOUNCEMENT_LIST_OPENED",e.AnnouncementListClosed="ANNOUNCEMENT_LIST_CLOSED",e.BooksAndToolsOpened="BOOKS_AND_TOOLS_OPENED",e.BooksAndToolsClosed="BOOKS_AND_TOOLS_CLOSED",e.ContentMarketOpened="CONTENT_MARKET_OPENED",e.ContentMarketClosed="CONTENT_MARKET_CLOSED",e.QuestionBanksOpened="QUESTION_BANKS_OPENED",e.QuestionBanksClosed="QUESTION_BANKS_CLOSED",e.ClassScheduleOpened="CLASS_SCHEDULE_OPENED",e.ClassScheduleClosed="CLASS_SCHEDULE_CLOSED",e.TimelineOpened="TIMELINE_OPENED",e.CourseMessageOpened="COURSE_MESSAGE_OPENED",e.CourseMessageListOpened="COURSE_MESSAGE_LIST_OPENED",e.CourseMessageListClosed="COURSE_MESSAGE_LIST_CLOSED",e.CreateMessageOpened="CREATE_MESSAGE_OPENED",e.CreateMessageClosed="CREATE_MESSAGE_CLOSED",e.CourseCalendarOpened="COURSE_CALENDAR_OPENED",e.CourseCalendarClosed="COURSE_CALENDAR_CLOSED",e.CourseCalendarCreateNewEventOpened="COURSE_CALENDAR_CREATE_NEW_EVENT_OPENED",e.CourseCalendarCreateNewEventClosed="COURSE_CALENDAR_CREATE_NEW_EVENT_CLOSED",e.CourseCalendarOfficeHoursOpened="COURSE_CALENDAR_ADD_OFFICE_HOURS_OPENED",e.CourseCalendarOfficeHoursClosed="COURSE_CALENDAR_ADD_OFFICE_HOURS_CLOSED",e.CourseCalendarEditEventOpened="COURSE_CALENDAR_EDIT_EVENT_OPENED",e.CourseCalendarEditEventClosed="COURSE_CALENDAR_EDIT_EVENT_CLOSED",e.DiscussionsSettingsOpened="DISCUSSIONS_SETTINGS_OPENED",e.DiscussionsSettingsClosed="DISCUSSIONS_SETTINGS_CLOSED",e.DiscussionSettingsOpened="DISCUSSION_SETTINGS_OPENED",e.DiscussionSettingsClosed="DISCUSSION_SETTINGS_CLOSED",e.DiscussionTelemetryOpened="DISCUSSION_TELEMETRY_OPENED",e.DiscussionTelemetryClosed="DISCUSSION_TELEMETRY_CLOSED",e.NewMessagePanelOpened="NEW_MESSAGE_PANEL_OPENED",e.NewMessagePanelClosed="NEW_MESSAGE_PANEL_CLOSED",e.NewFolderPanelOpened="NEW_FOLDER_PANEL_OPENED",e.NewFolderPanelClosed="NEW_FOLDER_PANEL_CLOSED",e.NewDiscussionCreationPanelOpened="NEW_DISCUSSION_CREATION_PANEL_OPENED",e.NewDiscussionCreationPanelClosed="NEW_DISCUSSION_CREATION_PANEL_CLOSED",e.NewDiscussionCreated="NEW_DISCUSSION_CREATED",e.NewContentItemPanelOpened="NEW_CONTENT_ITEM_PANEL_OPENED",e.NewContentItemPanelClosed="NEW_CONTENT_ITEM_PANEL_CLOSED",e.CourseGroupOpened="COURSE_GROUP_OPENED",e.CourseGroupClosed="COURSE_GROUP_CLOSED",e.CreateJournalContentOpened="CREATE_JOURNAL_CONTENT_OPENED",e.JournalSavePrompt="JOURNAL_SAVE_PROMPT",e.AdminAnnouncementOpened="ADMIN_ANNOUNCEMENT_OPENED",e.AdminAnnouncementClosed="ADMIN_ANNOUNCEMENT_CLOSED",e.PerAssessmentSettingsOpened="PER_ASSESSMENT_SETTINGS_OPENED",e.PerAssessmentSettingsClosed="PER_ASSESSMENT_SETTINGS_CLOSED",e.AssessmentSettingsOpened="ASSESSMENT_SETTINGS_OPENED",e.AssessmentSettingsClosed="ASSESSMENT_SETTINGS_CLOSED",e.SubmissionGradingOpened="SUBMISSION_GRADING_OPENED",e.SubmissionGradingClosed="SUBMISSION_GRADING_CLOSED",e.SubmissionGradingFeedbackTabOpened="SUBMISSION_GRADING_FEEDBACK_TAB_OPENED",e.SubmissionGradingFeedbackTabClosed="SUBMISSION_GRADING_FEEDBACK_TAB_CLOSED",e.GradesBulkDownloadOpened="GRADES_BULK_DOWNLOAD_OPENED",e.GradesBulkDownloadClosed="GRADES_BULK_DOWNLOAD_CLOSED",e.QuestionGoalAlignmentForInstructorOpened="QUESTION_GOAL_ALIGNMENT_INST_OPENED",e.QuestionGoalAlignmentForInstructorClosed="QUESTION_GOAL_ALIGNMENT_INST_CLOSED",e.GoalPickerLegacyOpened="GOAL_PICKER_LEGACY_OPENED",e.GoalPickerLegacyClosed="GOAL_PICKER_LEGACY_CLOSED",e.CourseGradeOpened="COURSE_GRADE_OPENED",e.CourseGradeClosed="COURSE_GRADE_CLOSED",e.CourseGradeAccommodationOpened="COURSE_GRADE_ACCOMMODATION_OPENED",e.CourseGradeAccommodationClosed="COURSE_GRADE_ACCOMMODATION_CLOSED",e.CourseGradesOverallGradeSetupOpened="COURSE_GRADE_OVERALL_GRADE_SETUP_OPENED",e.CourseGradesOverallGradeSetupClosed="COURSE_GRADE_OVERALL_GRADE_SETUP_CLOSED",e.CourseGradesAddItemOpened="COURSE_GRADE_ADD_ITEM_OPENED",e.CourseGradesAddItemClosed="COURSE_GRADE_ADD_ITEM_CLOSES",e.CourseGradesAddItemCalculationOpened="COURSE_GRADE_ADD_ITEM_CALCULATION_OPENED",e.CourseGradesAddItemCalculationClosed="COURSE_GRADE_ADD_ITEM_CALCULATION_CLOSED",e.CourseGradesIndividualGradeOpened="COURSE_GRADE_VIEW_INDIVIDUAL_GRADE_OPENED",e.CourseGradesIndividualGradeClosed="COURSE_GRADE_VIEW_INDIVIDUAL_GRADE_CLOSED",e.ContentCopyPanelOpened="CONTENT_COPY_PANEL_OPENED",e.ContentCopyPanelClosed="CONTENT_COPY_PANEL_CLOSED",e.BulkEditContentPanelOpened="BULK_EDIT_CONTENT_PANEL_OPENED",e.BulkEditContentPanelClosed="BULK_EDIT_CONTENT_PANEL_CLOSED",e.ImportContentPanelOpened="IMPORT_CONTENT_PANEL_OPENED",e.ImportContentPanelClosed="IMPORT_CONTENT_PANEL_CLOSED",e.ExportsPanelOpened="EXPORTS_PANEL_OPENED",e.ExportsPanelClosed="EXPORTS_PANEL_CLOSED",e.ContentCollectionPanelOpened="CONTENT_COLLECTION_PANEL_OPENED",e.ContentCollectionSettingOpened="CONTENT_COLLECTION_SETTINGS_OPENED",e.ContentCollectionSettingClosed="CONTENT_COLLECTION_SETTINGS_CLOSED",e.ContentCollectionPickerOpened="CONTENT_COLLECTION_PICKER_OPENED",e.ContentCollectionPickerClosed="CONTENT_COLLECTION_PICKER_CLOSED",e.FileOpened="FILE_OPENED",e.LinkOpened="LINK_OPENED",e.LTILaunched="LTI_LAUNCHED",e.QuestionAnalysisReportOpened="QUESTION_ANALYSIS_REPORT_OPENED",e.QuestionAnalysisReportClosed="QUESTION_ANALYSIS_REPORT_CLOSED",e.QuestionAnalysisOpened="QUESTION_ANALYSIS_OPENED",e.QuestionAnalysisClosed="QUESTION_ANALYSIS_CLOSED",e.QuestionAnalyticsScormReportOpened="QUESTION_ANALYTICS_SCORM_REPORT_OPENED",e.QuestionAnalyticsScormReportClosed="QUESTION_ANALYTICS_SCORM_REPORT_CLOSED",e.CourseQuestionAnalysisReportOpened="COURSE_QUESTION_ANALYSIS_REPORT_OPENED",e.CourseQuestionAnalysisReportClosed="COURSE_QUESTION_ANALYSIS_REPORT_CLOSED",e.PersonalEventOpened="PERSONAL_EVENT_OPENED",e.PersonalEventClosed="PERSONAL_EVENT_CLOSED",e.StudentActivityOpened="STUDENT_ACTIVITY_OPENED",e.StudentActivityClosed="STUDENT_ACTIVITY_CLOSED",e.ProgressTrackerOpened="PROGRESS_TRACKER_OPENED",e.ProgressTrackerClosed="PROGRESS_TRACKER_CLOSED",e.CancelClicked="CANCEL_CLICKED",e.ModelDismissed="MODEL_DISMISSED",e.CreateLinkPanelOpened="CREATE_LINK_PANEL_OPENED",e.CreateLinkPanelClosed="CREATE_LINK_PANEL_CLOSED",e.LTILinkOpened="LTI_LINK_OPENED",e.CreateLTIPanelOpened="CREATE_LTI_PANEL_OPENED",e.CreateLTIPanelClosed="CREATE_LTI_PANEL_CLOSED",e.ScormSettingsOpened="SCORM_SETTINGS_OPENED",e.ScormSettingsClosed="SCORM_SETTINGS_CLOSED",e.ScormFileUploaderOpened="SCORM_FILE_UPLOADED_OPENED",e.ScormSettingsOrFileUploaderOpened="SCORM_SETTINGS_OR_FILE_UPLOADER_OPENED",e.PreviewScormOpened="PREVIEW_SCORM_OPENED",e.PreviewScormClosed="PREVIEW_SCORM_CLOSED",e.GradedScormInstOpened="SCORM_SUBMISSIONS_OPENED",e.GradedScormInstClosed="SCORM_SUBMISSIONS_CLOSED",e.OfflineGradeOpened="OFFLINE_GRADES_OPENED",e.EditGradeItemOpened="EDIT_GRADE_ITEM_OPENED",e.AddGradeItemOpened="ADD_GRADE_ITEM_OPENED",e.ScormAnalysisReportOpened="SCORM_ANALYSIS_REPORT_OPENED",e.ScormAnalysisReportClosed="SCORM_ANALYSIS_REPORT_CLOSED",e.DownloadLinkClicked="DOWNLOAD_LINK_CLICKED",e.PartnerToolOpened="PARTNER_TOOL_OPENED",e.PartnerToolClosed="PARTNER_TOOL_CLOSED",e.EditFolderOpened="EDIT_FOLDER_OPENED",e.EditFolderClosed="EDTI_FOLDER_CLOSED",e.EditLinkOpened="EDIT_LINK_OPENED",e.EditFileOpened="EDIT_FILE_OPENED",e.EditLTIOpened="EDIT_LTI_OPENED",e.EditLTIClosed="EDIT_LTI_CLOSED",e.EditPlacementOpened="EDIT_PLACEMENT_OPENED",e.EditPlacementClosed="EDIT_PLACEMENT_CLOSED",e.CreateDocument="CREATE_DOCUMENT",e.ReleaseConditionPanelOpened="RELEASE_CONDITION_PANEL_OPENED",e.ReleaseConditionPanleClosed="RELEASE_CONDITION_PANEL_CLOSED",e.ToolsOpened="TOOLS_OPENED",e.ToolsClosed="TOOLS_CLOSED",e.MessagesOpened="MESSAGES_OPENED",e.MessageClosed="MESSAGE_CLOSED",e.GradableItemTabOpened="GRADABLE_ITEM_TAB_OPENED",e.StudentsTabOpened="STUDENTS_TAB_OPENED",e.QuestionPickerPanelOpened="QUESTION_PICKER_PANEL_OPENED",e.QuestionPickerPanelClosed="QUESTION_PICKER_PANEL_CLOSED",e.QuestionPoolPanelOpened="QUESTION_POOL_PANEL_OPENED",e.QuestionPoolPanelClosed="QUESTION_POOL_PANEL_CLOSED",e.ToolLinkOpened="TOOL_LINK_OPENED",e.CourseGroupEnrollOpened="COURSE_GROUP_ENROLL_OPENED",e.AttendanceStudentViewOpened="ATTENDANCE_STUDENT_VIEW_OPENED",e.StudentScormOverviewOpened="STUDENT_SCORM_OVERVIEW_OPENED",e.AssessmentDetailsClosed="ASSESSMENT_DETAILS_CLOSED",e.AssessmentAttemptSubmissionFeedbackOpened="ASSESSMENT_SUBMISSION_FEEDBACK_OPENED",e.AssessmentAttemptSubmissionFeedbackClosed="ASSESSMENT_SUBMISSION_FEEDBACK_CLOSED",e.DocumentSettingsOpened="DOCUMENT_SETTINGS_OPENED",e.DocumentSettingsClosed="DOCUMENT_SETTINGS_CLOSED",e.GradeAndFeedbackOpened="GRADE_AND_FEEDBACK_OPENED",e.GradeAndFeedbackClosed="GRADE_AND_FEEDBACK_CLOSED",e.AssessmentOverviewAttemptClosed="ASSESSMENT_OVERVIEW_ATTEMPT_CLOSED",e.AssessmentOverviewClosed="ASSESSMENT_OVERVIEW_CLOSED",e.MultipleAttemptGradingOpened="MULTIPLE_ATTEMPT_GRADING_OPENED",e.MultipleAttemptGradingClosed="MULTIPLE_ATTEMPT_GRADING_CLOSED",e.StudentSubmisionOpened="STUDENT_SUBMISSION_OPENED",e.TestSubmissionOpened="TEST_SUBMISSION_OPENED",e.AssignmentSubmissionOpened="ASSIGNMENT_SUBMISSION_OPENED",e.ExamSubmissionOpened="EXAM_SUBMISSION_OPENED",e.HomeworkSubmissionOpened="HOMEWORK_SUBMISSION_OPENED",e.PresentationSubmissionOpened="PRESENTATION_SUBMISSION_OPENED",e.QuizSubmissionOpened="QUIZ_SUBMISSION_OPENED",e.OverallGradeSettingsOpened="OVERALL_GRADE_SETTINGS_OPENED",e.OverallGradeSettingsClosed="OVERALL_GRADE_SETTINGS_CLOSED",e.InstitutionAdminPageOpened="INSTITUTION_ADMIN_PAGE_OPENED",e.InstitutionAdminPageClosed="INSTITUTION_ADMIN_PAGE_CLOSED",e.InstitutionPageOpened="INSTITUTION_PAGE_OPENED",e.InstitutionPageClosed="INSTITUTION_PAGE_CLOSED",e.BrandDetailOpened="INSTITUTION_BRAND_DETAIL_OPENED",e.BrandDetailClosed="INSTITUTION_BRAND_DETAIL_CLOSED",e.CreateModuleOpened="CREATE_MODULE_OPENED",e.CreateModuleClosed="CREATE_MODULE_CLOSED",e.EditBannerOpened="EDIT_BANNER_OPENED",e.EditBannerClosed="EDIT_BANNER_CLOSED",e.EditBannerLogoOpened="EDIT_BANNER_LOGO_OPENED",e.EditBannerLogoClosed="EDIT_BANNER_LOGO_CLOSED",e.BrowserSettingOpened="BROWSER_SETTING_OPENED",e.BrowserSettingClosed="BROWSER_SETTINGS_CLOSED",e.ContentCollectionOpened="IP_CONTENT_COLLECTION_OPENED",e.ContentCollectionClosed="IP_CONTENT_COLLECTION_CLOSED",e.GradeSettingsOpened="GRADE_SETTINGS_OPENED",e.GradeSettingsClosed="GRADE_SETTINGS_CLOSED",e.EditLinkImageOpened="EDIT_LINK_IMAGE_OPENED",e.EditLinkImageClosed="EDIT_LINK_IMAGE_CLOSED",e.IpViewLinksOpened="INSTITUTION_VIEW_LINKED_OPENED",e.IpViewLinksClosed="INSTITUTION_VIEW_LINKED_CLOSED",e.IpColorSelectionOpened="INSTITUTION_COLOR_SELECTION_OPENED",e.IpColorSelectionClosed="INSTITUTION_COLOR_SELECTION_CLOSED",e.GradesAndParticipantsOpened="GRADES_AND_PARTICIPANTS_OPENED",e.GradeBookDownloadButtonClicked="GRADEBOOK_DOWNLOAD_BUTTON_CLICKED",e.GradeDownloadSettingsOpened="GRADEBOOK_DOWNLOAD_SETTINGS_OPENED",e.GradeDownloadSettingsClosed="GRADEBOOK_DOWNLOAD_SETTINGS_CLOSED",e.EditFileSettingsOpened="EDIT_FILE_SETTINGS_OPENED",e.EditFileSettingsClosed="EDIT_FILE_SETTINGS_CLOSED",e.ContentManageCreateDocumentClosed="CREATE_DOCUMENT_CLOSED",e.NewJournalTitleUpdated="NEW_JOURNAL_TITLE_UPDATED",e.DownloadTestResultsOpened="DOWNLOAD_TEST_RESULTS_OPENED",e.DownloadTestResultsClosed="DOWNLOAD_TEST_RESULTS_CLOSED",e.NewMessageCreated="NEW_MESSAGE_CREATED",e.MessageSent="MESSAGE_SENT",e.AssessmentOverviewMultipleAttemptOpened="ASSESSMENT_MULTIPLE_ATTEMPT_OPENED",e.AssessmentOverviewMultipleAttemptClosed="ASSESSMENT_MULTIPLE_ATTEMPT_CLOSED",e.AssessmentOverviewAttemptReviewOpened="ASSESSMENT_OVERVIEW_ATTEMPT_REVIEW_OPENED",e.AssessmentOverviewAttemptReviewClosed="ASSESSMENT_OVERVIEW_ATTEMPT_REVIEW_CLOSED",e.DiscussionDetailsOpened="DISCUSSION_DETAILS_OPENED",e.DiscussionDetailsClosed="DISCUSSION_DETAILS_CLOSED",e.EventViewOpened="EVENT_VIEW_OPENED",e.EventViewClosed="EVENT_VIEW_CLOSED",e.OverallGradeOpened="OVERALL_GRADE_OPENED",e.OverallGradeClosed="OVERALL_GRADE_CLOSED",e.AssessmentOverviewAttemptReviewInlineRubricsOpened="ASSESSMENT_INLINE_RUBRICS_OPENED",e.AssessmentOverviewAttemptReviewInlineRubricsClosed="ASSESSMENT_INLINE_RUBRICS_CLOSED",e.AssessmentStudentRubricOpened="ASSESSMENT_STUDENT_RUBRIC_OPENED",e.AssessmentStudentRubricClosed="ASSESSMENT_STUDENT_RUBRIC_CLOSED",e.GradeCalculationDetailOpened="GRADE_CALCULATION_DETAIL_OPENED",e.GradeCalculationDetailClosed="GRADE_CALCULATION_DETAIL_CLOSED",e.GradeUploadOpened="GRADEBOOK_UPLOAD_OPENED",e.GradeUploadClosed="GRADEBOOK_UPLOAD_CLOSED",e.GradeSubmissionReceiptOpened="GRADEBOOK_SUBMISSION_RECEIPT_OPENED",e.GradeSubmissionReceiptClosed="GRADEBOOK_SUBMISSION_RECEIPT_CLOSED",e.CloudStorageOpened="CLOUD_STORAGE_OPENED",e.CloudStorageClosed="CLOUD_STORAGE_CLOSED",e.BlackboardSupportOpened="BLACKBOARD_SUPPORT_OPENED",e.SessionDebugOpened="SESSION_DEBUG_OPENED",e.ImportGroupSetPanelOpened="IMPORT_GROUP_SET_PANEL_OPENED",e.ImportGroupSetPanelClosed="IMPORT_GROUP_SET_PANEL_CLOSED",e.ImportGroupMembersPanelOpened="IMPORT_GROUP_MEMBERS_PANEL_OPENED",e.ImportGroupMembersPanelClosed="IMPORT_GROUP_MEMBERS_PANEL_CLOSED",e.ExportGroupSetPanelOpened="EXPROT_GROUP_SET_PANEL_OPENED",e.ExportGroupSetPanelClosed="EXPORT_GROUP_SET_PANEL_CLOSED",e.OfflineGradesAndFeedbacksPanelOpened="OFFLINE_GRADES_AND_FEEDBACK_PANEL_OPENED"}(r||(r={})),function(e){e[e.Document=0]="Document",e[e.Test=1]="Test",e[e.Assignment=2]="Assignment",e[e.Link=3]="Link",e[e.Folder=4]="Folder",e[e.Discussion=5]="Discussion",e[e.GradedDiscussion=6]="GradedDiscussion",e[e.Journal=10]="Journal",e[e.DiscussionGroup=13]="DiscussionGroup",e[e.GradedDiscussionGroup=14]="GradedDiscussionGroup",e[e.LTIConnection=25]="LTIConnection",e[e.Scorm=36]="Scorm"}(i||(i={})),function(e){e.GotoParticipants="GOTO_PARTICIPANTS",e.GotoSettings="GOTO_SETTINGS",e.GotoDetail="GOTO_DETAIL",e.GotoDownload="GOTO_DOWNLOAD",e.Delete="DELETE",e.Next="NEXT",e.Prev="PREV",e.Enroll="ENROLL",e.Search="SEARCH",e.GotoUpload="GOTO_UPLOAD",e.GotoSubmissionReceipt="GOTO_SUBMISSION_RECEIPT"}(a||(a={})),function(e){e.Success="Success",e.Fail="Fail"}(c||(c={}));const u="fromPeekName",p={[o.OpenCalendar]:s.CourseCalendar,[o.OpenGradeBook]:s.CourseGrades,[o.OpenJournal]:s.Journal,[o.OpenDiscussion]:s.Discussion,[o.OpenGroupDiscussion]:s.Discussion,[o.OpenAssessmentInstView]:s.AssessmentInst,[o.OpenAssessmentSubmissionView]:s.AssessmentInst,[o.OpenInstViewGradedSCORM]:s.GradedScormInst,[o.OpenCourse]:s.CourseOutline,[o.OpenDocument]:s.Document,[o.OpenCourseAnnouncement]:s.AnnouncementDetail,[o.OpenAdminAnnouncement]:s.AdminAnnouncement,[o.OpenCourseMessage]:s.CourseMessage,[o.OpenTimeline]:s.CourseTimeline,[o.OpenPersonalEvent]:s.EventEdit,[o.OpenCalendarEvent]:s.EventEdit,[o.OpenCourseMessagesList]:s.CourseMessageList,[o.OpenCreateMessages]:s.CreateMessage,[o.OpenInstitutionPage]:s.InstitutionPage,[o.OpenAdminInstitutionPage]:s.InstitutionAdminPage,[o.OpenTools]:s.Tools,[o.OpenAssessment]:s.AssessmentOverview,[o.OpenStudentDiscusssionPage]:s.Discussion,[o.OpenGradedSCORM]:s.StudentScormOverview},b={[s.QuestionGoalAlignmentForStudent]:{type:r.AttemptGoalAlignmentOpened},[s.RubricEvaluation]:{type:r.AttemptRubricOpened,prevState:u},[s.RubricView]:{type:r.AttemptRubricOpened,prevState:u},[s.AssessmentSubmissionFeedbackTab]:{type:r.AttemptFeedbackOpened},[s.AssessmentSubmissionFeedback]:{type:r.AttemptFeedbackOpened},[s.DiscussionParticipants]:{type:r.DiscussionParticipantsOpened},[s.SubmissionList]:{type:r.SubmissionListOpened},[s.DiscussionFeedback]:{type:r.DiscussionFeedbackOpened},[s.JournalSetting]:{type:r.JournalSettingsOpened},[s.JournalDetail]:{type:r.JournalDetailsOpened},[s.JournalParticipationDetail]:{type:r.JournalParticipationDetailOpened},[s.EnrolUsers]:{type:r.EnrollUsersOpened},[s.EditEnrollment]:{type:r.EditEnrollmentOpened},[s.Description]:{type:r.DescriptionOpened},[s.GroupSetList]:{type:r.GroupSetListOpened},[s.GroupSetDetail]:{type:r.GroupSetDetailOpened,prevState:u},[s.CourseEditBanner]:{type:r.CourseEditBannerOpened},[s.AttendanceSettings]:{type:r.AttendanceSettingsOpened},[s.BooksAndTools]:{type:r.BooksAndToolsOpened},[s.ContentMarket]:{type:r.ContentMarketOpened,prevState:u},[s.QuestionBanks]:{type:r.QuestionBanksOpened},[s.ClassSchedule]:{type:r.ClassScheduleOpened},[s.CourseMessages]:{type:r.CourseMessageListOpened},[s.CreateMessage]:{type:r.CreateMessageOpened},[s.CourseCalendar]:{type:r.CourseCalendarOpened},[s.CourseCalendarCreateEvent]:{type:r.CourseCalendarCreateNewEventOpened},[s.CourseCalendarOfficeHours]:{type:r.CourseCalendarOfficeHoursOpened},[s.CourseCalendarEditEvent]:{type:r.CourseCalendarEditEventOpened},[s.DiscussionSettings]:{type:r.DiscussionSettingsOpened},[s.DiscussionsSettings]:{type:r.DiscussionsSettingsOpened},[s.NewMessage]:{type:r.NewMessagePanelOpened,prevState:u},[s.CreateContent]:{type:r.NewContentItemPanelOpened},[s.CourseGroup]:{type:r.CourseGroupOpened},[s.AdminAnnouncement]:{type:r.AdminAnnouncementOpened},[s.PerAssessmentSettings]:{type:r.PerAssessmentSettingsOpened},[s.SubmissionGrading]:{type:r.SubmissionGradingOpened},[s.AssessmentSubmissionGradingFeedbackTab]:{type:r.SubmissionGradingFeedbackTabOpened},[s.GradesBulkDownload]:{type:r.GradesBulkDownloadOpened},[s.QuestionGoalAlignmentForInstructor]:{type:r.QuestionGoalAlignmentForInstructorOpened},[s.GoalPickerLegacy]:{type:r.GoalPickerLegacyOpened},[s.CourseGradesAccommodations]:{type:r.CourseGradeAccommodationOpened,prevState:u},[s.ContentCopy]:{type:r.ContentCopyPanelOpened},[s.BulkEditContent]:{type:r.BulkEditContentPanelOpened},[s.ImportContent]:{type:r.ImportContentPanelOpened},[s.Exports]:{type:r.ExportsPanelOpened},[s.ContentCollection]:{type:r.ContentCollectionPanelOpened},[s.ContentCollectionSettings]:{type:r.ContentCollectionSettingOpened},[s.ContentCollectionPicker]:{type:r.ContentCollectionPickerOpened,prevState:u},[s.CourseGradesAddItem]:{type:r.CourseGradesAddItemOpened},[s.CourseGradesAddItemCalculation]:{type:r.CourseGradesAddItemCalculationOpened},[s.CourseGradesViewIndividualGrade]:{type:r.CourseGradesIndividualGradeOpened},[s.QuestionAnalysis]:{type:r.QuestionAnalysisOpened},[s.QuestionAnalyticsScorm]:{type:r.QuestionAnalyticsScormReportOpened},[s.CourseQuestionAnalysisReport]:{type:r.CourseQuestionAnalysisReportOpened},[s.EventEdit]:{type:r.PersonalEventOpened},[s.CreateLink]:{type:r.CreateLinkPanelOpened},[s.CreateLTI]:{type:r.CreateLTIPanelOpened},[s.ScormSettings]:{type:r.ScormSettingsOrFileUploaderOpened},[s.PreviewScorm]:{type:r.PreviewScormOpened},[s.DiscussionBoard]:{type:r.DiscussionBoardOpened},[s.CourseGrades]:{type:r.CourseGradeOpened},[s.ScormAnalysisReport]:{type:r.ScormAnalysisReportOpened},[s.PartnerTool]:{type:r.PartnerToolOpened},[s.EditFolder]:{type:r.EditFolderOpened,prevState:u},[s.EditLTI]:{type:r.EditLTIOpened,prevState:u},[s.EditPlacement]:{type:r.EditPlacementOpened,prevState:u},[s.Tools]:{type:r.ToolsOpened},[s.Messages]:{type:r.MessagesOpened},[s.CourseGroupEnroll]:{type:r.CourseGroupEnrollOpened},[s.AttendanceStudentView]:{type:r.AttendanceStudentViewOpened},[s.StudentScormOverview]:{type:r.StudentScormOverviewOpened},[s.AssessmentAttemptSubmissionFeedback]:{type:r.AssessmentAttemptSubmissionFeedbackOpened},[s.DocumentSettings]:{type:r.DocumentSettingsOpened},[s.OverallGradeSettings]:{type:r.OverallGradeSettingsOpened},[s.InstitutionAdminPage]:{type:r.InstitutionAdminPageOpened},[s.InstitutionPage]:{type:r.InstitutionPageOpened},[s.BrandDetail]:{type:r.BrandDetailOpened},[s.CreateModule]:{type:r.CreateModuleOpened},[s.EditModule]:{type:r.CreateModuleOpened},[s.IpContentCollection]:{type:r.ContentCollectionOpened},[s.GradeSettings]:{type:r.GradeSettingsOpened},[s.BrowserSettings]:{type:r.BrowserSettingOpened},[s.IpViewLinks]:{type:r.IpViewLinksOpened},[s.IpColorSelection]:{type:r.IpColorSelectionOpened},[s.GradeDownloadSettings]:{type:r.GradeDownloadSettingsOpened},[s.CourseOutline]:{type:r.CourseContentOpened},[s.DownloadTestResults]:{type:r.DownloadTestResultsOpened},[s.AssessmentOverviewMultipleAttempt]:{type:r.AssessmentOverviewMultipleAttemptOpened},[s.AssessmentOverviewAttemptReview]:{type:r.AssessmentOverviewAttemptReviewOpened},[s.DiscussionDetails]:{type:r.DiscussionDetailsOpened,prevState:u},[s.OverallGrade]:{type:r.OverallGradeOpened},[s.AssessmentOverviewAttemptReviewInlineRubrics]:{type:r.AssessmentOverviewAttemptReviewInlineRubricsOpened},[s.GradeUpload]:{type:r.GradeUploadOpened},[s.GradeSubmissionReceipt]:{type:r.GradeSubmissionReceiptOpened}},m={[s.QuestionGoalAlignmentForStudent]:{type:r.AttemptGoalAlignmentClosed},[s.RubricEvaluation]:{type:r.AttemptRubricClosed},[s.RubricView]:{type:r.AttemptRubricClosed},[s.AssessmentSubmissionFeedbackTab]:{type:r.AttemptFeedbackClosed},[s.AssessmentSubmissionFeedback]:{type:r.AttemptFeedbackClosed},[s.DiscussionParticipants]:{type:r.DiscussionParticipantsClosed},[s.SubmissionList]:{type:r.SubmissionListClosed},[s.DiscussionFeedback]:{type:r.DiscussionFeedbackClosed},[s.JournalSetting]:{type:r.JournalSettingsClosed},[s.JournalDetail]:{type:r.JournalDetailsClosed},[s.JournalParticipationDetail]:{type:r.JournalParticipationDetailClosed},[s.EnrolUsers]:{type:r.EnrollUsersClosed},[s.EditEnrollment]:{type:r.EditEnrollmentClosed},[s.Description]:{type:r.DescriptionClosed},[s.GroupSetList]:{type:r.GroupSetListClosed},[s.GroupSetDetail]:{type:r.GroupSetDetailClosed},[s.CourseEditBanner]:{type:r.CourseEditBannerClosed},[s.Attendance]:{type:r.AttendanceClosed},[s.AttendanceSettings]:{type:r.AttendanceSettingsClosed},[s.AttendanceStudentRecords]:{type:r.AttendanceStudentRecordsClosed},[s.AnnouncementDetail]:{type:r.AnnouncementDetailClosed},[s.AnnouncementList]:{type:r.AnnouncementListClosed},[s.BooksAndTools]:{type:r.BooksAndToolsClosed},[s.ContentMarket]:{type:r.ContentMarketClosed},[s.QuestionBanks]:{type:r.QuestionBanksClosed},[s.ClassSchedule]:{type:r.ClassScheduleClosed},[s.CourseMessages]:{type:r.CourseMessageListClosed},[s.CreateMessage]:{type:r.CreateMessageClosed},[s.CourseCalendar]:{type:r.CourseCalendarClosed},[s.CourseCalendarCreateEvent]:{type:r.CourseCalendarCreateNewEventClosed},[s.CourseCalendarOfficeHours]:{type:r.CourseCalendarOfficeHoursClosed},[s.CourseCalendarEditEvent]:{type:r.CourseCalendarEditEventClosed},[s.DiscussionSettings]:{type:r.DiscussionSettingsClosed},[s.DiscussionsSettings]:{type:r.DiscussionsSettingsClosed},[s.DiscussionTelemetry]:{type:r.DiscussionTelemetryClosed},[s.NewMessage]:{type:r.NewMessagePanelClosed},[s.CreateFolder]:{type:r.NewFolderPanelClosed},[s.CreateContent]:{type:r.NewContentItemPanelClosed},[s.CourseGroup]:{type:r.CourseGroupClosed},[s.AdminAnnouncement]:{type:r.AdminAnnouncementClosed},[s.AssessmentSettings]:{type:r.AssessmentSettingsClosed},[s.PerAssessmentSettings]:{type:r.PerAssessmentSettingsClosed},[s.SubmissionGrading]:{type:r.SubmissionGradingClosed},[s.AssessmentSubmissionGradingFeedbackTab]:{type:r.SubmissionGradingFeedbackTabClosed},[s.GradesBulkDownload]:{type:r.GradesBulkDownloadClosed},[s.QuestionGoalAlignmentForInstructor]:{type:r.QuestionGoalAlignmentForInstructorClosed},[s.GoalPickerLegacy]:{type:r.GoalPickerLegacyClosed},[s.CourseGradesAccommodations]:{type:r.CourseGradeAccommodationClosed},[s.ContentCopy]:{type:r.ContentCopyPanelClosed},[s.BulkEditContent]:{type:r.BulkEditContentPanelClosed},[s.ImportContent]:{type:r.ImportContentPanelClosed},[s.Exports]:{type:r.ExportsPanelClosed},[s.ContentCollectionSettings]:{type:r.ContentCollectionSettingClosed},[s.ContentCollectionPicker]:{type:r.ContentCollectionPickerClosed},[s.CourseGradesAddItem]:{type:r.CourseGradesAddItemClosed},[s.CourseGradesAddItemCalculation]:{type:r.CourseGradesAddItemCalculationClosed},[s.CourseGradesViewIndividualGrade]:{type:r.CourseGradesIndividualGradeClosed},[s.QuestionAnalysisReport]:{type:r.QuestionAnalysisReportClosed},[s.QuestionAnalysis]:{type:r.QuestionAnalysisClosed},[s.QuestionAnalyticsScorm]:{type:r.QuestionAnalyticsScormReportClosed},[s.CourseQuestionAnalysisReport]:{type:r.CourseQuestionAnalysisReportClosed},[s.EventEdit]:{type:r.PersonalEventClosed},[s.StudentActivity]:{type:r.StudentActivityClosed},[s.Roster]:{type:r.RosterClosed},[s.Journal]:{type:r.JournalClosed},[s.Discussion]:{type:r.DiscussionClosed},[s.Document]:{type:r.DocumentClosed},[s.AssessmentInst]:{type:r.AssessmentClosed},[s.CreateLink]:{type:r.CreateLinkPanelClosed},[s.CreateLTI]:{type:r.CreateLTIPanelClosed},[s.ScormSettings]:{type:r.ScormSettingsClosed},[s.Collab]:{type:r.CollabClosed},[s.PreviewScorm]:{type:r.PreviewScormClosed},[s.GradedScormInst]:{type:r.GradedScormInstClosed},[s.CourseOutline]:{type:r.CourseContentClosed},[s.CourseGrades]:{type:r.CourseGradeClosed},[s.ScormAnalysisReport]:{type:r.ScormAnalysisReportClosed},[s.PartnerTool]:{type:r.PartnerToolClosed},[s.EditFolder]:{type:r.EditFolderClosed},[s.EditLTI]:{type:r.EditLTIClosed},[s.EditPlacement]:{type:r.EditPlacementClosed},[s.Tools]:{type:r.ToolsClosed},[s.Messages]:{type:r.MessageClosed},[s.ReleaseCondition]:{type:r.ReleaseConditionPanleClosed},[s.GradeBookOverAllGrade]:{type:r.CourseGradesOverallGradeSetupClosed},[s.AssessmentDetails]:{type:r.AssessmentDetailsClosed},[s.AssessmentAttemptSubmissionFeedback]:{type:r.AssessmentAttemptSubmissionFeedbackClosed},[s.DocumentSettings]:{type:r.DocumentSettingsClosed},[s.GradeAndFeedback]:{type:r.GradeAndFeedbackClosed},[s.AssessmentOverview]:{type:r.AssessmentOverviewClosed},[s.AssessmentOverviewAttempt]:{type:r.AssessmentOverviewAttemptClosed},[s.OverallGradeSettings]:{type:r.OverallGradeSettingsClosed},[s.InstitutionAdminPage]:{type:r.InstitutionAdminPageClosed},[s.InstitutionPage]:{type:r.InstitutionPageClosed},[s.BrandDetail]:{type:r.BrandDetailClosed},[s.CreateModule]:{type:r.CreateModuleClosed},[s.EditModule]:{type:r.CreateModuleClosed},[s.BrowserSettings]:{type:r.BrowserSettingClosed},[s.IpContentCollection]:{type:r.ContentCollectionClosed},[s.GradeSettings]:{type:r.GradeSettingsClosed},[s.EditIpLinkImage]:{type:r.EditLinkImageClosed},[s.IpViewLinks]:{type:r.IpViewLinksClosed},[s.IpColorSelection]:{type:r.IpColorSelectionClosed},[s.GradeDownloadSettings]:{type:r.GradeDownloadSettingsClosed},[s.MultipleAttemptGrading]:{type:r.MultipleAttemptGradingClosed},[s.EditFileSettings]:{type:r.EditFileSettingsClosed},[s.DownloadTestResults]:{type:r.DownloadTestResultsClosed},[s.AssessmentOverviewMultipleAttempt]:{type:r.AssessmentOverviewMultipleAttemptClosed},[s.AssessmentOverviewAttemptReview]:{type:r.AssessmentOverviewAttemptReviewClosed},[s.DiscussionDetails]:{type:r.DiscussionDetailsClosed},[s.OverallGrade]:{type:r.OverallGradeClosed},[s.AssessmentOverviewAttemptReviewInlineRubrics]:{type:r.AssessmentOverviewAttemptReviewInlineRubricsClosed},[s.GradeUpload]:{type:r.GradeUploadClosed},[s.GradeSubmissionReceipt]:{type:r.GradeSubmissionReceiptClosed}};function g(){const e=window.webkit;return!!(e&&e.messageHandlers&&e.messageHandlers.MobileApp)}function h(){return!!window.MobileApp}function f(){return g()||h()}function O(e){return null==e?void 0:e.split(".peek.").pop()}function E(e){try{if(g()){window.webkit.messageHandlers.MobileApp.postMessage(e)}if(h()){const t=JSON.stringify(e);window.MobileApp.sendMessageToMobile(t)}}catch(e){console.error(e)}}const y=new Map,I=new Map;function C(e){return new Promise(((t,n)=>{const s=Object(d.v4)();y.set(s,{resolve:t,reject:n}),E({...e,correlationId:s})}))}function v(e){if(!e)return;const t=JSON.parse(e);if(!t||!t.correlationId)return;const n=y.get(t.correlationId);n&&(t.status===c.Fail?n.reject(t):n.resolve(t))}function S(){y.clear()}function j(){window.onMobileApiMessage=v}function T(e){var t;if(!e)return;const n=document.querySelector("#preview-iframe");if(n&&n.contentWindow)return void(null===(t=n.contentWindow.mobileAPI)||void 0===t||t.onMobileEventHandler(e));const s=JSON.parse(e);if(!s||!s.correlationId)return;const o=I.get(s.correlationId);o&&(s.status===c.Fail?o.error(s):o.next(s))}function A(e){window.mobileAPI.onMobileEventHandler=T;const t=Object(d.v4)();return{response:new l.a((n=>{I.set(t,n),E({...e,correlationId:t})})),correlationId:t}}function _(e){const t=I.get(e);t&&(t.complete(),I.delete(e))}function R(e){E({type:e,status:c.Success})}function N(e,t,n){e===o.OpenCourseMessage||e===o.OpenCreateMessages?n.goPeekState(s.CourseMessageList,t).then((()=>{n.goPeekState(p[e],t)})):n.goPeekState(p[e],t)}function w(e,t,n){n.goPeekState(s.CourseOutline,t).then((()=>{N(e,t,n)}))}function D(e){window.mobileAPI.dismissPanel=e}function L(e){window.mobileAPI.goToPeekState=(t,n)=>{var r,i;if(!t)return;const a=function(e,t){let n={};switch(e){case o.OpenDocument:n.courseId=t.courseId,n.id=t.contentId;break;case o.OpenAdminAnnouncement:n.streamEntryId=t.contentId;break;case o.OpenCourseAnnouncement:n.courseId=t.courseId,n.announcementId=t.contentId;break;case o.OpenCourseMessage:n.courseId=t.courseId,n.conversationId=t.contentId,n.offset=0,n.count=5;break;case o.OpenAssessmentInstView:n.courseId=t.courseId,n.contentId=t.contentId,n.gradeitemView="details";break;case o.OpenAssessmentSubmissionView:n.courseId=t.courseId,n.contentId=t.contentId,n.gradeitemView="students";break;default:n=t}return n}(t,n),c=null===(r=e.current.name)||void 0===r?void 0:r.split(".peek.").pop();t===o.OpenPersonalEvent||t===o.OpenCalendarEvent||t===o.OpenAdminAnnouncement?e.goToRoute(s.ActivityStream).then((()=>{N(t,a,e)})):t===o.OpenAdminInstitutionPage||t===o.OpenInstitutionPage||t===o.OpenTools?c===s.EventEdit||c===s.AdminAnnouncement?e.leavePeekState().then((()=>{e.goToRoute(p[t])})):e.goToRoute(p[t]):c===s.EventEdit||c===s.AdminAnnouncement?e.leavePeekState().then((()=>{e.goToRoute(s.CourseTimeline).then((()=>{w(t,a,e)}))})):a&&a.courseId&&a.courseId!==(null===(i=e.params)||void 0===i?void 0:i.courseId)?c===s.CourseTimeline?t!==o.OpenCourse?w(t,a,e):e.goPeekState(s.CourseOutline,a):c!==s.CourseTimeline&&(t!==o.OpenCourse?e.goToRoute(s.CourseTimeline).then((()=>{w(t,a,e)})):e.goToRoute(s.CourseTimeline).then((()=>{e.goPeekState(s.CourseOutline,a)}))):c===s.CourseTimeline?N(t,a,e):c===s.Discussion?e.leavePeekState().then((()=>{w(t,a,e)})):w(t,a,e)}}function P(e){f()?(document.body.classList.add("is-in-mobile-app"),window.mobileAPI={onMobileEventHandler:T,closeCurrentPanel:()=>function(e){var t;const n=document.querySelector("#preview-iframe");n&&n.contentWindow?null===(t=n.contentWindow.mobileAPI)||void 0===t||t.closeCurrentPanel():e.leavePeekState()}(e),goToPeekState:()=>L(e)}):window.mobileAPI={onMobileEventHandler:()=>{},closeCurrentPanel:()=>{},goToPeekState:()=>{}}}function k(e,t){if(f())try{let n;e&&b[e]?(n=b[e],E({...n,prevState:n.prevState?t:void 0,status:c.Success})):t&&m[t]&&(n=m[t],E({...n,status:c.Success}))}catch(e){console.error(e)}}n.d(t,"m",(function(){return f})),n.d(t,"i",(function(){return O})),n.d(t,"r",(function(){return E})),n.d(t,"n",(function(){return C})),n.d(t,"g",(function(){return S})),n.d(t,"l",(function(){return j})),n.d(t,"q",(function(){return A})),n.d(t,"f",(function(){return _})),n.d(t,"o",(function(){return R})),n.d(t,"h",(function(){return D})),n.d(t,"j",(function(){return L})),n.d(t,"k",(function(){return P})),n.d(t,"p",(function(){return k})),n.d(t,"d",(function(){return o})),n.d(t,"c",(function(){return r})),n.d(t,"e",(function(){return i})),n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return c}))},YdFf:function(e,t,n){"use strict";t.a={GROUP_DELETE_BATCH:"group.delete.batch",GROUPS_LOAD:"groups.load",GROUPS_LOAD_BY_CONTENT_ID:"groups.load.by.content.id",GROUPS_LOAD_BY_CONTENT_ID_AND_QUERY:"groups.load.by.content.id.by.query",GROUPS_LOAD_BY_QUERY:"groups.load.by.query",GROUPS_ADD:"groups.add",GROUPS_UPDATE:"groups.update",GROUP_LOAD_BY_ID:"groups.load.by.id",GROUP_MEMBERSHIPS_LOAD:"group.memberships.load",ADD_GROUP_MEMBERSHIP:"group.membership.add",REMOVE_GROUP_MEMBERSHIP:"group.membership.remove",GROUP_STUDENT_COUNT_LOAD:"group.student.count.load"}},a6r6:function(e,t,n){"use strict";var s={};n.r(s),n.d(s,"attachContentChangeListener",(function(){return h})),n.d(s,"DEFAULT_RESERVED_WORDS",(function(){return f})),n.d(s,"enableReservedWords",(function(){return E})),n.d(s,"setReservedWords",(function(){return y}));var o=n("ERkP"),r=n("ggb3"),i=n.n(r),a=n("h9IM"),c=n.n(a);class l{constructor(e){if(l.isWirisLoaded&&l.apiBasePathUsedForLoading!==e)throw Error(`WIRIS editor source already loaded from ${l.apiBasePathUsedForLoading}. Cannot load from ${e}`);this.apiBasePath=e}async newInstance(e){if(l.isWirisLoaded)return Promise.resolve(l.getNewInstance(e));const t=await this.getConfiguration(),n=(await l.getConfigurationjs(t.data.contextPath)).data.editorUrl;return this.loadWirisJS(n,e)}convertToAbsoluteUrl(e){return`${this.apiBasePath}${e}`}getConfiguration(){const e=this.convertToAbsoluteUrl("/v1/editor/v4/configurations");return i.a.get(e)}static getConfigurationjs(e){return i.a.get(`${e}app/configurationjs`)}static getNewInstance(e){const t=e?{...e}:{language:"en"};return t.fontFamily||(t.fontFamily="stix"),null!=t.mml&&t.mml.trim()||delete t.mml,t.language||(t.language="en"),com.wiris.jsEditor.JsEditor.newInstance(t)}loadWirisJS(e,t){return new Promise(((n,s)=>c()(e,(()=>{try{l.apiBasePathUsedForLoading=this.apiBasePath,l.isWirisLoaded=!0,n(l.getNewInstance(t))}catch(e){l.isWirisLoaded=!1,s(e)}}))))}}l.apiBasePathUsedForLoading="",l.isWirisLoaded=!1;const d={initError:null,isReady:!1,wirisEditorInstance:null},u=(e,t)=>{switch(t.type){case"get-new-instance":return{...d};case"ready":return{...e,isReady:!0,wirisEditorInstance:t.wirisEditorInstance};case"error":return{...e,isReady:!1,initError:t.error};default:throw Error(`Unrecognized action: ${t}`)}};var p=n("Agfx");const b=Object(p.makeStyles)((e=>Object(p.createStyles)({mathEditor:{"& .wrs_editor":{[e.breakpoints.down("sm")]:{whiteSpace:"normal","& .wrs_multipleRowPanel":{minHeight:"66px",height:"auto"},"& .wrs_toolbar .wrs_header":{width:"calc(100% - 18px)","& button":{marginLeft:0,marginRight:"4px"}}}}}})));var m=n("A4Z1");const g=({apiBasePath:e,className:t,locale:n,initialMathML:s,isRtl:r,onError:i,onLoad:a})=>{const c=o.useRef(null),{initError:p,isReady:g,wirisEditorInstance:h}=((e,t,n,s)=>{const[{isReady:r,initError:i,wirisEditorInstance:a},c]=Object(o.useReducer)(u,d);return Object(o.useEffect)((()=>{let o;const r=new l(t);return c({type:"get-new-instance"}),r.newInstance({mml:n,language:s,fontFamily:"stix"}).then((t=>{o=t,o.insertInto(e.current),c({type:"ready",wirisEditorInstance:o})}),(e=>{c({type:"error",error:e})})),()=>{o&&o.close()}}),[e]),Object(o.useEffect)((()=>{a&&a.getEditorModel().getParam("language")!==s&&a.setParam("language",s)}),[s,a]),{initError:i,isReady:r,wirisEditorInstance:a}})(c,e,s,n),f=b();return o.useEffect((()=>{h&&g&&a(h)}),[h]),o.useEffect((()=>{p&&i(p)}),[p]),o.createElement(m.a,{theme:"light",isRtl:r},o.createElement("div",{className:`${f.mathEditor} math-editor ${t||""}`,ref:c}))};function h(e,t){const n={caretPositionChanged:e=>{},clipboardChanged:e=>{},contentChanged:e=>{t(e.getMathML())},styleChanged:e=>{},transformationReceived:e=>{}};return e.getEditorModel().addEditorListener(n),n}g.displayName="MathEditor";const f=["sin","cos","tan","asin","acos","atan","csc","sec","cot","log","exp","ln","round","e","&#960;"],O={reservedWordsColor:"#006fcb",forceReservedWords:"true",grammarResource:"grammar_eval_content.txt",reservedWords:f.join(",")};function E(e){e.setParams(O)}function y(e,t){e.setParams({reservedWords:[...f,...t].join(",")})}function I(e){let t=e;return e&&e.indexOf("//")<0&&("/"!==e[0]&&(t=`/${e}`),t=window.location.origin+e),t}class C{constructor({courseId:e,apiBasePath:t,locale:n,xsrfToken:s}){this.waitForLoaded=(e,t)=>{C.isWirisPluginsLoaded?(clearInterval(C.interval),C.interval=void 0,e()):void 0===C.interval?(C.retry=3,C.interval=setInterval(this.waitForLoaded,500,e,t)):void 0!==C.interval&&(C.retry>0?C.retry-=1:(clearInterval(C.interval),C.interval=void 0,t()))},this.courseId=e,this.apiBasePath=t,this.locale=n,this.xsrfToken=s}static get isWirisPluginsLoaded(){var e,t,n;return!!(null===(n=null===(t=null===(e=window.com)||void 0===e?void 0:e.wiris)||void 0===t?void 0:t.js)||void 0===n?void 0:n.JsPluginViewer)}async load(){if(C.isWirisPluginsLoaded)return this.getInstance(this.locale);const e=`${(await this.getConfiguration()).contextPath}app/WIRISplugins.js?viewer=image&lang=${this.locale}&async=true`;return this.loadWirisPlugins(e,this.locale)}parseElement(e){return new Promise(((t,n)=>{this.load().then((n=>{const s=e.getElementsByTagName("math"),o=Array.from(s);if(0===o.length)return t(void 0);let r=0;n.replaceNodes(o,0,!0,(()=>{r+=1,r===o.length&&t(void 0)}))})).catch(n)}))}async getImageMetadataFromMathML(e){const t=document.createElement("span");"string"==typeof e?t.innerHTML=e:t.appendChild(e);const n=t.innerHTML;await this.parseElement(t);const s=t.getElementsByTagName("img")[0];return{dataMathML:n,src:s.src,alt:s.alt}}latexToMathml(e){const t=new URLSearchParams({service:"latex2mathml",latex:e}),n=I("/webapps/vtbe-tinymce/app/service");return new Promise(((s,o)=>{fetch(n,{method:"POST",headers:{...this.xsrfToken?{"X-Blackboard-XSRF":this.xsrfToken}:null},body:t}).then((e=>e.json())).then((t=>{var n;const o=document.createElement("div");o.innerHTML="ok"===t.status?t.result.text:"";const r=null!==(n=o.firstElementChild)&&void 0!==n?n:document.createElement("math"),i=document.createElement("semantics"),a=document.createElement("annotation");return a.setAttribute("encoding","LaTeX"),a.textContent=e.replace(/^\${2}/,"").replace(/\${2}$/,""),i.innerHTML=r.innerHTML,i.appendChild(a),r.innerHTML=i.outerHTML,s(r.outerHTML)})).catch((()=>o()))}))}hasLatex(e){let t;t=e instanceof Node?e.nodeValue||"":e;const n=t.indexOf("$$");if(-1===n)return!1;const s=t.indexOf("$$",n+"$$".length);return-1!==s&&!(t.substring(n+"$$".length,s).indexOf("\n")>-1)}getNextLatexPos(e,t){const n=t.indexOf("$$",e);if(-1===n)return null;const s=t.indexOf("$$",n+"$$".length);return-1===s?null:{start:n,end:s}}getConfiguration(){if(C.configurationPromise)return C.configurationPromise;const e=this.courseId?`/courses/${this.courseId}`:"",t=I(`${this.apiBasePath}/v1${e}/editor/v4/configurations`);return C.configurationPromise=fetch(t,{method:"GET",headers:{...this.xsrfToken?{"X-Blackboard-XSRF":this.xsrfToken}:null}}).then((e=>e.json())),C.configurationPromise.catch((()=>{C.configurationPromise=void 0})),C.configurationPromise}waitForLoadedPromise(){return new Promise(((e,t)=>{C.retry=3,this.waitForLoaded((()=>e(void 0)),(()=>t(new Error("WIRISplugins.js was not loaded"))))}))}loadWirisPlugins(e,t){return C.wirisPluginsPromise||(C.wirisPluginsPromise=new Promise(((n,s)=>c()(e,(()=>{this.waitForLoadedPromise().then((()=>n(this.getInstance(t)))).catch(s)})))),C.wirisPluginsPromise.catch((()=>{C.configurationPromise=void 0,C.wirisPluginsPromise=void 0}))),C.wirisPluginsPromise}getInstance(e){var t,n,s;const o=window,r=null!==(s=null===(n=null===(t=null===document||void 0===document?void 0:document.body)||void 0===t?void 0:t.parentElement)||void 0===n?void 0:n.lang)&&void 0!==s?s:"en";return o.com.wiris.js.JsPluginViewer.lang=e||r,o.com.wiris.js.JsPluginViewer}}n.d(t,"b",(function(){return v})),n.d(t,"a",(function(){return g})),n.d(t,"c",(function(){return C}));const v=s},bLWl:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return o}));const s=(e,t)=>"api"===(null==e?void 0:e.type)&&t.includes(e.status),o=e=>"network"===(null==e?void 0:e.type)},"bV+l":function(e,t,n){"use strict";t.a={ROUTER_STATE_CHANGE_SUCCESS:"router.state.change.success",ROUTER_LOCATION_CHANGE_SUCCESS:"router.location.change.success",APP_ERROR:"app.error",APP_ERROR_CLEAR:"app.error.clear"}},bfdd:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var s=n("zGdY"),o=n("mnLz");const r=e=>e?"object"!=typeof e?{type:"runtime",message:String(e),originalException:e}:(e=>{if(!e||"object"!=typeof e)return!1;if(!("type"in e)||"string"!=typeof e.type)return!1;const{type:t}=e;return"api"===t||"runtime"===t})(e)?e:e instanceof s.a?{type:"api",message:e.body.message,status:e.body.status,code:e.body.code,originalException:e}:e instanceof s.lc?{type:"api",message:e.apiError.body.message,status:e.status,code:e.apiError.body.code,originalException:e}:e instanceof o.a?{type:"network",message:e.message,originalException:e}:(e=>!(!e||"object"!=typeof e)&&("status"in e||"message"in e)&&"number"==typeof e.status)(e)?{type:"api",message:e.message,status:e.status,code:e.code,originalException:e}:e instanceof Error?{type:"runtime",message:e.message,originalException:e}:"err"in e&&e.err?r(e.err):"error"in e&&e.error?r(e.error):{type:"runtime",message:"message"in e?String(e.message):"",originalException:e}:null},ca8s:function(e,t,n){"use strict";n.d(t,"b",(function(){return S})),n.d(t,"a",(function(){return j})),n.d(t,"c",(function(){return T}));var s=n("nsO7"),o=n("9EWH"),r=n("iKGo"),i=n("zGdY"),a=n("M5qL"),c=n("U7Ic"),l=n("4XpK"),d=n("YdFf"),u=n("XBsA"),p=n("wF9z"),b=n("bV+l"),m=n("BWPL");function g(e){return!!e.sort&&0!==e.sort.length}const h=e=>null==e||Array.isArray(e)&&0===e.length;const f=(e,t)=>{const{courseId:n}=t,o=e.views.byCourseId[n];return Object.keys(o).filter((e=>{const n=o[e];if(!(!g(t)&&!g(n.query)||s.isEqual(n.query.sort,t.sort)))return!1;var r,i;return r=n.query,i=t,r.filter?i.filter?Array.from(new Set([...Object.keys(r.filter),...Object.keys(i.filter)])).every((e=>{const t=r.filter[e],n=i.filter[e];return t===n||!!s.isEqual(t,n)||h(t)&&h(n)})):Object.values(r.filter).every(h):!i.filter||Object.values(i.filter).every(h)}))},O=(e,t)=>{if(!t)return{id:null,view:null};const n=e.views.byCourseId[t.courseId]||{},o=Object.keys(n).find((e=>{const o=n[e],r=s.isEqual(o.query.paging,t.paging),i=s.isEqual(o.query.filter,t.filter),a=s.isEqual(o.query.sort,t.sort);return r&&a&&i}));return{id:o,view:o?n[o]:null}},E=e=>["views","byCourseId",e.courseId],y=(e,t)=>{if(!t)return{id:null,view:null};const n=e.views.byUserId[t.userId]||{},s=Object.keys(n).find((e=>n[e].query.userId===t.userId));return{id:s,view:s?n[s]:null}},I=e=>["views","byUserId",e.userId],C=(e,t,n)=>{var s;const o=n.accommodationChanged||n.availabilityChanged||n.roleChanged||n.timeLimitExceptionChanged||n.displayOrderChanged||n.gradesChanged||n.groupsChanged||n.studentPreviewStatusChanged,r=null===(s=e.views.byCourseId)||void 0===s?void 0:s[t];o&&r&&Object.values(r).forEach((e=>{var t,s;if(!e.isValid)return;const o=null===(t=e.query)||void 0===t?void 0:t.filter,r=(null==o?void 0:o.hasDueDateExceptionOnly)&&n.accommodationChanged,a=n.availabilityChanged,c=(null==o?void 0:o.roleBucket)&&n.roleChanged,l=(null==o?void 0:o.hasTimeLimitExceptionOnly)&&n.timeLimitExceptionChanged,d=n.displayOrderChanged,u=n.gradesChanged&&(null===(s=e.query.sort)||void 0===s?void 0:s.some((e=>e.field===i.ib.Grade)));(a||c||r||l||d||u||n.groupsChanged||n.studentPreviewStatusChanged)&&(e.isValid=!1)}))},v=(e,t)=>{t&&(((e,t)=>{if(!t)return;const n=new Set(Object.values(t).map((e=>e.courseId))),s=e=>null==e;n.forEach((n=>{const o=Object.keys(t).reduce(((n,o)=>{var r,i;const a=t[o],c=e.byCourseMembershipId[o];if(!c||!a)return n;const l=!s(a.dueDateExceptionType)&&!s(c.dueDateExceptionType)&&a.dueDateExceptionType!==c.dueDateExceptionType,d=!s(a.isAvailable)&&!s(c.isAvailable)&&a.isAvailable!==c.isAvailable,u=!s(a.role)&&!s(c.role)&&a.role!==c.role||!s(null===(r=a.user)||void 0===r?void 0:r.systemRole)&&!s(null===(i=c.user)||void 0===i?void 0:i.systemRole)&&a.user.systemRole!==c.user.systemRole,p=!s(a.timeLimitExceptionType)&&!s(c.timeLimitExceptionType)&&a.timeLimitExceptionType!==c.timeLimitExceptionType,b=c.displayOrder!==a.displayOrder;return{accommodationChanged:n.accommodationChanged||l,availabilityChanged:n.availabilityChanged||d,roleChanged:n.roleChanged||u,timeLimitExceptionChanged:n.timeLimitExceptionChanged||p,displayOrderChanged:n.displayOrderChanged||b}}),{});C(e,n,o)}))})(e,t),Object.keys(t).forEach((n=>{var s,o;e.byCourseMembershipId[n]={...e.byCourseMembershipId[n],...t[n],displayOrder:t[n].displayOrder,assignedBlogEntries:(null===(s=e.byCourseMembershipId[n])||void 0===s?void 0:s.assignedBlogEntries)||[],ui:{...null===(o=e.byCourseMembershipId[n])||void 0===o?void 0:o.ui}}})))},S=Object(r.g)({byCourseMembershipId:{},permissions:{byCourseId:{}},paging:null,isLoading:!1,views:{byCourseId:{},byUserId:{}}},{[Object(r.j)(a.a.BLOG_ENTRIES_LOAD)]:(e,t)=>Object(o.a)(e,(e=>{e.byCourseMembershipId[t.query.assignedUserId]||(e.byCourseMembershipId[t.query.assignedUserId]={}),e.byCourseMembershipId[t.query.assignedUserId].assignedBlogEntries=Object.keys(t.data.byId)})),[Object(r.j)(a.a.BLOG_ENTRY_ADD)]:(e,t)=>{const{assignedUserId:n}=t,s=e.byCourseMembershipId[n];if(s&&t&&t.byId){const r=[...Object.keys(t.byId),...s.assignedBlogEntries];return Object(o.a)(e,(e=>{e.byCourseMembershipId[n]||(e.byCourseMembershipId[n]={}),e.byCourseMembershipId[n].assignedBlogEntries=r}))}return e},[Object(r.j)(a.a.BLOG_ENTRY_REMOVE)]:(e,t)=>{const n=e.byCourseMembershipId[t.assignedUserId];if(n){const r=s.filter(n.assignedBlogEntries,(e=>e!==t.entryId));return Object(o.a)(e,(e=>{e.byCourseMembershipId[t.assignedUserId]||(e.byCourseMembershipId[t.assignedUserId]={}),e.byCourseMembershipId[t.assignedUserId].assignedBlogEntries=r}))}return e},[Object(r.j)(u.d.CONTENTS_REVIEW_STATES_USERS_GET)]:(e,t)=>Object(o.a)(e,(e=>{void 0===t.query.fields&&t.data.results.forEach((t=>{e.byCourseMembershipId[t.courseMembership.id]=t.courseMembership}))})),[Object(r.j)(l.a.GRADEBOOK_GRADES_LOAD)]:(e,t)=>{const n=new Set(t.grades.map((e=>e.courseId)));return n.size?Object(o.a)(e,(e=>{n.forEach((t=>{C(e,t,{gradesChanged:!0})}))})):e},[Object(r.j)(l.a.GRADEBOOK_GRADES_INVALIDATE)]:(e,t)=>{const n=new Set(t.grades.map((e=>e.courseId)));return n.size?Object(o.a)(e,(e=>{n.forEach((t=>{C(e,t,{gradesChanged:!0})}))})):e},[Object(r.j)(l.a.GRADEBOOK_GRADE_PERSIST_BY_GRADE_ID)]:(e,t)=>{var n;return(null===(n=null==t?void 0:t.grade)||void 0===n?void 0:n.courseId)?Object(o.a)(e,(e=>{C(e,t.grade.courseId,{gradesChanged:!0})})):e},[Object(r.j)(m.a.COURSE_MEMBERSHIP_LOAD)]:(e,t)=>{const{data:n}=t;return Object(o.a)(e,(e=>{v(e,{[n.id]:n})}))},[Object(r.j)(m.a.COURSE_MEMBERSHIP_SET)]:(e,t)=>{const{data:n}=t;return Object(o.a)(e,(e=>{v(e,{[n.id]:n})}))},[m.a.COURSE_MEMBERSHIPS_LOAD]:Object(r.o)(O,E),[Object(r.j)(m.a.COURSE_MEMBERSHIPS_LOAD)]:(e,t)=>{const{data:n}=t;if(!n)return Object(r.p)(e,t);const{membershipIds:s,paging:i,courseId:a,permissions:c}=n;return e=Object(o.a)(e,(e=>{v(e,n.byCourseMembershipId),e.permissions.byCourseId[a]=c})),Object(r.q)(e,t,{viewResolver:O,viewsPathResolver:E,paging:i,values:s})},[Object(r.h)(m.a.COURSE_MEMBERSHIPS_LOAD)]:Object(r.m)(O,E),[m.a.USER_MEMBERSHIPS_LOAD]:Object(r.o)(y,I),[Object(r.j)(m.a.USER_MEMBERSHIPS_LOAD)]:(e,t)=>{const{data:n}=t;if(!n)return Object(r.p)(e,t);const{membershipIds:s,paging:i}=n;return e=Object(o.a)(e,(e=>{v(e,n.byMembershipId)})),Object(r.q)(e,t,{viewResolver:y,viewsPathResolver:I,paging:i,values:s})},[Object(r.h)(m.a.USER_MEMBERSHIPS_LOAD)]:Object(r.m)(y,I),[Object(r.j)(c.a.STUDENT_PREVIEW_EXIT)]:(e,t)=>Object(o.a)(e,(e=>{C(e,t.data.courseId,{studentPreviewStatusChanged:!0})})),[Object(r.j)(d.a.REMOVE_GROUP_MEMBERSHIP)]:(e,t)=>{const{courseId:n}=t;return Object(o.a)(e,(e=>{C(e,n,{groupsChanged:!0})}))},[Object(r.j)(d.a.GROUPS_UPDATE)]:(e,t)=>{const{courseId:n}=t;return Object(o.a)(e,(e=>{C(e,n,{groupsChanged:!0})}))}}),j={loadCourseMembershipsByCourseId:e=>Object(r.b)(m.a.COURSE_MEMBERSHIPS_LOAD,(async(t,n)=>{const{courseId:s,limit:o,offset:r,roleBucket:i}=e,a={courseId:s,paging:{...o?{limit:o}:{},...r?{offset:r}:{}},sort:null,filter:{...i?{roleBucket:[i]}:{}}};return t(j.loadCourseMembershipsByQuery(a))})),loadCourseMembershipsByQuery:e=>Object(r.b)(m.a.COURSE_MEMBERSHIPS_LOAD,(async(t,n)=>{const s=!((e,t)=>{const{view:n}=O(e.courseMembership,t);return!n||!n.isLoading&&!n.isValid})(n(),e);if(!s){t(Object(r.a)(m.a.COURSE_MEMBERSHIPS_LOAD,{query:e}));try{const n=await Object(p.g)(e);t(Object(r.a)(Object(r.j)(m.a.COURSE_MEMBERSHIPS_LOAD),{data:n,query:e}))}catch(n){throw t(Object(r.a)(Object(r.h)(m.a.COURSE_MEMBERSHIPS_LOAD),{query:e})),t(Object(r.a)(Object(r.j)(b.a.APP_ERROR),{error:n})),{err:n}}}})),loadCourseMembershipByMemberId:(e,t,n=!0)=>Object(r.b)(m.a.COURSE_MEMBERSHIP_LOAD,(async(s,o)=>{if(!((e,t,n=!0)=>{const s=e.courseMembership.byCourseMembershipId[t];return n?!(null==s?void 0:s.user):!s})(o(),t,n))return T.getCourseMembershipByMembershipId(o(),t);try{s(Object(r.a)(m.a.COURSE_MEMBERSHIP_LOAD,{courseId:e}));const o=await Object(p.e)(e,t,n);return s(Object(r.a)(Object(r.j)(m.a.COURSE_MEMBERSHIP_LOAD),{data:o,courseId:e})),o}catch(e){throw s(Object(r.a)(Object(r.j)(b.a.APP_ERROR),{error:e})),{err:e}}})),loadCourseMembershipByUserId:(e,t)=>Object(r.b)(m.a.COURSE_MEMBERSHIP_LOAD,(async(n,s)=>{if(!((e,t,n,s=!0)=>{const o=Object.values(e.courseMembership.byCourseMembershipId).find((e=>e.courseId===t&&e.userId===n));return s?!(null==o?void 0:o.user):!o})(s(),e,t,!0))return T.getCourseMembershipByUserId(s(),e,t);try{n(Object(r.a)(m.a.COURSE_MEMBERSHIP_LOAD,{courseId:e}));const s=await Object(p.f)(e,t);return n(Object(r.a)(Object(r.j)(m.a.COURSE_MEMBERSHIP_LOAD),{data:s,courseId:e})),s}catch(e){if(e instanceof i.a&&404===e.body.status)throw{err:e};throw n(Object(r.a)(Object(r.j)(b.a.APP_ERROR),{error:e})),{err:e}}})),setCourseMembershipsInStore:(e,t)=>{const n=Object(p.c)(t,e);return Object(r.a)(Object(r.j)(m.a.COURSE_MEMBERSHIPS_LOAD),{data:n,query:e})},setUserMembershipsInStore:(e,t)=>{const n=Object(p.d)(t,e);return Object(r.a)(Object(r.j)(m.a.USER_MEMBERSHIPS_LOAD),{data:n,query:e})},setMembershipInStore:e=>Object(r.b)(m.a.COURSE_MEMBERSHIP_SET,(async t=>{t(Object(r.a)(Object(r.j)(m.a.COURSE_MEMBERSHIP_SET),{data:e}))}))},T={getCourseMembershipsByQuery:(e,t)=>{const{view:n}=O(e.courseMembership,t);return n?(n.values||[]).map((t=>e.courseMembership.byCourseMembershipId[t])):[]},getCourseMembershipsByCourseId:(e,t,n,s,o)=>{const r={courseId:t,paging:{...s?{limit:s}:{},...o?{offset:o}:{}},sort:null,filter:{...n?{roleBucket:[n]}:{}}};return T.getCourseMembershipsByQuery(e,r)},isLoading:(e,t)=>{const{view:n}=O(e.courseMembership,t);return n?n.isLoading:e.courseMembership.isLoading},getCourseMembershipViewStatusByQuery:(e,t)=>{const{view:n}=O(e.courseMembership,t);return n?{isLoading:n.isLoading,isValid:n.isValid,paging:n.paging}:null},getCourseMembershipByMembershipId:(e,t)=>e.courseMembership.byCourseMembershipId[t],getCourseMembershipsByMembershipIds:(e,t)=>t.map((t=>e.courseMembership.byCourseMembershipId[t])),getUserFromMembershipId:(e,t)=>{const n=e.courseMembership.byCourseMembershipId[t];if(n)return n.user?n.user:n.userId?e.user.byId[n.userId]:void 0},getUsersFromMembershipIds:(e,t)=>t.map((t=>T.getUserFromMembershipId(e,t))),getMembershipPermissions:(e,t)=>e.courseMembership.permissions.byCourseId[t],getCourseMembershipsByUserIds:(e,t,n)=>n.map((n=>s.find(e.courseMembership.byCourseMembershipId,(e=>t===e.courseId&&n===e.userId)))),getCourseMembershipByUserId:(e,t,n)=>Object.values(e.courseMembership.byCourseMembershipId).find((e=>t===e.courseId&&n===e.userId)),getLatestViewWithMembershipId:(e,t,n)=>{const{courseId:s}=n;if(!(t in e.courseMembership.byCourseMembershipId))return null;if(!(s in e.courseMembership.views.byCourseId))return null;const o=f(e.courseMembership,n).map((n=>{var o,r,i;const a=e.courseMembership.views.byCourseId[s][n];if(a.isLoading||!a.isValid)return{viewId:n,indexInView:-1,indexInCollection:-1,lastFetched:-1};const c=null!==(o=a.values.indexOf(t))&&void 0!==o?o:-1,l={viewId:n,indexInView:c,indexInCollection:c,lastFetched:a.lastFetched};return c<0||(l.indexInCollection=(null!==(i=null===(r=a.paging)||void 0===r?void 0:r.offset)&&void 0!==i?i:0)+c),l})).filter((e=>e.indexInView>-1));if(0===o.length)return null;return o.reduce(((e,t)=>e.lastFetched>t.lastFetched?e:t),o[0])}}},caKH:function(e,t,n){"use strict";var s=n("ERkP"),o=n("fN3Q");class r{constructor(){this.modalList=new Set,this.modalDisplayingListeners=new Set,this.modalDisplayingLatch=!1}static getInstance(){return r.INSTANCE||(r.INSTANCE=new r),r.INSTANCE}updateListeners(){const e=this.isModalDisplaying();e!==this.modalDisplayingLatch&&(this.modalDisplayingLatch=e,this.modalDisplayingListeners.forEach((t=>{try{t(e)}catch(e){}})))}addModal(e){this.modalList.add(e),this.updateListeners()}removeModal(e){this.modalList.delete(e),this.updateListeners()}isModalDisplaying(){return this.modalList.size>0}addOnModalDisplayingChanged(e){this.modalDisplayingListeners.add(e)}removeOnModalDisplayingChanged(e){this.modalDisplayingListeners.delete(e)}}var i=n("tN4z");s.forwardRef(((e,t)=>{const{open:n}=e,a=(()=>{const[e]=s.useState((()=>Object(o.v4)()));return e})();return s.useEffect((()=>(null!=n&&n?r.getInstance().addModal(a):r.getInstance().removeModal(a),()=>{r.getInstance().removeModal(a)})),[a,n]),s.createElement(i.AnalyticsModal,{...e,ref:t})})).displayName="BbUiModal";var a=n("GCew");const c=s.forwardRef(((e,t)=>{const{open:n}=e,i=(()=>{const[e]=s.useState((()=>Object(o.v4)()));return e})();return s.useEffect((()=>(null!=n&&n?r.getInstance().addModal(i):r.getInstance().removeModal(i),()=>{r.getInstance().removeModal(i)})),[i,n]),s.createElement(a.a,{...e,ref:t})}));c.displayName="BbUiModalDialog";var l=n("MC1S");const d=e=>{const{isOpen:t,hidden:n}=e,i=(()=>{const[e]=s.useState(o.v4());return e})();return s.useEffect((()=>{let e=!n;return void 0===n&&(e=void 0!==t&&t),e?r.getInstance().addModal(i):r.getInstance().removeModal(i),()=>{r.getInstance().removeModal(i)}}),[i,n,t]),s.createElement(l.Dialog,{...e})};d.displayName="UltraModalDialog",n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return d})),n.d(t,"b",(function(){return r}))},cg8W:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"d",(function(){return o})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a}));const s="new_",o=e=>!!e.id;class r{constructor(e){if(this.previousState=e,null==e)throw Error("Unable to instantiate RestModel with null state object");this.state={...e}}isNew(){return!this.state.id||0===this.state.id.indexOf(s)}}function i(e,t){return t?(t.id&&(e[t.id]=t),e):e}function a(e,t){const n=t||i;return e.reduce(n,{})}},ewIX:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));const s={CREATE_OFFLINE_ATTEMPT:"assessment-create-attempt",GRADE_AND_FEEDBACK:"grade-and-feedback",OFFLINE_GRADE_AND_FEEDBACK:"offline-feedback",GRADEBOOK_ITEM:"gradebook-item",GRADEBOOK_ITEM_ASSESSMENT:"gradebook-item.assessment",GRADE_ITEM_OVERALL_GRADE:"gradebook-item.overall-grade",GRADE_SETTING:"grade-setting",GRADING_SCHEMA:"grading-schema",GROUP_SUBMISSION_GRADING:"group-submission-grading",RECONCILE_GRADE:"reconcile-grade",SUBMISSION_DEEP_LINK:"submission-deep-link",SUBMISSION_DEEP_LINK_FEEDBACK_TAB:"submission-deep-link.assessment-submission-feedback-tab",SUBMISSION_GRADING:"submission-grading",SUBMISSION_GRADING_FEEDBACK_TAB:"submission-grading.assessment-submission-feedback-tab",SUBMISSION_GRADING_RUBRICS_TAB:"submission-grading.inline-rubric",SUBMISSION_GRADING_ORIGINALITY_TAB:"submission-grading.originality-tab",GROUP_SUBMISSION_GRADING_FEEDBACK_TAB:"group-submission-grading.assessment-submission-feedback-tab",GROUP_SUBMISSION_GRADING_RUBRICS_TAB:"group-submission-grading.inline-rubric",GROUP_SUBMISSION_GRADING_ORIGINALITY_TAB:"group-submission-grading.originality-tab",GRADEBOOK_GRID_ADVANCED_FILTERS:"gradebook-grid-advanced-filters",GRADE_DOWNLOAD_SETTINGS:"grade-download-setting",DOWNLOAD_TEST_RESULTS:"download-test-results",ATTEMPT_RECEIPT_SEARCH:"attempt-receipt-search",GRADE_UPLOAD:"grade-upload-setting"}},gB62:function(e,t,n){"use strict";var s=n("yDr9"),o=n("z4GH");n.d(t,"d",(function(){return s.d})),n.d(t,"b",(function(){return s.b})),n.d(t,"c",(function(){return s.c})),n.d(t,"a",(function(){return s.a})),n.d(t,"e",(function(){return s.e})),n.d(t,"h",(function(){return s.h})),n.d(t,"g",(function(){return s.g})),n.d(t,"f",(function(){return s.f})),n.d(t,"i",(function(){return o.a})),n.d(t,"j",(function(){return o.b}))},ggbH:function(e,t,n){"use strict";n.d(t,"b",(function(){return m})),n.d(t,"a",(function(){return g})),n.d(t,"c",(function(){return E}));var s=n("9EWH"),o=n("+l7i"),r=n("iKGo"),i=n("nsO7"),a=n("pQKg"),c=n("zGdY"),l=n("1spm"),d=n("4XpK");function u(e){return e.id?e.id:`${e.userId}${e.columnId}`}function p(e,t,n){b(e,t),e.permissions=n||e.permissions}function b(e,t,n){const s=e.byColumnId;function o(e,t){var s;return!!n&&(!e||((null===(s=null==e?void 0:e.displayGrade)||void 0===s?void 0:s.isOverride)||e.isCalculatedColumnGrade||(null==e?void 0:e.id)===t))}t.forEach((e=>{var t;const n=u(e),r=s[e.columnId]||(s[e.columnId]={byUserId:{},grades:{}});e.userId&&(r.byUserId[e.userId]=n),r.grades[n]={...e,api:{isInvalidated:o(r.grades[n],n),isUpdating:!1,isDeleting:!1},ui:(null===(t=s[e.columnId].grades[n])||void 0===t?void 0:t.ui)||{}}}))}const m=Object(r.g)({byColumnId:{},isLoading:!1,paging:null,permissions:{}},{[d.a.GRADEBOOK_GRADE_LOAD_BY_COLUMN]:r.n,[Object(r.j)(d.a.GRADEBOOK_GRADE_LOAD_BY_COLUMN)]:(e,t)=>{const{grades:n,paging:o,permissions:i}=t;return e=Object(s.a)(e,(e=>{p(e,n,i),o&&(e.paging=o)})),Object(r.p)(e,t)},[Object(r.h)(d.a.GRADEBOOK_GRADE_LOAD_BY_COLUMN)]:r.l,[d.a.GRADEBOOK_BULKVIEW_LOAD]:r.n,[Object(r.j)(d.a.GRADEBOOK_BULKVIEW_LOAD)]:(e,t)=>{const{grades:n,permissions:o}=t;return e=Object(s.a)(e,(e=>{p(e,n,o)})),Object(r.p)(e,t)},[Object(r.h)(d.a.GRADEBOOK_BULKVIEW_LOAD)]:r.l,[Object(r.j)(l.a.GRADEBOOK_COLUMN_DELETE)]:(e,t)=>{var n;return(null===(n=t.gradebookColumn)||void 0===n?void 0:n.id)&&(e=Object(s.a)(e,(e=>{delete e.byColumnId[t.gradebookColumn.id]}))),Object(r.p)(e,t)},[Object(r.j)(d.a.GRADEBOOK_GRADES_LOAD)]:(e,t)=>{const{grades:n}=t;if(!n)return Object(r.p)(e,t);const o=Object(s.a)(e,(e=>{!function(e,t){Object.keys(e.byColumnId).forEach((n=>{t.forEach((t=>{var s,o,r;const i=null===(o=null===(s=e.byColumnId[n])||void 0===s?void 0:s.byUserId)||void 0===o?void 0:o[t];if(!i)return;const a=e.byColumnId[n].grades[i];if(!a.isCalculatedColumnGrade&&!(null===(r=null==a?void 0:a.displayGrade)||void 0===r?void 0:r.isOverride))return;const c=u(a);e.byColumnId[a.columnId].grades[c]&&(e.byColumnId[a.columnId].grades[c].api={...e.byColumnId[a.columnId].grades[c].api,isInvalidated:!0})}))}))}(e,new Set(n.map((e=>e.userId)).filter((e=>!!e)))),p(e,n)}));return Object(r.p)(o,t)},[Object(r.j)(d.a.GRADEBOOK_GRADES_INVALIDATE)]:(e,t)=>{const{grades:n}=t;if(!n)return Object(r.p)(e,t);const o=Object(s.a)(e,(e=>{!function(e,t){b(e,t,!0)}(e,n)}));return Object(r.p)(o,t)},[d.a.GRADEBOOK_GRADE_PERSIST_BY_GRADE_ID]:(e,t)=>{const{columnId:n,id:o}=t;return Object(s.a)(e,(e=>{e.byColumnId[n]||(e.byColumnId[n]={byUserId:{},grades:{}}),e.byColumnId[n].grades[o]={...e.byColumnId[n].grades[o],api:{isUpdating:!0}}}))},[Object(r.j)(d.a.GRADEBOOK_GRADE_PERSIST_BY_GRADE_ID)]:(e,t)=>{const{grade:n}=t;return e=Object(s.a)(e,(e=>{p(e,[n])})),Object(r.p)(e,t)},[Object(r.h)(d.a.GRADEBOOK_GRADE_PERSIST_BY_GRADE_ID)]:(e,t)=>{const{columnId:n,id:o}=t;return Object(s.a)(e,(e=>{e.byColumnId[n]||(e.byColumnId[n]={byUserId:{},grades:{}}),e.byColumnId[n].grades[o]={...e.byColumnId[n].grades[o],api:{isUpdating:!1}}}))},[d.a.GRADEBOOK_GRADE_PERSIST_BY_USER_ID]:(e,t)=>{const{columnId:n,userId:o}=t;return Object(s.a)(e,(e=>{const t=`${o}${n}`;e.byColumnId[n]||(e.byColumnId[n]={byUserId:{},grades:{}}),e.byColumnId[n].grades[t]={...e.byColumnId[n].grades[t],api:{isUpdating:!0}}}))},[Object(r.j)(d.a.GRADEBOOK_GRADE_PERSIST_BY_USER_ID)]:(e,t)=>{const{grade:n}=t;return e=Object(s.a)(e,(e=>{p(e,[n])})),Object(r.p)(e,t)},[Object(r.h)(d.a.GRADEBOOK_GRADE_PERSIST_BY_USER_ID)]:(e,t)=>{const{columnId:n,userId:o}=t;return Object(s.a)(e,(e=>{const t=`${o}${n}`;e.byColumnId[n]||(e.byColumnId[n]={byUserId:{},grades:{}}),e.byColumnId[n].grades[t]={...e.byColumnId[n].grades[t],api:{isUpdating:!1}}}))},[d.a.GRADEBOOK_GRADE_POST_GRADE_BY_GRADE_ID]:(e,t)=>{const{columnId:n,id:o}=t;return Object(s.a)(e,(e=>{e.byColumnId[n]||(e.byColumnId[n]={byUserId:{},grades:{}}),e.byColumnId[n].grades[o]={...e.byColumnId[n].grades[o],api:{isUpdating:!0}}}))},[Object(r.j)(d.a.GRADEBOOK_GRADE_POST_GRADE_BY_GRADE_ID)]:(e,t)=>{const{columnId:n,id:o}=t.grade;return e=Object(s.a)(e,(e=>{e.byColumnId[n]||(e.byColumnId[n]={byUserId:{},grades:{}});p(e,[{...e.byColumnId[n].grades[o],manualStatus:c.Eb.IsPosted,hasGradeBeenPosted:!0}])})),Object(r.p)(e,t)},[Object(r.h)(d.a.GRADEBOOK_GRADE_POST_GRADE_BY_GRADE_ID)]:(e,t)=>{const{columnId:n,id:o}=t;return Object(s.a)(e,(e=>{e.byColumnId[n]||(e.byColumnId[n]={byUserId:{},grades:{}}),e.byColumnId[n].grades[o]={...e.byColumnId[n].grades[o],api:{isUpdating:!1}}}))}}),g={loadGradebookGradesByColumnId:({columnId:e,courseId:t,userId:n})=>Object(r.f)(d.a.GRADEBOOK_GRADE_LOAD_BY_COLUMN,(async()=>{try{return await a.c(t,e,n)}catch(e){throw{err:e}}}),null,[c.S.NotFound]),loadBulkView:(e,t,n,s)=>Object(r.f)(d.a.GRADEBOOK_BULKVIEW_LOAD,(async()=>{try{return await a.b(e,t,n,s)}catch(e){throw{err:e}}})),setGradesInStore:e=>Object(r.a)(Object(r.j)(d.a.GRADEBOOK_GRADES_LOAD),{grades:e}),setInvalidatedGradesInStore:e=>Object(r.a)(Object(r.j)(d.a.GRADEBOOK_GRADES_INVALIDATE),{grades:e}),updateGradeByGradeId:(e,t)=>Object(r.f)(d.a.GRADEBOOK_GRADE_PERSIST_BY_GRADE_ID,(async()=>{try{return await a.e(e,t)}catch(e){throw{err:e,nextGrade:t}}}),t),createGradeByUserId:e=>Object(r.f)(d.a.GRADEBOOK_GRADE_PERSIST_BY_USER_ID,(async()=>{try{return await a.a(e)}catch(t){throw{err:t,grade:e}}}),e),postGradeByGradeId:e=>Object(r.f)(d.a.GRADEBOOK_GRADE_POST_GRADE_BY_GRADE_ID,(async()=>{try{return await a.d(e)}catch(t){throw{err:t,grade:e}}}),e)};function h(e={}){const t=[];return Object.keys(e).forEach((n=>{var s;Object.keys((null===(s=e[n])||void 0===s?void 0:s.grades)||{}).forEach((s=>{t.push(e[n].grades[s])}))})),t}function f(e,t){return h(e).filter((e=>(null==e?void 0:e.columnId)===t))}const O=e=>e.gradebookGrade.byColumnId,E={getGradebookGradeById:(e,t)=>Object(i.filter)(h(e.gradebookGrade.byColumnId),{id:t}),getGradebookGradesByColumnId:Object(o.a)([O,(e,t)=>t],f),getGradebookGradesByCourseId:Object(o.a)([O,(e,t)=>t],(function(e,t){return h(e).filter((e=>e.courseId===t))})),getGradebookGradesByUserId:(e,t)=>Object(i.filter)(h(e.gradebookGrade.byColumnId),{userId:t}),getGradebookGradesByColumnIdAndUserId:(e,t,n)=>Object(i.filter)(f(O(e),t),{userId:n}),areGradebookGradesLoading:e=>e.gradebookGrade.isLoading}},iFXv:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return d}));var s=n("9EWH"),o=n("nsO7"),r=n("bfdd"),i=n("iKGo"),a=n("bV+l");const c=Object(i.g)({location:{},route:{},error:null},{[Object(i.j)(a.a.ROUTER_STATE_CHANGE_SUCCESS)]:(e,t)=>Object(s.a)(e,(e=>{e.route=t.route})),[Object(i.j)(a.a.ROUTER_LOCATION_CHANGE_SUCCESS)]:(e,t)=>{const{queryParams:n}=t;return Object(s.a)(e,(e=>{e.location.queryParams=n}))},[Object(i.j)(a.a.APP_ERROR)]:(e,t)=>{const{error:n}=t,o=Object(r.a)(n);return console.error("Encountered application error",JSON.stringify(o)),Object(s.a)(e,(e=>{e.error=o}))},[Object(i.j)(a.a.APP_ERROR_CLEAR)]:e=>Object(s.a)(e,(e=>{e.error=null}))}),l={handleStateChangeSuccess:e=>Object(i.f)(a.a.ROUTER_STATE_CHANGE_SUCCESS,(()=>{var t;const n=e||{},s=o.pick(n.toState,"name","panelClass","pageTitle"),r=Object.keys(null!==(t=n.toParams)&&void 0!==t?t:{}).filter((e=>"object"!=typeof n.toParams[e]&&"function"!=typeof n.toParams[e])).reduce(((e,t)=>({...e,[t]:n.toParams[t]})),{});return Promise.resolve({route:{...s,params:r}})})),handleLocationChangeSuccess:e=>Object(i.f)(a.a.ROUTER_LOCATION_CHANGE_SUCCESS,(()=>{const t=e.queryParams||{};return Promise.resolve({queryParams:t})})),setError:e=>Object(i.b)(a.a.APP_ERROR,(t=>{t(Object(i.a)(Object(i.j)(a.a.APP_ERROR),{error:e}))})),clearError:()=>Object(i.b)(a.a.APP_ERROR_CLEAR,(e=>{e(Object(i.a)(Object(i.j)(a.a.APP_ERROR_CLEAR)))}))},d={getRoute:e=>e.app.route,getLocation:e=>e.app.location,getQueryParams:e=>e.app.location.queryParams,getAppError:e=>e.app.error}},iKGo:function(e,t,n){"use strict";n.d(t,"c",(function(){return l})),n.d(t,"j",(function(){return d})),n.d(t,"h",(function(){return u})),n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return b})),n.d(t,"g",(function(){return m})),n.d(t,"d",(function(){return g})),n.d(t,"k",(function(){return h})),n.d(t,"f",(function(){return f})),n.d(t,"e",(function(){return O})),n.d(t,"l",(function(){return E})),n.d(t,"p",(function(){return y})),n.d(t,"n",(function(){return I})),n.d(t,"o",(function(){return C})),n.d(t,"m",(function(){return v})),n.d(t,"q",(function(){return S})),n.d(t,"i",(function(){return j}));var s=n("nsO7"),o=n("fN3Q"),r=n("bV+l"),i=n("9EWH"),a=n("bfdd"),c=n("bLWl");const l=e=>`${e}.allow`,d=e=>`${e}.ok`,u=e=>`${e}.fail`;function p(e,t){return{type:e,...t}}function b(e,t){const n=t;return n.type=function(e){return`thunk[${e}]`}(e),n}function m(e,...t){return(n=e,s)=>{const o=s&&s.type;if(!o)return n;const r=t.map((e=>e[o])).filter((e=>!!e));return r.length>0&&r.forEach((e=>{n=e(n,s)})),n}}function g(e){const t=Object.keys(e);return function(n,s){const o=arguments.length<=0||void 0===n?{}:n;return Object(i.a)(o,(n=>{t.forEach((t=>{const r=e[t],i=o[t];n[t]=r(i,s)}))}))}}function h(...e){const t="function"!=typeof e[e.length-1]&&e.pop(),n=e;return function(e,s){const o=arguments.length<=0||void 0===e?t||{}:e;return n.reduce(((e,t)=>t(e,s)),o)}}function f(e,t,n,s){return b(e,((o,i)=>(o(p(e,n)),t(i,o).then((t=>o(p(d(e),t)))).catch((t=>{const i=Object(a.a)(t);if(Object(c.a)(i,null!=s?s:[]))return o(p(l(e),n)),null;if(o(p(u(e),t)),o(p(d(r.a.APP_ERROR),{error:i})),Object(c.b)(i))return null;throw t&&"object"==typeof t&&"err"in t?t.err:t})))))}function O(e,t){Object.keys(t).forEach((n=>{e[n]=t[n]}))}function E(e,t,n={}){return Object(i.a)(e,(e=>{e.isLoading=!1,O(e,n)}))}function y(e,t,n={}){return Object(i.a)(e,(e=>{e.isLoading=!1,O(e,n)}))}function I(e,t,n={}){return Object(i.a)(e,(e=>{e.isLoading=!0,O(e,n)}))}function C(e,t){return(n,r)=>{var a;const{query:c}=r,l=null!==(a=e(n,c).id)&&void 0!==a?a:Object(o.v4)(),d=t(c);return I(n=Object(i.a)(n,(e=>{Object(s.set)(e,[...d,l,"isLoading"],!0),Object(s.set)(e,[...d,l,"isValid"],!0),Object(s.set)(e,[...d,l,"query"],c)})))}}function v(e,t){return(n,r)=>{var a;const{query:c}=r,l=null!==(a=e(n,c).id)&&void 0!==a?a:Object(o.v4)();return E(n=Object(i.a)(n,(e=>{Object(s.set)(e,[...t(c),l,"isLoading"],!1)})))}}function S(e,t,n){var r;const{viewResolver:a,viewsPathResolver:c,values:l,paging:d,permissions:u}=n,{query:p}=t,b=null!==(r=a(e,p).id)&&void 0!==r?r:Object(o.v4)(),m=c(p);return y(e=Object(i.a)(e,(e=>{Object(s.set)(e,[...m,b,"isLoading"],!1),Object(s.set)(e,[...m,b,"isValid"],!0),Object(s.set)(e,[...m,b,"query"],p),l&&(Object(s.set)(e,[...m,b,"values"],l),Object(s.set)(e,[...m,b,"lastFetched"],Date.now())),d&&Object(s.set)(e,[...m,b,"paging"],d),u&&Object(s.set)(e,[...m,b,"permissions"],u)})))}function j(e,t){return{...e,...t}}},kNOQ:function(e,t,n){"use strict";var s=n("EvRQ");n.d(t,"a",(function(){return s.a})),n.d(t,"b",(function(){return s.b}))},lAEu:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var s=n("D57K"),o=n("n7/H"),r=n.n(o),i=n("DN+C"),a=n("tfZW");class c extends r.a{constructor(e,t={defaultLocale:"en",production:!1,urlRoot:""}){super(e,t),this.babelfishInstance=e,this.options=t,this.overrideLoader=a.a.getInstance()}setUltraLocaleData(e){this.options.localeData=e}_load(e){return c._loadPromises[e]||(c._loadPromises[e]=new o.InstantPromise((t=>{n("RRs6")("./"+e+"/_combined.json").then((e=>t(e.default?e.default:e))).catch((()=>t(null)))}))),c._loadPromises[e]}getPreferredLocales(e){return[e].concat(super.getPreferredLocales(this.overrideLoader.getBaseLocale(e)||e))}}c._loadPromises={},Object(s.a)([Object(i.LRUMemoize)(2)],c.prototype,"getPreferredLocales",null)},mRWl:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return a})),n.d(t,"g",(function(){return c})),n.d(t,"f",(function(){return l})),n.d(t,"d",(function(){return d})),n.d(t,"e",(function(){return u})),n.d(t,"c",(function(){return p}));var s=n("W2ME"),o=n("zGdY"),r=n("PPJ4");const i="me";var a;async function c(e){const t={courseId:e.courseId,contentId:e.contentId,userId:e.userId};return{contentStates:await Object(s.o)(Object(s.f)("/v1/courses/%courseId%/contents/%contentId%/states/%userId%",t),{state:e.state})}}async function l(e){const t={...e,userId:i},{results:n}=await Object(s.j)(Object(s.f)("/v1/courses/%courseId%/contents/%contentId%/states/%userId%?includeRelated=%includeRelated%",t));return{contentStates:n}}async function d(e){const{paging:t,sort:n}=e;let s;void 0!==e.fields&&e.fields.length>0&&(s=e.fields);const i={includeCount:!0,fields:s};e.filter&&(i.q=e.filter.searchString,i.state=e.filter.state);const a=new o.fb({courseId:e.courseId,contentId:e.contentId}).withExpand("courseMembership.user","status").withSession(r.d).withQueryParams(i);t&&a.withPaging(t),n&&a.withSort(...n);return await Object(o.Wc)(a)}async function u(e){const t=new o.eb({courseId:e.courseId,contentId:e.contentId}).withSession(r.d);return await Object(o.Wc)(t)}async function p(e){var t;const{paging:n}=e,s={includeCount:!0};(null===(t=e.filter)||void 0===t?void 0:t.searchString)&&(s.q=e.filter.searchString);const i=new o.mb({courseId:e.courseId,contentId:e.contentId,userId:e.userId}).withExpand("content","status").withSession(r.d).withQueryParams(s);n&&i.withPaging(n);return await Object(o.Wc)(i)}!function(e){e.FamilyName="courseMembership.user.familyName",e.LastStateChange="contentStatusLastStateChange"}(a||(a={}))},mnLz:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));class s extends Error{}},nmzr:function(e,t,n){"use strict";var s=n("ERkP"),o=n.n(s);class r{async goToRoute(){throw new Error("routeHandler.goToRoute called before setting routeHandler")}async goPeekState(){throw new Error("routeHandler.goPeekState called before setting routeHandler")}async getPeekHref(){throw new Error("routeHandler.getPeekHref called before setting routeHandler")}async leavePeekState(){throw new Error("routeHandler.leavePeekState called before setting routeHandler")}async search(){throw new Error("routeHandler.search called before setting routeHandler")}getHref(){throw new Error("routeHandler.getHref called before setting routeHandler")}onRouteChanging(){throw new Error("routeHandler.onRouteChanging called before setting routeHandler")}}const i=new class{constructor(){this.routeHandler=new r}setRouteHandler(e){this.routeHandler=e}goRoute(e,t){return this.routeHandler.goToRoute(e,t)}goPeekState(e){return this.routeHandler.goPeekState(e.routeName,e.getArgs())}getPeekHref(e,t){return this.routeHandler.getPeekHref(e.routeName,e.getArgs(),t)}getHref(e,t,n){return this.routeHandler.getHref(e,t,n)}leavePeekState(e){return this.routeHandler.leavePeekState(e)}search(e,t){return this.routeHandler.search(e,t)}onRouteChanging(e){return this.routeHandler.onRouteChanging(e)}},a=(e,t)=>{(e=>{const t=Object(s.useRef)();t.current=e,Object(s.useEffect)((()=>i.onRouteChanging((e=>{var n;return null===(n=t.current)||void 0===n?void 0:n.call(t,e)}))),[])})(Object(s.useCallback)((n=>{e&&(n.preventRouteChange(),t())}),[e,t]))},c=Object(s.createContext)(void 0),l=({children:e})=>{const t=Object(s.useRef)(null),[n,r]=Object(s.useState)();return Object(s.useEffect)((()=>{var e,n,s;const o=null===(s=null===(n=null===(e=t.current)||void 0===e?void 0:e.closest("[data-base-state-name]"))||void 0===n?void 0:n.dataset)||void 0===s?void 0:s.baseStateName;r(o)}),[]),o.a.createElement(c.Provider,{value:n},o.a.createElement("div",{ref:t},e))},d=e=>{const t=Object(s.useContext)(c),[n,o]=Object(s.useState)(),r=Object(s.useRef)(!0);return Object(s.useEffect)((()=>()=>{r.current=!1}),[]),Object(s.useEffect)((()=>{e?i.getPeekHref(e,t).then((e=>{r.current&&o(e)})).catch((()=>{r.current&&o(void 0)})):o(void 0)}),[t,e]),n},u={ANNOUNCEMENT_DETAIL:"announcement-detail",ANNOUNCEMENTS_LIST:"announcement-list"},p={ASSESSMENT:"assessment",ASSESSMENT_OVERVIEW:"assessment.overview",ASSESSMENT_DETAILS:"assessment-details",ASSESSMENT_EXTERNAL_OVERVIEW:"assessment.external-overview",ASSESSMENT_PEER_GRADING:"peer-grading",ASSESSMENT_PEER_GRADING_SUBMISSION_FEEDBACK_TAB:"peer-grading.assessment-submission-feedback-tab",ASSESSMENT_SETTINGS:"assessment-settings",ASSESSMENT_SETTINGS_RUBRIC_SETTINGS:"assessment-settings.peek.rubric.mode",ASSESSMENT_ATTEMPT:"assessment.overview.attempt",ASSESSMENT_ATTEMPT_REVIEW:"assessment.overview.attempt.review",ASSESSMENT_ATTEMPT_REVIEW_FEEDBACK_TAB:"assessment.overview.attempt.review.assessment-submission-feedback-tab",ASSESSMENT_ATTEMPT_REVIEW_RUBRICS_TAB:"assessment.overview.attempt.review.inline-rubric",ASSESSMENT_ATTEMPT_REVIEW_ORIGINALITY_TAB:"assessment.overview.attempt.review.originality-tab",ASSESSMENT_ATTEMPT_IMS_PROCTORING:"assessment.ims-proctoring",ASSESSMENT_ATTEMPT_RESPONDUS_REQUIREMENT:"assessment.respondus-requirement",ASSESSMENT_MULTIPLE_ATTEMPTS_TAB:"assessment.overview.multiple-attempt"},b={BASE_MESSAGES:"base.messages",BASE_PROCTORING_ATTEMPT:"base.proctoring-attempt"},m={CONTENT_MARKET:"content-market"},g={ACCOMMODATION:"accommodation",COURSE:"course",COURSE_ANALYTICS:"course.analytics",COURSE_ANALYTICS_PREDICT_INSTRUCTOR:"course.analytics.predict-instructor",COURSE_ANALYTICS_PREDICT_STUDENT:"course.analytics.predict-student",COURSE_ANALYTICS_QUESTION_ANALYSIS:"course.analytics.question-analysis",COURSE_ANALYTICS_ACTIVITY:"course.analytics.course-activity",COURSE_ANALYTICS_REPORTS:"course.analytics.reports",COURSE_ANALYTICS_SCORM_REPORTS:"course.analytics.scorm-reports",COURSE_CALENDAR:"course.calendar",COURSE_CLASSIC:"course.classic",COURSE_CONTENT_MARKET:"content-market",COURSE_DISCUSSION_PARTICIPANTS:"discussion-participants",COURSE_ENGAGEMENT:"course.engagement",COURSE_GRADES:"course.grades",COURSE_GRADES_MULTIPLE_ATTEMPT:"multiple-attempt-grading",COURSE_GRADES_VIEW_INDIVIDUAL_GRADES:"view-individual-grades",COURSE_MESSAGE:"message",COURSE_MESSAGES:"course.messages",COURSE_OUTLINE:"course.outline",COURSE_LTI:"lti",EDIT_BANNER:"course-edit-banner",EDIT_ENROLLMENT:"edit-enrollment",SETTINGS:"course-settings"},h={CONVERSATION:"conversations",DISCUSSION:"discussion",DISCUSSION_DETAILS:"discussion-details",DISCUSSION_PARTICIPANTS:"discussion-participants",DISCUSSION_SETTINGS:"discussion-settings",DISCUSSIONS_SETTINGS:"discussions-settings",DISCUSSION_VIEW:"discussion.view",DISCUSSION_VIEW_WITH_GRADING:"discussion.view.with-grading",SUBMISSION_LIST:"submission-list"};var f=n("ewIX");const O={VIEW:"course-group",VIEW_GROUP_ENROLL:"content-group-enroll",IMPORT_GROUP_SET:"import-group-set",EXPORT_GROUP_SET:"export-group-set",IMPORT_GROUP_MEMBERS:"import-groups-members",GROUP_MEMBERS_LIST:"group-members-list"},E={INTEGRATION_BASE:"base.integration"},y={JOURNAL:"journal",JOURNAL_VIEW:"journal.view",JOURNAL_DETAILS:"journal-details",JOURNAL_SETTINGS:"journal-settings",JOURNAL_VIEW_WITH_PARTICIPATION:"journal.view.with-participation",JOURNAL_PARTICIPATION_DETAIL:"journal-participation-detail",JOURNAL_SUBMISSION_FEEDBACK:"journal-submission-feedback",JOURNAL_VIEW_WITH_PARTICIPATION_AND_RUBRIC_EVALUATION:"journal.view.with-participation.peek.rubric-evaluation",JOURNAL_VIEW_WITH_PARTICIPATION_AND_RUBRIC_VIEW:"journal.view.with-participation.peek.rubric-view"},I={PROFILE_BASE:"base.profile",UPDATE_AVATAR_PEEK:"update-avatar",UPDATE_LANGUAGE_PEEK:"update-language",UPDATE_PASSWORD_PEEK:"update-password",UPDATE_PROFILE_PEEK:"update-profile"},C={RUBRIC:"rubric",RUBRIC_MODE:"rubric.mode",RUBRIC_EVALUATION:"rubric-evaluation",RUBRIC_VIEW:"rubric-view"};var v;!function(e){e.CONTENT_ACTIVITY_IN_DETAIL="telemetryContentActivityInDetail",e.DIRECT_TO_COURSE="directToCourse",e.DISCUSSION_FORUM_INSIGHTS="telemetryDiscussionForumInsights",e.INSTRUCTOR_CLASS="telemetryInstructorClass",e.INSTRUCTOR_DETAILS="telemetryInstructorDetails",e.INSTRUCTOR_DYNAMIC="instructorDynamic",e.STUDENT_FIND_A_STUDY_PARTNER="telemetryStudentFindAStudyPartner",e.STUDENT_HIGH_PERFORMANCE="telemetryStudentHighPerformance",e.STUDENT_LOW_ACTIVITY="telemetryStudentLowActivity",e.STUDENT_LOW_GRADES="telemetryStudentLowGrades",e.STUDENT_PROGRESS="telemetryStudentProgress"}(v||(v={}));const S={INSTRUCTOR_DYNAMIC:v.INSTRUCTOR_DYNAMIC.toString(),DIRECT_TO_COURSE:v.DIRECT_TO_COURSE.toString(),CONTENT_ACTIVITY_IN_DETAIL:v.CONTENT_ACTIVITY_IN_DETAIL.toString(),DISCUSSION_FORUM_INSIGHTS:v.DISCUSSION_FORUM_INSIGHTS.toString(),INSTRUCTOR_DETAILS:v.INSTRUCTOR_DETAILS.toString(),INSTRUCTOR_CLASS:v.INSTRUCTOR_CLASS.toString(),STUDENT_HIGH_PERFORMANCE:v.STUDENT_HIGH_PERFORMANCE.toString(),STUDENT_LOW_ACTIVITY:v.STUDENT_LOW_ACTIVITY.toString(),STUDENT_LOW_GRADES:v.STUDENT_LOW_GRADES.toString(),STUDENT_FIND_A_STUDY_PARTNER:v.STUDENT_FIND_A_STUDY_PARTNER.toString(),STUDENT_PROGRESS:v.STUDENT_PROGRESS.toString(),TELEMETRY_SETTINGS:"telemetry-settings"},j={CONDITIONAL_RELEASE_PEEK_PANEL:"conditional-release",BULK_EDIT_CONTENT_PEEK_PANEL:"bulk-edit-content",CREATE_CONTENT_PEEK_PANEL:"content-manage.create",CREATE_LEARNING_MODULE_PEEK_PANEL:"content-manage.create.learningModule",COPY_CONTENT_PEEK_PANEL:"content-manage.copy",EDIT_LEARNING_MODULE_PEEK_PANEL:"content-manage.edit.learningModule",DOCUMENT:"content-manage.edit.document",CREATE_CLOUD_DOCUMENT_MODULE_PEEK_PANEL:"content-manage.create.cloud-document",CREATE_FOLDER:"content-manage.create.folder",EDIT_FOLDER:"content-manage.edit.folder",COPY_REPORT_PEEK_PANEL:"content-manage.copy-report",IMPORT_CONTENT_PEEK_PANEL:"content-manage.import",IMPORT_REPORT_PEEK_PANEL:"content-manage.import-report",COPY_DETAILS_PEEK_PANEL:"content-manage.copy-details",GENERIC_STUDENT_PROGRES_PEEK_PANEL:"content-manage.progress",CONTENT_SEARCH:"content-search"},T={CALENDAR_SETTINGS:"calendar-settings",CREATE_EVENT:"event-create",COURSE_SCHEDULE:"class-schedule",EDIT_EVENT:"event-edit",OFFICE_HOURS:"office-hours",VIEW_EVENT:"event-view"},A={QUESTION_BANKS:"question-banks",IMPORT_DETAILS:"import-details",EDIT_QUESTION_BANK:"question-bank-edit",CREATE_QUESTION_BANK:"question-bank-create"},_={LTI:"lti",LTI_LAUNCH:"lti.launch",LTI_LAUNCH_CLOUD_CREATE:"lti.launch-cloud-create",LTI_LAUNCH_FRAME:"lti.launch-frame",LTI_LAUNCH_PEEK:"lti.launch-peek",LTI_EDIT:"content-manage.edit.lti",LTI_EDIT_PLACEMENT:"content-manage.edit.placement",LTI_EDIT_CLOUD_DOCUMENT:"cloud-document-edit"},R={CONTENT_COLLECTION:"content-collection",CONTENT_COLLECTION_SETTINGS:"content-collection-settings",CONTENT_COLLECTION_PICKER:"content-collection-picker"},N={EDIT_EXTERNAL_LINK:"content-manage.edit.link"},w={GRADEBOOK_ITEM_SCORM_SUBMISSIONS:"gradebook-item.scorm-submissions",SCORM_EDIT:"scorm-settings",SCORM_ANALYTICS_REPORT:"scorm-analytics-report",SCORM_LAUNCH_FRAME:"scorm-launch-frame",SCORM_OVERVIEW_STUDENT:"scorm-overview.student"},D={QUESTION_ANALYSIS_REPORT:"question-analysis.report"},L={PREVIEW_FILE:"preview-file",PREVIEW_FILE_EDIT:"preview-file-edit",EDIT_FILE:"content-manage.edit.file"},P={ADD_GOALS:"goal-picker-legacy"},k={COURSE_TASKS_LOGS:"course-tasks",COURSE_TASKS_PANEL:"course-tasks.tasks",COURSE_LOGS_PANEL:"course-tasks.logs"},x={Admin:{ULTRA_SETTINGS_PEEK:"ultra-settings-admin",ULTRA_EDIT_APPROVED_PRONOUNS_PEEK:"ultra-edit-approved-pronouns-admin"},Announcement:u,Assessment:p,Base:b,Calendar:T,ContentCollection:R,ContentMarket:m,Course:g,CourseTasks:k,Content:j,Engagement:h,ExternalLink:N,File:L,Goals:P,Grade:f.a,Group:O,Integration:E,Journal:y,Lti:_,Profile:I,QuestionAnalysis:D,QuestionBanks:A,Rubric:C,Scorm:w,Telemetry:S};class B{constructor(e){this.args=e}getArgs(){return this.args}get routeName(){return p.ASSESSMENT_OVERVIEW}}const M=e=>new B(e);class U{constructor(e){this.args=e}getArgs(){return this.args}get routeName(){return p.ASSESSMENT_EXTERNAL_OVERVIEW}}const G=e=>new U(e);class F{constructor(e){this.args=e}getArgs(){return this.args}get routeName(){return p.ASSESSMENT_SETTINGS}}const q=e=>new F(e);class H{constructor(e){this.args=e}getArgs(){return this.args}get routeName(){return g.EDIT_ENROLLMENT}}class V{constructor(e){this.args=e}getArgs(){return this.args}get routeName(){return A.EDIT_QUESTION_BANK}}const K=e=>new V(e);class ${constructor(e){this.args=e}get routeName(){return O.EXPORT_GROUP_SET}getArgs(){return this.args}}const W=e=>new $(e);class z{constructor(e){this.args=e}getArgs(){return this.args}get routeName(){return f.a.GRADEBOOK_ITEM_ASSESSMENT}}const Q=e=>new z(e);class Y{constructor(e){this.args=e}get routeName(){return O.GROUP_MEMBERS_LIST}getArgs(){return this.args}}const J=e=>new Y(e);class X{get routeName(){return O.IMPORT_GROUP_SET}getArgs(){}}const Z=()=>new X;class ee{constructor(e){this.args=e}getArgs(){return this.args}get routeName(){return f.a.OFFLINE_GRADE_AND_FEEDBACK}}const te=e=>new ee(e);class ne{get routeName(){return f.a.GRADE_ITEM_OVERALL_GRADE}getArgs(){}}const se=()=>new ne;class oe{constructor(e){this.args=e}getArgs(){return this.args}get routeName(){return A.IMPORT_DETAILS}}const re=e=>new oe(e);class ie{constructor(e){this.args=e}getArgs(){return this.args}get routeName(){return g.COURSE_MESSAGE}}const ae=e=>new ie(e);class ce{constructor(e){this.args=e}getArgs(){return this.args}get routeName(){return g.ACCOMMODATION}}const le=e=>new ce(e);class de{constructor(e){this.args=e}getArgs(){return this.args}get routeName(){return g.COURSE_GRADES_VIEW_INDIVIDUAL_GRADES}}const ue=e=>new de(e);class pe{constructor(e){this.args=e}getArgs(){return this.args}get routeName(){return O.VIEW_GROUP_ENROLL}}const be=e=>new pe(e);class me{constructor(e){this.args=e}getArgs(){return this.args}get routeName(){return f.a.SUBMISSION_DEEP_LINK}}const ge=e=>new me(e);class he{constructor(e){this.args=e}getArgs(){return this.args}get routeName(){return S.INSTRUCTOR_DETAILS}}const fe=e=>new he(e);class Oe{constructor(e){this.args=e}getArgs(){return this.args}get routeName(){return g.COURSE_GRADES_VIEW_INDIVIDUAL_GRADES}}const Ee=e=>new Oe(e),ye={AssessmentSettings:e=>({routeName:p.ASSESSMENT_SETTINGS,getArgs:()=>e}),RubricSettings:e=>({routeName:p.ASSESSMENT_SETTINGS_RUBRIC_SETTINGS,getArgs:()=>e})},Ie={JournalWithParticipation:e=>({routeName:y.JOURNAL_VIEW_WITH_PARTICIPATION,getArgs:()=>e}),JournalSubmission:e=>({routeName:y.JOURNAL_PARTICIPATION_DETAIL,getArgs:()=>e}),JournalSubmissionFeedback:e=>({routeName:y.JOURNAL_SUBMISSION_FEEDBACK,getArgs:()=>e})},Ce={RubricEvaluation:e=>({routeName:C.RUBRIC_EVALUATION,getArgs:()=>e}),RubricView:e=>({routeName:C.RUBRIC_VIEW,getArgs:()=>e})},ve={ContentCollection:e=>({routeName:R.CONTENT_COLLECTION,getArgs:()=>e})},Se={CopyReport:e=>({routeName:j.COPY_REPORT_PEEK_PANEL,getArgs:()=>e}),ImportReport:e=>({routeName:j.IMPORT_REPORT_PEEK_PANEL,getArgs:()=>e}),ImportContent:e=>({routeName:j.IMPORT_CONTENT_PEEK_PANEL,getArgs:()=>e}),CreateContent:e=>({routeName:j.CREATE_CONTENT_PEEK_PANEL,getArgs:()=>e}),CopyContent:e=>({routeName:j.COPY_CONTENT_PEEK_PANEL,getArgs:()=>e}),Document:e=>({routeName:j.DOCUMENT,getArgs:()=>e}),CreateFolder:e=>({routeName:j.CREATE_FOLDER,getArgs:()=>e}),EditFolder:e=>({routeName:j.EDIT_FOLDER,getArgs:()=>e}),EditConditionalRelease:e=>({routeName:j.CONDITIONAL_RELEASE_PEEK_PANEL,getArgs:()=>e}),EditLearningModule:e=>({routeName:j.EDIT_LEARNING_MODULE_PEEK_PANEL,getArgs:()=>e}),BulkEditContent:()=>({routeName:j.BULK_EDIT_CONTENT_PEEK_PANEL,getArgs:()=>{}}),ContentMarket:e=>({routeName:m.CONTENT_MARKET,getArgs:()=>e}),GenericStudentProgress:e=>({routeName:j.GENERIC_STUDENT_PROGRES_PEEK_PANEL,getArgs:()=>e}),ContentSearch:()=>({routeName:j.CONTENT_SEARCH,getArgs:()=>{}})},je={CourseSchedule:e=>({routeName:T.COURSE_SCHEDULE,getArgs:()=>e}),CourseGroup:e=>({routeName:O.VIEW,getArgs:()=>e})};function Te(e){return!!e.memberId||!!e.courseGroupId||!!e.childCourseId}const Ae=["gradebookView","listViewType","memberId","courseGroupId","gradebookCategoryId","gradebookColumnId","childCourseId"],_e={GradeDownload:()=>({routeName:f.a.GRADE_DOWNLOAD_SETTINGS,getArgs:()=>{}}),GradeUpload:()=>({routeName:f.a.GRADE_UPLOAD,getArgs:()=>{}}),GradeSettings:()=>({routeName:f.a.GRADE_SETTING,getArgs:()=>{}}),AttemptReceiptSearch:()=>({routeName:f.a.ATTEMPT_RECEIPT_SEARCH,getArgs:()=>{}})},Re={DiscussionWithGrading:e=>({routeName:h.DISCUSSION_VIEW_WITH_GRADING,getArgs:()=>e}),Conversation:e=>({routeName:h.CONVERSATION,getArgs:()=>e}),DiscussionsSettings:()=>({routeName:h.DISCUSSIONS_SETTINGS,getArgs:()=>null})},Ne={EditExternalLink:e=>({routeName:N.EDIT_EXTERNAL_LINK,getArgs:()=>e})},we={EditFile:e=>({routeName:L.EDIT_FILE,getArgs:()=>e}),PreviewFile:e=>({routeName:L.PREVIEW_FILE,getArgs:()=>e})},De={EditLti:e=>({routeName:_.LTI_EDIT,getArgs:()=>e}),EditLtiPlacement:e=>({routeName:_.LTI_EDIT_PLACEMENT,getArgs:()=>e}),EditLtiCloudDocument:e=>({routeName:_.LTI_LAUNCH_PEEK,getArgs:()=>e}),LaunchLti:e=>({routeName:_.LTI_LAUNCH,getArgs:()=>e}),LaunchLtiPeek:e=>({routeName:_.LTI_LAUNCH_PEEK,getArgs:()=>e}),LaunchLtiFrame:e=>({routeName:_.LTI_LAUNCH_FRAME,getArgs:()=>e})},Le={QuestionAnalysis:e=>({routeName:D.QUESTION_ANALYSIS_REPORT,getArgs:()=>e})},Pe={EditScorm:e=>({routeName:w.SCORM_EDIT,getArgs:()=>e}),ScormAnalyticsReport:e=>({routeName:w.SCORM_ANALYTICS_REPORT,getArgs:()=>e}),ScormOverviewStudent:e=>({routeName:w.SCORM_OVERVIEW_STUDENT,getArgs:()=>e}),ScormLaunchFrame:e=>({routeName:w.SCORM_LAUNCH_FRAME,getArgs:()=>e}),GradebookItemScormSubmissions:e=>({routeName:w.GRADEBOOK_ITEM_SCORM_SUBMISSIONS,getArgs:()=>e})},ke={ContentActivityInDetail:e=>({routeName:S.CONTENT_ACTIVITY_IN_DETAIL,getArgs:()=>e}),DiscussionForumInsights:e=>({routeName:S.DISCUSSION_FORUM_INSIGHTS,getArgs:()=>e}),CourseAlerts:(e={})=>({routeName:S.TELEMETRY_SETTINGS,getArgs:()=>e})},xe={Tasks:(e={})=>({routeName:k.COURSE_TASKS_PANEL,getArgs:()=>e}),Logs:(e={})=>({routeName:k.COURSE_LOGS_PANEL,getArgs:()=>e})};var Be=n("zGdY");function Me(e,t,n){var s;const o=n.id;return(null===(s=n.courseRole)||void 0===s?void 0:s.roleBucket)===Be.y.Taking?ue({courseId:e,membershipId:o,userId:t}):new H({membershipId:o})}function Ue(e){return{calendarId:e.calendarId,itemSourceType:e.itemSourceType,itemSourceId:e.itemSourceId,recurRules:{repeatRuleType:e.repeatRuleType,repeatRuleCourseId:e.repeatRuleCourseId,repeatRuleUserId:e.repeatRuleUserId}}}n.d(t,"bb",(function(){return i})),n.d(t,"e",(function(){return l})),n.d(t,"eb",(function(){return d})),n.d(t,"a",(function(){return u})),n.d(t,"c",(function(){return p})),n.d(t,"d",(function(){return b})),n.d(t,"f",(function(){return T})),n.d(t,"h",(function(){return R})),n.d(t,"i",(function(){return m})),n.d(t,"k",(function(){return j})),n.d(t,"o",(function(){return g})),n.d(t,"q",(function(){return k})),n.d(t,"s",(function(){return h})),n.d(t,"v",(function(){return L})),n.d(t,"x",(function(){return f.a})),n.d(t,"y",(function(){return O})),n.d(t,"z",(function(){return E})),n.d(t,"B",(function(){return y})),n.d(t,"D",(function(){return _})),n.d(t,"E",(function(){return I})),n.d(t,"G",(function(){return A})),n.d(t,"L",(function(){return S})),n.d(t,"M",(function(){return v})),n.d(t,"w",(function(){return P})),n.d(t,"H",(function(){return x})),n.d(t,"P",(function(){return M})),n.d(t,"O",(function(){return G})),n.d(t,"Q",(function(){return q})),n.d(t,"S",(function(){return K})),n.d(t,"T",(function(){return W})),n.d(t,"U",(function(){return Q})),n.d(t,"V",(function(){return J})),n.d(t,"W",(function(){return Z})),n.d(t,"X",(function(){return te})),n.d(t,"Y",(function(){return se})),n.d(t,"Z",(function(){return re})),n.d(t,"cb",(function(){return ae})),n.d(t,"fb",(function(){return le})),n.d(t,"ib",(function(){return ue})),n.d(t,"gb",(function(){return be})),n.d(t,"kb",(function(){return ge})),n.d(t,"hb",(function(){return fe})),n.d(t,"jb",(function(){return Ee})),n.d(t,"b",(function(){return ye})),n.d(t,"A",(function(){return Ie})),n.d(t,"I",(function(){return Ce})),n.d(t,"g",(function(){return ve})),n.d(t,"j",(function(){return Se})),n.d(t,"l",(function(){return je})),n.d(t,"N",(function(){return Te})),n.d(t,"m",(function(){return Ae})),n.d(t,"n",(function(){return _e})),n.d(t,"r",(function(){return Re})),n.d(t,"t",(function(){return Ne})),n.d(t,"u",(function(){return we})),n.d(t,"C",(function(){return De})),n.d(t,"F",(function(){return Le})),n.d(t,"J",(function(){return Pe})),n.d(t,"K",(function(){return ke})),n.d(t,"p",(function(){return xe})),n.d(t,"ab",(function(){return Me})),n.d(t,"R",(function(){return Ue})),n.d(t,"db",(function(){return a}))},pQKg:function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return l})),n.d(t,"d",(function(){return d})),n.d(t,"a",(function(){return u})),n.d(t,"e",(function(){return p}));var s=n("W2ME"),o=n("nsO7");const r="/v1/courses/%courseId%/gradebook/columns/%columnId%/grades",i=`${r}/%gradeId%/postReadyGrades`,a=`${r}/%gradeId%`;async function c(e,t,n){const o=Object(s.f)(r,{courseId:e,columnId:t,userId:n}),{paging:i,permissions:a,results:c}=await Object(s.j)(o);return{grades:c,paging:i,permissions:a}}async function l(e,t,n,o={}){var r;const i={courseId:e,expand:null===(r=o.expand)||void 0===r?void 0:r.join()},{permissions:a,bulkViewUsers:c}=await Object(s.p)(Object(s.f)("/v1/courses/%courseId%/gradebook/grades/bulkView",i),{columnIds:t,membershipIds:n}),l=[];return c.forEach((e=>{l.push(...function(e){return e.grades.map((e=>{var t;const n=null===(t=e.attempts)||void 0===t?void 0:t.find((t=>new Date(t.attemptDate).getTime()===new Date(e.lastAttemptDate).getTime()));return{...e.grade,lastAttemptId:null==n?void 0:n.id}}))}(e))})),{grades:l,permissions:a}}async function d(e){const{columnId:t,courseId:n,id:o}=e;return{count:await Object(s.p)(Object(s.f)(i,{columnId:t,courseId:n,gradeId:o}),{}),grade:e}}async function u(e){const{courseId:t,columnId:n,userId:o}=e;return{grade:await Object(s.p)(Object(s.f)(r,{clearCommentsIfRevertOverrides:"false",courseId:t,columnId:n,userId:o}),e)}}async function p(e,t){const{courseId:n,columnId:r,id:i}=t,c=Object(s.i)(e,t);if(Object(o.isEmpty)(c))return null;const l=Object(s.f)(a,{clearCommentsIfRevertOverrides:"false",includeUnpostedGrade:"true",courseId:n,columnId:r,gradeId:i});return{grade:await Object(s.o)(l,c)}}},sUzX:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return i}));var s=n("gB62");class o extends s.i{constructor(){super("")}}class r extends s.j{constructor(){super("/webapps/login/")}getRequestInit(){return Object.assign(super.getRequestInit(),{redirect:"manual"})}async failed(e){e.status>=300&&e.status<=399||await super.failed(e)}}class i extends s.d{constructor(){super("/v1/utilities/xsrfToken")}}},spHl:function(e,t,n){var s={"./ar-sa/_combined":["805C",91],"./ar-sa/_combined.json":["805C",91],"./az-az/_combined":["8E7/",92],"./az-az/_combined.json":["8E7/",92],"./cs-cz/_combined":["p7mG",93],"./cs-cz/_combined.json":["p7mG",93],"./cy-gb/_combined":["jeLm",94],"./cy-gb/_combined.json":["jeLm",94],"./da-dk/_combined":["2iiI",95],"./da-dk/_combined.json":["2iiI",95],"./de-de/_combined":["bR5d",96],"./de-de/_combined.json":["bR5d",96],"./en-au/_combined":["FPgK",98],"./en-au/_combined.json":["FPgK",98],"./en-gb/_combined":["fX7R",99],"./en-gb/_combined.json":["fX7R",99],"./en-us-k12/_combined":["TfEl",100],"./en-us-k12/_combined.json":["TfEl",100],"./en-us-pro/_combined":["SQ9M",101],"./en-us-pro/_combined.json":["SQ9M",101],"./en-us/_combined":["pVoq",164],"./en-us/_combined.json":["pVoq",164],"./en/_combined":["JOlw",97],"./en/_combined.json":["JOlw",97],"./es-es/_combined":["qCZ9",102],"./es-es/_combined.json":["qCZ9",102],"./fr-ca/_combined":["pVU6",103],"./fr-ca/_combined.json":["pVU6",103],"./fr-fr/_combined":["SMTA",104],"./fr-fr/_combined.json":["SMTA",104],"./he-il/_combined":["Olqa",105],"./he-il/_combined.json":["Olqa",105],"./it-it/_combined":["mwd4",106],"./it-it/_combined.json":["mwd4",106],"./ja-jp/_combined":["BVZK",107],"./ja-jp/_combined.json":["BVZK",107],"./ko-kr/_combined":["/x4r",108],"./ko-kr/_combined.json":["/x4r",108],"./ms-my/_combined":["YOK3",109],"./ms-my/_combined.json":["YOK3",109],"./nb-no/_combined":["oNI2",110],"./nb-no/_combined.json":["oNI2",110],"./nl-nl/_combined":["7Mff",111],"./nl-nl/_combined.json":["7Mff",111],"./nn-no/_combined":["pU4P",112],"./nn-no/_combined.json":["pU4P",112],"./pl-pl/_combined":["395X",113],"./pl-pl/_combined.json":["395X",113],"./pt-br/_combined":["LehD",114],"./pt-br/_combined.json":["LehD",114],"./pt-pt/_combined":["3Ybv",115],"./pt-pt/_combined.json":["3Ybv",115],"./ru-ru/_combined":["lC96",116],"./ru-ru/_combined.json":["lC96",116],"./sv-se/_combined":["JSyn",117],"./sv-se/_combined.json":["JSyn",117],"./th-th/_combined":["S6Bf",118],"./th-th/_combined.json":["S6Bf",118],"./tr-tr/_combined":["3Rba",119],"./tr-tr/_combined.json":["3Rba",119],"./uk-ua/_combined":["Mk0I",120],"./uk-ua/_combined.json":["Mk0I",120],"./zh-cn/_combined":["qOHB",121],"./zh-cn/_combined.json":["qOHB",121],"./zh-tw/_combined":["G1jo",122],"./zh-tw/_combined.json":["G1jo",122]};function o(e){if(!n.o(s,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=s[e],o=t[0];return n.e(t[1]).then((function(){return n.t(o,3)}))}o.keys=function(){return Object.keys(s)},o.id="spHl",e.exports=o},suvu:function(e,t,n){"use strict";var s=n("9EWH"),o=n("YdFf"),r=n("8/Ce"),i=n("iKGo"),a=n("Brcr"),c=n("BWPL"),l=n("D5sL");const d="user.load",u="user.load.me";n.d(t,"b",(function(){return b})),n.d(t,"a",(function(){return m})),n.d(t,"c",(function(){return g}));const p=(e,t)=>Object(s.a)(e,(n=>{for(const[s,o]of Object.entries(t.users))n.byId[s]={...e.byId[s],...o}})),b=Object(i.g)({byId:{},isLoading:!1},{[d]:i.n,[Object(i.j)(d)]:(e,t)=>{const{user:n}=t;let o=e;return n&&(o=Object(s.a)(e,(e=>{e.byId[n.id]=n}))),Object(i.p)(o,t)},[Object(i.j)(c.a.COURSE_MEMBERSHIP_LOAD)]:(e,t)=>{const{data:n}=t;if(!n.user)return e;const{user:o}=n;return Object(s.a)(e,(e=>{e.byId[o.id]=o}))},[Object(i.j)(c.a.COURSE_MEMBERSHIPS_LOAD)]:(e,t)=>{const{data:n}=t;if(!n.users)return e;const{users:o}=n;return Object(s.a)(e,(e=>{Object.keys(o).forEach((t=>{e.byId[t]=o[t]}))}))},[Object(i.h)(d)]:i.l,[Object(i.j)(o.a.GROUPS_LOAD_BY_CONTENT_ID)]:(e,t)=>{const{groups:n}=t;let o=e;return n&&Object.values(n).forEach((e=>{const{memberships:t}=e;t&&t.forEach((e=>{const{user:t}=e;t&&(o=Object(s.a)(o,(e=>{e.byId[t.id]=t})))}))})),o},[Object(i.j)(r.a.BLOG_PARTICIPANTS_LOAD)]:(e,t)=>{const n=Object(s.a)(e,(e=>{const{byCourseMembershipId:n}=t.data;n&&Object.keys(n||{}).forEach((t=>{const s=n[t].user;s&&(e.byId[s.id]=s)}))}));return Object(i.p)(n,t)},[Object(i.j)(l.a.COMPLETED_DELEGATED_ATTEMPT_GRADE_BY_GRADER_LOAD)]:p,[Object(i.j)(l.a.COMPLETED_DELEGATED_ATTEMPT_GRADE_ON_ATTEMPT_LOAD)]:p,[u]:i.n,[Object(i.j)(u)]:(e,t)=>{const{user:n}=t;let o=e;return n&&(o=Object(s.a)(e,(e=>{e.current=n,e.byId[n.id]=n}))),Object(i.p)(o,t)},[Object(i.h)(u)]:i.l}),m={loadUser:e=>Object(i.f)(d,(t=>function(e,t){return!g.getUserById(e,t)}(t(),e)?Object(a.a)(e).then((e=>({user:e}))):Promise.resolve(null))),loadCurrentUser:()=>Object(i.f)(u,(e=>{return t=e(),g.getCurrentUser(t)?Promise.resolve(null):Object(a.a)("me").then((e=>({user:e})));var t}))},g={getUserById:(e,t)=>e.user.byId[t],getUsersByIds:(e,t)=>{const n={};return t.forEach((t=>{e.user.byId[t]&&(n[t]=e.user.byId[t])})),n},getCurrentUser:e=>e.user.current}},t3aq:function(e,t,n){"use strict";var s,o=n("aWzz"),r=n("ERkP"),i=n("7nmT"),a=n("0x+l"),c=n("8jBL"),l=n("MC1S");!function(e){e[e.ScoreIndicator=0]="ScoreIndicator",e[e.AlternativeFormats=1]="AlternativeFormats"}(s||(s={}));var d=({contentRef:e,widgetType:t,text:n,ariaLabel:o,iconSize:i})=>{const d={"data-ally-content-ref":e},u={};switch(o&&(u["aria-label"]=o),n||(u.style={width:"100%"}),u.style={display:"none"},t){case s.ScoreIndicator:if(d["data-ally-invoke"]="instructorfeedback",d["data-ally-show"]="instructorfeedback",!n)return r.createElement("span",{...d,...u,"data-ally-scoreindicator":"circle",onKeyDown:e=>{if(32===e.keyCode)e.target.dispatchEvent(new Event("click"))}});break;case s.AlternativeFormats:if(d["data-ally-invoke"]="alternativeformats",d["data-ally-show"]="alternativeformats",o&&(d["data-ally-tooltip"]="",u.title=o),!n)return r.createElement("button",{...d,...u},"medium"===i?r.createElement(c.AllyDownload,{id:"icon-solid-medium-ally-download"}):r.createElement(a.AllyDownload,{id:"icon-solid-small-ally-download"}))}return r.createElement(l.Link,{...u,additionalAttributes:{...d},analyticsId:"components.directives.allyWidget.link"},n)};var u,p=({contentId:e,fileId:t,filePreviewUrl:n})=>r.createElement("a",{"data-ally-content-id":e,"data-ally-file-eid":t,"data-ally-file-preview-url":n,style:{display:"none"}});n.d(t,"c",(function(){return u})),n.d(t,"e",(function(){return b})),n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return d})),n.d(t,"d",(function(){return s})),function(e){e.InstructorFeedback="instructorfeedback"}(u||(u={}));const b=o.shape({getXythosIdFromContentFileUrl:o.func,update:o.func,isAvailable:o.func,getIndexMapFromBbML:o.func,onUpdate:o.func,destroyListeners:o.func}),m={renderContentId:(e,t)=>{i.render(r.createElement(p,{...t}),e)},renderWidget:(e,t)=>{i.render(r.createElement(d,{...t}),e)},destroyComponent:e=>{i.unmountComponentAtNode(e)}};t.f=m},tfZW:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var s=n("D57K"),o=n("DN+C");class r{constructor(){this.overrideBundles={},this.baseLocaleMap={},this.pathMap={},this.overrideAddedHandlers=new Set,this.overridePathPromises={}}static getInstance(){return this.instance||(this.instance=new r),this.instance}onOverrideAdded(e){this.overrideAddedHandlers.add(e)}notifyOverrideAdded(e){this.overrideAddedHandlers.forEach((t=>{try{t(e)}catch(e){}}))}static normalizeLocale(e){return e.toLocaleLowerCase().replace(/_/g,"-")}get root(){return this._root}get siteId(){return this._siteId}setOverrideLocation(e,t){e.endsWith("/")&&(e=e.substring(0,e.length-1)),this._root=e,this._siteId=t}addOverrideBundle(e,t){e=r.normalizeLocale(e);const n=r.normalizeLocale(t),s=r.getFallbackLocale(n);this.overrideBundles[e]={ultraLocale:n,localeForPath:t},this.baseLocaleMap[e]=this.baseLocaleMap[n]=s,this.notifyOverrideAdded(e)}getOverridePathForLocale(e){return e=r.normalizeLocale(e),this.overrideBundles[e]?(this.overridePathPromises[e]||(this.overridePathPromises[e]=this.internalGetOverridePath(e)),this.overridePathPromises[e]):Promise.resolve(null)}async internalGetOverridePath(e){const t=this.overrideBundles[e].ultraLocale,n=this.overrideBundles[e].localeForPath,s=await this.getPathToLocale(n);return t&&s?{path:s,ultraLocale:t}:null}static getFallbackLocale(e){return e.split("-").slice(0,-1).join("-")}getPreferredLocales(e){if(e=r.normalizeLocale(e),!this.overrideBundles[e])return[e];const t=this.overrideBundles[e].ultraLocale;return[t,r.getFallbackLocale(t)].filter((e=>!!e))}async getPathToLocale(e){if(!this._root||!this._siteId)return null;try{if(void 0===this.pathMap[e]){const t=`${this._root}/${this._siteId}/mapping.json`,n=await fetch(t);if(!n.ok)return this.pathMap[e]=null,null;const s=await n.json();if(!s[e])return this.pathMap[e]=null,null;this.pathMap[e]=`${this._root}${s[e][0].url}`}return this.pathMap[e]}catch(e){return null}}getBaseLocale(e){return e=r.normalizeLocale(e),void 0===this.baseLocaleMap[e]?"":this.baseLocaleMap[e]||"en"}static async loadFromRemotePath(e){try{const t=await fetch(e);return t.ok?await t.json():{}}catch(e){return{}}}}Object(s.a)([Object(o.LRUMemoize)()],r,"normalizeLocale",null),Object(s.a)([Object(o.LRUMemoize)(2)],r,"getFallbackLocale",null)},tlKk:function(e,t){e.exports='<svg width="51" height="51" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path d="M17.429 13c-.226 0-.452.053-.66.163A1.448 1.448 0 0 0 16 14.444v10.112c0 .538.296 1.032.769 1.28a1.418 1.418 0 0 0 1.48-.097l7.142-5.055a1.454 1.454 0 0 0-.001-2.368l-7.143-5.056a1.41 1.41 0 0 0-.818-.26Z" id="a"/><mask id="b" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="10" height="13" fill="#fff"><use xlink:href="#a"/></mask></defs><g transform="translate(6 6)" fill="none" fill-rule="evenodd"><path d="M37.143 39H2.857C1.286 39 0 37.7 0 36.111V2.89C0 1.3 1.286 0 2.857 0h34.286C38.714 0 40 1.3 40 2.889V36.11C40 37.7 38.714 39 37.143 39Z" fill="#FFF"/><path d="M7 39H2.8C1.26 39 0 37.7 0 36.111V2.89C0 1.3 1.26 0 2.8 0H7v39Zm26 0h4.2c1.54 0 2.8-1.3 2.8-2.889V2.89C40 1.3 38.74 0 37.2 0H33v39Z" fill="#CEE0F3"/><path d="M6 1h1v37H6V1Zm27 0h1v37h-1V1Zm4.538 0C38.342 1 39 1.666 39 2.48v34.04c0 .814-.658 1.48-1.462 1.48H2.462A1.475 1.475 0 0 1 1 36.52V2.48C1 1.666 1.658 1 2.462 1h35.076ZM2.858 0C1.285 0 0 1.3 0 2.889V36.11C0 37.7 1.286 39 2.857 39h34.286C38.714 39 40 37.7 40 36.111V2.89C40 1.3 38.714 0 37.143 0H2.857Z" fill="#777677"/><use stroke="#777677" mask="url(#b)" stroke-width="2" fill="#CEE0F3" xlink:href="#a"/><path fill="#777677" d="M1 19h6v1H1zM34 19h6v1h-6zM1 31h6v1H1zM34 31h6v1h-6zM1 25h6v1H1zM34 25h6v1h-6zM1 13h6v1H1zM34 13h6v1h-6zM1 7h6v1H1zM34 7h6v1h-6z"/></g></svg>'},uq3J:function(e,t,n){"use strict";n.d(t,"b",(function(){return a}));var s=n("zGdY"),o=n("nsO7");function r(e,t){var n,s,o,r;return null===(r=null===(o=null===(s=null===(n=e.adaptiveReleaseRules)||void 0===n?void 0:n.rules)||void 0===s?void 0:s[0])||void 0===o?void 0:o.criteria)||void 0===r?void 0:r.find((e=>t.includes(e.type)))}function i(e){return r(e,[s.Z.Date])}const a=e=>{var t,n;return!(!e.isAvailable||!(null===(n=null===(t=e.adaptiveReleaseRules)||void 0===t?void 0:t.rules)||void 0===n?void 0:n.every((e=>{var t;return null===(t=e.criteria)||void 0===t?void 0:t.length}))))},c=e=>{var t,n,o,r;return!!(null===(r=null===(o=null===(n=null===(t=e.adaptiveReleaseRules)||void 0===t?void 0:t.rules)||void 0===n?void 0:n[0])||void 0===o?void 0:o.criteria)||void 0===r?void 0:r.some((e=>e.type===s.Z.ForcedSequence)))},l=e=>Object(o.isDate)(e)?e:null==e||""===e?null:new Date(e);t.a={canDeleteAllCriteria:function(e,t){return t.every((t=>function(e,t){switch(t.type){case s.Z.Grade:case s.Z.GradePercentage:return e.permissions.adaptiveRelease.criteria.performance.delete;case s.Z.Date:return e.permissions.adaptiveRelease.criteria.dates.delete;default:return e.permissions.adaptiveRelease.delete}}(e,t)))},getACLCriterion:function(e){return r(e,[s.Z.ACL])},getDateCriterion:i,getForcedSequenceCriterion:function(e){return r(e,[s.Z.ForcedSequence])},getPerformanceCriterion:function(e){return r(e,[s.Z.Grade,s.Z.GradePercentage])},isConditionalRelease:a,isForcedSequenceItem:c,hasOnlyForcedSequenceConditionalReleaseCriteria:e=>{var t,n,s,o;return!!c(e)&&1===(null===(o=null===(s=null===(n=null===(t=e.adaptiveReleaseRules)||void 0===t?void 0:t.rules)||void 0===n?void 0:n[0])||void 0===s?void 0:s.criteria)||void 0===o?void 0:o.length)},isDueDateWithinReleaseConditionRange:(e,t)=>{var n;let s=!0;if(t&&e.adaptiveReleaseRules){const o=e.adaptiveReleaseRules;if(null===(n=null==o?void 0:o.rules)||void 0===n?void 0:n.length){const n=i(e);if(n){const e=l(n.start),o=l(n.end);e&&o?s=t>e&&t<o:e&&!o?s=t>e:!e&&o&&(s=t<o)}}}return s}}},vIkp:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));const s={BLOG_LOAD:"blog.load"}},wF9z:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return o})),n.d(t,"i",(function(){return u})),n.d(t,"h",(function(){return b})),n.d(t,"e",(function(){return m})),n.d(t,"f",(function(){return g})),n.d(t,"d",(function(){return h})),n.d(t,"c",(function(){return f})),n.d(t,"g",(function(){return O}));var s,o,r=n("PPJ4"),i=n("cg8W"),a=n("zGdY");!function(e){e.PotentialGraders="potentialGraders"}(s||(s={})),function(e){e.DefaultReconciler="defaultReconciler"}(o||(o={}));const c=/[()]/;function l(e){return!e||""===e||"true"===e.toLowerCase()}const d=/\/v1\/users\/(_\d+_\d+)\/memberships/;function u(e){const t=(d.exec(e)||[])[1];return t?{userId:t}:null}const p=/\/v1\/courses\/(_\d+_\d+)\/memberships/;function b(e){const t=(p.exec(e)||[])[1];if(!t)return null;const n={courseId:t},s={},o={};return new URL(e,"https://foo.bar").searchParams.forEach(((e,t)=>{switch(t){case"excludePreviewUser":s.excludePreviewUser=l(e);break;case"hasDueDateExceptionOnly":s.hasDueDateExceptionOnly=l(e);break;case"hasTimeLimitExceptionOnly":s.hasTimeLimitExceptionOnly=l(e);break;case"includeMe":s.includeMe=l(e);break;case"membershipAvailable":s.membershipAvailable=l(e);break;case"roleBucket":s.roleBucket=e.split(",").map((e=>e.toUpperCase()));break;case"groupId":s.groupId=e.split(",");break;case"membershipId":s.membershipId=e.split(",");break;case"childCourseId":s.childCourseId=e.split(",");break;case"limit":o.limit=parseInt(e,10);break;case"offset":o.offset=parseInt(e,10);break;case"sort":n.sort=function(e){const t=[];return e.split(",").forEach((e=>{const n=e.split(c);t.push({field:n[0],direction:n[1]})})),t}(e);break;case"isExcludedFromCourseUserActivity":s.isExcludedFromCourseUserActivity=l(e);break;case"expand":case"includeCount":case"fields":break;default:console.warn(`unhandeled query parameter ${t}`)}})),Object.keys(s).length>0&&(n.filter=s),"limit"in o&&(n.paging={limit:o.limit,offset:o.offset}),n}async function m(e,t,n=!0){const s=["courseRole"];n&&s.push("user");const o=new a.ub({courseId:e,membershipId:t}).withSession(r.d).withExpand(...s);return Object(a.Wc)(o)}async function g(e,t){return Object(a.Gc)(r.d,e,t)}function h(e,t){const{results:n,paging:s}=e,o=n.map((e=>e.user)).filter((e=>!!e)),r=n.map((e=>e.course)).filter((e=>!!e)),a=n.map((e=>{const{user:t,...n}=e;return{...n}})),c=n.map((e=>e.id));return{users:(null==o?void 0:o.length)?Object(i.c)(o):void 0,courses:(null==r?void 0:r.length)?Object(i.c)(r):void 0,byMembershipId:Object(i.c)(a),membershipIds:c,paging:s,userId:t.userId}}function f(e,t){const{results:n,paging:s,permissions:o}=e,r=n.map((e=>e.user)).filter((e=>!!e)),a=n.map((e=>{const{user:n,...s}=e;return{...s,courseId:t.courseId}})),c=n.map((e=>e.id));return{users:(null==r?void 0:r.length)?Object(i.c)(r):void 0,byCourseMembershipId:Object(i.c)(a),membershipIds:c,paging:s,permissions:o,courseId:t.courseId}}async function O(e){const t=new a.vb({courseId:e.courseId}).withSession(r.d).withExpand("user","courseRole");!function(e,t){var n,s,o,r;const{paging:i,sort:a}=e,c=e.filter,l=e.filter;i&&t.withPaging({limit:i.limit,offset:i.offset});const d=null!==(n=null==c?void 0:c.groupId)&&void 0!==n?n:[],u=null!==(s=null==c?void 0:c.membershipId)&&void 0!==s?s:[],p=null!==(o=null==c?void 0:c.childCourseId)&&void 0!==o?o:[],b=null!==(r=null==c?void 0:c.roleBucket)&&void 0!==r?r:[],m={hasDueDateExceptionOnly:null==c?void 0:c.hasDueDateExceptionOnly,hasTimeLimitExceptionOnly:null==c?void 0:c.hasTimeLimitExceptionOnly,excludePreviewUser:null==c?void 0:c.excludePreviewUser,groupId:d.length>0?d.join(","):void 0,membershipId:u.length>0?u.join(","):void 0,childCourseId:p.length>0?p.join(","):void 0,classicSearchCompare:(null==l?void 0:l.searchField)&&(null==l?void 0:l.searchComparison)?l.searchComparison:void 0,classicSearchField:(null==l?void 0:l.searchField)?l.searchField:void 0,classicSearchText:(null==l?void 0:l.searchField)&&(null==l?void 0:l.searchString)?l.searchString:void 0,includeCount:!0,includeMe:null==c?void 0:c.includeMe,membershipAvailable:null==c?void 0:c.membershipAvailable,roleBucket:b.length>0?b.join(","):void 0,q:!(null==l?void 0:l.searchField)&&(null==l?void 0:l.searchString)?l.searchString:void 0,columnId:e.columnId};t.withQueryParams(m),a&&t.withSort(...a)}(e,t);return f(await Object(a.Wc)(t),e)}},yDr9:function(e,t,n){"use strict";n.d(t,"d",(function(){return c})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return d})),n.d(t,"a",(function(){return m})),n.d(t,"e",(function(){return g})),n.d(t,"h",(function(){return h})),n.d(t,"g",(function(){return f})),n.d(t,"f",(function(){return O}));var s=n("Xnku"),o=n("z4GH"),r=n("2bmK");class i extends o.c{getUrl(){let e=super.getRelativeUrl();return e&&(e=e.startsWith("/")?e:`/${e}`),r.i.getUrl("/learn/api"+e)}requiresSession(){return!0}toString(){return`[LearnApiRequest: ${this.method} ${this.getUrl()}]`}async failed(e){throw new s.b(await e.json())}}class a extends i{withFields(...e){return this.withQuery({fields:e})}}class c extends i{constructor(e,t){super(r.a.Get,e,t)}}class l extends a{constructor(e,t){super(r.a.Get,e,t)}}class d extends c{withPaging(e){return this.withQuery({limit:e.limit,offset:e.offset})}withSort(...e){return this.withQuery({sort:(null!=e?e:[]).map((e=>`${e.field}(${e.direction})`))})}async validate(){await super.validate(),this.query.has("limit")||this.query.has("offset")||console.warn(`Attempting to get paged collection at ${this.path} without a filter, this might be a performance issue.`)}}class u extends i{constructor(e,t,n){super(e,t,n),this.getContentType()&&this.headers.set(o.d,this.getContentType())}getRequestInit(){return Object.assign(super.getRequestInit(),{body:this.getBodyInit()})}withBody(e){return this.body=e,this}validate(){return super.validate().then((()=>{if(void 0===this.body)throw new s.a("Request requires a body but none was provided")}))}getBody(){return this.body}}class p extends u{getContentType(){return"application/json"}getBodyInit(){return JSON.stringify(this.body)}}class b extends u{getContentType(){return null}getBodyInit(){var e;const t=new FormData;return Object.keys(null!==(e=this.body)&&void 0!==e?e:{}).forEach((e=>{var n,s;t.append(e,null!==(s=null===(n=this.body)||void 0===n?void 0:n[e])&&void 0!==s?s:"")})),t}}class m extends i{constructor(e,t){super(r.a.Delete,e,t)}}class g extends p{constructor(e,t){super(r.a.Patch,e,t)}}class h extends p{constructor(e,t){super(r.a.Put,e,t)}}class f extends p{constructor(e,t){super(r.a.Post,e,t)}}class O extends b{constructor(e,t){super(r.a.Post,e,t)}}},yQJI:function(e,t,n){"use strict";const s="audio/webm; codecs=opus";var o;!function(e){e.Inactive="inactive",e.Recording="recording",e.Paused="paused"}(o||(o={}));class r{constructor(){this.currentRecordingSession=null,this.mediaRecorder=null,this.mediaStream=null,this.autoStop=null}static getInstance(){return r.instance||(r.instance=new r),this.instance}static getBlobOptionsFromRecorderOptions(e){return{type:null==e?void 0:e.mimeType}}get recordingState(){var e;return(null===(e=this.mediaRecorder)||void 0===e?void 0:e.state)||o.Inactive}get isRecording(){return this.recordingState===o.Recording}isCurrentRecordingSession(e){return null!==this.currentRecordingSession&&this.currentRecordingSession===e}async enableRecording(e){if(this.isRecording)throw new Error("Recording in progress");try{return this.mediaStream=await navigator.mediaDevices.getUserMedia(e.streamConstraints),void(this.currentRecordingSession=e)}catch(e){throw new Error("Unable to start recording")}}async startRecording(e){if(this.isRecording)throw new Error("Recording in progress");return this.mediaStream&&this.isCurrentRecordingSession(e)||await this.enableRecording(e),this.mediaRecorder=new MediaRecorder(this.mediaStream,this.currentRecordingSession.recorderOptions),this.mediaRecorder.start(),this.configureAutoStop(e),this.recordingState}async stopRecording(e){if(!this.isRecording)throw new Error("No recording in progress");if(!this.isCurrentRecordingSession(e))throw new Error("Cannot stop non-respective recording");const{currentRecordingSession:t,mediaRecorder:n}=this,{onRecordingComplete:s,recorderOptions:o}=t,i=new Promise((e=>{const t=r.getBlobOptionsFromRecorderOptions(o);n.ondataavailable=({data:n})=>{e(new Blob([n],t))}})),a=new Promise((e=>{n.onstop=()=>{this.mediaStream&&this.mediaStream.getTracks().forEach((e=>{e.stop()})),e()}}));return n.stop(),await Promise.all([i,a]).then((([e])=>{s(e),this.currentRecordingSession=null})),this.autoStop&&clearTimeout(this.autoStop),this.recordingState}async toggleRecording(e){return this.isRecording?this.stopRecording(e):this.startRecording(e)}configureAutoStop(e){var t,n;const s=null===(n=null===(t=this.currentRecordingSession)||void 0===t?void 0:t.recordingOptions)||void 0===n?void 0:n.maxDuration;s&&(this.autoStop=setTimeout((()=>{this.isCurrentRecordingSession(e)&&this.stopRecording(this.currentRecordingSession)}),s))}}class i{constructor(e,t,n,s){this.recorder=r.getInstance(),this.onRecordingComplete=e,this.recorderOptions=t,this.streamConstraints=n,this.recordingOptions=s||{},this.onRecordToggle=this.onRecordToggle.bind(this),this.onRecordStart=this.onRecordStart.bind(this),this.onRecordStop=this.onRecordStop.bind(this)}async onEnableRecording(){return this.recorder.enableRecording(this)}async onRecordStart(){return this.recorder.startRecording(this)}async onRecordStop(){return this.recorder.stopRecording(this)}async onRecordToggle(){return this.recorder.toggleRecording(this)}}class a extends i{constructor(e){super(e,{mimeType:s},{audio:!0,video:!1},{maxDuration:2e4})}}n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return a}))},z4GH:function(e,t,n){"use strict";n.d(t,"d",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return d}));var s=n("2bmK"),o=n("Xnku");const r="Content-Type";class i{constructor(e,t,n){this.pathParams={},this.session=void 0,this.method=e,this.path=t,this.query=new URLSearchParams,this.headers=new Headers,n&&this.withPathParams(n)}getRelativeUrl(){let e=this.path;if(this.pathParams)for(const[t,n]of Object.entries(this.pathParams))e=e.replace(`%${t}%`,encodeURIComponent(n));const t=this.getQueryString();return t&&(e+=`?${t}`),e}getUrl(){return s.i.getUrl(this.getRelativeUrl())}getQueryString(){return this.query.toString()}withPathParams(e){return Object.assign(this.pathParams,null!=e?e:{}),this}withQuery(e){for(const[t,n]of Object.entries(e))Array.isArray(n)?this.query.set(t,n.join(",")):void 0!==n&&this.query.set(t,String(n));return this}withQueryParams(e){return this.withQuery(e)}withExpand(...e){return this.withQuery({expand:e})}getSession(){return this.session}withSession(e){return this.session=e,e.xsrfToken&&this.headers.set("X-Blackboard-XSRF",e.xsrfToken),e.cookies&&this.headers.set("Cookie",e.cookies),this}requiresSession(){return!1}validate(){return Promise.resolve().then((()=>{var e;if(this.requiresSession()&&!this.session)throw new o.a("Request requires session but no session info was added");const t=(null!==(e=this.path.match(/%\w+%/g))&&void 0!==e?e:[]).map((e=>e.slice(1,-1))).filter((e=>!this.pathParams[e]));if(t.length>0)throw new o.a(`Request is missing required path params: [${t}]`)}))}async failed(e){throw new o.c(await e.text(),e.status,this.getUrl())}getRequestInit(){return{credentials:"same-origin",method:this.method,headers:this.headers}}toRequest(e){return new Request(null!=e?e:this.getUrl(),this.getRequestInit())}toString(){return`[LearnRequest: ${this.method} ${this.getUrl()}]`}}class a extends i{constructor(e,t,n){super(e,t,n),this.getContentType()&&this.headers.set(r,this.getContentType())}getRequestInit(){return Object.assign(super.getRequestInit(),{body:this.getBodyInit()})}withBody(e){return this.body=e,this}validate(){return super.validate().then((()=>{if(void 0===this.body)throw new o.a("Request requires a body but none was provided")}))}}class c extends i{constructor(e,t){super(s.a.Get,e,t)}}class l extends a{getContentType(){return null}getBodyInit(){var e;const t=new FormData;return Object.keys(null!==(e=this.body)&&void 0!==e?e:{}).forEach((e=>{var n,s;t.append(e,null!==(s=null===(n=this.body)||void 0===n?void 0:n[e])&&void 0!==s?s:"")})),t}}class d extends l{constructor(e,t){super(s.a.Post,e,t)}}},zGdY:function(e,t,n){"use strict";var s=n("gB62");class o extends s.g{constructor(){super("/v1/announcements")}}var r=n("2bmK");var i;n("sUzX"),n("TvvE");class a extends s.d{constructor(e){super("/v1/cloudstorages/%serviceId%/contents/%contentId%",e)}}class c extends s.b{constructor(e){super("/v1/cloudstorages/%serviceId%/contents/%contentId%/download",e)}}class l extends s.b{constructor(e){super("/v1/cloudstorages/tasks/%taskId%",e)}}async function d(e,t,n,s){const o=new a({serviceId:t,contentId:n}).withSession(e).withQueryParams({accessToken:s});return Object(r.f)(o)}async function u(e,t,n,s){const o=new c({serviceId:t,contentId:n}).withSession(e).withQueryParams({accessToken:s}).withExpand("isMedia","mimeType");return Object(r.f)(o)}async function p(e,t,n){const s=new l({taskId:t}).withSession(e).withQueryParams({accessToken:n}).withExpand("isMedia","mimeType");return Object(r.f)(s)}!function(e){e.Title="title",e.StartDateRestriction="startDateRestriction",e.ModifiedDate="modifiedDate",e.Status="status",e.ReadCount="readCount"}(i||(i={}));class b extends s.c{constructor(e){super("/v1/courses/%courseId%/announcements",e)}}class m extends s.g{constructor(e){super("/v1/courses/%courseId%/announcements",e)}}class g extends s.a{constructor(e){super("/v1/courses/%courseId%/announcements/%announcementId%",e)}}class h extends s.d{constructor(e){super("/v1/courses/%courseId%/announcements/%announcementId%",e)}}class f extends s.e{constructor(e){super("/v1/courses/%courseId%/announcements/%announcementId%",e)}}class O extends s.d{constructor(e){super("/v1/courses/%courseId%/announcements/counts",e)}}async function E(e,t,n,s){const o=new b({courseId:t}).withSession(e).withPaging(n);return s&&o.withSort(...s),Object(r.f)(o)}async function y(e,t,n){const s=new m({courseId:t}).withSession(e).withBody(n);return Object(r.f)(s)}async function I(e,t,n){const s=new g({courseId:t,announcementId:n}).withSession(e);await Object(r.e)(s)}async function C(e,t,n){const s=new h({courseId:t,announcementId:n}).withSession(e);return Object(r.f)(s)}async function v(e,t,n,s){const o=new f({courseId:t,announcementId:n}).withSession(e).withBody(s);return Object(r.f)(o)}async function S(e,t){const n=new O({courseId:t}).withSession(e);return Object(r.f)(n)}var j=n("Xnku");const T="bb-assessment-conflict-external-referenced-questions";class A extends j.c{constructor(e){super(T,r.b.Conflict,e)}}class _ extends s.c{constructor(e){super("/v1/courses/%courseId%/assessments",e)}}class R extends s.d{constructor(e){super("/v1/courses/%courseId%/assessments/%assessmentId%",e)}}class N extends s.a{constructor(e){super("/v1/courses/%courseId%/assessments/%assessmentId%",e)}async failed(e){const t=await e.json();if(e.status===r.b.Conflict&&t.code===T)throw new A(this.path);await super.failed(e)}}class w extends s.g{constructor(e){super("v1/courses/%courseId%/assessments",e)}}class D extends s.e{constructor(e){super("v1/courses/%courseId%/assessments/%assessmentId%",e)}}async function L(e,t,n){const s=new R({courseId:t,assessmentId:n}).withSession(e);return Object(r.f)(s)}async function P(e,t,n){const s=new N({courseId:t,assessmentId:n}).withSession(e);await Object(r.e)(s)}async function k(e,t,n){const s=new w({courseId:t}).withSession(e).withBody(n);return Object(r.f)(s)}async function x(e,t,n,s){const o=new D({courseId:t,assessmentId:n}).withSession(e).withBody(s);return Object(r.f)(o)}class B extends s.g{constructor(e){super("/v1/courses/%courseId%/schedule",e)}}class M extends s.g{constructor(e){super("/v1/courses/%courseId%/calendars/calendarItems",e)}}class U extends s.g{constructor(e){super("/v1/courses/%courseId%/users/%userId%/officeHours",e)}}class G extends s.c{constructor(e){super("/v1/courses/%courseId%/contents/%contentId%/users",e)}}class F extends s.d{constructor(e){super("/v1/courses/%courseId%/contents/%contentId%/users/reports/states",e)}}class q extends s.g{constructor(e){super("/v1/courses/%courseId%/groupsets/%groupSetId%/export",e)}}class H extends s.c{constructor(e){super("/v1/courses/%courseId%/groupsets/%groupSetId%/export",e)}}class V extends s.a{constructor(e){super("/v1/courses/%courseId%/groupsets/%groupSetId%/export",e)}}class K extends s.g{constructor(e){super("/v1/courses/%courseId%/groupsets/import",e)}}async function $(e,t,n,s){const o=new q({courseId:t,groupSetId:n}).withSession(e).withBody(s);return Object(r.e)(o)}async function W(e,t,n,s){const o=new H({courseId:t,groupSetId:n}).withSession(e);return s.paging&&o.withPaging(s.paging),s.sort&&o.withSort(...s.sort),Object(r.f)(o)}async function z(e,t,n,s){const o=new V({courseId:t,groupSetId:n}).withSession(e).withQueryParams(s);return Object(r.e)(o)}async function Q(e,t,n){const s=new K({courseId:t}).withSession(e).withBody(n);return Object(r.e)(s)}class Y extends s.c{constructor(e){super("/v1/courses/%courseId%/contents/%contentId%/assignedGroups",e)}}async function J(e,t){var n,s,o;const i=new Y({courseId:t.courseId,contentId:t.contentId}).withSession(e),a=t.paging?{limit:null!==(n=t.paging.limit)&&void 0!==n?n:1e3,offset:t.paging.offset}:{limit:1e3};return i.withPaging(a),t.expand&&i.withExpand(t.expand),i.withQueryParams({submissionStatus:null===(s=t.filter)||void 0===s?void 0:s.submissionStatus,gradingStatus:null===(o=t.filter)||void 0===o?void 0:o.gradingStatus,includeCount:!0}),Object(r.f)(i)}var X,Z;!function(e){e.FamilyName="familyName",e.GivenName="givenName",e.UserName="userName"}(X||(X={})),function(e){e.CourseId="course.courseId",e.DisplayOrder="displayOrder",e.EnrollmentDate="enrollmentDate",e.FamilyName="user.familyName",e.GivenName="user.givenName",e.Id="id",e.LastAccessDate="lastAccessDate",e.Role="role",e.Username="user.userName",e.StudentId="user.studentId",e.IsPreviewStudent="isPreviewStudent",e.Grade="grade"}(Z||(Z={}));class ee extends s.g{constructor(e){super("/v1/courses/%courseId%/memberships",e)}}class te extends s.d{constructor(e){super("/v1/courses/%courseId%/memberships/counts",e)}}class ne extends s.c{constructor(e){super("/v1/courses/%courseId%/memberships",e)}}class se extends s.b{constructor(e){super("/v1/courses/%courseId%/memberships",e)}}class oe extends s.d{constructor(e){super("/v1/courses/%courseId%/memberships/%membershipId%",e)}}class re extends s.e{constructor(e){super("/v1/courses/%courseId%/memberships/%membershipId%",e)}}class ie extends s.a{constructor(e){super("/v1/courses/%courseId%/memberships/%membershipId%",e)}}class ae extends s.d{constructor(e){super("v1/courses/%courseId%/users/%userId%",e)}}async function ce(e,t){const n=new te({courseId:t}).withSession(e);return Object(r.f)(n)}async function le(e,t,n){const s=new ae({courseId:t,userId:n}).withSession(e).withExpand("courseRole","user");return Object(r.f)(s)}class de extends s.c{constructor(e){super("/v1/courses/%courseId%/assessments/%assessmentId%/questions/%questionId%",e)}}class ue extends s.c{constructor(e){super("/v1/courses/%courseId%/assessments/%assessmentId%/questions",e)}}class pe extends s.c{constructor(e){super("/v1/courses/%courseId%/questions",e)}}function be(e,t,n,s){const o=new de({assessmentId:t,courseId:n,questionId:s}).withSession(e);return Object(r.f)(o)}class me extends s.c{constructor(){super("/v1/courses")}}class ge extends s.g{constructor(){super("/v1/courses")}}class he extends s.d{constructor(e){super("/v1/courses/%courseId%",e)}}class fe extends s.e{constructor(e){super("/v1/courses/%courseId%",e)}}class Oe extends s.a{constructor(e){super("/v1/courses/%courseId%",e)}}const Ee="/v1/courses/%courseId%/tools/%toolId%";class ye extends s.d{constructor(e){super(Ee,e)}}class Ie extends s.e{constructor(e){super(Ee,e)}}function Ce(e,t){const n=new ye(e).withSession(t);return Object(r.f)(n)}function ve(e,t,n){const s=new Ie(e).withSession(t).withBody(n);return Object(r.f)(s)}var Se,je,Te,Ae=n("yDr9");class _e extends Ae.c{constructor(e){super("/v1/courses/%courseId%/users/%userId%/contents/%contentId%/children",e)}}async function Re(e,t){const n=(new me).withSession(e);return(null==t?void 0:t.paging)&&n.withPaging(t.paging),(null==t?void 0:t.sort)&&(Array.isArray(t.sort)?n.withSort(...t.sort):n.withSort(t.sort)),Object(r.f)(n)}async function Ne(e,t){const n=new he({courseId:t}).withSession(e);return Object(r.f)(n)}async function we(e,t,n){const s=new fe({courseId:t}).withSession(e).withBody(n);return Object(r.f)(s)}!function(e){e.AllTasks="allTasks",e.CxTasks="cxTasks",e.CopyTasks="courseCopyTasks",e.ConvertToUltra="ultraCourseConversionTasks",e.CxImport="CXIMPORT",e.CxExport="CXEXPORT",e.CxArchive="CXARCHIVE",e.CxRestore="CXRESTORE"}(Se||(Se={})),function(e){e.AllStatus="All",e.Waiting="WAITING",e.Assigned="ASSIGNED",e.Running="RUNNING",e.Complete="COMPLETE",e.CompleteErrors="COMPLETE_ERRORS",e.Incomplete="INCOMPLETE"}(je||(je={}));class De extends s.c{constructor(e){super("/v1/courses/%courseId%/tasks",e)}}class Le extends s.a{constructor(e){super("/v1/courses/%courseId%/tasks/%taskId%",e)}}async function Pe(e,t,n,s){const o=new De({courseId:t}).withSession(e).withQueryParams(n).withPaging(s);return Object(r.f)(o)}function ke(e,t,n){const s=new Le({courseId:t,taskId:n}).withSession(e);return Object(r.e)(s)}!function(e){e.AllLogs="allLogs",e.CopyLogs="courseCopyLogs",e.ImportLogs="importLogs",e.RestoreLogs="restoreLogs"}(Te||(Te={}));class xe extends s.c{constructor(e){super("/v1/courses/%courseId%/tasks/logs",e)}}class Be extends s.a{constructor(e){super("/v1/courses/%courseId%/tasks/logs/%logId%",e)}}async function Me(e,t,n,s){const o=new xe({courseId:t}).withSession(e).withQueryParams(n).withPaging(s);return Object(r.f)(o)}function Ue(e,t,n){const s=new Be({courseId:n,logId:t}).withSession(e);return Object(r.e)(s)}class Ge extends s.h{constructor(){super("v1/utilities/batch")}}class Fe extends s.i{constructor(){super("/webapps/portal/support.jsp")}async validate(){if(await super.validate(),!this.getQueryString())throw new j.a("Query parameters are required to toggle dev only")}}class qe extends s.c{constructor(){super("/v1/featureFlags")}}class He extends s.d{constructor(e){super("/v1/featureFlags/%flagKey%",e)}}class Ve extends s.h{constructor(e){super("/v1/featureFlags/%flagKey%",e)}}async function Ke(e){const t=(new qe).withSession(e);return Object(r.f)(t)}async function $e(e,t){const n=new He({flagKey:t}).withSession(e);return Object(r.f)(n)}async function We(e,t,n){const s=new Ve({flagKey:t}).withSession(e).withBody(n);return Object(r.f)(s)}var ze=n("ReGF");class Qe extends s.f{constructor(){super("/v1/files")}}class Ye extends r.c{constructor(e){super(r.d.API),this._apiError=e}get apiError(){return this._apiError}get status(){return this._apiError.body.status}}class Je extends r.c{constructor(){super(r.d.API)}}class Xe extends Qe{xhrFailed(e){if(!e)return new Je;const t=JSON.parse(e);return new Ye(new ze.a(t))}xhrBody(){return this.getBodyInit()}toXhr(e){const t=new XMLHttpRequest;return t.open(this.method,null!=e?e:this.getUrl()),this.headers.forEach(((e,n)=>{t.setRequestHeader(n,e)})),t}}function Ze(e,t,n,s){let o=(new Qe).withSession(e).withBody(t).withQueryParams(n);return s&&s.length>0&&(o=o.withExpand(...s)),Object(r.f)(o)}function et(e,t,n,s){let o=(new Xe).withSession(e).withBody(t).withQueryParams(n);return s&&s.length>0&&(o=o.withExpand(...s)),Object(r.h)(o)}n("ICWc"),n("71td"),n("JD9L"),n("4qjI");class tt extends s.g{constructor(){super("/v1/foundationsToken")}}class nt extends s.g{constructor(){super("/v1/foundationsToken/refresh")}}class st extends s.d{constructor(){super("/v1/foundationsToken/context")}}n("ICWc"),n("71td"),n("JD9L"),n("4qjI");async function ot(e){const t=(new tt).withSession(e).withBody({});return Object(r.f)(t)}async function rt(e,t){const n=(new nt).withSession(e).withBody(t);return Object(r.f)(n)}async function it(e){const t=(new st).withSession(e);return Object(r.f)(t)}n("ICWc"),n("71td"),n("JD9L"),n("4qjI");class at extends s.d{constructor(e){super("/v1/courses/%courseId%/gradebook/columns/%columnId%/results/export",e)}}const ct="/v1/courses/%courseId%",lt=`${`${ct}/gradebook/columns/%columnId%`}/exceptions`,dt=`${lt}/count`,ut=`${ct}/gradebook/memberships/%membershipId%/exceptions`,pt=`${lt}/memberships/%membershipId%`;var bt;!function(e){e.Unlimited="UNLIMITED",e.Fixed="FIXED",e.Relative="RELATIVE"}(bt||(bt={}));class mt extends s.h{constructor(e){super(pt,e)}}class gt extends s.a{constructor(e){super(pt,e)}}class ht extends s.d{constructor(e){super(lt,e)}}class ft extends s.d{constructor(e){super(dt,e)}}class Ot extends s.d{constructor(e){super(ut,e)}}async function Et(e,t,n){const s=new mt(t).withSession(e).withBody(n);return await Object(r.f)(s)}async function yt(e,t){const n=new gt(t).withSession(e);await Object(r.e)(n)}async function It(e,t,n){const s=new ht(t).withQueryParams(n).withSession(e);return await Object(r.f)(s)}async function Ct(e,t){const n=new ft(t).withSession(e);return await Object(r.f)(n)}async function vt(e,t,n){const s=new Ot(t).withQueryParams(n).withSession(e);return await Object(r.f)(s)}async function St(e,t,n,s){const o=new at({courseId:t,columnId:n}).withQueryParams(s).withSession(e),i=await Object(r.e)(o),a=(e=>{var t;const n=/['"]/g;let s;return e.headers.raw||(s=null!==(t=e.headers.get("Content-Disposition"))&&void 0!==t?t:"",""!==s&&(s=s.indexOf("filename*")>=0?decodeURIComponent(s.split("filename*=")[1].split("UTF-8")[1]):s.split("filename=")[1].split(";")[0],s=null==s?void 0:s.replace(n,""))),s})(i);return{filename:a,blob:await i.blob()}}class jt extends s.d{constructor(e){super("/v1/courses/%courseId%/gradebook/columns/%columnId%/groupAssociations/%groupId%/grades",e)}}function Tt(e,t){const n=new jt(t).withSession(e);return Object(r.f)(n)}const At="/v1/courses/%courseId%/gradebook/schemas",_t=`${At}/%schemaId%`;class Rt extends s.d{constructor(e){super(At,e)}}class Nt extends s.d{constructor(e){super(_t,e)}}class wt extends s.g{constructor(e){super(At,e)}}class Dt extends s.e{constructor(e){super(_t,e)}}function Lt(e,t,n){const s=new Rt(t).withSession(e);return n&&s.withQueryParams(n),Object(r.f)(s)}function Pt(e,t){const n=new Nt(t).withSession(e);return Object(r.f)(n)}function kt(e,t,n){const s=new wt(t).withSession(e).withBody(n);return Object(r.f)(s)}function xt(e,t,n){const s=new Dt(t).withSession(e).withBody(n);return Object(r.f)(s)}class Bt extends s.c{constructor(e){super("/v1/courses/%courseId%/gradebook/attempts/%attemptId%/assessment/answers",e)}}class Mt extends s.e{constructor(e){super("/v1/courses/%courseId%/gradebook/attempts/%attemptId%/assessment/answers/%questionAttemptId%",e)}}async function Ut(e,t,n){const s=new Mt(t).withSession(e).withBody(n);return Object(r.f)(s)}async function Gt(e,t){const n=new Bt(t).withSession(e);return Object(r.f)(n)}class Ft extends s.g{constructor(e){super("v1/courses/%courseId%/gradebook/prepareDownload",e)}}const qt=async(e,{courseId:t},n)=>{const s=new Ft({courseId:t}).withBody(n).withSession(e);return await Object(r.f)(s)};class Ht extends s.d{constructor(e){super("webapps/partner-cloud/app/v1/providers/%providerId%/settings",e)}}async function Vt(e,t){const n=new Ht({providerId:t}).withSession(e);return Object(r.f)(n)}class Kt extends s.d{constructor(){super("/v1/passwordSettings")}}function $t(e){const t=(new Kt).withSession(e);return Object(r.f)(t)}class Wt extends s.g{constructor(){super("/v1/users")}}class zt extends s.e{constructor(e){super("v1/users/%userId%",e)}}class Qt extends s.d{constructor(e){super("v1/users/%userId%",e)}}class Yt extends s.g{constructor(e){super("v1/users/%userId%/calendarItems",e)}}class Jt extends s.d{constructor(e){super("v1/courses/%courseId%/spreview",e)}}async function Xt(e,t){const n=new Qt({userId:t}).withSession(e);return Object(r.f)(n)}async function Zt(e,t){const n=new Jt({courseId:t}).withSession(e);return Object(r.f)(n)}class en extends s.d{constructor(e){super("v1/scheduledTasks/%taskId%/",e)}}class tn extends s.g{constructor(e){super("v1/scheduledTasks/%taskId%/run",e)}validate(){return Promise.resolve()}}async function nn(e,t){const n=new en({taskId:t}).withSession(e);return Object(r.f)(n)}class sn extends s.d{constructor(){super("/v1/utilities/timeUntilBbSessionInactive"),this.headers.set("Suppress-Session-Timestamp-Update","true"),this.headers.set("Include-Session-Last-Access-Time","true")}}class on extends s.g{constructor(){super("/v1/utilities/keepBbSessionActive")}async failed(e){if(e.status===r.b.Unauthorized)throw new j.c(e.statusText,e.status,e.url)}}async function rn(e){const t=(new sn).withSession(e);return await Object(r.f)(t)}async function an(e){const t=(new on).withSession(e).withBody({});await Object(r.e)(t)}class cn extends s.d{constructor(e){super("/public/v1/attemptReceipts/%receiptId%",e)}}async function ln(e,t){const n=new cn({receiptId:t}).withSession(e);return await Object(r.f)(n)}class dn extends s.a{constructor(e){super("/public/v1/users/%userId%",e)}}class un extends s.d{constructor(){super("/public/v1/uploads/settings")}}async function pn(e){const t=(new un).withSession(e);return Object(r.f)(t)}class bn extends s.c{constructor(e){super("/public/v1/lti/domains",e)}}class mn extends s.g{constructor(){super("/public/v1/lti/domains")}}class gn extends s.c{constructor(e){super("/public/v1/lti/placements",e)}}class hn extends s.g{constructor(){super("/public/v1/lti/placements")}}function fn(e,t){const n=new bn({}).withSession(e);return t&&n.withPaging(t),Object(r.f)(n)}function On(e,t){var n,s;const o=new gn({}).withSession(e);return(null===(n=null==t?void 0:t.filter)||void 0===n?void 0:n.paging)&&o.withPaging(t.filter.paging),(null===(s=null==t?void 0:t.filter)||void 0===s?void 0:s.sort)&&o.withSort(...t.filter.sort),(null==t?void 0:t.query)&&o.withQueryParams(t.query),Object(r.f)(o)}function En(e,t){const n=(new hn).withSession(e);return n.withBody(t),Object(r.f)(n)}function yn(e,t){const n=(new mn).withSession(e);return n.withBody(t),Object(r.f)(n)}var In,Cn,vn,Sn,jn,Tn,An,_n,Rn,Nn;function wn(e){switch(e){case An.UltraAssignment:return Nn.Assignment;case An.TestLink:return Nn.Test;case An.SurveyLink:return Nn.Survey;case An.Discussion:return Nn.Discussion;case An.ClassicAssignment:return Nn.ClassicAssignment;case An.RusticiScorm:return Nn.Scorm}}!function(e){e[e.Sunday=0]="Sunday",e[e.Monday=1]="Monday",e[e.Tuesday=2]="Tuesday",e[e.Wednesday=3]="Wednesday",e[e.Thursday=4]="Thursday",e[e.Friday=5]="Friday",e[e.Saturday=6]="Saturday"}(In||(In={})),function(e){e.Enabled="0",e.SoftDelete="1",e.Disabled="2",e.DeletePending="3",e.CopyPending="4"}(Cn||(Cn={})),function(e){e.Contains="contains",e.Equals="equals",e.NotBlank="notBlank",e.StartsWith="starts"}(vn||(vn={})),function(e){e.courseContent="courseContentPicker",e.courseLink="courseLinkPicker"}(Sn||(Sn={})),function(e){e.TITLE_ASC="title(asc)",e.TITLE_DESC="title(desc)",e.CREATED_DATE_ASC="createdDate(asc)",e.CREATED_DATE_DESC="createdDate(desc)",e.MODIFIED_DATE_ASC="modifiedDate(asc)",e.MODIFIED_DATE_DESC="modifiedDate(desc)",e.STUDENT_COUNT_ASC="studentCount(asc)",e.STUDENT_COUNT_DESC="studentCount(desc)"}(jn||(jn={})),function(e){e.Ascending="asc",e.Descending="desc"}(Tn||(Tn={})),function(e){e.Attendance="resource/x-bb-attendance",e.Audio="resource/x-bb-audio",e.Blog="resource/x-bb-bloglink",e.ClassicAssignment="resource/x-bb-assignment",e.CourseLink="resource/x-bb-courselink",e.Discussion="resource/x-bb-forumlink",e.Document="resource/x-bb-document",e.ExternalLink="resource/x-bb-externallink",e.File="resource/x-bb-file",e.Folder="resource/x-bb-folder",e.LearningModule="resource/x-bb-lesson",e.Image="resource/x-bb-image",e.Journal="resource/x-bb-journallink",e.Kaltura="resource/x-osv-kaltura/mashup",e.LtiLink="resource/x-bb-blti-link",e.LtiPlacement="resource/x-bb-bltiplacement",e.Page="resource/x-bb-page",e.PartnerCloud="resource/x-bbgs-partner-cloud",e.RusticiScorm="resource/x-plugin-scormengine",e.SurveyLink="resource/x-bb-asmt-survey-link",e.TestLink="resource/x-bb-asmt-test-link",e.UltraAssignment="resource/x-bb-asmt-agn-link",e.Unknown="resource/x-bb-unknown",e.Video="resource/x-bb-video",e.Wiki="resource/x-bb-wiki"}(An||(An={})),function(e){e.Always="ALWAYS",e.Never="NEVER",e.PerQuestion="PER_QUESTION"}(_n||(_n={})),function(e){e.Assessment="Assessment",e.Section="Section",e.Item="Item"}(Rn||(Rn={})),function(e){e.Assignment="assignment",e.Survey="survey",e.Test="test",e.Discussion="discussion",e.ClassicAssignment="classicAssignment",e.Scorm="scorm"}(Nn||(Nn={}));const Dn=["bb-assessment-conflict-between-group-and-timelimit","bb-assessment-conflict-between-group-and-multiple-attempts","bb-assessment-conflict-between-group-and-secure","bb-assessment-conflict-between-group-and-enforce-due-date","bb-assessment-conflict-between-due-date-and-enforce-due-date","bb-assessment-randomize-answers-cannot-change","bb-assessment-timelimit-cannot-change"];var Ln,Pn,kn,xn,Bn,Mn,Un,Gn,Fn,qn,Hn,Vn,Kn,$n;function Wn(e){switch(e){case An.ClassicAssignment:return kn.Assignment;case An.TestLink:return kn.Test;case An.UltraAssignment:return kn.UltraAssignment;case An.SurveyLink:return kn.Survey}}!function(e){e.AttemptCompletedOrForceCompletion="bb-rest-attempt-completed-or-force-completion",e.AttemptPastDue="bb-rest-attempt-past-due-exception"}(Ln||(Ln={})),function(e){e.Group="group",e.User="user"}(Pn||(Pn={})),function(e){e.Test="Test",e.Quiz="Quiz",e.Survey="Survey",e.Assignment="Assignment",e.UltraAssignment="UltraAssignment",e.Pool="Pool"}(kn||(kn={})),function(e){e.NoneSpecified="ns",e.AfterSubmission="as",e.AfterSubmissionHideResults="ashr",e.OnSpecifiedDate="osd",e.AfterDueDate="add",e.AfterAvailEndDate="aaed",e.AfterAttemptGraded="aag",e.AfterIndividualGradeIsPosted="aiag"}(xn||(xn={})),function(e){e.IncorrectAnswers="INCORRECT_ANSWERS",e.InstructorFeedback="INSTRUCTOR_FEEDBACK",e.AllAnswers="ALL_ANSWERS",e.CorrectAnswers="CORRECT_ANSWERS",e.UserAnswers="USER_ANSWERS",e.Score="SCORE"}(Bn||(Bn={})),function(e){e.Normal="Normal",e.Exponential="Exponential"}(Mn||(Mn={})),function(e){e.Numeric="numeric",e.Percent="percent"}(Un||(Un={})),function(e){e.Decimal="Decimal",e.SignificantFigures="SigFig"}(Gn||(Gn={})),function(e){e.Contains="CONTAINS",e.Exact="EXACT",e.Matches="MATCHES"}(Fn||(Fn={})),function(e){e.Rectangle="Rectangle",e.Polygon="Polygon",e.Circle="Circle"}(qn||(qn={})),function(e){e.None="none",e.Arabic="arabic",e.Roman="roman",e.LetterUpper="letter_upper",e.LetterLower="letter_lower"}(Hn||(Hn={})),function(e){e.CloudFile="CLOUD_FILE",e.Embedded="EMBEDDED",e.File="FILE",e.Text="TEXT",e.Unknown="UNKNOWN"}(Vn||(Vn={})),function(e){e.CalculatedFormula="calculated",e.CalculatedNumeric="numeric",e.Either="eitherOr",e.Essay="essay",e.FIMB="fimb",e.Hotspot="hotspot",e.Matching="matching",e.Multiple="multipleanswer",e.PageBreak="pageBreak",e.PresentationOnly="presentation",e.QuestionBlock="questionBlock"}(Kn||(Kn={})),function(e){e.TrueFalse="true_false",e.AgreeDisagree="agree_disagree",e.RightWrong="right_wrong",e.YesNo="yes_no",e.UserEnteredLabels="user_entered_labels"}($n||($n={}));var zn,Qn,Yn,Jn,Xn,Zn,es,ts,ns,ss,os,rs,is,as,cs,ls,ds,us,ps,bs,ms,gs,hs,fs,Os,Es,ys,Is,Cs;function vs(e){return e!==Yn.EmbedOnly}function Ss(e){switch(e){case fs.noAttempt:return fs.noAttempt;case fs.attemptSubmitted:return fs.attemptSubmitted;case fs.attemptInProgress:return fs.attemptInProgress;default:return fs.allStatuses}}function js(e){switch(e){case Os.needsGrading:return Os.needsGrading;case Os.gradeNeedsPosting:return Os.gradeNeedsPosting;case Os.nothingToGrade:return Os.nothingToGrade;case Os.completed:return Os.completed;default:return Os.allStatuses}}!function(e){e.Continual="CONTINUAL",e.HardStop="HARDSTOP"}(zn||(zn={})),function(e){e.ACL="ACL",e.Date="Date_Range",e.ForcedSequence="Pre_Content",e.Grade="Grade_Range",e.GradePercentage="Grade_Range_Percentage"}(Qn||(Qn={})),function(e){e.Embed="EMBED",e.EmbedOnly="EMBED_ONLY",e.Link="LINK"}(Yn||(Yn={})),function(e){e.Visible="VISIBLE",e.Hidden="HIDDEN",e.Restricted="PARTIALLY_VISIBLE"}(Jn||(Jn={})),function(e){e.None="None",e.Started="Started",e.Completed="Completed",e.Unlocked="Unlocked"}(Xn||(Xn={})),function(e){e.Assignment="assignment",e.Attendance="attendance",e.Audio="audio",e.Blog="blog",e.CollaborativeCloud="collaborative-cloud",e.Course="course",e.Calculation="calculation",e.Discussion="discussion",e.DocumentBlank="document-blank",e.DocumentCloud="document-cloud",e.Document="document-text",e.Exam="exam",e.Folder="folder",e.FolderOpen="folder-open",e.Homework="homework",e.Journal="journal",e.LearningModule="learning-module",e.Link="link",e.LTI="lti",e.OverallGrade="overall-grade",e.Pdf="pdf",e.Photo="photo",e.Presentation="presentation",e.Quiz="quiz",e.Root="ROOT",e.Scorm="scormengine",e.Spreadsheet="spreadsheet",e.Survey="survey",e.Test="test",e.Textbook="textbook",e.Video="video",e.Zip="zip"}(Zn||(Zn={})),function(e){e.NotAttempted="NOT_ATTEMPTED",e.Abandoned="ABANDONED",e.InProgress="IN_PROGRESS",e.Suspended="SUSPENDED",e.Canceled="CANCELED",e.NeedsGrading="NEEDS_GRADING",e.Completed="COMPLETED",e.InMoreProgress="IN_MORE_PROGRESS",e.NeedsMoreGrading="NEEDS_MORE_GRADING",e.Saved="SAVED"}(es||(es={})),function(e){e.NoOverride="NO_OVERRIDE",e.FeedbackOverride="FEEDBACK_OVERRIDE",e.GradeFeedbackOverride="GRADE_FEEDBACK_OVERRIDE"}(ts||(ts={})),function(e){e.Custom="CUSTOM"}(ns||(ns={})),function(e){e.ReceiptAndAttemptExist="ReceiptAndAttemptExist",e.ReceiptExistsButAttemptDoesNot="ReceiptExistsButAttemptDoesNot",e.ReceiptExistsNoAccessToAttempt="ReceiptExistsNoAccessToAttempt",e.ReceiptExistsColumnSoftDeleted="ReceiptExistsColumnSoftDeleted"}(ss||(ss={})),function(e){e.NonCalculated="NON_CALCULATED",e.Total="TOTAL",e.Average="AVERAGE",e.WeightedTotal="WEIGHTED_TOTAL",e.MinMax="MINMAX",e.Custom="CUSTOM"}(os||(os={})),function(e){e.Comma="COMMA",e.Tab="TAB"}(rs||(rs={})),function(e){e.User="USER",e.QuestionAndUser="QUESTION_AND_USER"}(is||(is={})),function(e){e.AllAttempts="ALL",e.ValidAttempts="VALID"}(as||(as={})),function(e){e.Assignment="Assignment.name",e.Attendance="Attendance.name",e.Blog="Blog.name",e.Calculation="Calculation.name",e.Discussion="Discussion.name",e.Exam="Exam.name",e.Homework="Homework.name",e.Journal="Journal.name",e.LTI="Lti.name",e.Presentation="Presentation.name",e.Quiz="Quiz.name",e.ScormEngine="Scormengine.name",e.Survey="Survey.name",e.Test="Test.name"}(cs||(cs={})),function(e){e.GradingInProgress="GRADING_IN_PROGRESS",e.IsPosted="IS_POSTED",e.ReadyToPost="READY_TO_POST",e.NoOverride="NO_OVERRIDE"}(ls||(ls={})),function(e){e.Graded="GRADED",e.NeedsGrading="NEEDS_GRADING"}(ds||(ds={})),function(e){e.AttemptScore="a",e.None="-",e.OverrideScore="m"}(us||(us={})),function(e){e.Tab="TAB",e.Comma="COMMA"}(ps||(ps={})),function(e){e.MyDevice="MYDEVICE",e.ContentCollection="CONTENTCOLLECTION"}(bs||(bs={})),function(e){e.AllTime="ALLTIME",e.SixMonths="SIXMONTHS",e.ThirtyDays="THIRTYDAYS",e.FourteenDays="FOURTEENDAYS",e.SevenDays="SEVENDAYS",e.OneDay="ONEDAY"}(ms||(ms={})),function(e){e.All="ALL",e.ByColumns="BYCOLUMNS",e.HistoryLog="HISTORYLOG",e.HistoryLogAll="HISTORYLOGALL"}(gs||(gs={})),function(e){e.Tabular="TABULAR",e.Score="SCORE",e.Text="TEXT",e.Percent="PERCENT",e.Complete="COMPLETE"}(hs||(hs={})),function(e){e.allStatuses="allStatuses",e.noAttempt="noAttempt",e.attemptInProgress="attemptInProgress",e.attemptSubmitted="attemptSubmitted"}(fs||(fs={})),function(e){e.allStatuses="allStatuses",e.needsGrading="needsGrading",e.gradeNeedsPosting="gradeNeedsPosting",e.nothingToGrade="nothingToGrade",e.completed="completedAttempt"}(Os||(Os={})),function(e){e.Complete="Complete",e.Delete="Delete",e.Error="Error",e.InProgress="InProgress",e.Unknown="Unknown"}(Es||(Es={})),function(e){e.First="First",e.Last="Last"}(ys||(ys={})),function(e){e.Normal="Normal",e.Limited="Limited",e.Unlimited="Unlimited"}(Is||(Is={})),function(e){e.Custom="Custom",e.Unlimited="Unlimited",e.NoAccommodation="Default"}(Cs||(Cs={}));var Ts,As,_s;!function(e){e.Continuous="CONTINUOUS",e.DateRange="DATE_RANGE",e.FixedNumDays="FIXED_NUM_DAYS",e.UseTerm="USE_TERM"}(Ts||(Ts={})),function(e){e.Undecided="UNDECIDED",e.Classic="CLASSIC",e.Ultra="ULTRA",e.UltraPreview="ULTRAPREVIEW"}(As||(As={})),function(e){e.Instructor_choice="INSTRUCTOR_CHOICE",e.Choose_ultra="CHOOSE_ULTRA",e.Choose_classic="CHOOSE_CLASSIC"}(_s||(_s={}));var Rs,Ns,ws,Ds,Ls,Ps,ks,xs,Bs,Ms,Us,Gs;!function(e){e.Groups="groups",e.Members="members",e.GroupsAndMembers="groupsandmembers"}(Rs||(Rs={})),function(e){e.InvalidFileFormat="bb-group-import-file-is-not-csv",e.EmptyFile="bb-group-import-file-is-empty",e.FileNotFound="bb-group-import-file-not-found-in-given-location"}(Ns||(Ns={})),function(e){e.PERCENTAGE="PERCENTAGE",e.PERCENTAGE_RANGE="PERCENTAGE_RANGE",e.POINTS="NUMERIC",e.POINTS_RANGE="NUMERIC_RANGE"}(ws||(ws={})),function(e){e.CourseCopy="CourseCopy",e.Import="Import",e.Restore="Restore"}(Ds||(Ds={})),function(e){e.Import="IMPORT",e.Export="EXPORT",e.Archive="ARCHIVE",e.Restore="RESTORE"}(Ls||(Ls={})),function(e){e[e.System=0]="System",e[e.Course=1]="Course",e[e.Organization=2]="Organization",e[e.ContentHander=3]="ContentHander"}(Ps||(Ps={})),function(e){e.CourseRoster="course_roster"}(ks||(ks={})),function(e){e.Course="COURSE",e.System="SYSTEM"}(xs||(xs={})),function(e){e.Draft="DRAFT",e.Posted="POSTED",e.Scheduled="SCHEDULED"}(Bs||(Bs={})),function(e){e.Standard="STANDARD",e.Important="IMPORTANT",e.Urgent="URGENT"}(Ms||(Ms={})),function(e){e.CourseName="N",e.CourseId="I",e.CourseNameAndId="NI",e.CourseIdAndName="IN",e.UltraCourseIdAndName="UIN"}(Us||(Us={})),function(e){e.ClassSchedule="C",e.ExternalCourseSchedule="E",e.OfficeHours="O"}(Gs||(Gs={}));var Fs,qs,Hs,Vs;!function(e){e.Institution="INSTITUTION",e.Personal="PERSONAL"}(Fs||(Fs={})),function(e){e.Monthly="MONTHLY",e.Weekly="WEEKLY",e.Daily="DAILY"}(qs||(qs={})),function(e){e.Sunday="SU",e.Monday="MO",e.Tuesday="TU",e.Wednesday="WE",e.Thursday="TH",e.Friday="FR",e.Saturday="SA"}(Hs||(Hs={})),function(e){e.Gregorian="GREGORIAN"}(Vs||(Vs={}));var Ks,$s,Ws,zs,Qs,Ys,Js,Xs,Zs,eo,to,no,so,oo,ro,io;!function(e){e.Student="S",e.Instructor="P",e.TeachingAssistant="T",e.CourseBuilder="B",e.Grader="G",e.Guest="U",e.Facilitator="BB_FACILITATOR"}(Ks||(Ks={})),function(e){e.Course="C",e.Organization="O",e.CourseAndOrganization="B",e.None="N"}($s||($s={})),function(e){e.Teaching="TEACHING",e.Supporting="SUPPORTING",e.Taking="TAKING",e.Visiting="VISITING"}(Ws||(Ws={})),function(e){e.AccountAdmin="A",e.CourseCreator="C",e.CourseSupport="R",e.Guest="U",e.Integration="X",e.Observer="O",e.Portal="Y",e.SystemAdmin="Z",e.SystemSupport="H",e.User="N"}(zs||(zs={})),function(e){e.AccountAdmin="ACCOUNT_ADMIN",e.CourseCreator="COURSE_CREATOR",e.CourseSupport="COURSE_SUPPORT",e.Guest="GUEST",e.Integration="INTEGRATION",e.Observer="OBSERVER",e.Portal="PORTAL",e.SystemAdmin="SYSTEM_ADMIN",e.SystemSupport="SYSTEM_SUPPORT",e.User="USER",e.Default="USER",e.None="USER"}(Qs||(Qs={})),function(e){e.Waiting="WAITING",e.Assigned="ASSIGNED",e.Running="RUNNING",e.Complete="COMPLETE",e.CompleteErrors="COMPLETE_ERRORS",e.Incomplete="INCOMPLETE"}(Ys||(Ys={})),function(e){e.Copy="C",e.ContentExchange="X",e.ConvertToUltra="convertTOUltraQueuedOperation",e.AssessmentRegrade="ASSESSMENT_REGRADE",e.QuestionCopy="CopyQuestion",e.ProgressUpdateContent="courseProgressUpdateContent",e.Recycle="RecycleTask",e.DelegatedGraderDistribution="delegatedGraderDistribution",e.CloudStorageIntegrationDownload="downloadQueuedOperation",e.AssignmentExport="ExportAssignments",e.CalendarImport="calendar_import"}(Js||(Js={})),function(e){e.Given="GIVEN_NAME",e.Other="OTHER_NAME",e.Both="BOTH"}(Xs||(Xs={})),function(e){e.K8="K_8",e.HighSchool="HIGH_SCHOOL",e.Freshman="FRESHMAN",e.Sophomore="SOPHOMORE",e.Junior="JUNIOR",e.Senior="SENIOR",e.GraduateSchool="GRADUATE_SCHOOL",e.PostGraduateSchool="POST_GRADUATE_SCHOOL",e.Unknown="UNKNOWN"}(Zs||(Zs={})),function(e){e.Female="FEMALE",e.Male="MALE",e.Other="OTHER",e.Unknown="UNKNOWN"}(eo||(eo={})),function(e){e.Nobody="NOBODY",e.Classmates="CLASSMATES",e.Everyone="EVERYONE"}(to||(to={})),function(e){e.ActivityStream="ActivityStream",e.CourseList="CourseList",e.InstitutionPage="InstitutionPage"}(no||(no={})),function(e){e.Course="COURSE",e.Org="ORG"}(so||(so={})),function(e){e.Yes="Y",e.No="N"}(oo||(oo={})),function(e){e.ActivityStream="ActivityStream",e.CourseList="CourseList",e.InstitutionPage="InstitutionPage"}(ro||(ro={})),function(e){e.Waiting="WAITING",e.Assigned="ASSIGNED",e.Running="RUNNING",e.Complete="COMPLETE",e.CompleteErrors="COMPLETE_ERRORS",e.Incomplete="INCOMPLETE"}(io||(io={}));var ao;n("ICWc"),n("71td"),n("JD9L"),n("4qjI");!function(e){e.Group="GROUP",e.User="USER"}(ao||(ao={}));var co,lo,uo,po,bo,mo;!function(e){e.Approved="APPROVED",e.Pending="PENDING"}(co||(co={})),function(e){e.Approved="Approved",e.Excluded="Excluded",e.NeedsApproval="NeedsApproval"}(lo||(lo={})),function(e){e.Never="Never",e.SslOnly="SSLOnly",e.Always="Always"}(uo||(uo={})),function(e){e.Application="Application",e.ContentHandler="ContentHandler",e.ContentItemMessage="ContentItemMessage",e.System="System",e.Administrator="Administrator",e.UltraUI="UltraUI",e.BaseNavigation="BaseNavigation",e.Proctoring="Proctoring",e.CloudDocument="CloudDocument"}(po||(po={})),function(e){e.Embedded="EmbeddedCD",e.CloudCollaboration="CloudCollaborationCD"}(bo||(bo={})),function(e){e.Yes="Yes",e.No="No"}(mo||(mo={})),n.d(t,"pc",(function(){return d})),n.d(t,"oc",(function(){return u})),n.d(t,"qc",(function(){return p})),n.d(t,"db",(function(){return i})),n.d(t,"rb",(function(){return b})),n.d(t,"yc",(function(){return E})),n.d(t,"uc",(function(){return y})),n.d(t,"vc",(function(){return I})),n.d(t,"wc",(function(){return C})),n.d(t,"xc",(function(){return v})),n.d(t,"tc",(function(){return S})),n.d(t,"b",(function(){return T})),n.d(t,"g",(function(){return A})),n.d(t,"sb",(function(){return _})),n.d(t,"Bc",(function(){return L})),n.d(t,"Ac",(function(){return P})),n.d(t,"zc",(function(){return k})),n.d(t,"Cc",(function(){return x})),n.d(t,"fb",(function(){return G})),n.d(t,"eb",(function(){return F})),n.d(t,"Pc",(function(){return $})),n.d(t,"id",(function(){return W})),n.d(t,"Nc",(function(){return z})),n.d(t,"td",(function(){return Q})),n.d(t,"jd",(function(){return J})),n.d(t,"ib",(function(){return Z})),n.d(t,"tb",(function(){return te})),n.d(t,"vb",(function(){return ne})),n.d(t,"ub",(function(){return oe})),n.d(t,"Hc",(function(){return ce})),n.d(t,"Gc",(function(){return le})),n.d(t,"wb",(function(){return ue})),n.d(t,"xb",(function(){return pe})),n.d(t,"Ic",(function(){return be})),n.d(t,"gd",(function(){return Ce})),n.d(t,"Ed",(function(){return ve})),n.d(t,"mb",(function(){return _e})),n.d(t,"Mc",(function(){return Re})),n.d(t,"Dc",(function(){return Ne})),n.d(t,"Lc",(function(){return we})),n.d(t,"kb",(function(){return Se})),n.d(t,"lb",(function(){return je})),n.d(t,"Kc",(function(){return Pe})),n.d(t,"Jc",(function(){return ke})),n.d(t,"hb",(function(){return Te})),n.d(t,"Fc",(function(){return Me})),n.d(t,"Ec",(function(){return Ue})),n.d(t,"Sc",(function(){return Ke})),n.d(t,"Qc",(function(){return $e})),n.d(t,"Rc",(function(){return We})),n.d(t,"Yc",(function(){return Ze})),n.d(t,"ad",(function(){return et})),n.d(t,"lc",(function(){return Ye})),n.d(t,"cd",(function(){return ot})),n.d(t,"dd",(function(){return rt})),n.d(t,"bd",(function(){return it})),n.d(t,"sd",(function(){return Et})),n.d(t,"pd",(function(){return yt})),n.d(t,"rd",(function(){return It})),n.d(t,"od",(function(){return Ct})),n.d(t,"qd",(function(){return vt})),n.d(t,"qb",(function(){return bt})),n.d(t,"Oc",(function(){return St})),n.d(t,"Tc",(function(){return Tt})),n.d(t,"Vc",(function(){return Lt})),n.d(t,"Uc",(function(){return Pt})),n.d(t,"xd",(function(){return kt})),n.d(t,"Gd",(function(){return xt})),n.d(t,"Bd",(function(){return Ut})),n.d(t,"Cd",(function(){return Gt})),n.d(t,"Ad",(function(){return qt})),n.d(t,"vd",(function(){return Vt})),n.d(t,"wd",(function(){return $t})),n.d(t,"Id",(function(){return Xt})),n.d(t,"Fd",(function(){return Zt})),n.d(t,"md",(function(){return nn})),n.d(t,"nd",(function(){return rn})),n.d(t,"ud",(function(){return an})),n.d(t,"fd",(function(){return ln})),n.d(t,"Zc",(function(){return pn})),n.d(t,"kd",(function(){return fn})),n.d(t,"ld",(function(){return On})),n.d(t,"zd",(function(){return En})),n.d(t,"yd",(function(){return yn})),n.d(t,"a",(function(){return j.b})),n.d(t,"Yb",(function(){return j.c})),n.d(t,"H",(function(){return In})),n.d(t,"cb",(function(){return Sn})),n.d(t,"bc",(function(){return jn})),n.d(t,"cc",(function(){return Tn})),n.d(t,"Wb",(function(){return _n})),n.d(t,"c",(function(){return Rn})),n.d(t,"C",(function(){return Nn})),n.d(t,"hd",(function(){return wn})),n.d(t,"nc",(function(){return Dn})),n.d(t,"i",(function(){return Ln})),n.d(t,"h",(function(){return kn})),n.d(t,"ed",(function(){return Wn})),n.d(t,"e",(function(){return xn})),n.d(t,"f",(function(){return Bn})),n.d(t,"m",(function(){return Mn})),n.d(t,"o",(function(){return Un})),n.d(t,"n",(function(){return Gn})),n.d(t,"F",(function(){return Fn})),n.d(t,"Q",(function(){return qn})),n.d(t,"Fb",(function(){return Hn})),n.d(t,"Pb",(function(){return Vn})),n.d(t,"Qb",(function(){return Kn})),n.d(t,"hc",(function(){return $n})),n.d(t,"Dd",(function(){return"mdb-sa"})),n.d(t,"gc",(function(){return zn})),n.d(t,"Z",(function(){return Qn})),n.d(t,"t",(function(){return An})),n.d(t,"G",(function(){return Yn})),n.d(t,"Xc",(function(){return vs})),n.d(t,"w",(function(){return Jn})),n.d(t,"u",(function(){return Xn})),n.d(t,"v",(function(){return Zn})),n.d(t,"l",(function(){return es})),n.d(t,"j",(function(){return ts})),n.d(t,"Xb",(function(){return ns})),n.d(t,"k",(function(){return ss})),n.d(t,"p",(function(){return os})),n.d(t,"ob",(function(){return rs})),n.d(t,"pb",(function(){return is})),n.d(t,"nb",(function(){return as})),n.d(t,"W",(function(){return cs})),n.d(t,"Eb",(function(){return ls})),n.d(t,"J",(function(){return ds})),n.d(t,"yb",(function(){return us})),n.d(t,"M",(function(){return ps})),n.d(t,"N",(function(){return bs})),n.d(t,"L",(function(){return ms})),n.d(t,"K",(function(){return gs})),n.d(t,"ac",(function(){return hs})),n.d(t,"dc",(function(){return fs})),n.d(t,"sc",(function(){return Ss})),n.d(t,"O",(function(){return Os})),n.d(t,"rc",(function(){return js})),n.d(t,"Nb",(function(){return Es})),n.d(t,"Ob",(function(){return ys})),n.d(t,"D",(function(){return Is})),n.d(t,"fc",(function(){return Cs})),n.d(t,"Cb",(function(){return 44e5})),n.d(t,"Bb",(function(){return 100})),n.d(t,"x",(function(){return Ts})),n.d(t,"z",(function(){return As})),n.d(t,"A",(function(){return"dueDateHasPassed"})),n.d(t,"zb",(function(){return Rs})),n.d(t,"P",(function(){return Ns})),n.d(t,"Zb",(function(){return ws})),n.d(t,"jb",(function(){return Ds})),n.d(t,"gb",(function(){return Ls})),n.d(t,"Y",(function(){return ks})),n.d(t,"bb",(function(){return xs})),n.d(t,"ab",(function(){return Ms})),n.d(t,"q",(function(){return Gs})),n.d(t,"Gb",(function(){return"BYMONTHDAY"})),n.d(t,"U",(function(){return Fs})),n.d(t,"r",(function(){return qs})),n.d(t,"kc",(function(){return Hs})),n.d(t,"Vb",(function(){return"reusePolicyViolation"})),n.d(t,"Db",(function(){return"minimumAgePolicyViolation"})),n.d(t,"Ub",(function(){return"bb-blackboard-core-reuse-policy-violated"})),n.d(t,"Tb",(function(){return"bb-blackboard-core-min-age-violated"})),n.d(t,"V",(function(){return Ks})),n.d(t,"y",(function(){return Ws})),n.d(t,"X",(function(){return Qs})),n.d(t,"Rb",(function(){return Ys})),n.d(t,"Sb",(function(){return Js})),n.d(t,"E",(function(){return Zs})),n.d(t,"I",(function(){return eo})),n.d(t,"jc",(function(){return to})),n.d(t,"Hb",(function(){return so})),n.d(t,"ec",(function(){return oo})),n.d(t,"B",(function(){return ro})),n.d(t,"s",(function(){return io})),n.d(t,"T",(function(){return"bb-rest-input-too-long"})),n.d(t,"d",(function(){return ao})),n.d(t,"Ib",(function(){return","})),n.d(t,"Jb",(function(){return 100})),n.d(t,"ic",(function(){return"pronounNameXssViolation"})),n.d(t,"Lb",(function(){return co})),n.d(t,"Kb",(function(){return po})),n.d(t,"Ab",(function(){return bo})),n.d(t,"Mb",(function(){return mo})),n.d(t,"Wc",(function(){return r.f})),n.d(t,"mc",(function(){return r.d})),n.d(t,"S",(function(){return r.b})),n.d(t,"R",(function(){return r.a})),n.d(t,"Hd",(function(){return r.i}))},zSoH:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return d}));var s=n("fN3Q"),o=n("nsO7"),r=n("zGdY"),i=n("cg8W");const a=e=>void 0!==e.subType&&r.Qb.PresentationOnly===e.questionType;t.b={isPresentationOnly:a,isPageBreak:e=>r.Qb.PageBreak===e.questionType,isFileAttachment:e=>a(e)&&r.Pb.File===e.subType,isQuestionBlock:e=>r.Qb.QuestionBlock===e.questionType,createMatchingPrompt:e=>({id:i.a+s.v4(),matchingAnswerIndex:e,promptText:{rawText:"",displayText:""},reusesAnswer:!1,partialCredit:0}),createMatchingAnswer:(e=!1)=>({answerText:{rawText:"",displayText:""},isDistractor:e,ui:{id:s.v4()}}),createMultipleAnswerAnswer:e=>({id:i.a+s.v4(),answerText:{rawText:"",displayText:""},correctAnswer:e})};const c=[r.Qb.PresentationOnly,r.Qb.QuestionBlock,r.Qb.PageBreak],l=Object.values(r.Qb).filter((e=>!o.includes(c,e))).map((e=>e.toString())),d=e=>e.filter((e=>o.includes(l,e.key)))}}]);