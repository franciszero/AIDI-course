(window.webpackJsonp=window.webpackJsonp||[]).push([[68],{"+2Il":function(e,t){e.exports='<bb-modal class="notification"\n          role="alertdialog"\n          bb-translate-attrs="{\'aria-label\': \'course.outline.previewCourse.alert.modalTitle\'}"\n          modal-title-key="course.outline.previewCourse.alert.modalTitle"\n          analytics-id-tag-prefix="course.outline.previewCourse.alert">\n  <div name="modal-contents">\n    <p bb-translate="course.outline.previewCourse.alert.modalText"></p>\n  </div>\n  <button name="modal-footer-button-primary" \n          ng-click="$parent.$close()" \n          class="js-dismiss-modal button button--secondary js-secondary-button"\n          analytics-id="course.outline.previewCourse.alert.modalConfirm.button">\n    <span bb-translate="course.outline.previewCourse.alert.modalConfirm"></span>\n  </button>\n</bb-modal>'},"1Gvt":function(e,t){e.exports='<bb-modal class="js-course-status-modal-{{currentCourseStatus.toString()}} notification" modal-title-key="{{currentCourseStatus.getModalTitle()}}"\n          modal-dismiss-key="{{currentCourseStatus.getModalDismissText()}}"\n          analytics-id-tag-prefix="{{currentAnalyticsId}}">\n  <div name="modal-contents">\n    <p bb-translate="{{currentCourseStatus.getModalText()}}"></p>\n  </div>\n  <span name="modal-footer-button-primary">\n    <button ng-if="currentCourseStatus.getPrimaryButtonText()"\n            ng-click="$parent.$close(currentCourseStatus.getPrimaryButtonStatus())"\n            class="button js-primary-button js-course-status-{{currentCourseStatus.getPrimaryButtonStatus()}}"\n            analytics-id="{{currentAnalyticsId}}.primaryButton.button">\n      <span bb-translate="{{currentCourseStatus.getPrimaryButtonText()}}"></span>\n    </button>\n  </span>\n  <span name="modal-footer-button-secondary">\n    <button ng-if="currentCourseStatus.getSecondaryButtonText()"\n            ng-click="$parent.$close(currentCourseStatus.getSecondaryButtonStatus())"\n            class="button button--secondary js-secondary-button js-course-status-{{currentCourseStatus.getSecondaryButtonStatus()}}"\n            analytics-id="{{currentAnalyticsId}}.close.button">\n      <span bb-translate="{{currentCourseStatus.getSecondaryButtonText()}}"></span>\n    </button>\n  </span>\n</bb-modal>\n'},"2MQt":function(e,t,n){var s=n("ziER"),o=n("5JeM"),i=new s({id:"icon-medium-check-circle",use:"icon-medium-check-circle-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-check-circle"><circle cx="12" cy="12" r="11" stroke-width="2" /><path d="M7 12l4 4 7-8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});o.add(i);e.exports=i},"2lxm":function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return u}));var s=n("D57K"),o=n("Llzl"),i=n("pjml"),r=n("aHpC"),a=n("IbyE"),l=n("9OUN");const c="ultra.service.gradable-item-user-option",u="gradableItemUserOptionService";let d=class{constructor(e,t,n){this.$rootScope=e,this.$q=t,this.$ngRedux=n,this.subscribeToRedux()}subscribeToRedux(){const e=this.$ngRedux.connect(null,(e=>Object(l.b)({persistGradableItemUserOption:a.X.gradableItemUserOption.persistGradableItemUserOption,deleteGradableItemUserOption:a.X.gradableItemUserOption.deleteGradableItemUserOption,fetchGradableItemUserOption:a.X.gradableItemUserOption.fetchGradableItemUserOption,fetchGradableItemUserOptionCount:a.X.gradableItemUserOption.fetchGradableItemUserOptionCount,fetchGradableItemUserOptionExceptions:a.X.gradableItemUserOption.fetchGradableItemUserOptionExceptions},e)))(this);this.$rootScope.$on("$destroy",e)}updateGradableItemUserOption(e,t){return this.$q.when(this.persistGradableItemUserOption(e,t)).then((e=>e.item))}removeGradableItemUserOption(e){return this.$q.when(this.deleteGradableItemUserOption(e)).then((e=>e))}getGradableItemUserOption(e,t,n){const s={courseId:e,columnId:t},o={membershipIds:n};return this.$q.resolve(this.fetchGradableItemUserOption(s,o))}getGradableItemUserOptionExceptions(e,t,n,s){const o={courseId:e,membershipId:t},i={columnId:n,isExcludedFromCourseUserActivity:s};return this.$q.resolve(this.fetchGradableItemUserOptionExceptions(o,i))}getGradableItemUserOptionCount(e,t){const n={courseId:e,columnId:t};return this.$q.resolve(this.fetchGradableItemUserOptionCount(n,{}))}getGradableItemUserOptionByMembershipId(e,t){return a.gc.gradableItemUserOption.getGradableItemUserOptionByColumnAndMembershipId(this.$ngRedux.getState(),e,t)}getGradableItemUserOptionByUserId(e,t,n){var s;const o=null===(s=a.gc.courseMembership.getCourseMembershipsByUserIds(this.$ngRedux.getState(),t,[n])[0])||void 0===s?void 0:s.id;return a.gc.gradableItemUserOption.getGradableItemUserOptionByColumnAndMembershipId(this.$ngRedux.getState(),e,o)}};d=Object(s.a)([Object(s.c)(0,Object(r.b)("$rootScope")),Object(s.c)(1,Object(r.b)("$q")),Object(s.c)(2,Object(r.b)("$ngRedux"))],d);o.module(c,[i.N]).service(u,d)},"3YxC":function(e,t,n){var s=n("ziER"),o=n("5JeM"),i=new s({id:"icon-medium-unlock",use:"icon-medium-unlock-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-unlock"><path d="M11 16c0-.5523.4477-1 1-1v0c.5523 0 1 .4477 1 1v2c0 .5523-.4477 1-1 1v0c-.5523 0-1-.4477-1-1v-2z" stroke-width="2" /><path stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M3 11h18v12H3zM6 11V6s0-5 6-5c2.6981 0 4.1829 1.011 5 2.1239" /></symbol>'});o.add(i);e.exports=i},"3mIl":function(e,t,n){var s=n("ziER"),o=n("5JeM"),i=new s({id:"icon-small-import",use:"icon-small-import-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-import"><path d="M15 9.091V15H1V1h5.909M15 1l-9 9" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M6 7v3h3" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});o.add(i);e.exports=i},"4FqR":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var s=n("Llzl"),o=n("1ZbL"),i=n("/5AG");const r="ultra.course.content.filter.react",a={Class:i.h,renderLocalized:!0,withProvider:!0,withCurrentCourse:!0,bindingNames:["courseContentSearch","isShownInPanel"]};s.module(r,[]).component("reactCourseContentFilter",Object(o.a)(a))},"4ICS":function(e,t,n){var s=n("ziER"),o=n("5JeM"),i=new s({id:"icon-medium-question-bank",use:"icon-medium-question-bank-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-question-bank"><path stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M1 13h22v10H1zM8 5h2v2H8zM8 10h2v2H8zM8 18h8" /><path d="M4 13V1h16v12M13 5h4M13 10h4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});o.add(i);e.exports=i},"4qUd":function(e,t){e.exports='<div bb-load-bundle="components/directives/schedule-outline" class="schedule-outline">\n\n  \x3c!-- compact representation, used on /courses --\x3e\n  <div ng-if="scheduleOutlineCollection().length !== 0">\n    \x3c!-- If there is only one schedule for this course - show it. --\x3e\n    <div ng-if="scheduleOutlineCollection().length === 1">\n      <p class="location-name" ng-if="scheduleOutlineCollection()[0].location">{{scheduleOutlineCollection()[0].getTruncatedLocation(TRUNCATION_LOCATION_COURSE_CARD)}}</p>\n      <p class="schedule">\n        <span ng-switch="scheduleOutlineCollection()[0].recurRules.freq">\n          <span ng-switch-when="WEEKLY">{{scheduleOutline.getWeeklyRepeatLabel(scheduleOutlineCollection()[0])}}</span>\n          <span ng-switch-when="MONTHLY">\n            <span bb-translate>scheduleOutline.monthlyEvent</span>\n            <span bb-translate ng-if="scheduleOutline.getNextEventDate(scheduleOutlineCollection()[0])">scheduleOutline.nextMonthlyEvent</span>\n            <span ng-if="scheduleOutline.getNextEventDate(scheduleOutlineCollection()[0] )" bb-date="scheduleOutline.getNextEventDate(scheduleOutlineCollection()[0])" format="short" auto-update="true"></span>\n          </span>\n          <span ng-switch-when="DAILY" bb-translate>scheduleOutline.dailyEvent</span>\n        </span>\n        <span ng-if="scheduleOutlineCollection()[0].isAllDayEvent()" bb-translate>scheduleOutline.allDay</span>\n        <span ng-if="!scheduleOutlineCollection()[0].isAllDayEvent()"><span bb-time="{{scheduleOutlineCollection()[0].startDate}}" auto-update="true" format="Short"></span> - <span bb-time="{{scheduleOutlineCollection()[0].endDate}}" auto-update="true" format="Short"></span></span>\n      </p>\n    </div>\n\n    \x3c!-- if there is more than one schedule for this course - just tell how many schedules available. --\x3e\n    <div ng-if="scheduleOutlineCollection().length > 1">\n      <span bb-translate translate-values="{count: scheduleOutlineCollection().length}">scheduleOutline.moreMeetingsCompact.plural</span>\n    </div>\n  </div>\n</div>\n'},"82Nl":function(e,t,n){var s=n("ziER"),o=n("5JeM"),i=new s({id:"icon-medium-location",use:"icon-medium-location-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-location"><path d="M20 9c0 4.4183-8 14-8 14S4 13.4183 4 9s3.5817-8 8-8 8 3.5817 8 8z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><circle cx="12" cy="9" r="4" stroke-width="2" /></symbol>'});o.add(i);e.exports=i},"8gSl":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var s=n("zYa8"),o=n("SxMs");const i="ultra.components.directives.bbUiIcon.large.Post";Object(s.a)(o.a,i,"bbUiIconLargePost")},A4FN:function(e,t,n){var s=n("ziER"),o=n("5JeM"),i=new s({id:"icon-small-disable",use:"icon-small-disable-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-disable"><path d="M1 8c0-3.866 3.134-7 7-7v0c3.866 0 7 3.134 7 7v0c0 3.866-3.134 7-7 7v0c-3.866 0-7-3.134-7-7v0zM12.5 3.5l-9 9" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});o.add(i);e.exports=i},AYCo:function(e,t,n){var s=n("ziER"),o=n("5JeM"),i=new s({id:"icon-small-link",use:"icon-small-link-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-link"><rect x=".224" y="3.534" width="4.681" height="7.022" rx="2" transform="rotate(-45 .224 3.534)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><rect x="7.5" y="10.81" width="4.681" height="7.022" rx="2" transform="rotate(-45 7.5 10.81)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M5 5l6 6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});o.add(i);e.exports=i},Ao2D:function(e,t,n){var s=n("ziER"),o=n("5JeM"),i=new s({id:"icon-small-reports",use:"icon-small-reports-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-reports"><path d="M5 7v5h6V7H5z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M2 1h9l3 3v11H2V1z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M11 1v3h3" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});o.add(i);e.exports=i},CM4G:function(e,t,n){var s=n("ziER"),o=n("5JeM"),i=new s({id:"icon-small-video",use:"icon-small-video-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-video"><g clip-path="url(#icon-small-video_clip0)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M1 1h14v14H1zM4 1v14M12 1v14M0 4h4M12 4h4M0 8h4M12 8h4M0 12h4M12 12h4" /><path d="M7 7v2l2-1-2-1z" /></g><defs><clipPath id="icon-small-video_clip0"><path fill="#fff" d="M0 0h16v16H0z" /></clipPath></defs></symbol>'});o.add(i);e.exports=i},DlD1:function(e,t){e.exports='<bb-modal class="notification"\n          modal-title-key="course.outline.alertCourseCompletion.modalTitle"\n          analytics-id-tag-prefix="course.outline.alertCourseCompletion">\n  <div name="modal-contents">\n    <p bb-translate="course.outline.alertCourseCompletion.modalText"></p>\n  </div>\n  <button name="modal-footer-button-primary" \n          id="complete-course" \n          ng-click="$parent.$close()" \n          class="button js-primary-button"\n          analytics-id="course.outline.alertCourseCompletion.makeComplete.button">\n    <span bb-translate="course.outline.alertCourseCompletion.makeComplete"></span>\n  </button>\n  <button name="modal-footer-button-secondary" \n          ng-click="$parent.$dismiss()" \n          class="button button--secondary js-secondary-button"\n          analytics-id="course.outline.alertCourseCompletion.back.button">\n    <span bb-translate="global.cancelTakeMeBack"></span>\n  </button>\n</bb-modal>'},Dt14:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r}));var s=n("Llzl"),o=n("pjml");const i="ultra.services.collab",r="collab";class a{constructor(e,t,n,s,o,i){this.$compile=e,this.$rootScope=t,this.$timeout=n,this.CourseModel=s,this.CollabUltraModel=o,this.$sce=i}joinVirtualClassroom(e,t){const n=window.open();this.getVirtualClassroomLaunchUrl(e,t).then((e=>{n.location.href=e}),(e=>{n.close()}))}getCollabSessions(e){return this.CourseModel.$new(e).collab.getVirtualClassroomSession()}getVirtualClassroomLaunchUrl(e,t){return this.CourseModel.$new(e).collab.sessions.$new(t).getLaunchUrl()}}a.$inject=["$compile","$rootScope","$timeout",o.m.serviceName,o.j.serviceName,"$sce"],s.module(i,[o.N]).service(r,a)},FFRk:function(e,t,n){var s=n("ziER"),o=n("5JeM"),i=new s({id:"icon-medium-lock",use:"icon-medium-lock-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-lock"><path d="M11 16c0-.5523.4477-1 1-1v0c.5523 0 1 .4477 1 1v2c0 .5523-.4477 1-1 1v0c-.5523 0-1-.4477-1-1v-2z" stroke-width="2" /><path stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M3 11h18v12H3z" /><path d="M6 11V6s0-5 6-5 6 5 6 5v5" stroke-width="2" /></symbol>'});o.add(i);e.exports=i},GaeZ:function(e,t){e.exports='<bb-modal class="notification js-dismiss-modal"\n          role="alertdialog"\n          modal-title-key="{{moveErrorTitleKey}}"\n          analytics-id-tag-prefix="course.outline.moveErrorAlert">\n    <div name="modal-contents">\n        <p bb-translate="{{moveErrorTextKey}}"></p>\n    </div>\n    <button name="modal-footer-button-primary" \n            ng-click="$parent.$close()" \n            class="js-dismiss-modal button button--secondary js-secondary-button"\n            analytics-id="global.ok.button">\n      <span bb-translate="global.ok"></span>\n    </button>\n</bb-modal>'},GbCx:function(e,t,n){},IQvf:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var s=n("Llzl"),o=n("0JpG"),i=n("1ZbL"),r=n("AuQm");const a="ultra.components.directives.filePropertyDialog",l={Class:r.o,renderLocalized:!0,withProvider:!0,attributes:["analyticsId"],bindingNames:["file","hidden","supportsInlineDocumentRender","canProvideDescription","onCancel","onSave"]};s.module(a,[o.moduleName]).component("bbFilePropertyDialog",Object(i.a)(l))},IiJs:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r}));var s=n("Llzl"),o=n("pjml");const i="ultra.services.collabUltra",r="collabUltra";class a{constructor(e,t,n,s,o,i,r){this.$q=e,this.$compile=t,this.$rootScope=n,this.$timeout=s,this.CourseModel=o,this.CollabUltraModel=i,this.$sce=r}getCollabB2Info(){return this.collabB2InfoPromise=this.collabB2InfoPromise||this.CollabUltraModel.$build().getCollabUltraInfo()}getAllCollabSessions(e){return this.CourseModel.$new(e).collabUltra.getAllCollabSessions()}enableCourseRoom(e,t){return this.CourseModel.$new(e).collabUltra.enableCourseRoom(t)}disableCourseRoom(e,t){return this.CourseModel.$new(e).collabUltra.disableCourseRoom(t)}getLaunchUrl(e,t){return this.CourseModel.$new(e).collabUltra.sessions.$new(t).getLaunchUrl()}getCourseCollab(e){return this.CourseModel.$new(e).collabUltra.getCourseCollabInfo()}launchDiscussionSession(e,t,n){return this.CourseModel.$new(e).collabUltra.launchDiscussionSession(t,n)}getCollabSessionStatus(e,t){return this.getCollabB2Info().then((t=>200===t.$response.status?this.CourseModel.$new(e).collabUltra.sessions.$fetch().$allow([403,500,504]).$asPromise():this.$q.reject())).then((n=>200===n.$response.status?this.CourseModel.$new(e).groups.$new(t).collabSession.$fetch({expand:"sessionInstances"}).$allow(["400-599"]).$asPromise().then((e=>e.filter((e=>e.sessionInstances&&e.sessionInstances.length>0)).length>0)):this.$q.when(null)),(()=>this.$q.when(null)))}}a.$inject=["$q","$compile","$rootScope","$timeout",o.m.serviceName,o.j.serviceName,"$sce"];s.module(i,[o.N]).service(r,a)},Q3wm:function(e,t,n){var s=n("ziER"),o=n("5JeM"),i=new s({id:"icon-medium-attendance",use:"icon-medium-attendance-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-attendance"><path d="M14 3h7v20H3V3h7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><circle cx="12" cy="3" r="2" stroke-width="2" /><path d="M7 16l3 3M7 19l3-3M7 12l1 1 2-2M10 3C6 3 6 8 6 8h12s0-5-4-5M13 12h5M13 17h5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});o.add(i);e.exports=i},Qile:function(e,t,n){"use strict";n.r(t);n("lGua"),n("AYCo"),n("CM4G"),n("KXuk"),n("0Y4C"),n("A4FN"),n("3mIl"),n("Ybms"),n("Ao2D"),n("6BRP"),n("xwlO"),n("SHbF"),n("Q3wm"),n("uHYt"),n("JbSi"),n("DUMb"),n("FFRk"),n("Ycix"),n("haDg"),n("3YxC"),n("67oV"),n("pNbS"),n("b8rY"),n("pPNb"),n("4ICS"),n("2MQt");var s=n("Llzl"),o=n("kxl5"),i=n("D57K"),r=n("m3mx"),a=n("nmzr"),l=n("0JpG"),c=n("TnpK"),u=n("Qbdf"),d=n("X455"),h=n("OaxLs"),p=n("go4a"),m=n("yC9S");const b="ultra.course.announcement-slide",g=angular.module(b,[c.b]);let v=class{constructor(e,t,n,s,o,i,r,l){this.$element=e,this.$ngRedux=t,this.$scope=n,this._bbLocalize=s,this.contextCourse=o,this.contextCourseMembership=i,this.streamEntryLoader=r,this.ultraState=l,this.onOpenAllAnnouncements=()=>{this.ultraState.goPeekState(a.a.ANNOUNCEMENTS_LIST)},this.openAnnouncementDetail=e=>{this.ultraState.goPeekState(a.a.ANNOUNCEMENT_DETAIL,{courseId:this.contextCourse.courseId,announcementId:e,mode:"view"})},this.fetchAnnouncementSlides=()=>{const e=this.contextCourse.courseId;return this.streamEntryLoader.getAllEntries().then((t=>{const n=[];return t.forEach((t=>{var s;e===t.courseId&&"announcement"===t.icon&&t.title&&t.title.trim().length>0&&n.push({id:t.body.content.sourceId,title:t.title,body:{rawText:t.body.content.fullText},isDraft:!1,startDateRestriction:null!==(s=t.notificationStartDate)&&void 0!==s?s:t.notificationCreationDate,courseId:e,sourceEntry:t})})),n}))},this.dismissAnnouncementItem=e=>e.remove().then((()=>{this.streamEntryLoader.deleteEntries([e.id]),this.streamEntryLoader.refreshEntries(!0)})),this.$scope.announcementSlide=this}$postLink(){r.b.renderAnnouncementSlide(this.$element[0],this.$ngRedux,this._bbLocalize.getLocale(this.$scope),this._bbLocalize.intl,this._bbLocalize.frmt,this._bbLocalize.isRTL(this.$scope),p.a(this.contextCourseMembership.courseMembership),this.fetchAnnouncementSlides,this.onOpenAllAnnouncements,this.openAnnouncementDetail,this.dismissAnnouncementItem)}$onDestroy(){r.b.destroyAnnouncementSlide(this.$element[0])}};v.$inject=["$element","$ngRedux","$scope",l.serviceName,u.e,d.d,h.d,c.d],v=Object(i.a)([Object(m.a)({module:g,componentName:"announcementSlide",template:'<div class="announcement-slide"></div>'})],v);var C=n("TB6y"),f=n("zYa8"),y=n("YgGX");const k="ultra.components.directives.bbUiIcon.medium.CourseComplete";Object(f.a)(y.a,k,"bbUiIconMediumCourseComplete");var O=n("XQG1");const S="ultra.components.directives.bbUiIcon.medium.Image";Object(f.a)(O.a,S,"bbUiIconMediumImage");var w=n("7pcG"),I=n("Vsv2"),x=n("Dt14"),E=n("IiJs"),P=n("e7Kn"),j=n("Fvsw"),$=n("ZzN+"),A=n("1ZbL"),T=n("/5AG");const M="ultra.features.course.course-overview.course-banner",L={Class:T.g,bindingNames:["bannerUrl","onEditBanner","bannerAltText"],renderLocalized:!0};s.module(M,[]).component("bbCourseBanner",Object(A.a)(L));var N=n("YXyV"),D=n("4FqR"),R=n("bMxM");const B="ultra.course.content.header.react",U={Class:T.i,renderLocalized:!0,withProvider:!0,withCurrentCourse:!0,withTransitScope:!0,bindingNames:["courseContentSearch","courseOutlineIsEmpty","shouldShowOverflowMenu","canAccessBatchEdit","hasCurrentCopyDetailsErrors","openExportModal","openCopyDetailsPanel","childrenRefresher","isLoading"]};s.module(B,[l.moduleName,R.a]).component("reactCourseContentHeader",Object(A.a)(U));var z,G=n("rj+/"),F=n("psbg"),_=n("m+3A"),V=n("AI52"),K=n("tcaZ"),q=n("2lxm"),W=n("0+Qs"),H=n("pjml"),Y=n("07uq"),J=(n("3Yz5"),n("12mu")),X=n("nYZ0"),Q=n("KtUo");!function(e){e.AssignmentDue="AS:DUE",e.AssignmentOverdue="AS:OVERDUE",e.UltraAssignmentDue="UA:DUE",e.UltraAssignmentOverdue="UA:OVERDUE"}(z||(z={}));var Z,ee=function(e,t,n){return e.filter((function(e){if(t)return z.AssignmentOverdue===e.type||z.UltraAssignmentOverdue===e.type;const s=e.contextualDate||e.notificationCreationDate;return s&&0===Q.a(s,n)&&(z.AssignmentDue===e.type||z.UltraAssignmentDue===e.type)}))};!function(e){e.TestDue="TE:DUE",e.TestOverdue="TE:OVERDUE"}(Z||(Z={}));var te,ne=function(e,t,n){return e.filter((function(e){if(t)return Z.TestOverdue===e.type;const s=e.contextualDate||e.notificationCreationDate;return s&&0===Q.a(s,n)&&Z.TestDue===e.type}))};!function(e){e.Calendar="bb_calendar"}(te||(te={}));var se,oe=function(e,t){return e.filter((function(e){return te.Calendar===e.type&&e.body&&e.body.content&&e.body.content.eventStartDate>=t}))};!function(e){e.couseAnnouncement="AN:AN_AVAIL"}(se||(se={}));var ie,re=function(e){return e.filter((function(e){return e.isNew&&se.couseAnnouncement===e.type}))},ae=n("wgY5");!function(e){e.Message="bb_message"}(ie||(ie={}));var le=function(e,t,n){const s=ae(t).subtract(14,"day").toDate();return e.filter((function(e){const t=Q.c(e);return t>s&&t>n&&ie.Message===e.type&&e.isImportant}))};const ce="ultra.service.notice.loader",ue="noticeEntryLoader";class de{constructor(e,t,n){this.context=e,this.streamEntryLoader=t,this.content=n,this.noticeEntries=[]}clearNoticeEntries(){this.noticeEntries=[]}loadNoticeEntries(e,t){return this.clearNoticeEntries(),this.streamEntryLoader.getAllEntries().then((n=>this.noticeEntriesHandler(n,e,t)))}_filterEntries(e,t,n,s){switch(t){case 0:return re(e);case 1:return ee(e,!0);case 2:return ne(e,!0);case 3:return ee(e,!1,n);case 4:return ne(e,!1,n);case 5:return oe(e,n);case 6:return le(e,n,s);default:return[]}}noticeEntriesHandler(e,t,n){const s=e.filter((e=>t===e.courseId));if(s.length>0){const e=this.context.getServerTime(),t=new Array(de.MAX_TYPES+1);let o=de.NOTICE_SHOW_MAX_LENGTH,i=0;for(;i<=de.MAX_TYPES&&o>0;i++)t[i]=this._filterEntries(s,i,e,n),t[i].length>0&&(o-=1,t[i].length>1&&t[i].sort(((e,t)=>(e.contextualDate||e.notificationCreationDate)-(t.contextualDate||t.notificationCreationDate))));t[0].length>1&&(t[0]=t[0].reverse());for(let e=0;e<i;e++)t[e].length>0&&this.noticeEntries.push(t[e][0]);o=de.NOTICE_SHOW_MAX_LENGTH-this.noticeEntries.length;for(let e=0;e<i&&o>0;e++)for(let n=1;n<t[e].length&&o>0;n++)this.noticeEntries.push(t[e][n]),o-=1;return this.noticeEntries.forEach((e=>e.title=this.content.truncateDescription(e.title))),this.noticeEntries}}}de.NOTICE_SHOW_MAX_LENGTH=3,de.MAX_TYPES=6,de.$inject=[j.b,h.d,X.f];s.module(ce,[j.a,h.c,X.d]).service(ue,de);var he=n("lHMO"),pe=n("aHpC"),me=n("mCEN"),be=n("fnCh"),ge=n("m4m5"),ve=n("8gSl"),Ce=n("hBzJ");const fe="ultra.directives.notice",ye="components.directives.notice.",ke="lastShow.date";let Oe=class{constructor(e,t,n,s){this.scope=e,this.$modal=t,this.noticeService=n,this.bbContext=s,this.modalDismiss=()=>{this.modalInstance.dismiss()},this.today=ae(s.getServerTime()),this.bbContext.getPreference(ye+ke+e.courseId.replace(/\_/g,"."),null).then((t=>{t.value&&!ae(t.value).isBefore(this.today,"days")||this.noticeService.loadNoticeEntries(e.courseId,t.value&&ae(t.value).toDate()).then((t=>{t&&t.length>0&&this.bbContext.setPreference(ye+ke+e.courseId.replace(/\_/g,"."),s.getServerTime().toISOString()).then((()=>{this.modalInstance=this.$modal.open({template:Ce,scope:this.scope,resolve:{translations:[l.serviceName,e=>e.loadBundle("components/directives/notice")]}})}))}))}))}getNotices(){return this.noticeService.noticeEntries}};Oe=Object(i.a)([Object(i.c)(0,Object(pe.b)("scope")),Object(i.c)(1,Object(pe.b)("$modal")),Object(i.c)(2,Object(pe.b)(ue)),Object(i.c)(3,Object(pe.b)(j.b))],Oe);let Se=class{constructor(e,t,n,s){this.$injector=e,this.$q=t,this.$modal=n,this.bbLocalize=s,this.restrict="E",this.scope={courseId:"@",bbNoticeClass:"@?"},this.link=e=>{this.bbLocalize.loadBundle("features/base/stream/base-stream"),e.notice=this.$injector.instantiate(Oe,{$q:this.$q,scope:e,$modal:this.$modal})}}};Se=Object(i.a)([Object(i.c)(0,Object(pe.b)("$injector")),Object(i.c)(1,Object(pe.b)("$q")),Object(i.c)(2,Object(pe.b)(J.b)),Object(i.c)(3,Object(pe.b)(l.serviceName))],Se),s.module(fe,[j.a,l.moduleName,J.a,he.a,ce,me.a,be.a,ge.a,ve.a]).directive("bbNotice",["$injector",e=>e.instantiate(Se)]);var we,Ie=n("JNtI"),xe=n("3FFP"),Ee=n("zByx"),Pe=n("+e2k"),je=n("lEL+"),$e=n("hkqm"),Ae=n("1zDl"),Te=n("+brj"),Me=n("ZzYr"),Le=n("cs5G"),Ne=n("ERkP"),De=n("C+e0"),Re=n("myse"),Be=n("bAwe");!function(e){e[e.OPEN=0]="OPEN",e[e.SAVING=1]="SAVING",e[e.CANCELLING=2]="CANCELLING",e[e.CLOSED_SAVING=3]="CLOSED_SAVING",e[e.CLOSED=4]="CLOSED"}(we||(we={}));const Ue=e=>e===we.CLOSED_SAVING||e===we.CLOSED,ze=({analyticsId:e,children:t,className:n,isDirtyOnCancel:s,isDirtyOnSave:o,onCancelled:i,onSaved:r,panelStrings:a,primaryButtonProps:l,CustomModal:c})=>{var u;const{onPanelDismissed:d,panelState:h,setPanelState:p}=((e,t)=>{const[n,s]=Ne.useState(we.OPEN);return{onPanelDismissed:Ne.useCallback((()=>{n===we.CLOSED_SAVING?t():e()}),[e,t,n]),panelState:n,setPanelState:s}})(i,r),{setIsConfirmationModalOpen:m,ConfirmationModal:b}=((e,t,n)=>{const[s,o]=Ne.useState(!1),i=Ne.useCallback((()=>{n(we.OPEN),o(!1)}),[o,n]),r=Ne.useCallback((()=>{o(!1),t!==we.SAVING?n(we.CLOSED):n(we.CLOSED_SAVING)}),[t,o,n]),a=Ne.createElement(e,{show:s,onStay:i,onProceed:r});return{setIsConfirmationModalOpen:o,ConfirmationModal:a}})(c,h,p),g=Ne.useCallback((()=>{if(o&&o())return p(we.SAVING),void m(!0);p(we.CLOSED_SAVING)}),[o,m,p]),v=Ne.useCallback((()=>{if(!Ue(h))return s&&s()?(p(we.CANCELLING),void m(!0)):void p(we.CLOSED)}),[s,h,m,p]);return Ne.createElement(Be.a,{type:Be.d.peek,isOpen:!Ue(h),onDismiss:v,onDismissed:d,analyticsId:e,className:n},Ne.createElement(Be.c,{type:Be.d.peek,analyticsId:`${e}.header`,title:a.title}),t,b,Ne.createElement(Be.b,{primaryButtonProps:{onClick:g,text:a.saveButton,disabled:null!==(u=null==l?void 0:l.disabled)&&void 0!==u&&u},secondaryButtonProps:{onClick:v,text:a.cancelButton},analyticsId:`${e}.footer`}))};var Ge=n("GuFu"),Fe=n("IbyE"),_e=n("uDfI");const Ve="ultra.features.course.outline.course-progress-configuration-panel",Ke={Class:Object(De.a)((({courseId:e,localize:t,onDismissed:n})=>{const s=Object(_e.d)(),o=Object(Ge.k)(e),i=Object(Ge.e)(e),r=Object(Ge.x)(e,T.s.ModifyConfiguration),[a,l]=Ne.useState(o);Ne.useEffect((()=>{l(o)}),[o]);const c=Ne.useCallback((()=>!a.progressTrackingEnabled&&a.progressTrackingEnabled!==o.progressTrackingEnabled),[a,o]),u=Ne.useCallback((()=>{s(Fe.X.courseProgress.persistCourseProgress(a,e)),n()}),[e,a,s,n]),d=()=>!!r&&(!i||!Object(Fe.Nb)(i));return Ne.createElement(Re.AnalyticsContext,{courseProgressConfiguration:a},Ne.createElement(ze,{analyticsId:"features.course.outline.course-progress-configuration-panel",className:"js-course-progress-configuration-panel",isDirtyOnSave:c,onCancelled:n,onSaved:u,panelStrings:{title:t.translate("course.outline.courseProgressConfiguration.title"),saveButton:t.translate("course.outline.courseProgressConfiguration.panel.save"),cancelButton:t.translate("course.outline.courseProgressConfiguration.panel.cancel")},primaryButtonProps:{disabled:!d()},CustomModal:T.r},a&&Ne.createElement(T.q,{disabled:!d(),courseProgressConfiguration:a,onCourseProgressConfigurationChanged:e=>{l(e)}})))})),bindingNames:["courseId","onDismissed"],renderLocalized:!0,withProvider:!0};s.module(Ve,[l.moduleName]).component("bbCourseProgressConfigurationPanel",Object(A.a)(Ke));var qe=n("eQBN");const We="ultra.react.integration.registrationPortalHost",He={Class:n("v6Sp").f,bindingNames:["selector","portalType","portals"],renderLocalized:!0,withThemeProvider:!1,withErrorModalBoundary:!1};s.module(We,[]).component("bbRegistrationPortalHost",Object(A.a)(He));const Ye="ultra.features.course.outline.course-progress-ftue",Je={Class:T.t,bindingNames:[],renderLocalized:!0,withThemeProvider:!0,withProvider:!0};s.module(Ye,[l.moduleName]).component("bbCourseProgressFtue",Object(A.a)(Je));const Xe="ultra.features.course.courseInstructors",Qe={Class:T.m,bindingNames:["currentUserId","courseId","isOrganization","isCourseOpen","canCurrentUserSendMessage","isStudentPreview"],renderLocalized:!0,withProvider:!0};s.module(Xe,[l.moduleName]).component("bbCourseInstructors",Object(A.a)(Qe));const Ze="ultra.features.course.courseSchedule",et={Class:T.v,bindingNames:["courseId","courseSchedule","getNextEventForMonthlyRepeat","getNextEventForDailyRepeat","getNextEventForWeeklyRepeat","isStudentPreview"],renderLocalized:!0,withProvider:!0};s.module(Ze,[l.moduleName]).component("bbCourseSchedule",Object(A.a)(et));var tt=n("3+vU"),nt=n("N/2L"),st=n("IQvf");const ot="ultra.features.course.courseOverview.detailsAndActions.header",it={Class:T.l,bindingNames:["isStudentPreview","courseId","isExpanded","setIsExpanded"],renderLocalized:!0,withProvider:!0};s.module(ot,[l.moduleName]).component("bbCourseOverviewDetailsAndActionsHeader",Object(A.a)(it));var rt=n("gkef"),at=n("rKkA"),lt=n("kkIh");n.d(t,"moduleName",(function(){return ct})),n.d(t,"controllerName",(function(){return ut})),n.d(t,"template",(function(){return at}));const ct="ultra.course.contents",ut=lt.b;s.module(ct,[o.a,b,k,S,w.a,I.a,x.a,E.a,j.a,$.a,M,N.a,D.a,B,G.a,F.a,V.a,_.moduleName,ot,Ve,Ze,P.a,u.b,K.a,W.a,H.N,Y.a,fe,Ie.b,xe.b,Ee.a,Pe.a,je.a,$e.a,c.b,C.a,Ae.a,Te.b,Me.a,Le.a,We,qe.b,Xe,Ve,Ye,q.a,tt.a,nt.moduleName,st.a,rt.a]).controller(lt.b,lt.a)},XN3q:function(e,t){e.exports='<bb-modal id="notification-modal"\n          class="notification"\n          modal-title-key="{{courseOutline.exportModalTitleKey}}"\n          analytics-id-tag-prefix="course.export.modal.startArchive">\n  <div name="modal-contents">\n    <p bb-translate="course.export.modal.modalText" course-org-token-resolver></p>\n  </div>\n  <button name="modal-footer-button-primary" \n          class="close-modal-export js-export-without-student-data button js-primary-button" \n          ng-click="courseOutline.triggerCourseExport(false)"\n          analytics-id="course.export.modal.startExport.button">\n    <span bb-translate="course.export.modal.startExport"></span>\n  </button>\n  <button name="modal-footer-button-secondary" \n          class="close-modal-export js-export-with-student-data button button--secondary js-secondary-button" \n          ng-click="courseOutline.triggerCourseExport(true)"\n          analytics-id="course.export.modal.startArchive.button">\n    <span bb-translate="course.export.modal.startArchive"></span>\n  </button>\n</bb-modal>'},"Z+Mv":function(e,t,n){"use strict";var s=n("ERkP"),o=n("TT9l");const i=(e,t)=>{s.useEffect((()=>{if(!e)return;const n=()=>t(e);return e.addEventListener("banner-resize",n),()=>e.removeEventListener("banner-resize",n)}),[e,t])};t.a=()=>{const[e,t]=s.useState(void 0),[n,r]=s.useState(void 0);return s.useEffect((()=>{const e=o.a.watchBanner((e=>r(e)));return()=>{e()}}),[]),i(n,(e=>t(e.clientHeight))),s.useEffect((()=>{t(n&&n.clientHeight)}),[n]),e}},b8rY:function(e,t,n){var s=n("ziER"),o=n("5JeM"),i=new s({id:"icon-medium-default-conversion-exceptions",use:"icon-medium-default-conversion-exceptions-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-default-conversion-exceptions"><path d="M12.75 18.5a.75.75 0 11-1.5 0 .75.75 0 011.5 0z" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round" /><path d="M12 15l-.5-10h1L12 15zM12 23C5.9249 23 1 18.0751 1 12c0-2.923 1.1402-5.5799 3-7.5499M12 1c6.0751 0 11 4.9249 11 11 0 2.8985-1.121 5.5351-2.9532 7.5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M1 5l3-1v3M23 19l-3 1v-3" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});o.add(i);e.exports=i},bAwe:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return c})),n.d(t,"d",(function(){return u}));var s=n("ERkP"),o=n("MC1S"),i=n("Z+Mv"),r=n("C+e0");const a=Object(r.a)((e=>{var t;const n=Object(i.a)(),r=null!==(t=e.closeButtonAriaLabel)&&void 0!==t?t:e.localize.translate("global.close");return s.createElement(o.BbPanel,{...e,closeButtonAriaLabel:r,heightOffset:n||0},e.children)})),l=o.BbPanelHeader,c=o.BbPanelFooter,u=o.BbPanelType},fnCh:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var s=n("zYa8"),o=n("xwJZ");const i="ultra.components.directives.bbUiIcon.large.Grades";Object(s.a)(o.a,i,"bbUiIconLargeGrades")},h1qV:function(e,t){e.exports='<react-course-content-outline\n  contents="$ctrl.contents"\n  class="react-container"\n  parent-folder="$ctrl.parentFolder"\n  load-more-content="$ctrl.loadMoreContentWrapper"\n  create-file-content="$ctrl.createFileContent"\n  create-empty-folder="$ctrl.createEmptyFolder"\n  delete-content-item="$ctrl.deleteContentItem"\n  show-content-import-progress="$ctrl.showContentImportProgress"\n  data-no-angulartics-click\n  move-content="$ctrl.moveContent"\n></react-course-content-outline>\n'},hBzJ:function(e,t){e.exports='<bb-modal class="notice notification {{bbNoticeClass}}"\n          modal-title-key="components.directives.notice.modalTitle"\n          analytics-id-tag-prefix="components.directives.notice">\n  <div name="modal-contents">\n    <ul class="notifications" ng-repeat="item in notice.getNotices()">\n      <li class="element-card">\n        <bb-avatar ng-if="!!(item.entrySpecificData && item.entrySpecificData.streamUser)"\n                   user="item.entrySpecificData.streamUser" auto-update="true"></bb-avatar>\n        <div ng-switch="item.icon" ng-if="!(item.entrySpecificData && item.entrySpecificData.streamUser)" class="element-image">\n          <bb-ui-icon-large-grades ng-switch-when="grades" color="primary"></bb-ui-icon-large-grades>\n          <bb-ui-icon-large-message ng-switch-when="message" color="primary"></bb-ui-icon-large-message>\n          <bb-ui-icon-large-post ng-switch-when="post" color="primary"></bb-ui-icon-large-post>\n          <bb-ui-content-icon ng-switch-default icon="item.icon" color="primary"></bb-ui-content-icon>\n        </div>\n\n        <div class="element-details" >\n          <div class="context"></div>\n          <div class="name">\n            <ng-switch on="(item.body.stateRef && \'linkToPeekState\') ||\n                     (item.body.externalRef && \'linkToExternalUrl\') || \'doNotLink\'">\n              <a ng-switch-when="linkToPeekState"\n                 ng-click="notice.modalDismiss()"\n                 bb-peek-sref="{{item.body.stateRef}}"\n                 ng-bind-html="item.title"\n                 analytics-id="components.directives.notice.peek.state.link"></a>\n              <a ng-switch-when="linkToExternalUrl" ng-click="notice.modalDismiss()"\n                 target="{{item.body.externalRef.target ? item.body.externalRef.target : _self}}"\n                 ng-bind-html="item.title"\n                 ng-href="{{item.body.externalRef.href}}"\n                 analytics-id="components.directives.notice.external.url.link"></a>\n              <span ng-switch-when="doNotLink" ng-bind-html="item.title"></span>\n            </ng-switch>\n          </div>\n          <div class="content">\n            <bb-stream-entry-body type="item.body.type" content="item.body.content"></bb-stream-entry-body>\n          </div>\n        </div>\n      </li>\n    </ul>\n  </div>\n  <button name="modal-footer-button-primary"\n          class="button dismiss-message js-primary-button"\n          ng-click="notice.modalDismiss()"\n          analytics-id="components.directives.notice.dismiss">\n    <bb-translate>components.directives.notice.dismiss</bb-translate>\n  </button>\n</bb-modal>\n'},haDg:function(e,t,n){var s=n("ziER"),o=n("5JeM"),i=new s({id:"icon-medium-announcements",use:"icon-medium-announcements-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-announcements"><path stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M5 5h12v9H5z" /><path stroke-width="2" stroke-linejoin="round" d="M1 5h4v9H1z" /><path d="M8 14l3 8h4l-3-8M17 14l6 4V1l-6 4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});o.add(i);e.exports=i},iYZE:function(e,t,n){(function(n){var s,o,i;!function(n,r){"use strict";"object"==typeof e.exports?e.exports=r():(o=[],void 0===(i="function"==typeof(s=r)?s.apply(t,o):s)||(e.exports=i))}(0,(function(){"use strict";var e="function"==typeof n?function(e){return new n(JSON.stringify(e))}:function(e){return JSON.stringify(e)};function t(e,t){t!==e.head&&(e.end?e.end===t&&(e.end=t.n):e.end=t,s(t.n,t.p),s(t,e.head),e.head=t,e.head.n=null)}function s(e,t){e!==t&&(e&&(e.p=t),t&&(t.n=e))}function o(e){if(!(this instanceof o))return new o(e);this.capacity=e>0?e:Number.MAX_VALUE,this.removeAll()}var i=o.prototype;return i.get=function(e){var n=this.hash[e];if(n)return t(this.linkedList,n),JSON.parse(this.data[e].toString())},i.set=function(n,s){var o=this.hash[n];return void 0===s||(o||(this.hash[n]={key:n},this.linkedList.length+=1,o=this.hash[n]),t(this.linkedList,o),this.data[n]=e(s),this.linkedList.length>this.capacity&&this.remove(this.linkedList.end.key)),this},i.update=function(e,t){if(this.has(e)){var n=this.get(e);this.set(e,t(n))}return this},i.remove=function(e){var t=this.hash[e];return t?(t===this.linkedList.head&&(this.linkedList.head=t.p),t===this.linkedList.end&&(this.linkedList.end=t.n),s(t.n,t.p),delete this.hash[e],delete this.data[e],this.linkedList.length-=1,this):this},i.removeAll=function(){return this.data={},this.hash={},this.linkedList={length:0,head:null,end:null},this},i.info=function(){return{capacity:this.capacity,length:this.linkedList.length}},i.keys=function(){for(var e=[],t=this.linkedList.head;t;)e.push(t.key),t=t.p;return e},i.has=function(e){return!!this.hash[e]},o}))}).call(this,n("+ZX+").Buffer)},jQCK:function(e,t){e.exports='<bb-modal class="js-course-status-modal-PREVIEW notification" modal-title-key="{{previewModalTitleKey}}"\n          modal-dismiss-key=""\n          analytics-id-tag-prefix="course.outline.previewCourse">\n  <div name="modal-contents">\n    <p bb-translate="course.outline.previewCourse.modalText" course-org-token-resolver></p>\n  </div>\n  <button name="modal-footer-button-primary" \n          ng-click="$parent.$close(\'OPEN\')" \n          class="button js-course-status-OPEN js-primary-button"\n          analytics-id="course.outline.previewCourse.open.button">\n    <span bb-translate="course.outline.previewCourse.makeOpen" course-org-token-resolver></span>\n  </button>\n  <button name="modal-footer-button-secondary" \n          ng-click="$parent.$close()" \n          class="button button--secondary js-course-status- js-secondary-button"\n          analytics-id="course.outline.previewCourse.close.button">\n    <span bb-translate="global.cancel"></span>\n  </button>\n</bb-modal>'},kkIh:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return ce})),n.d(t,"a",(function(){return ge}));var s=n("D57K"),o=n("nsO7"),i=n("5MwF"),r=n("m3mx"),a=n("9zo4"),l=n("kxl5"),c=n("gkef"),u=n("Vsv2"),d=n("Dt14"),h=n("IiJs"),p=n("n0mJ"),m=n("nYZ0"),b=n("Fvsw"),g=n("Qbdf"),v=n("ZzN+"),C=n("go4a"),f=n("AI52"),y=n("Sa5G"),k=n("ZQFV"),O=n("5KgE"),S=n("2lxm"),w=n("0+Qs"),I=n("0JpG"),x=n("pjml"),E=n("w9Zy"),P=n("QIw5"),j=n("lEL+"),$=n("hkqm"),A=n("TnpK"),T=n("1zDl"),M=n("zGdY"),L=n("IbyE"),N=n("12mu"),D=n("jhBu"),R=n("fYJU"),B=n("k+3c"),U=n("ZQey"),z=n("kk+D"),G=n("2uem"),F=n("W6wm"),_=n("+2Il"),V=n("DlD1"),K=n("jQCK"),q=n("1Gvt"),W=n("XN3q"),H=n("GaeZ"),Y=n("cs5G"),J=n("BjFu"),X=n("nmzr"),Q=n("7n5u"),Z=n("YXyV"),ee=n("7pcG"),te=n("/5AG"),ne=n("aHpC"),se=n("vhkR"),oe=n("Htol"),ie=n("Y+9S"),re=n("ohO4"),ae=n("AuQm"),le=n("1hyT");const ce="ultra.course.outline.controller",ue=e=>he(M.Rb.Complete,e),de=e=>he(M.Rb.CompleteErrors,e),he=(e,t)=>t.toString()===e,pe=5e3,me="course";let be=class extends p.a{constructor(e,t,n,s,o,r,a,l,c,u,d,h,p,b,g,v,f,k,O,S,w,j,$,A,T,L,N,D,R,B,z,_,V,K,q,H,Y,Z){var ee,ne;super(r,a,l,R,O,x.p.ContentRootNode.ROOT,F.a.CourseOutline,z,k,v,g,A,s,t,Y,N),this.$log=e,this.$q=t,this.$modal=n,this.$ngRedux=s,this.$rootScope=o,this.$scope=r,this.CourseModel=a,this.CourseContentModel=l,this.collab=c,this.collabUltra=u,this.CourseMembershipModel=d,this.context=h,this.cloudDrive=p,this.firstTimeHelper=b,this.ultraState=g,this.interval=v,this.timeout=f,this.bbLocalize=k,this.contentService=O,this.exportService=S,this.toast=w,this.ScheduledTaskModel=j,this.ConversionService=$,this.accessibility=A,this.windowSizeService=T,this.copyContent=L,this.entitlementService=N,this.announcementPermissionsService=D,this.contextCourse=R,this.modalService=B,this.allyService=z,this.contextUser=_,this.courseBanner=V,this.calendarService=K,this.ltiService=q,this.featureFlagService=H,this.gradableItemUserOptionService=Y,this.windowSize=Z,this.collabUltraEnabled=!1,this.runningSessionFlag=!1,this.attendanceEnabled=!1,this.isSidebarLoaded=!1,this.showVirtualClassroom=!1,this.isCollabConfigLoaded=!1,this.isAnnouncementsEnabled=!1,this.canViewGroups=!1,this.isGroupToolEnabled=!1,this.studentAccessGuidanceKey="student.access",this.alertCourseGuidanceKey="course.alert",this.questionBanksNavGuidanceKey="question.banks.nav.key",this.addContentGuidanceKey="course.addContent",this.canExport=!1,this.canArchive=!1,this.canAccessBatchEdit=!1,this.showContentImportProgress=!1,this.showImportCopyStatusBar=!1,this.showPreviewButton=!1,this.isInPreviewMode=!1,this.multiContentImportProgress=new Map,this.hasCheckedForImports=!1,this.isLoading=!0,this.refreshingFolderIds={},this.announcementsPostedCount=-1,this.announcementsTotalCount=-1,this.groupSetCount=-1,this.detailPortalType=Q.a,this.detailPortals=[],this.trayLocalizationKeysPrefix="course.outline.content.copy",this.trayId="granular-content-import-tray",this.COPY_TASK_TYPE="C",this.granularContentImportQueue=[],this.isCourseProgressConfigurationPanelOpen=!1,this.canCurrentUserSendMessage=!1,this.isDetailsAndActionsExpanded=!0,this.progressTrackingAriaLabelId="course-outline-progress-tracking-link-aria-label",this.onEditBanner=null,this.courseSchedule=[],this.childrenRefresher=(e,t)=>{const n=this.rootNode.findLoadedNodeByIdAndCache(e);this.$rootScope.$broadcast(oe.b,n,t)},this.courseOutlineSearch=(e,t,n,s,o)=>{this.$scope.$apply((()=>{var i;this.isLoading=!0,this.rootNode.hasMoreChildren=!0,null===(i=this.rootNode.children)||void 0===i||i.$clear(),this.searchByCriteria(this.rootNode,e,t,n,s,o).then((()=>{this.rootNode.ui.isOpen=!0,this.$scope.$broadcast("close-all-add-menus",this.rootNode.id)})).finally((()=>{this.isLoading=!1}))}))},this.retryLastLoad=e=>{this.courseOutlineSearch(this.searchParameters.title,this.searchParameters.contentSearchMode,this.searchParameters.sort,e,this.searchParameters.contentId)},this.openExportModal=()=>{this.exportService.getExportsAndScheduledTasks(this.courseId,this.currentCourse.courseId,!1,this.canExport,this.canArchive).then((e=>{if(0===e.courseExports.length&&0===e.scheduledTasks.length||this.ultraState.includes("**.exports")){if(this.canExport&&!this.canArchive)return void this.exportService.createExportTask(!1,this.courseId).then((()=>{this._setExportTaskStatusCheckInterval(),this._openExportPeekPanel()}));if(this.canArchive&&!this.canExport)return void this.exportService.createExportTask(!0,this.courseId).then((()=>{this._setExportTaskStatusCheckInterval(),this._openExportPeekPanel()}));this.modalInstance=this.$modal.open({template:W,scope:this.$scope,resolve:{translations:[I.serviceName,e=>e.loadBundle("features/course/exports/course-export")]}})}else this._openExportPeekPanel()}))},this.handleOutlineMenuToggle=e=>{this.$scope.isOutlineMenuOpen=e},this.openCourseProgressConfigurationPanel=()=>{this.isCourseProgressConfigurationPanelOpen=!0,Object(ie.o)(ie.c.ProgressTrackerOpened)},this.closeCourseProgressConfigurationPanel=()=>{this.isCourseProgressConfigurationPanelOpen=!1,Object(ie.o)(ie.c.ProgressTrackerClosed)},this.closeCourseProgressConfigurationPanel$apply=()=>{this.$scope.$apply((()=>{this.closeCourseProgressConfigurationPanel()}))},this.isEntitledToViewCourseProgressConfiguration=()=>this.entitlementService.isEntitled(te.s.ViewConfiguration),this.isUserEntitledToRetrieveCourseProgressConfiguration=()=>this.isEntitledToViewCourseProgressConfiguration()||this.isStudentMembership(),this.setDetailsAndActionsExpandedState=e=>{this.isDetailsAndActionsExpanded=e},this.showDetailsAndActionSection=()=>this.isDetailsAndActionsExpanded||this.windowSize.isLargeBreakpoint(),this.retrieveCourseProgressConfiguration=()=>{this.isUserEntitledToRetrieveCourseProgressConfiguration()&&this.loadCourseProgressConfiguration(this.courseId)},this.canViewCourseProgressConfiguration=()=>null!=this.courseProgressConfiguration&&this.isEntitledToViewCourseProgressConfiguration(),this.isProgressTrackingEnabled=()=>{var e;return null===(e=this.courseProgressConfiguration)||void 0===e?void 0:e.progressTrackingEnabled},this.getStudentProgressTooltipTitle=()=>this.isProgressTrackingEnabled()?this.getLocalizedTextByKey("course.outline.courseProgressConfiguration.content.studentOnTooltip"):this.getLocalizedTextByKey("course.outline.courseProgressConfiguration.content.studentOffTooltip"),this.getStudentProgressLabel=()=>this.isProgressTrackingEnabled()?this.getLocalizedTextByKey("course.outline.courseProgressConfiguration.content.studentOn"):this.getLocalizedTextByKey("course.outline.courseProgressConfiguration.content.studentOff"),this.getProgressTooltipText=()=>this.currentCourse.isOrganization?this.getLocalizedTextByKey("organization.outline.courseProgressConfiguration.midCourseWarningTooltip"):this.getLocalizedTextByKey("course.outline.courseProgressConfiguration.midCourseWarningTooltip"),this.openCopyDetailsPanel=()=>{this.copyDetailsNotificationDismissed(),this.goPeekState.call(this,X.k.COPY_DETAILS_PEEK_PANEL,{})},this.copyDetailsNotificationDismissed=()=>{this.shouldShowCopyDetailsNotification=!1,this.copyContent.resetCopyDetailsNotificationCount()},this.setCourseBannerProps=()=>this.$q.all({banner:this.courseBanner.getCustomBanner(this.courseId),isBannerVisible:this.courseBanner.isBannerVisibleInCourse(this.courseId),bannerAltText:this.courseBanner.getBannerAltText(this.courseId)}).then((e=>{const t=e.isBannerVisible;this.bannerUrl=t?e.banner:null,this.bannerAltText=e.bannerAltText;const n=this.courseBanner.canAccessEditBannerPeek(this.currentCourse);this.onEditBanner=n?this.courseBanner.openEditBannerPeek.bind(this.courseBanner,this.courseId):null})),this.onSingleFileUploadPropertiesSave=e=>{this.singleFileContent.title=e.displayName,e.render&&(this.singleFileContent.contentDetail[M.t.File].fileAssociationMode=Object(le.c)(e.render)),this.singleFileUploadDeferred.resolve(this.singleFileContent.$asPromise()),this.singleFileUploadProperties=void 0,this.singleFileContent=void 0},this.onSingleFileUploadPropertiesCancel=()=>{this.singleFileContent=void 0,this.singleFileUploadProperties=void 0,this.singleFileUploadDeferred.reject()},r.courseOutline=this,this.courseId=R.courseId,this.isInPreviewMode=null!==(ne=null===(ee=r.course)||void 0===ee?void 0:ee.isInStudentPreviewMode)&&void 0!==ne&&ne,this.connectToRedux(),this.loadReadOnlyCourseMessagesPreference({key:G.a}),this.shouldShowOutlineGuidance=!1,this.canViewGroupsAsAdmin=this.entitlementService.isEntitled(y.o.ViewGroupsAsAdmin),this.showPreviewButton=this.entitlementService.isEntitled(y.j.ViewPreviewStudent),r.course&&(r.course.headerKey="course.outline.headerLabel"),this.currentUserId=_.userId,this.currentCourse=this.$scope.course.model,this.courseColorClass=C.a(this.$scope.course.membership),this.outlineLocalePrefix=this.currentCourse.isOrganization?"organization.outline":"course.outline",this.exportModalTitleKey=this.currentCourse.isOrganization?"organization.export.modal.modalTitle":"course.export.modal.modalTitle",this.$scope.previewModalTitleKey=this.currentCourse.isOrganization?"organization.outline.previewCourse.modalTitle":"course.outline.previewCourse.modalTitle",this.announcementPermissions=this.announcementPermissionsService.getCourseAnnouncementsPermissions(),this.getNextEventForMonthlyRepeat=(e,t)=>K.getNextEventForMonthlyRepeat(e,t),this.getNextEventForDailyRepeat=(e,t)=>K.getNextEventForDailyRepeat(e,t),this.getNextEventForWeeklyRepeat=(e,t)=>K.getNextEventForWeeklyRepeat(e,t);const se=Q.b.onIntegrationAdded((()=>{this.$scope.$apply((()=>this.updateDetailsIntegration()))}));this.updateDetailsIntegration(),this.currentCourse&&(this.canMove=!this.currentCourse.isComplete(),this.setCourseStatus(),this.currentCourse.schedule.$refresh({sort:"location(desc)"}).$allow([403]).$then((()=>{this.courseSchedule=this.currentCourse.schedule})),this.updateBatchEditStatus(),this.initCourseBanner()),this.contentService.fetchIndicators(this.courseId,!0).then((e=>{this.updateIndicators(e)})),this.indicatorRefreshInterval=this.interval((()=>{this.contentService.fetchIndicators(this.courseId,!0).then((e=>{this.updateIndicators(e)}),(()=>{this.interval.cancel(this.indicatorRefreshInterval)}))}),r,m.b,0,!1),this.courseOutlineRefreshDeregister=r.$on(oe.a,((e,t,n)=>{this.courseOutlineRefreshFolder(t,n)})),r.$on("collab-exit",(()=>{this.initCollabSession()})),r.$on("bb-announcement-panel-close",(()=>{this.getAnnouncementsCount()})),r.$on("content-update",((e,t)=>{this.getGroupAndSetCount(t.courseId)})),r.$watch("courseOutline.rootNode.children.length",((e,t)=>{e!==t&&this.recalculateEmptyState()}));const re=this.contentService.indicatorCacheService.$onClassConversationIndicatorRemoved(((e,t,n,s)=>{t===this.$scope.course.model.id&&(s||this.dismissContentIndicators(n))})),ae=this.contentService.indicatorCacheService.$onGroupConversationIndicatorRemoved(((e,t,n,s)=>{t===this.$scope.course.model.id&&(s||this.dismissContentIndicators(n))}));r.$on("$destroy",(()=>{re(),ae(),se()})),this.currentCourse&&Object(J.a)(this.currentCourse)&&this.currentCourse.canEdit()&&this.currentCourse.isOpen()&&(M.x.DateRange===this.currentCourse.durationType?this._openAlertModal():this.currentCourse.term&&M.x.UseTerm===this.currentCourse.durationType&&this.currentCourse.term.$fetch().$asPromise().then((e=>{x.Gb.TermDuration.DateRange.isEqualTo(e.durationType)&&this._openAlertModal()}))),this.currentCourse.getStatus()===U.a.Private?(this.showVirtualClassroom=!1,this.isCollabConfigLoaded=!1):i.a.features.collab||this.loadCollabConfig(),this.rootNode.children.$asPromise().then((()=>{b.hasBeenShown(this.studentAccessGuidanceKey).then((e=>{this.shouldShowAccessGuidanceOpenToStudent=!e&&this.rootNode.children.canCreate()&&!this.$scope.course.model.isAvailable})),b.hasBeenShown(this.questionBanksNavGuidanceKey).then((e=>{this.shouldShowQuestionBanksGuidance=!e})),this.$q.all([this.checkIfCollabUltraIsAvailable(),this.getAnnouncementsCount(),this.checkIfAttendanceIsAvailable(),this.getCourseGroupSetCount(),this.retrieveCourseProgressConfiguration()]).finally((()=>{this.isSidebarLoaded=!0})),this.shouldShowOutlineGuidance=this.rootNode.children.canCreate(),this.rootNode.children.length>1&&b.fadeAddContentButton(this.$scope,this.addContentGuidanceKey,me),this.initialLoadPromise.then((()=>{this.timeout((()=>{this.isLoading=!1}),r)}))})),this.featureFlagService.isFeatureEnabled("feature.course.content.inline-render"),this.$scope.$on(E.b,((e,t)=>{b.hasBeenShown(this.studentAccessGuidanceKey).then((e=>{this.shouldShowAccessGuidanceOpenToStudent=!e&&this.rootNode.children.canCreate()&&!this.$scope.course.model.isAvailable})),b.hasBeenShown(this.questionBanksNavGuidanceKey).then((e=>{this.shouldShowQuestionBanksGuidance=!e})),this.rootNode.children.length>1&&b.fadeAddContentButton(this.$scope,this.addContentGuidanceKey,me)})),this.showTooltip=!1,this.isExportSuccess=!1,this.canExport=this.currentCourse.canExport(),this.canArchive=this.currentCourse.canArchive(),(this.canExport||this.canArchive)&&(this.exportService.getExportsAndScheduledTasks(this.courseId,this.currentCourse.courseId,!0,this.canExport,this.canArchive).then((e=>{e.scheduledTasks&&e.scheduledTasks.length>0&&this._setExportTaskStatusCheckInterval()})),r.$on("start-task-status-check",(()=>{this._setExportTaskStatusCheckInterval()}))),P.a.Already===g.params.enrollmentMessage&&w.show({messageKey:`${this.outlineLocalePrefix}.alreadyEnrolled`}),r.$on("$destroy",(()=>{this.courseOutlineRefreshDeregister(),this.deregisterUpdateBannerListener(),this.indicatorRefreshInterval&&(this.interval.cancel(this.indicatorRefreshInterval),this.indicatorRefreshInterval=null),(this.canExport||this.canArchive)&&this._cancelExportTaskStatusCheckInterval(),this._cancelCheckImportCopyInterval(),(this.currentCourse.canCopy()||this.currentCourse.canImport())&&this.cancelImportWatchers()})),this.currentCourse.canCopy()&&(this._handleInProgressCopyTasks(),this.updateCopyDetailsAlerts(),this.hasCheckedForImports=!0),this.currentCourse.canImport()&&this._checkInProgressImportTask(),r.$on("showContentImportProgress",((e,t,n)=>{this.showImportCopyStatusBar&&(this.showImportCopyStatusBar=!1),this.workingImportCopyTaskId=t,this.showContentImportProgress=!0,this._setCheckImportCopyInterval(t)})),r.$on("addImportTaskWatchers",((e,t)=>{this._queueLoadingMessagesForTasks(t)})),r.$on("clearPreviousCopyDetails",(e=>{this.copyDetailsNotificationDismissed()})),this.ConversionService.isPreview(this.currentCourse)&&this.ConversionService.showPreviewAlert&&T.isSmallBreakpoint()&&(this.openPreviewAlertModal(),this.ConversionService.showPreviewAlert=!1),r.$on("add-outline-schedule",((e,t)=>{this.currentCourse.schedule.push(t),this.courseSchedule=[...this.currentCourse.schedule]})),r.$on("calendar-refresh",((e,t)=>{if(!t)return;const n=this.currentCourse.schedule.findIndex((e=>e.itemSourceId===t.itemSourceId));-1!==n&&(this.currentCourse.schedule[n]=t,this.courseSchedule=[...this.currentCourse.schedule])})),r.$on("delete-outline-schedule",((e,t)=>{let n;this.currentCourse.schedule.forEach(((e,s)=>{e.itemSourceId===t.itemSourceId&&(n=s)})),this.currentCourse.schedule.$remove(this.currentCourse.schedule[n]).$then((()=>{this.courseSchedule=[...this.currentCourse.schedule]}))})),Object(ie.m)()&&Object(ie.j)(this.ultraState)}get search(){var e;return null!==(e=this.ultraState.params.search)&&void 0!==e?e:""}get isOutlineSearch(){return!!this.ultraState.params.search}updateDetailsIntegration(){this.detailPortals=Q.b.getRegisteredRecords(),this.detailPortals.forEach((e=>{e&&(e.selectorData={courseId:this.courseId,locale:this.bbLocalize.getLocale(this.$scope)})}))}broadcastCloseFolder(e){e.children.filter((e=>e.isFolder()||e.isLearningModule())).forEach((e=>{this.$scope.$broadcast("close-folder-immediately-by-id",e.id)}))}courseOutlineRefreshFolder(e,t){const n=e?this.rootNode.findInTreeById(e):this.rootNode;this.refreshingFolderIds[`node-${n.id}`]||(this.refreshingFolderIds[`node-${n.id}`]=!0,n.hasMoreChildren=!0,this.broadcastCloseFolder(n),n.children=null,this.loadMoreChildren(n,t).$then((()=>{delete this.refreshingFolderIds[`node-${n.id}`],n.ui.isOpen=!0,this.$scope.$broadcast("close-all-add-menus",n.id)})))}_queueLoadingMessagesForTasks(e){o.forEach(e,(e=>{const t=this.$q(((t,n)=>{this._waitForTaskToComplete(e,t,n)}));this.cancelLoading=this.toast.showLoading({trayId:this.trayId,trayLocalizationKeysPrefix:this.trayLocalizationKeysPrefix,promise:t})}))}hideExportMoment(){this.showTooltip&&(this.showTooltip=!1,e(document)[0].removeEventListener("click",this.hideExportMoment,!0))}showExportMoment(){this.showTooltip=!0,e(document)[0].addEventListener("click",this.hideExportMoment.bind(this),!0)}loadCollabConfig(){return this.isCollabConfigLoaded=!0,this.collab.getCollabSessions(this.courseId).then((e=>{x.n.CollabAccessType.Apollo===e.collabAccessType?(this.showVirtualClassroom=!0,this.collabSessionId=e.sessionId):this.showVirtualClassroom=!1}),(e=>{this.showVirtualClassroom=!1,e.$response.status=null}))}openPreviewAlertModal(){this.modalInstance=this.$modal.open({template:_,scope:this.$scope,resolve:{translations:[I.serviceName,e=>e.loadBundle("features/course/outline/course-outline")]}})}_openAlertModal(){if(this.currentCourse.endDate&&this.currentCourse.endDate<this.context.getServerTime()){this.$modal.open({template:V,scope:this.$scope,resolve:{translations:[I.serviceName,e=>e.loadBundle("features/course/outline/course-outline")]}}).result.then((()=>{this.updateCourseStatus(U.a.Complete)}),(()=>{this.firstTimeHelper.hasBeenShown(this.alertCourseGuidanceKey).then((e=>{this.shouldShowAccessGuidanceReadOnly=!e}))}))}}checkIfCollabUltraIsAvailable(){if(i.a.features.collab)return this.collabUltra.getCollabB2Info().then((e=>{const t=e.$response;if(403===t.status||404===t.status)this.$log.debug("[Collab-ultra] getCollabB2Info() returned status: "+t.status);else if(200===t.status)return this.initCollabSession()}),(e=>{this.$log.error("[Collab-ultra]: Error in getCourseCollab(): "+e),e.$response.status=null}))}initCollabSession(){return this.collabUltraEnabled=!1,this.runningSessionFlag=!1,this.courseRoomSession=null,this.courseSessionList=[],this.runningSessionList=[],this.$q.all([this.collabUltra.getCourseCollab(this.courseId).then((t=>{const n=t.filter((e=>e.sessionInstances&&e.sessionInstances.length>0));this.runningSessionList=this.runningSessionList.concat(n),this.collabPermissions=e.extend({},t.permissions),Array.isArray(t)&&t.length>0?(this.courseRoomSession=t[0],e.extend(this.collabPermissions,this.courseRoomSession.permissions)):this.$log.debug("[Collab-ultra]: Course room does not exist!"),this.collabUltraEnabled=!0}),(e=>{this.$log.error("[Collab-ultra]: Error in getCourseCollab(): "+e),e.$response.status=null})),this.collabUltra.getAllCollabSessions(this.courseId).then((e=>{this.courseSessionList=e.filter((e=>{var t;return e.occurrenceType===y.r.SingleOccurrence?e.active:null===(t=e.occurrences)||void 0===t?void 0:t.some((e=>e.active))}));const t=this.courseSessionList.filter((e=>e.sessionInstances&&e.sessionInstances.length>0));this.runningSessionList=this.runningSessionList.concat(t),this.collabUltraEnabled=!0}),(e=>{this.$log.error("[Collab-ultra]: Error in getAllCollabSessions(): "+e),e.$response.status=null}))]).then((()=>{this.runningSessionFlag=this.runningSessionList.length>0}))}joinSession(e){if(e||(this.courseRoomSession&&this.courseRoomSession.courseRoomEnabled?e=this.courseRoomSession.id:this.courseSessionList&&this.courseSessionList.length>0&&(e=this.courseSessionList[0].id)),Object(ie.m)())this.collabUltra.getLaunchUrl(this.courseId,e).then((e=>{this.notifyMobileApp(e)}));else{const t=window.open();this.collabUltra.getLaunchUrl(this.courseId,e).then((e=>{t.location.href=e}),(()=>{t.close()}))}}notifyMobileApp(e){const t={type:ie.c.CollabSessionOpened,status:ie.b.Success,sessionUrl:e};Object(ie.r)(t)}canCreateGroups(){return this.entitlementService.isEntitled(y.o.CreateGroups)}courseRoomExists(){return!!this.courseRoomSession}isCourseRoomEnabled(){return!(!this.courseRoomSession||!this.courseRoomSession.courseRoomEnabled)}isCollabSettingsDropDownAvailable(){if(this.collabPermissions)for(const e of Object.keys(this.collabPermissions))if(!0===this.collabPermissions[e]&&"joinSession"!==e)return!0;return!1}activeSessionCount(){let e=0;return this.courseRoomSession&&this.courseRoomSession.courseRoomEnabled&&e++,this.courseSessionList&&(e+=this.courseSessionList.length),e}enableCourseRoom(){this.collabUltra.enableCourseRoom(this.courseId,this.courseRoomSession.id).then((e=>{this.courseRoomSession.courseRoomEnabled=e.courseRoomEnabled}))}disableCourseRoom(){this.collabUltra.disableCourseRoom(this.courseId,this.courseRoomSession.id).then((e=>{this.courseRoomSession.courseRoomEnabled=e.courseRoomEnabled}))}checkIfAttendanceIsAvailable(){return this.currentCourse.isToolAvailable("bb-attendance").then((e=>{this.attendanceEnabled=e}))}getAnnouncementsCount(){return this.currentCourse.isToolAvailable("announcements").then((e=>{if(this.isAnnouncementsEnabled=e,this.isAnnouncementsEnabled)return this.currentCourse.getAnnouncementsCount().then((e=>{e&&(this.announcementsPostedCount=e.postedCount,this.announcementsTotalCount=e.postedCount||0,this.announcementPermissions.viewUnposted&&(this.announcementsTotalCount+=(e.draftCount||0)+(e.scheduledCount||0)))})).catch((e=>{e.$response.status=null}))}))}getCourseGroupSetCount(){return this.currentCourse.isToolAvailable("groups").then((e=>{if(this.isGroupToolEnabled=e,!this.isGroupToolEnabled)return;return this.entitlementService.areAnyEntitled([y.o.CreateGroups,y.o.ViewGroups,y.o.ViewGroupsAsAdmin,y.o.ModifyGroups,y.o.DeleteGroups])?this.getGroupAndSetCount(this.currentCourse.id).then((e=>{this.canViewGroups=this.entitlementService.areAnyEntitled([y.o.ViewGroups,y.o.ViewGroupsAsAdmin])})).catch((e=>{this.canViewGroups=!1})):void 0}))}getCourseStatus(){return this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.$scope),key:this.$scope.currentCourseStatus.getCourseStatusName()})}getCourseDescription(){return this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.$scope),key:this.$scope.currentCourseStatus.getCourseDescription()})}setCourseStatus(){Object(J.a)(this.currentCourse)?this.currentCourse.isOpen()?this.$scope.currentCourseStatus=new B.a(this.currentCourse,U.a.Open):this.currentCourse.isPrivate()?this.$scope.currentCourseStatus=new B.a(this.currentCourse,U.a.Private):this.$scope.currentCourseStatus=new B.a(this.currentCourse,U.a.Complete):this.$scope.currentCourseStatus=new B.a(this.currentCourse,U.a.PrivateDuration)}isCourseOpen(){return this.currentCourse.isOpen()&&Object(J.a)(this.currentCourse)}isCoursePrivate(){return this.currentCourse.isPrivate()||!Object(J.a)(this.currentCourse)}isCourseComplete(){return this.currentCourse.isComplete()&&Object(J.a)(this.currentCourse)}hasConversionReport(){return this.context.getUltraConversionReportId()&&this.currentCourse.canConvert()}openModal(){this.setCourseStatus(),this.ConversionService.isPreview(this.currentCourse)?(this.modalInstance=this.$modal.open({template:K,scope:this.$scope,resolve:{translations:[I.serviceName,e=>e.loadBundle("features/course/outline/course-outline")]}}),this.modalInstance.result.then((e=>{e&&(this.updateCourseStatus(e),this.$rootScope.$broadcast("confirmNewExperience"))}))):(this.$scope.currentAnalyticsId="course.outline.updateStatusModal",this.modalInstance=this.$modal.open({template:q,scope:this.$scope,resolve:{translations:[I.serviceName,e=>e.loadBundle("features/course/outline/course-outline")]}}),this.modalInstance.result.then((e=>{this.updateCourseStatus(e)})))}shouldShowVirtualClassroomLink(){const e=this.$scope.currentCourseStatus.getStatus()===U.a.Open;return this.showVirtualClassroom&&e&&!window.Modernizr.touch}updateCourseStatus(e){if(e){const t=this.currentCourse.getStatus();return this.currentCourse.setStatus(e),this.$scope.currentCourseStatus=new B.a(this.currentCourse,this.currentCourse.ui.status),this.currentCourse.withParams({expand:"effectiveAvailability"}).$patch().$then((()=>{this.$scope.course.membership.course=this.currentCourse;const n=this.currentCourse.getStatus(),s={effectiveAvailability:this.currentCourse.effectiveAvailability,effectiveAvailabilityUnprivileged:this.currentCourse.effectiveAvailabilityUnprivileged};return this.$scope.$emit("update-course-status",this.currentCourse.id,n,s),n!==e&&(this.currentCourse.setStatus(n.toString(),s),this.$scope.currentCourseStatus=new B.a(this.currentCourse,n)),(ue(t)||ue(e))&&(this.rootNode.children=this.rootNode.getChildren({limit:this.rootNode.children.length}),this.canMove=!this.currentCourse.isComplete()),i.a.features.collab?this.checkIfCollabUltraIsAvailable():this.isCollabConfigLoaded||i.a.features.collab?void 0:this.loadCollabConfig()}))}}triggerCourseExport(e){this.modalInstance.dismiss(),this.exportService.createExportTask(e,this.courseId).then((()=>{this._setExportTaskStatusCheckInterval(),this._openExportPeekPanel()}))}_setExportTaskStatusCheckInterval(){const e=i.a.production?6e4:5e3;this.checkExportStatusInterval=this.interval((()=>{this._checkExportStatus()}),this.$scope,e)}_cancelExportTaskStatusCheckInterval(){this.checkExportStatusInterval&&(this.interval.cancel(this.checkExportStatusInterval),this.checkExportStatusInterval=null)}_checkExportStatus(){this.exportService.getExportsAndScheduledTasks(this.courseId,this.currentCourse.courseId,!1,this.canExport,this.canArchive).then((e=>{e.scheduledTasks.forEach((e=>{const t=e.taskStatus;e.$fetch().$then((e=>{ue(t)||(ue(e.taskStatus)||de(e.taskStatus))&&(this.exportService.getExportsAndScheduledTasks(this.courseId,this.currentCourse.courseId,!0,this.canExport,this.canArchive).then((e=>{e.scheduledTasks&&0!==e.scheduledTasks.length||this._cancelExportTaskStatusCheckInterval(),this.$scope.$broadcast("update-course-exports")})),"exports"!==this.ultraState.current.name.split(".").slice(-1)[0]&&(this.showExportMoment(),this.isExportSuccess=ue(e.taskStatus)))}))}))}))}_openExportPeekPanel(){this.ultraState.goPeekState("exports")}_checkInProgressImportTask(){const e="courseImport"+this.currentCourse.id.replace(/_/g,".");this.context.getPreference(e,"false").then((e=>{if("true"===e.value){const e=this.currentCourse.courseId;this._getCourseImportTasks(e).then((e=>{this.hasCheckedForImports=!0;const t=this.getLatestTaskForCourse(e);t&&(ue(t.taskStatus)||de(t.taskStatus)?(this.showImportCopyStatusBar=!0,this.importCopyTaskId=t.taskId):(this.$rootScope.$broadcast("showContentImportProgress",t.taskId,this.rootNode&&this.rootNode.id?this.rootNode.id:"-1"),this.showContentImportProgress=!0,this._setCheckImportCopyInterval(t.taskId)))}))}else this.hasCheckedForImports=!0}))}_handleInProgressCopyTasks(){const e=this.currentCourse.courseId;this.$q.all([this._getCourseCopyTasks(e),this._getCourseCopyTasksWithWaitingStatus(e)]).then((e=>{const t=o.filter(e[0],(e=>e.taskStatus!==M.Rb.Waiting)),n=o.filter(t.concat(e[1]),(function(e){return!ue(e.taskStatus)&&!de(e.taskStatus)&&(t=e.taskStatus,!he(M.Rb.Incomplete,t));var t}));this._queueLoadingMessagesForTasks(o.map(n,(e=>e.taskId)))}))}getLatestTaskForCourse(e){let t,n=null;return e.length>0?(t=0,e.forEach((e=>{if(e.startDate){const s=e.startDate.getTime();s>t&&(t=s,n=e)}else n=e,t=Number.MAX_VALUE}))):n=e.pop(),n}getTasks(e){return this.ScheduledTaskModel.$collection().$refresh(e).$asPromise()}_getCourseCopyTasks(e){if(this.currentCourse.canCopy()){const t={courseId:e,filterBy:"courseCopyTasks",sort:"startDate(DESC)"};return this.getTasks(t)}return this.$q.when([])}_getCourseCopyTasksWithWaitingStatus(e){if(this.currentCourse.canCopy()){const t={courseId:e,filterBy:"courseCopyTasks",status:"WAITING"};return this.getTasks(t)}return this.$q.when([])}_getCourseImportTasks(e){if(this.currentCourse.canImport()){const t={courseId:e,operation:"IMPORT",filterBy:"cxTasks"};return this.getTasks(t)}return this.$q.when([])}_setCheckImportCopyInterval(e){this._cancelCheckImportCopyInterval();const t=i.a.production?6e4:6e3;this.checkContentImportProgress=this.interval((()=>{this._checkImportCopy(e)}),this.$scope,t)}_cancelCheckImportCopyInterval(){this.checkContentImportProgress&&(this.interval.cancel(this.checkContentImportProgress),this.checkContentImportProgress=null)}_checkImportCopy(e){this.ScheduledTaskModel.$new(e).$fetch().$then((t=>{const n=de(t.taskStatus);(ue(t.taskStatus)||n)&&(this.rootNode.children.$refresh({expand:"assignedGroups,selfEnrollmentGroups.group"}).$then((()=>{this.importCopyTaskId=e,this.showContentImportProgress=!1,this.showImportCopyStatusBar=!0})),this._cancelCheckImportCopyInterval(),this.getAnnouncementsCount(),n||this.notifyContentImportComplete(this.courseId))}))}setTaskInterval(e,t,n,s,o){let i=s;i<pe&&(console.warn(`The milliseconds time interval given (${i}ms) is less than the minimal expected.\n      Setting it to 5000ms as a minimum.`),i=pe);const r=this.interval((()=>{this._checkTaskCompletion(e)}),this.$scope,i);this.multiContentImportProgress.set(e,{promise:r,complete:t,reject:n,startedTime:o})}_waitForTaskToComplete(e,t,n){this.setTaskInterval(e,t,n,pe,new Date)}_checkTaskCompletion(e){const t=this.multiContentImportProgress.get(e);t&&this.ScheduledTaskModel.$new(e).$fetch().$then((n=>{var s,o;(ue(n.taskStatus)||de(n.taskStatus))&&(n.type===this.COPY_TASK_TYPE&&this.copyContent.appendToCurrentCopyTasks([n.taskId]).then((e=>this.updateCopyDetailsAlerts())),t.complete(),this.rootNode.children.$refresh({expand:"assignedGroups,selfEnrollmentGroups.group"}).$then((e=>{e.forEach((e=>{e.depth=this.rootNode.depth+1}))})),this.multiContentImportProgress.delete(e),this.interval.cancel(t.promise),this.getAnnouncementsCount(),this.notifyGCCCompleted(this.courseId),this.retrieveCourseProgressConfiguration()),o=n.taskStatus,he(M.Rb.Running,o)&&((s=t.startedTime)&&(new Date).getTime()-s.getTime()>=6e4)&&(this.multiContentImportProgress.delete(e),this.interval.cancel(t.promise),this.setTaskInterval(e,t.complete,t.reject,6e4,void 0))}))}cancelImportWatchers(){this.multiContentImportProgress.forEach((e=>{this.interval.cancel(e.promise),e.reject&&e.reject({$status:"canceled"})})),this.cancelLoading&&this.cancelLoading()}updateCopyDetailsAlerts(){this.copyContent.getCurrentCopyTaskErrorSummaries(this.currentCourse).then((e=>{this.copyContent.copyDetailsNotificationCount(e).then((e=>{this.copyDetailsErrorCount=e,this.shouldShowCopyDetailsNotification=e>0})),this.hasCurrentCopyDetailsErrors=!!o.keys(e).length}))}canCopyOrImport(){return(this.currentCourse.canCopy()||this.currentCourse.canImport())&&!this.showImportCopyStatusBar&&!this.ConversionService.isPreview(this.currentCourse)&&!this.showContentImportProgress&&this.hasCheckedForImports&&!this.currentCourse.isComplete()}joinVirtualClassroom(){i.a.features.collab||this.collab.joinVirtualClassroom(this.courseId,this.collabSessionId)}isStudentMembership(){return this.$scope.course.membership.isStudentMembership()}isActAsInstructorMembership(){return this.$scope.course.membership.isActAsInstructorMembership()}openAnnouncementsPanel(){this.announcementsTotalCount>0?this.ultraState.goPeekState(X.H.Announcement.ANNOUNCEMENTS_LIST):0===this.announcementsTotalCount&&this.announcementPermissions.create&&this.ultraState.goPeekState("announcement-list.peek.announcement-detail",{courseId:this.courseId,mode:r.a.Create,courseName:this.currentCourse.displayName})}groupsLinkIsDisabled(){return!this.canViewGroupsAsAdmin||0===this.groupSetCount&&(!this.canCreateGroups()||this.currentCourse.isComplete())}canUserViewEnrollments(){return this.currentCourse.permissions.viewEnrollments}openGroupWorkspacePanel(){this.groupsLinkIsDisabled()||this.ultraState.goPeekState("group-set-list")}disableAnnouncementsClickForStudent(){return!this.announcementPermissions.create&&0===this.announcementsTotalCount}getOverflowMenuItems(){return[{icon:"link",labelKey:`${this.outlineLocalePrefix}.collab.ultraCollabMenu.guestItem`,show:()=>this.collabPermissions&&this.collabPermissions.inviteGuestsInLti&&this.courseRoomExists(),onClick:this.goPeekState.bind(this,"collab",{launchType:"launchRoomSettings"})},{icon:"settings",labelKey:`${this.outlineLocalePrefix}.collab.ultraCollabMenu.editItem`,show:()=>this.collabPermissions&&this.collabPermissions.editSettingsInLti&&this.courseRoomExists(),onClick:this.goPeekState.bind(this,"collab",{launchType:"launchRoomSettings"})},{icon:"reports",labelKey:"course.outline.collab.ultraCollabMenu.viewReportItem",show:()=>this.collabPermissions&&this.collabPermissions.viewReportInLti&&this.courseRoomExists(),onClick:this.goPeekState.bind(this,"collab",{launchType:"launchReports"})},{icon:"collab",labelKey:"course.outline.collab.ultraCollabMenu.viewSessionsItem",show:()=>this.collabPermissions&&this.collabPermissions.viewAllSessionsInLti,onClick:this.goPeekState.bind(this,"collab",{launchType:"launchSessions"})},{icon:"video",labelKey:"course.outline.collab.ultraCollabMenu.viewRecordingsItem",show:()=>this.collabPermissions&&this.collabPermissions.viewAllRecordingsInLti,onClick:this.goPeekState.bind(this,"collab",{launchType:"launchRecordings"})},{icon:"disable",labelKey:`${this.outlineLocalePrefix}.collab.ultraCollabMenu.disableRoomItem`,show:()=>this.collabPermissions&&this.collabPermissions.changeAvailability&&this.isCourseRoomEnabled(),onClick:this.disableCourseRoom.bind(this)},{icon:"complete",labelKey:`${this.outlineLocalePrefix}.collab.ultraCollabMenu.enableRoomItem`,show:()=>this.collabPermissions&&this.collabPermissions.changeAvailability&&!this.isCourseRoomEnabled()&&this.courseRoomExists(),onClick:this.enableCourseRoom.bind(this)}]}getCourseOperationOverflowMenuItems(){return[{key:"bulkEditItemKey",icon:"bulk-edit",labelKey:"course.outline.bulkEditLink",show:()=>!this.currentCourse.isComplete()&&this.canAccessBatchEdit,onClick:()=>this.goPeekState.call(this,"bulk-edit-content")},{key:"importItemKey",icon:"import",labelKey:"course.outline.operation.importContent",show:this.currentCourse.canImport.bind(this.currentCourse),onClick:()=>this.goPeekState.call(this,"content-manage.import",{parentId:this.rootNode.id})},{key:"copyContentItemKey",icon:"duplicate",labelKey:`${this.outlineLocalePrefix}.operation.granularCopy`,show:this.currentCourse.canCopy.bind(this.currentCourse),onClick:this.goPeekState.bind(this,X.k.COPY_CONTENT_PEEK_PANEL,{positionAfter:"end",depth:"1"})},{key:"exportItemKey",icon:"export",labelKey:`${this.outlineLocalePrefix}.operation.export`,show:()=>this.canArchive||this.canExport,onClick:this.openExportModal.bind(this)},{key:"viewCourseTasksKey",icon:"attention",labelKey:`${this.outlineLocalePrefix}.operation.viewCourseTasks`,show:()=>this.currentCourse.canCopy()||this.currentCourse.canConvert()||this.currentCourse.canExport()||this.currentCourse.canArchive()||this.currentCourse.canImport(),onClick:()=>this.goPeekState(X.H.CourseTasks.COURSE_TASKS_PANEL,{})},{key:"copyDetailsItemKey",icon:"attention",status:"alert",labelKey:"course.outline.operation.copyDetails",show:()=>this.currentCourse.canCopy()&&this.hasCurrentCopyDetailsErrors,onClick:this.openCopyDetailsPanel}]}goPeekState(e,t){this.ultraState.goPeekState(e,t)}getLocalizedTextByKey(e){const t={locale:this.bbLocalize.getLocale(this.$scope),key:e,noWrap:!0};return this.bbLocalize.translateSync(t)}moveError(e){this.$scope.moveErrorTitleKey=e+".title",this.$scope.moveErrorTextKey=e+".text",this.$modal.open({template:H,scope:this.$scope})}connectToRedux(){const e=this.$ngRedux.connect((e=>({groupSetCount:L.gc.groupWorkspace&&L.gc.groupWorkspace.getTotalGroupSetCount(e)||0,courseProgressConfiguration:L.gc.courseProgress.getCourseProgressConfiguration(e,this.courseId),canCurrentUserSendMessage:!Object(z.a)(e,G.a,!0)||!this.$scope.course.membership.isStudentOrGuestMembership()})),(e=>({getGroupAndSetCount:t=>e(L.X.groupWorkspace.getGroupAndSetCount(t)),resetGroupWorkspace:()=>e(L.X.groupWorkspace.reset()),loadCourseProgressConfiguration:t=>e(L.X.courseProgress.loadCourseProgressConfiguration({courseId:t})),notifyContentImportComplete:t=>e(L.X.content.notifyContentImportComplete(t)),notifyGCCCompleted:t=>e(L.X.granularContentCopy.notifyGCCCompleted(t)),loadReadOnlyCourseMessagesPreference:t=>e(L.X.systemPreference.loadSystemPreference(t))})))(this);this.$scope.$on("$destroy",(()=>{this.resetGroupWorkspace(),e()}))}updateBatchEditStatus(){const e=this.entitlementService.isEntitled(y.f.ModifyContent),t=this.entitlementService.isEntitled(y.f.ModifyContentAvailability),n=this.entitlementService.isEntitled(y.j.DeleteAdaptiveRelease),s=this.entitlementService.isEntitled(y.j.ModifyAdaptiveRelease),o=this.entitlementService.isEntitled(y.j.ViewAdaptiveRelease),i=this.entitlementService.isEntitled(y.j.ModifyAdaptiveReleaseDates),r=this.entitlementService.isEntitled(k.q.ModifyItemDueDate),a=this.entitlementService.isEntitled(y.f.DeleteContent),l=this.entitlementService.isEntitled(y.j.DeleteAssessment),c=this.entitlementService.isEntitled(y.f.DeployAssessment),u=(t||e)&&n,d=(s||i&&o)&&r,h=a&&e&&l&&c;this.canAccessBatchEdit=u||d||h}shouldShowSelfEnrollmentLink(){return this.isGroupToolEnabled&&this.isStudentMembership()}initCourseBanner(){this.setCourseBannerProps(),this.$scope.$on("update-course-status",(()=>{this.setCourseBannerProps()})),this.deregisterUpdateBannerListener=this.courseBanner.registerUpdateBannerListener(this.setCourseBannerProps)}canChangeCourseStatus(){return(this.currentCourse.permissions.editAvailability||this.currentCourse.permissions.editClosed)&&!this.currentCourse.isChild}populateContentFileSpecificDetails(e,t,n){if(n)return super.populateContentFileSpecificDetails(e,t,n);t.ui.isUploading=!1,this.singleFileContent=t,this.singleFileUploadProperties={resourceUrl:e.webLocation,viewerUrl:void 0,fileName:e.fileName,fileSize:e.rawFileSize,alternativeText:e.fileName,displayName:e.fileName,mimeType:e.currentMimeType,render:L.t.Attachment};const s=this.featureFlagService.isFeatureEnabledStrict("feature.course.content.inline-render");return(Object(ae.Z)(this.singleFileUploadProperties,s)||Object(ae.ab)(this.singleFileUploadProperties,s))&&(this.singleFileUploadProperties.render=L.t.Inline),this.singleFileUploadDeferred=this.$q.defer(),this.singleFileUploadDeferred.promise}};be=Object(s.a)([Object(s.c)(0,Object(ne.b)("$log")),Object(s.c)(1,Object(ne.b)("$q")),Object(s.c)(2,Object(ne.b)("$modal")),Object(s.c)(3,Object(ne.b)("$ngRedux")),Object(s.c)(4,Object(ne.b)("$rootScope")),Object(s.c)(5,Object(ne.b)("$scope")),Object(s.c)(6,Object(ne.b)(x.m.serviceName)),Object(s.c)(7,Object(ne.b)(x.p.serviceName)),Object(s.c)(8,Object(ne.b)(d.b)),Object(s.c)(9,Object(ne.b)(h.b)),Object(s.c)(10,Object(ne.b)(x.t.serviceName)),Object(s.c)(11,Object(ne.b)(b.b)),Object(s.c)(12,Object(ne.b)(u.b)),Object(s.c)(13,Object(ne.b)(O.c)),Object(s.c)(14,Object(ne.b)(A.d)),Object(s.c)(15,Object(ne.b)(w.b)),Object(s.c)(16,Object(ne.b)(j.b)),Object(s.c)(17,Object(ne.b)(I.serviceName)),Object(s.c)(18,Object(ne.b)(m.f)),Object(s.c)(19,Object(ne.b)(f.b)),Object(s.c)(20,Object(ne.b)($.b)),Object(s.c)(21,Object(ne.b)(x.nb.serviceName)),Object(s.c)(22,Object(ne.b)(v.b)),Object(s.c)(23,Object(ne.b)(a.c)),Object(s.c)(24,Object(ne.b)(c.b)),Object(s.c)(25,Object(ne.b)(T.b)),Object(s.c)(26,Object(ne.b)(D.b)),Object(s.c)(27,Object(ne.b)(l.b)),Object(s.c)(28,Object(ne.b)(g.e)),Object(s.c)(29,Object(ne.b)(N.b)),Object(s.c)(30,Object(ne.b)(Y.b)),Object(s.c)(31,Object(ne.b)(R.b)),Object(s.c)(32,Object(ne.b)(Z.b)),Object(s.c)(33,Object(ne.b)(ee.b)),Object(s.c)(34,Object(ne.b)(se.b)),Object(s.c)(35,Object(ne.b)(re.b)),Object(s.c)(36,Object(ne.b)(S.b)),Object(s.c)(37,Object(ne.b)(c.b))],be);class ge extends be{}}).call(this,n("71td"))},kxl5:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return d}));var s=n("D57K"),o=n("Llzl"),i=n("pjml"),r=n("Sa5G"),a=n("Qbdf"),l=n("jhBu"),c=n("aHpC");const u="ultra.service.announcements.permissions",d="announcementPermissions";let h=class{constructor(e,t){this.currentCourse=e,this.entitlements=t}isCurrentCourseCompleted(){return this.currentCourse.course&&this.currentCourse.course.isComplete()}getCourseAnnouncementsPermissions(){return{create:!this.isCurrentCourseCompleted()&&this.entitlements.isEntitled(r.a.CreateCourseAnnouncement),modify:!this.isCurrentCourseCompleted()&&this.entitlements.isEntitled(r.a.ModifyCourseAnnouncement),delete:!this.isCurrentCourseCompleted()&&this.entitlements.isEntitled(r.a.DeleteCourseAnnouncement),viewPosted:this.entitlements.isEntitled(r.a.ViewPostedCourseAnnouncement),viewUnposted:this.entitlements.isEntitled(r.a.ViewUnpostedCourseAnnouncement)}}getSystemAnnouncementsPermissions(){return{create:this.entitlements.isEntitled(r.a.CreateSystemAnnouncement),modify:this.entitlements.isEntitled(r.a.ModifySystemAnnouncement),delete:this.entitlements.isEntitled(r.a.DeleteSystemAnnouncement),viewPosted:this.entitlements.isEntitled(r.a.ViewPostedSystemAnnouncement),viewUnposted:this.entitlements.isEntitled(r.a.ViewUnpostedSystemAnnouncement)}}};h=Object(s.a)([Object(s.c)(0,Object(c.b)(a.e)),Object(s.c)(1,Object(c.b)(l.b))],h);o.module(u,[i.N]).service(d,h)},lHMO:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return h}));var s=n("D57K"),o=(n("1wt3"),n("GbCx"),n("71td")),i=n("Llzl"),r=n("Y88D"),a=n("dJ97"),l=n("aHpC"),c=n("RPob"),u=n("0JpG"),d=n("av75");const h="ultra.directives.stream.entryBody.streamEntryBody";!function(e){e.fn.truncate=function({length:n=100}){const s=e.extend({},t,{length:n});return this.each((function(){const t=e(this);let n=t.text().length-s.length;n<0||!n&&!s.truncated||e.each(t.contents().get().reverse(),(function(t,o){const i=e(o),r=i.text().length;return r<=n?(s.truncated=!0,n-=r,void i.remove()):3===o.nodeType?(e(o.splitText(r-n-1)).replaceWith(s.ellipsis),!1):(i.truncate(e.extend(s,{length:r-n})),!1)}))}))};const t={length:1/0,ellipsis:""}}(e);class p{constructor(e,t){this.id=e,this.content=t,this.showContent=!1}showTheContent(){this.showContent=!0}hideTheContent(){this.showContent=!1}}let m=class{constructor(e,t,n){this.$compile=e,this.$sce=t,this.localize=n,this.replace=!0,this.restrict="E",this.link=(e,t)=>{const n=e.bodyType()||d.a.SimpleText;if(e.bodyContent()&&e.bodyContent().isInteractive&&(e.interactiveBodyContent=new p(e.$id,e.bodyContent())),e.bodyContent()&&e.bodyType()===d.a.SimpleText){const t=e.bodyContent();if("string"==typeof t.fullText){const n=[{tag:"table",replacementText:`[${this.localize.translateSync({key:"base.stream.entryBody.announcements.tableWithContent",locale:this.localize.getLocale(e)})}]`},{tag:"math",replacementText:this.localize.translateSync({key:"course.content.mathPlaceholder",locale:this.localize.getLocale(e)}),replacementTextPlural:this.localize.translateSync({key:"course.content.mathPlaceholder.plural",locale:this.localize.getLocale(e)})},{tagQuery:'img[data-bbtype="collab_video"]',replacementAttribute:"title"}],s=Object(c.B)((new DOMParser).parseFromString(t.fullText,"text/html"),n),i=o("<div></div>").append(s.body.innerHTML).truncate({length:100}).html();e.bodyContent().bodyText=i}}t.replaceWith(this.$compile(Object(d.b)(n))(e))},this.scope={bodyType:"&type",bodyContent:"&content"}}};m=Object(s.a)([Object(s.c)(0,Object(l.b)("$compile")),Object(s.c)(1,Object(l.b)("$sce")),Object(s.c)(2,Object(l.b)(u.serviceName))],m),i.module(h,["ngSanitize",r.a,a.a,u.moduleName]).directive("bbStreamEntryBody",["$injector",e=>e.instantiate(m)])}).call(this,n("71td"))},m4m5:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var s=n("zYa8"),o=n("GY9d");const i="ultra.components.directives.bbUiIcon.large.Message";Object(s.a)(o.a,i,"bbUiIconLargeMessage")},pNbS:function(e,t,n){var s=n("ziER"),o=n("5JeM"),i=new s({id:"icon-small-upload-cloud",use:"icon-small-upload-cloud-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-upload-cloud"><path d="M1 10c0 3 2 4 4 4h7c2 0 3-1.3431 3-3 0-2-2-3-2-3s1-6-5-6C3 2 3 7 3 7s-2 .5-2 3zM8 6v4M10 8H6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});o.add(i);e.exports=i},pPNb:function(e,t,n){var s=n("ziER"),o=n("5JeM"),i=new s({id:"icon-medium-edit-tool",use:"icon-medium-edit-tool-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-edit-tool"><path d="M22.4282 4.0556c.366.7363.5717 1.5663.5717 2.4444 0 4.0963-3.02 6.4691-7 5.5l-10 10s-2 2-4 0 0-4 0-4L12 8c-.9691-3.98 1.4038-7 5.5-7 .8781 0 1.7081.2058 2.4445.5717l-3.0556 3.095S15.6666 5.8889 15.6666 6.5c0 1.0125.8208 1.8333 1.8333 1.8333.6112 0 1.8334-1.2222 1.8334-1.2222l3.0949-3.0555z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});o.add(i);e.exports=i},psbg:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var s=n("Llzl"),o=n("1ZbL"),i=n("0JpG"),r=n("/5AG");const a="ultra.course.content.search.state.react",l={Class:r.k,renderLocalized:!0,withProvider:!0,withCurrentCourse:!0,bindingNames:["hasNetworkError","retryLastLoad","courseOutlineIsEmpty","courseContentSearch","contentLoadInProgress"],injectNames:[]};s.module(a,[i.moduleName]).component("courseContentSearchState",Object(o.a)(l))},rKkA:function(e,t){e.exports='<div ng-cloak bb-cache-compilation="course-outline">\n  <bb-course-banner\n    class="bb-course-banner"\n    banner-url="courseOutline.bannerUrl"\n    on-edit-banner="courseOutline.onEditBanner"\n    banner-alt-text="courseOutline.bannerAltText"\n  ></bb-course-banner>\n  <div class="course-outline webkit-render-issue-fix"\n       ng-class="{\'is-empty-page\': courseOutline.isEmpty, \'no-create\': !courseOutline.canCreateAllContent()}"\n       ng-attr-ready="{{::!courseOutline.isLoading || undefined}}">\n\n    <div ui-view="content-create-base"></div>\n\n    <div class="course-outline-row row">\n      <aside ng-show="courseOutline.isSidebarLoaded" role="complementary" class="column medium-12 large-3 outline-actions">\n        <bb-course-instructors\n          current-user-id="courseOutline.currentUserId"\n          course-id="courseOutline.currentCourse.id"\n          is-organization="courseOutline.currentCourse.isOrganization"\n          is-course-open="courseOutline.currentCourse.isOpen()"\n          can-current-user-send-message="courseOutline.canCurrentUserSendMessage"\n          is-student-preview="courseOutline.isInPreviewMode"\n        >\n        </bb-course-instructors>\n\n        <div class="course-outline__details-and-actions">\n          <div class="details-actions-header">\n            <bb-course-overview-details-and-actions-header\n              is-student-preview="courseOutline.isInPreviewMode"\n              course-id="courseOutline.currentCourse.id"\n              is-expanded="courseOutline.isDetailsAndActionsExpanded"\n              set-is-expanded="courseOutline.setDetailsAndActionsExpandedState"\n            />\n          </div>\n\n          <div ng-if="courseOutline.showDetailsAndActionSection()" id="details-and-actions-panel" role="region" aria-labelledby="details-actions-expansion-button">\n            <div class="small-12 medium-4 large-12" id="course-outline-roster-link" ng-if="::courseOutline.canUserViewEnrollments()">\n              <a href="javascript:void(0);"\n                class="element-card js-roster"\n                bb-peek-sref="roster"\n                analytics-id="course.outline.roster.link">\n                <div class="element-image icon" data-status="offline">\n                  <bb-svg-icon size="medium" icon="people"></bb-svg-icon>\n                </div>\n                <div class="element-details">\n                  <div class="name">\n                    <span bb-translate>course.outline.roster.name</span>\n                  </div>\n                  <div class="content">\n                    <p class="blue-link" bb-translate course-org-token-resolver>course.outline.roster.content</p>\n                  </div>\n                </div>\n              </a>\n            </div>\n\n            <div class="small-12 medium-4 large-12" id="course-outline-description-link" ng-show="courseOutline.currentCourse.description">\n              <a href="javascript:void(0);"\n                class="element-card"\n                bb-peek-sref="description"\n                analytics-id="course.outline.description.link">\n                <div class="element-image icon">\n                  <bb-svg-icon size="medium" icon="information"></bb-svg-icon>\n                </div>\n                <div class="element-details">\n                  <div class="name">\n                    <span bb-translate course-org-token-resolver>course.outline.courseDescription.name</span>\n                  </div>\n                  <div class="content">\n                    <p class="blue-link" bb-translate course-org-token-resolver>course.outline.courseDescription.content</p>\n                  </div>\n                </div>\n              </a>\n            </div>\n\n            <div class="small-12 medium-4 large-12 course-groups" id="groups-link" ng-if="courseOutline.canViewGroups">\n              <a href="javascript:void(0);"\n                class="element-card js-course-groups-list"\n                ng-class="{ \'disabled\': courseOutline.groupsLinkIsDisabled() }"\n                ng-click="courseOutline.openGroupWorkspacePanel()"\n                tabindex="{courseOutline.groupsLinkIsDisabled() ? \'-1\' : \'0\'}"\n                analytics-id="course.outline.groupWorkspaces.link">\n                <div class="element-image icon" data-status="offline">\n                  <bb-svg-icon size="medium" icon="groups"></bb-svg-icon>\n                </div>\n                <div class="element-details">\n                  <div class="name">\n                    <span bb-translate course-org-token-resolver>course.outline.groupWorkspace.title</span>\n                  </div>\n                  <div class="content">\n                    <span class="blue-link" bb-translate>\n                      course.outline.groupWorkspace.instructor.content.plural\n                    </span>\n                  </div>\n                </div>\n              </a>\n            </div>\n\n          <div class="small-12 medium-4 large-12"\n              id="course-outline-course-progress-configuration-link"\n              bb-feature-toggle="feature.course.progress.tracking"\n              delay-initial-load="false"\n              ng-if="::courseOutline.isUserEntitledToRetrieveCourseProgressConfiguration()"\n              remove-from-dom="true">\n            <a href="javascript:void(0);"\n              class="element-card"\n              ng-click="courseOutline.openCourseProgressConfigurationPanel()"\n              ng-if="courseOutline.canViewCourseProgressConfiguration()"\n              analytics-id="course.outline.courseProgressConfiguration.link"\n              aria-labelledby="{{::courseOutline.progressTrackingAriaLabelId}}">\n              <div class="element-image icon">\n                <bb-svg-icon size="medium" icon="check-circle"></bb-svg-icon>\n              </div>\n              <div class="element-details">\n                <div class="name">\n                  <span bb-translate>course.outline.courseProgressConfiguration.title</span>\n                </div>\n                <div class="content"\n                    ng-if="courseOutline.isProgressTrackingEnabled()">\n                  <span id="{{::courseOutline.progressTrackingAriaLabelId}}" class="sr-only" bb-translate>course.outline.courseProgressConfiguration.content.enabledAriaLabel</span>\n                  <p class="blue-link" bb-translate>course.outline.courseProgressConfiguration.content.enabled</p>\n                </div>\n                <div class="content"\n                    ng-if="!courseOutline.isProgressTrackingEnabled()">\n                  <span id="{{::courseOutline.progressTrackingAriaLabelId}}" class="sr-only" bb-translate>course.outline.courseProgressConfiguration.content.disabledAriaLabel</span>\n                  <p class="blue-link" bb-translate>course.outline.courseProgressConfiguration.content.disabled</p>\n                </div>\n              </div>\n            </a>\n            <div ng-if="!courseOutline.canViewCourseProgressConfiguration()" class="element-card">\n              <div class="element-image icon">\n                <bb-svg-icon size="medium" icon="check-circle"></bb-svg-icon>\n              </div>\n              <div class="element-details course-progress-details">\n                <div class="name">\n                  <span bb-translate >course.outline.courseProgressConfiguration.title</span>\n                  <button class="course-progress-guidance-icon"\n                      bb-tooltip\n                      tooltip-position="top-center"\n                      enhanced-tooltip="true"\n                      type="button"\n                      title={{courseOutline.getStudentProgressTooltipTitle()}}\n                      aria-label={{courseOutline.getStudentProgressTooltipTitle()}}\n                      analytics-id="course.outline.courseProgressConfiguration.tooltip.button">\n                    <bb-svg-icon aria-hidden="true" role="presentation" icon="information" size="small"></bb-svg-icon>\n                  </button>\n                </div>\n                <div class="content">\n                  <p>{{courseOutline.getStudentProgressLabel()}}</p>\n                </div>\n              </div>\n            </div>\n          </div>\n\n            <div class="small-12 medium-4 large-12"\n                id="course-outline-course-banner"\n                ng-if="!!courseOutline.onEditBanner">\n              <div class="element-card-container">\n                <a href="javascript:void(0);"\n                  class="element-card js-edit-banner"\n                  ng-click="courseOutline.onEditBanner()"\n                  analytics-id="course.outline.edit-banner.link"\n                >\n                  <div class="element-image icon" data-status="offline">\n                    <bb-ui-icon-medium-image></bb-ui-icon-medium-image>\n                  </div>\n                  <div class="element-details">\n                    <div class="name">\n                      <span bb-translate course-org-token-resolver>course.outline.banner.title</span>\n                    </div>\n                    <div class="content">\n                      <p class="blue-link" bb-translate course-org-token-resolver>course.outline.banner.description</p>\n                    </div>\n                  </div>\n                </a>\n              </div>\n            </div>\n\n            <div class="card-private-complete small-12 medium-4 large-12" id="course-outline-status-button" ng-show="courseOutline.canChangeCourseStatus()">\n              <button class="course-status js-change-course-status"\n                      ng-click="courseOutline.openModal()"\n                      ng-class="{ \'js-course-open\': courseOutline.isCourseOpen(),\n                                \'js-course-closed\': courseOutline.isCoursePrivate(),\n                                \'js-course-complete\': courseOutline.isCourseComplete() }"\n                      analytics-id="course.outline.courseStatus.edit.button">\n                <div class="element-card">\n                  <div class="element-image icon">\n                    <bb-svg-icon size="medium" icon="unlock" ng-if="courseOutline.isCourseOpen()"></bb-svg-icon>\n                    <bb-svg-icon size="medium" icon="lock" ng-if="courseOutline.isCoursePrivate()"></bb-svg-icon>\n                    <bb-ui-icon-medium-course-complete ng-if="courseOutline.isCourseComplete()"></bb-ui-icon-medium-course-complete>\n                  </div>\n                  <div class="element-details">\n                    <div class="name">\n                      <span>{{courseOutline.getCourseStatus()}}</span>\n                    </div>\n                    <div class="content">\n                      <p class="blue-link">{{courseOutline.getCourseDescription()}}</p>\n                    </div>\n                  </div>\n                </div>\n              </button>\n              <div class="guidance-wrapper">\n                <div class="guidance-anchor" ng-if="courseOutline.shouldShowAccessGuidanceOpenToStudent"\n                    bb-guidance-target component-key="{{courseOutline.studentAccessGuidanceKey}}">\n                </div>\n                <div class="guidance-anchor" ng-if="courseOutline.shouldShowAccessGuidanceReadOnly"\n                    bb-guidance-target component-key="{{courseOutline.alertCourseGuidanceKey}}">\n                </div>\n                \x3c!--guidance suggesting the instructor open the course to students--\x3e\n                <bb-guidance ng-if="courseOutline.shouldShowAccessGuidanceOpenToStudent"\n                            class="guidance-element-overlay push-left"\n                            component-key="{{courseOutline.studentAccessGuidanceKey}}">\n                  <bb-translate course-org-token-resolver>course.outline.unaccessableCourse</bb-translate>\n                </bb-guidance>\n                \x3c!--guidance suggesting the instructor make the ended course read-only to students--\x3e\n                <bb-guidance ng-if="courseOutline.shouldShowAccessGuidanceReadOnly"\n                            class="guidance-element-overlay push-left"\n                            component-key="{{courseOutline.alertCourseGuidanceKey}}">\n                  <bb-translate>course.outline.completeCourseNote</bb-translate>\n                </bb-guidance>\n              </div>\n            </div>\n\n            <div class="small-12 medium-4 large-12" ng-show="courseOutline.shouldShowVirtualClassroomLink()">\n              <a href="javascript:void(0);"\n                class="element-card"\n                ng-click="courseOutline.joinVirtualClassroom()"\n                bb-feature-toggle="!collab"\n                delay-initial-load="false"\n                analytics-id="course.outline.collab.link">\n                <div class="element-image icon">\n                  <bb-svg-icon size="medium" icon="collab"></bb-svg-icon>\n                </div>\n                <div class="element-details">\n                  <div class="name">\n                    <span bb-translate course-org-token-resolver>course.outline.collab.title</span>\n                  </div>\n                  <div class="content">\n                    <p class="blue-link" bb-translate course-org-token-resolver>course.outline.collab.content</p>\n                  </div>\n                </div>\n              </a>\n            </div>\n            <div class="element-card ultra-collab small-12 medium-4 large-12"\n                ng-show="courseOutline.collabUltraEnabled"\n                bb-feature-toggle="collab"\n                delay-initial-load="false"\n                ng-class="{\'is-collab-enabled\': courseOutline.courseRoomSession.courseRoomEnabled}">\n              <div class="element-image icon">\n                <bb-collab-session-icon id="collab-icon-outline" running-session-flag="courseOutline.runningSessionFlag"></bb-collab-session-icon>\n              </div>\n              <div class="element-details">\n                <div class="name">\n                  <span bb-translate class="large-12 medium-12 small-12">course.outline.collab.ultraCollabTitle</span>\n                </div>\n                <div class="content">\n                  <div class="select-wrapper">\n                    <div ng-show="courseOutline.activeSessionCount() >= 1" bb-foundation-defer>\n                      <button id="sessions-list-dropdown"\n                              aria-describedby="collab-icon-outline"\n                              class="select-value join-session button-anchor"\n                              data-dropdown="sessions-list"\n                              aria-haspopup="true"\n                              aria-controls="sessions-list"\n                              bb-click-focus="#sessions-list li:first > a"\n                              analytics-id="course.outline.collab.sessionList.dropdown.button">\n                        <span class="blue-link" bb-translate="course.outline.collab.ultraCollabContent.roomEnabled"></span>\n                      </button>\n                      <ul role="menu" id="sessions-list" data-dropdown-content class="f-dropdown collab-scroll-container">\n                        <li ng-if="courseOutline.isCourseRoomEnabled()" role="presentation">\n                          <a href="javascript:void(0);"\n                            role="menuitem"\n                            ng-click="courseOutline.joinSession(courseOutline.courseRoomSession.id)"\n                            analytics-id="course.outline.collab.sessionList.courseRoom.link">\n                            <span bb-translate="course.outline.collab.ultraCollabMenu.courseRoom" course-org-token-resolver></span>\n                          </a>\n                        </li>\n\n                        <li ng-repeat="collabSession in courseOutline.courseSessionList" role="presentation">\n                          <a href="javascript:void(0);"\n                            role="menuitem"\n                            ng-click="courseOutline.joinSession(collabSession.id)"\n                            analytics-id="course.outline.collabSession.link">\n                            <span>{{collabSession.name}}</span>\n                          </a>\n                        </li>\n                      </ul>\n                    </div>\n                    <div ng-if="courseOutline.activeSessionCount() < 1">\n                      <p ng-if="!(courseOutline.collabPermissions && courseOutline.collabPermissions.viewAllSessionsInLti)" bb-translate="course.outline.collab.ultraCollabContent.studentRoomDisabled"></p>\n                      <p ng-if="courseOutline.collabPermissions && courseOutline.collabPermissions.viewAllSessionsInLti" bb-translate="course.outline.collab.ultraCollabContent.instructorRoomDisabled"></p>\n                    </div>\n                  </div>\n                </div>\n              </div>\n              <bb-overflow-menu bb-foundation-defer ng-show="courseOutline.collabUltraEnabled && courseOutline.isCollabSettingsDropDownAvailable()"\n                                element-id="collab-dropdown"\n                                element-name="{{courseOutline.getLocalizedTextByKey(\'course.outline.collaborate\')}}"\n                                menu-items="courseOutline.getOverflowMenuItems()"\n                                analytics-id-tag-prefix="course.outline.collab.overflowMenu">\n              </bb-overflow-menu>\n            </div>\n            <div class="small-12 medium-4 large-12" ng-if="courseOutline.attendanceEnabled">\n              <a href="javascript:void(0);"\n                class="element-card js-open-attendance"\n                bb-peek-sref="{{course.canModifyAttendance ? \'attendance\' : \'attendance-student-view\'}}"\n                analytics-id="course.outline.attendance.link">\n                <div class="element-image icon">\n                  <bb-svg-icon size="medium" icon="attendance"></bb-svg-icon>\n                </div>\n                <div class="element-details">\n                  <div class="name">\n                    <span bb-translate>course.outline.attendance.title</span>\n                  </div>\n                  <div class="content">\n                    <p class="blue-link" ng-if="course.canModifyAttendance" bb-translate>course.outline.attendance.markAttendance</p>\n                    <p class="blue-link" ng-if="!course.canModifyAttendance" bb-translate>course.outline.attendance.viewRecords</p>\n                  </div>\n                </div>\n              </a>\n            </div>\n            <div class="small-12 medium-4 large-12"\n                ng-if="courseOutline.shouldShowSelfEnrollmentLink()"\n                id="course-groups-link">\n              <a href="javascript:void(0);"\n                class="element-card js-open-self-enroll-courses"\n                bb-peek-sref="course-group-enroll"\n                analytics-id="course.outline.groups.openEnroll.link">\n                <div class="element-image icon">\n                  <bb-svg-icon size="medium" icon="groups"></bb-svg-icon>\n                </div>\n                <div class="element-details">\n                  <div class="name">\n                    <span bb-translate>course.outline.groups.title</span>\n                  </div>\n                  <div class="content">\n                    <span class="blue-link" bb-translate>\n                      course.outline.groupWorkspace.student.content.plural\n                    </span>\n                  </div>\n                </div>\n              </a>\n            </div>\n            <div class="small-12 medium-4 large-12 announcements" id="announcements-link" ng-if="courseOutline.isAnnouncementsEnabled">\n              <a href="javascript:void(0);"\n                class="element-card js-announcement-list"\n                ng-click="courseOutline.openAnnouncementsPanel()"\n                ng-class="{\'isNotClickable\': courseOutline.disableAnnouncementsClickForStudent()}"\n                aria-disabled="{{courseOutline.disableAnnouncementsClickForStudent()}}"\n                tabindex="{{courseOutline.disableAnnouncementsClickForStudent() ? -1 : 0}}"\n                analytics-id="course.outline.announcements.link">\n                <div class="element-image icon" data-status="offline">\n                  <bb-svg-icon size="medium" icon="announcements"></bb-svg-icon>\n                </div>\n                <div class="element-details">\n                  <div class="name">\n                    <span bb-translate>course.outline.announcements.title</span>\n                  </div>\n                  <div ng-if="courseOutline.announcementsTotalCount > -1" class="content">\n                    <span ng-if="courseOutline.announcementPermissions.viewUnposted && courseOutline.announcementsTotalCount > 0" class="blue-link" bb-translate translate-values="{ postedCount: courseOutline.announcementsPostedCount, totalCount: courseOutline.announcementsTotalCount }">course.outline.announcements.instructor.content</span>\n                    <span ng-if="courseOutline.announcementPermissions.create && courseOutline.announcementsTotalCount === 0" class="js-create-announcement create-new blue-link" bb-translate>course.outline.announcements.instructor.createNew</span>\n                    <span ng-if="!courseOutline.announcementPermissions.viewUnposted && courseOutline.announcementsTotalCount > 0" class="js-view-archive blue-link" bb-translate translate-values="{ totalCount: courseOutline.announcementsTotalCount }">course.outline.announcements.student.content</span>\n                    <span ng-if="!courseOutline.announcementPermissions.create && courseOutline.announcementsTotalCount === 0" bb-translate class="js-announcement-link disable">course.outline.announcements.student.noContent</span>\n                  </div>\n                </div>\n              </a>\n            </div>\n\n            <div class="small-12 medium-4 large-12"\n                id="books-and-tools-link">\n              <a class="element-card"\n                bb-peek-sref="books-and-tools({ parentId: courseOutline.rootNode.id })"\n                analytics-id="course.outline.booksAndTools.link">\n                <div class="element-image icon">\n                  <bb-svg-icon size="medium" icon="edit-tool"></bb-svg-icon>\n                </div>\n                <div class="element-details">\n                  <div class="name">\n                    <span bb-translate>course.outline.booksAndTools.name</span>\n                  </div>\n                  <div class="content">\n                    <p class="blue-link" bb-translate course-org-token-resolver>course.outline.booksAndTools.content</p>\n                  </div>\n                </div>\n              </a>\n            </div>\n\n            <div>\n              <div class="card-question-banks small-12 medium-4 large-12"\n                  id="question-banks-link"\n                  bb-course-entitlement="course.pool.MODIFY" course-id="courseOutline.courseId" entitlement-action="show">\n                <a href="javascript:void(0);"\n                  class="element-card js-question-banks"\n                  bb-peek-sref="question-banks"\n                  analytics-id="course.outline.questionBanks.link">\n                  <div class="element-image icon" data-status="offline">\n                    <bb-svg-icon size="medium" icon="question-bank"></bb-svg-icon>\n                  </div>\n                  <div class="element-details">\n                    <div class="name">\n                      <span bb-translate>course.outline.questionBanks.name</span>\n                    </div>\n                    <div class="content">\n                      <p class="blue-link" bb-translate>course.outline.questionBanks.content</p>\n                    </div>\n                  </div>\n                </a>\n                <div class="guidance-wrapper">\n                  <div bb-guidance-target\n                      ng-if="courseOutline.shouldShowQuestionBanksGuidance"\n                      class="guidance-anchor"\n                      component-key="{{::courseOutline.questionBanksNavGuidanceKey}}">\n                  </div>\n                  <bb-guidance class="guidance-element-overlay push-left"\n                              ng-if="courseOutline.shouldShowQuestionBanksGuidance"\n                              component-key="{{::courseOutline.questionBanksNavGuidanceKey}}">\n                    <bb-translate course-org-token-resolver>course.outline.questionBanks.guidance</bb-translate>\n                  </bb-guidance>\n                </div>\n              </div>\n            </div>\n\n            <div class="small-12 medium-4 large-12"\n                id="course-outline-conversion-link"\n                ng-if="courseOutline.hasConversionReport()">\n              <a href="javascript:void(0);"\n                class="element-card"\n                bb-peek-sref="conversion-risk-analysis"\n                analytics-id="course.outline.conversionReport.link">\n                <div class="element-image icon">\n                  <bb-svg-icon size="medium" icon="default-conversion-exceptions"></bb-svg-icon>\n                </div>\n                <div class="element-details">\n                  <div class="name">\n                    <span bb-translate>course.outline.conversionException.name</span>\n                  </div>\n                  <div class="content">\n                    <p class="blue-link" bb-translate course-org-token-resolver>course.outline.conversionException.content</p>\n                  </div>\n                </div>\n              </a>\n            </div>\n            <div class="small-12 medium-4 large-12 course-details-extension">\n              <bb-registration-portal-host\n                selector="courseOutline.detailPortalType"\n                portals="courseOutline.detailPortals"\n                portal-type="courseOutline.detailPortalType"\n              />\n            </div>\n          </div>\n        </div>\n        <bb-course-schedule\n          course-id="courseOutline.currentCourse.id"\n          course-schedule="courseOutline.courseSchedule"\n          get-next-event-for-monthly-repeat="courseOutline.getNextEventForMonthlyRepeat"\n          get-next-event-for-daily-repeat="courseOutline.getNextEventForDailyRepeat"\n          get-next-event-for-weekly-repeat="courseOutline.getNextEventForWeeklyRepeat"\n          is-student-preview="courseOutline.isInPreviewMode"\n        >\n        </bb-course-schedule>\n      </aside>\n\n      <div class="columns medium-12 large-9 outline-column dropzoneTarget">\n        <div ng-if="courseOutline.isAnnouncementsEnabled">\n          <announcement-slide></announcement-slide>\n        </div>\n        <react-course-content-header\n          course-content-search="courseOutline.courseOutlineSearch"\n          course-outline-is-empty="courseOutline.isEmpty"\n          should-show-overflow-menu="courseOutline.canCopyOrImport() || courseOutline.canArchive || courseOutline.canExport || courseOutline.canAccessBatchEdit"\n          can-access-batch-edit="courseOutline.canAccessBatchEdit"\n          has-current-copy-details-errors="courseOutline.hasCurrentCopyDetailsErrors"\n          open-export-modal="courseOutline.openExportModal"\n          open-copy-details-panel="courseOutline.openCopyDetailsPanel"\n          children-refresher="courseOutline.childrenRefresher"\n          is-loading="courseOutline.isLoading"\n        ></react-course-content-header>\n\n        <div class="spinner bb-secondary-color-2" ng-if="courseOutline.isLoading || !$root.bbOffcanvasOpened" aria-hidden="true"></div>\n        <div class="element-card-list js-content-outline">\n          <course-content-search-state\n            has-network-error="courseOutline.hasNetworkError"\n            retry-last-load="courseOutline.retryLastLoad"\n            course-outline-is-empty="courseOutline.isEmpty"\n            course-content-search="courseOutline.courseOutlineSearch"\n            content-load-in-progress="courseOutline.isLoading || courseOutline.contentLoadInProgress"\n          ></course-content-search-state>\n\n          <div ng-show="!courseOutline.isOutlineSearch && courseOutline.isEmpty && !courseOutline.hasNetworkError && !courseOutline.contentLoadInProgress">\n            <div ng-if="!courseOutline.canCreateAllContent()" class="js-student-view-empty">\n              <div class="is-empty-wrapper js-course-skip-link-target">\n                <div class="is-empty-explanation">\n                  <img src="./static/images/ftue/course-outline-zero-state-illustration.png" alt="" bb-translate-attrs="{title: \'course.outline.student.emptyCourse.illustrationAlt\'}" />\n                  <h1 class="is-empty-heading">\n                    <span ng-if="courseOutline.currentCourse.isComplete()" bb-translate="course.outline.student.emptyCourse.complete.header" course-org-token-resolver></span>\n                    <span ng-if="!courseOutline.currentCourse.isComplete()" bb-translate="course.outline.student.emptyCourse.header" course-org-token-resolver></span>\n                  </h1>\n                  <span ng-if="!courseOutline.currentCourse.isComplete()" bb-translate="course.outline.student.emptyCourse.message" course-org-token-resolver></span>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <div\n            class="guidance-wrapper guidance-wrapper-add-control react-outline"\n            ng-if="!courseOutline.isOutlineSearch">\n            <bb-guidance ng-if="courseOutline.shouldShowOutlineGuidance && !courseOutline.isEmpty" class="guidance-element push-bottom"\n                        component-key="{{courseOutline.addContentGuidanceKey}}" page-container-selector=".course-outline">\n              <bb-translate>course.outline.addContent</bb-translate>\n            </bb-guidance>\n            <div bb-guidance-target component-key="{{courseOutline.addContentGuidanceKey}}" keep-guidance-when-focusout="true" class="guidance-click-through"></div>\n          </div>\n          <div id="copy-errors-notification" ng-if="!courseOutline.isOutlineSearch && courseOutline.shouldShowCopyDetailsNotification && courseOutline.hasCurrentCopyDetailsErrors"\n            role="alert" aria-live="assertive" aria-labelledby="copy-errors-notification-content-title copy-errors-notification-content-message">\n            <bb-svg-icon size="medium" icon="attention" status="alert"></bb-svg-icon>\n            <div id="copy-errors-notification-content">\n              <div id="copy-errors-notification-content-title" bb-translate translate-values="{count: courseOutline.copyDetailsErrorCount}">course.outline.notificationCopyDetails.title</div>\n              <div>\n                <a href="javascript:void(0);"\n                   bb-translate\n                   translate-values="{count: courseOutline.copyDetailsErrorCount}"\n                   ng-click="courseOutline.openCopyDetailsPanel()"\n                   analytics-id="course.outline.notificationCopyDetails.viewDetails">\n                  course.outline.notificationCopyDetails.viewDetails\n                </a>\n              </div>\n            </div>\n            <bb-svg-icon size="small" icon="close" tabindex="0" ng-click="courseOutline.copyDetailsNotificationDismissed()"\n                         analytics-id="course.outline.copyDetailsNotificationDismis.button"></bb-svg-icon>\n          </div>\n          <div ng-if="!courseOutline.isOutlineSearch && courseOutline.isEmpty && courseOutline.rootNode.canEdit() && courseOutline.canMove && !courseOutline.hasNetworkError && !courseOutline.contentLoadInProgress" class="js-student-view-empty" >\n            <div class="is-empty-page">\n              <div class="is-empty-wrapper">\n                <div class="is-empty-explanation">\n                  <img src="./static/images/ftue/ftuMMicon_BuildContent_assessment.svg" alt="" aria-hidden="true" />\n                  <h3 course-org-token-resolver class="is-empty-heading" bb-translate>course.outline.emptyCourse.zeroStateHeader</h3>\n                  <span bb-translate>course.outline.emptyCourse.zeroStateDesc</span>\n                </div>\n              </div>\n            </div>\n          </div>\n          <course-content-outline\n            ng-if="!courseOutline.hasNetworkError"\n            parent-folder="courseOutline.rootNode"\n            load-more-content="courseOutline.loadMoreChildren"\n            create-file-content="courseOutline.createFileContent"\n            create-empty-folder="courseOutline.createEmptyFolder"\n            delete-content-item="courseOutline.deleteContentItem"\n            contents="courseOutline.rootNode.children"\n            move-content="courseOutline.moveItem"\n            show-content-import-progress="courseOutline.showContentImportProgress"\n          ></course-content-outline>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div id="roster-content">\n    <div ui-view></div>\n  </div>\n  <div ng-if="courseOutline.isStudentMembership()" bb-feature-toggle="courseNotice" delay-initial-load="false" remove-from-dom="true">\n    <bb-notice course-id="{{courseOutline.courseId}}" bb-notice-class="{{::courseOutline.courseColorClass}}"/>\n  </div>\n\n  <div id="course-progress-configuration-panel-wrapper" ng-if="courseOutline.isCourseProgressConfigurationPanelOpen">\n    <bb-course-progress-configuration-panel\n      course-id="courseOutline.courseId"\n      on-dismissed="courseOutline.closeCourseProgressConfigurationPanel$apply"\n    >\n    </bb-course-progress-configuration-panel>\n  </div>\n\n  <bb-content-import-status-bar display="courseOutline.showImportCopyStatusBar"\n                                task-id="courseOutline.importCopyTaskId"\n                                ng-attr-import-task-id="{{::courseOutline.workingImportCopyTaskId}}"\n                                course-id="courseOutline.currentCourse.id"></bb-content-import-status-bar>\n\n  <bb-file-property-dialog\n    ng-if="!!courseOutline.singleFileUploadProperties"\n    analytics-id="course-outline.upload-file"\n    hidden="false"\n    file="courseOutline.singleFileUploadProperties"\n    supports-inline-document-render="true"\n    can-provide-description="false"\n    on-save="courseOutline.onSingleFileUploadPropertiesSave"\n    on-cancel="courseOutline.onSingleFileUploadPropertiesCancel"\n  ></bb-file-property-dialog>\n\n</div>\n'},"rj+/":function(e,t,n){"use strict";var s=n("D57K"),o=n("h1qV"),i=n("aHpC"),r=n("yC9S"),a=n("Llzl"),l=n("1ZbL"),c=n("0JpG"),u=n("bMxM"),d=n("J3aO");const h="ultra.course.content.outline.react",p={Class:n("/5AG").j,renderLocalized:!0,withProvider:!0,withCurrentCourse:!0,withTransitScope:!0,bindingNames:["contents","parentFolder","loadMoreContent","createFileContent","createEmptyFolder","deleteContentItem","moveContent","showContentImportProgress"],injectNames:[u.b,d.b]};a.module(h,[c.moduleName,u.a,d.a]).component("reactCourseContentOutline",Object(l.a)(p));var m=n("tMe3"),b=n("6fZB");n.d(t,"a",(function(){return g}));const g="ultra.course.content.outline";let v=class{constructor(e,t,n){this.$scope=e,this.$q=t,this.toast=n,this.$scope.$on("$destroy",(()=>{var e,t;null===(e=this.breakPendingPromises)||void 0===e||e.call(this);const n=null===(t=this.getCancelLoadingToast)||void 0===t?void 0:t.call(this);null==n||n()}))}$onChanges(e){var t;if((null===(t=e.rawContents)||void 0===t?void 0:t.currentValue)&&this.loadContents(e.rawContents.currentValue),e.loadMoreContent){const{breakPendingPromises:t,getCancelLoadingToast:n,generateToastWrapper:s}=Object(m.a)(this.toast,this.$q,e.loadMoreContent.currentValue,"components.directives.content.content-outline.infiniteScroll.content.saveTray");this.loadMoreContentWrapper=s,this.breakPendingPromises=t,this.getCancelLoadingToast=n}e.createFileContent&&(this.createFileContent=e.createFileContent.currentValue),e.createEmptyFolder&&(this.createEmptyFolder=e.createEmptyFolder.currentValue),e.deleteContentItem&&(this.deleteContentItem=e.deleteContentItem.currentValue),e.moveContent&&(this.moveContent=t=>Object(b.a)(e.moveContent.currentValue(t)))}loadContents(e){e.$asPromise().then((e=>{this.contents=e}),(e=>{console.warn("Unable to load course contents.",e)}))}};v=Object(s.a)([Object(r.a)({moduleName:g,componentName:"courseContentOutline",bindings:{rawContents:"<contents",parentFolder:"<?",loadMoreContent:"<?",createFileContent:"<?",createEmptyFolder:"<?",deleteContentItem:"<?",moveContent:"<?",showContentImportProgress:"<?"},template:o,requireModules:[h]}),Object(s.c)(0,Object(i.b)("$scope")),Object(s.c)(1,Object(i.b)("$q")),Object(s.c)(2,Object(i.b)("toast"))],v)},tMe3:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var s=n("6fZB");function o(e,t,n,o){let i;const r=new Set;return{breakPendingPromises:function(){for(const e of r)e.resolve()},getCancelLoadingToast:function(){return i},generateToastWrapper:async(a,l)=>{const c=n(a,l);if(l){const n=t.defer();r.add(n),n.promise.then((()=>{r.delete(n)})),c.$then((()=>{n.resolve()}),(()=>{n.resolve()})),i=e.showLoading({trayId:`content-outline-${a.id}`,promise:n.promise,trayLocalizationKeysPrefix:o})}await Object(s.a)(c.$asPromise())}}}},uHYt:function(e,t,n){var s=n("ziER"),o=n("5JeM"),i=new s({id:"icon-medium-collab",use:"icon-medium-collab-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-collab"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 5h17v4l5-3.9583V19l-5-4v4H1V5z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M18 8v8M6 8l2 4-2 4M11 8l2 4-2 4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});o.add(i);e.exports=i},ufNb:function(e,t,n){var s=n("ziER"),o=n("5JeM"),i=new s({id:"icon-medium-away",use:"icon-medium-away-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-away"><path d="M23 12c0 6.0751-4.9249 11-11 11S1 18.0751 1 12 5.9249 1 12 1s11 4.9249 11 11z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M12 5v7l4 4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});o.add(i);e.exports=i},xwlO:function(e,t,n){var s=n("ziER"),o=n("5JeM"),i=new s({id:"icon-small-bulk-edit",use:"icon-small-bulk-edit-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-bulk-edit"><path d="M7 15H1V4h11v1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M15 5V1H4v3M15 8l-2-1-3 6v2l2-1 3-6z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});o.add(i);e.exports=i},zByx:function(e,t,n){"use strict";n("ufNb"),n("82Nl");var s=n("Llzl"),o=n("0JpG"),i=n("7pcG"),r=n("Fvsw"),a=n("zGdY"),l=n("V0gA");const c="ultra.components.services.calendar.schedule",u="bbSchedule";class d{constructor(e,t,n){this.localize=e,this.calendar=t,this.context=n}getWeeklyRepeatLabel(e,t,n="medium",s){if(a.r.Weekly!==e.recurRules.freq)return"";let i;switch(n.trim().toLowerCase()){case"short":i=o.ILocaleDateFormat.ShortWeekday;break;case"medium":default:i=o.ILocaleDateFormat.MediumWeekday;break;case"long":i=o.ILocaleDateFormat.LongWeekday}return e.recurRules.byWeekDay.map((e=>Object(l.parseWeekDay)(e))).filter((e=>!!e)).sort(((e,t)=>Object(l.getDayOfWeek)(e)-Object(l.getDayOfWeek)(t))).map((e=>this.localize.formatDateSync(this.calendar.getSampleDateForDayOfWeek(Object(l.getDayOfWeek)(e)),i))).join(this.localize.translateSync({locale:s,key:t,options:{noWrap:!0}}))}getNextMonthlyEventDate(e,t){return this.updateDate(e,t,this.calendar.getNextEventForMonthlyRepeat(e.recurRules,this.context.getServerTime()))}getNextDailyEventDate(e,t){return this.updateDate(e,t,this.calendar.getNextEventForDailyRepeat(e.recurRules,this.context.getServerTime()))}updateDate(e,t,n){let s=t[e.itemSourceId];return s&&s.getTime()===n.getTime()||(t[e.itemSourceId]=n,s=n),s}}d.$inject=[o.serviceName,i.b,r.b];angular.module(c,[i.a,r.a,o.moduleName]).service(u,d);var h=n("4qUd");n.d(t,"a",(function(){return p}));const p="ultra.components.directives.calendar.scheduleOutline";class m{constructor(e,t,n){this.scope=e,this.scheduleService=t,this.localize=n,this.nextEventDates=Object.create(null),this.showMore=!1}getSchedules(){let e=this.scope.scheduleOutlineCollection();return this.orderScheduleByRecentDate(e),e.length>2?(this.showMore=!0,e=this.scope.scheduleOutlineCollection().slice(0,2),this.orderScheduleByRecentDate(e)):this.showMore=!1,e}orderScheduleByRecentDate(e){return e.sort(((e,t)=>{const n=this.getNextDateToSort(e),s=this.getNextDateToSort(t);let o=0;return n<s?o=-1:n>s&&(o=1),o}))}getNextDateToSort(e){switch(e.recurRules.freq){case"DAILY":return this.getNextDailyEventDate(e);case"MONTHLY":return this.getNextEventDate(e);default:return e.startDate}}getWeeklyRepeatLabel(e){return this.scheduleService.getWeeklyRepeatLabel(e,"scheduleOutline.weekdayDelimiter",this.scope.weekDayFormat,this.localize.getLocale(this.scope))}getNextEventDate(e){return this.scheduleService.getNextMonthlyEventDate(e,this.nextEventDates)}getNextDailyEventDate(e){return this.scheduleService.getNextDailyEventDate(e,this.nextEventDates)}areAnyLocationsSet(){return this.scope.scheduleOutlineCollection().some((e=>!!e.location))}}m.$inject=["scope",u,o.serviceName];class b{constructor(e){this.$injector=e,this.restrict="E",this.template=h,this.scope={scheduleOutlineCollection:"&",weekDayFormat:"@?"},this.link=e=>{e.scheduleOutline=this.$injector.instantiate(m,{scope:e}),e.TRUNCATION_LOCATION_COURSE_CARD=20,e.TRUNCATION_LOCATION_OUTLINE=35}}}b.$inject=["$injector"],s.module(p,[c]).directive("bbScheduleOutline",["$injector",e=>e.instantiate(b)])}}]);